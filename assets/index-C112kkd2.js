(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function c(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(d){if(d.ep)return;d.ep=!0;const m=c(d);fetch(d.href,m)}})();function Qg(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ho={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Vg(){if(uh)return ql;uh=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(o,d,m){var p=null;if(m!==void 0&&(p=""+m),d.key!==void 0&&(p=""+d.key),"key"in d){m={};for(var g in d)g!=="key"&&(m[g]=d[g])}else m=d;return d=m.ref,{$$typeof:l,type:o,key:p,ref:d!==void 0?d:null,props:m}}return ql.Fragment=r,ql.jsx=c,ql.jsxs=c,ql}var dh;function Ig(){return dh||(dh=1,Ho.exports=Vg()),Ho.exports}var t=Ig(),$o={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh;function Gg(){if(mh)return ze;mh=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function z(C,$,W){this.props=C,this.context=$,this.refs=N,this.updater=W||k}z.prototype.isReactComponent={},z.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function A(){}A.prototype=z.prototype;function T(C,$,W){this.props=C,this.context=$,this.refs=N,this.updater=W||k}var O=T.prototype=new A;O.constructor=T,w(O,z.prototype),O.isPureReactComponent=!0;var L=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function X(C,$,W,F,ie,re){return W=re.ref,{$$typeof:l,type:C,key:$,ref:W!==void 0?W:null,props:re}}function P(C,$){return X(C.type,$,void 0,void 0,void 0,C.props)}function B(C){return typeof C=="object"&&C!==null&&C.$$typeof===l}function q(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(W){return $[W]})}var _=/\/+/g;function Y(C,$){return typeof C=="object"&&C!==null&&C.key!=null?q(""+C.key):$.toString(36)}function Q(){}function H(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Q,Q):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function V(C,$,W,F,ie){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var ne=!1;if(C===null)ne=!0;else switch(re){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(C.$$typeof){case l:case r:ne=!0;break;case y:return ne=C._init,V(ne(C._payload),$,W,F,ie)}}if(ne)return ie=ie(C),ne=F===""?"."+Y(C,0):F,L(ie)?(W="",ne!=null&&(W=ne.replace(_,"$&/")+"/"),V(ie,$,W,"",function(pe){return pe})):ie!=null&&(B(ie)&&(ie=P(ie,W+(ie.key==null||C&&C.key===ie.key?"":(""+ie.key).replace(_,"$&/")+"/")+ne)),$.push(ie)),1;ne=0;var le=F===""?".":F+":";if(L(C))for(var te=0;te<C.length;te++)F=C[te],re=le+Y(F,te),ne+=V(F,$,W,re,ie);else if(te=S(C),typeof te=="function")for(C=te.call(C),te=0;!(F=C.next()).done;)F=F.value,re=le+Y(F,te++),ne+=V(F,$,W,re,ie);else if(re==="object"){if(typeof C.then=="function")return V(H(C),$,W,F,ie);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ne}function b(C,$,W){if(C==null)return C;var F=[],ie=0;return V(C,F,"","",function(re){return $.call(W,re,ie++)}),F}function E(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(W){(C._status===0||C._status===-1)&&(C._status=1,C._result=W)},function(W){(C._status===0||C._status===-1)&&(C._status=2,C._result=W)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var U=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function K(){}return ze.Children={map:b,forEach:function(C,$,W){b(C,function(){$.apply(this,arguments)},W)},count:function(C){var $=0;return b(C,function(){$++}),$},toArray:function(C){return b(C,function($){return $})||[]},only:function(C){if(!B(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},ze.Component=z,ze.Fragment=c,ze.Profiler=d,ze.PureComponent=T,ze.StrictMode=o,ze.Suspense=x,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(C){return M.H.useMemoCache(C)}},ze.cache=function(C){return function(){return C.apply(null,arguments)}},ze.cloneElement=function(C,$,W){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var F=w({},C.props),ie=C.key,re=void 0;if($!=null)for(ne in $.ref!==void 0&&(re=void 0),$.key!==void 0&&(ie=""+$.key),$)!I.call($,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&$.ref===void 0||(F[ne]=$[ne]);var ne=arguments.length-2;if(ne===1)F.children=W;else if(1<ne){for(var le=Array(ne),te=0;te<ne;te++)le[te]=arguments[te+2];F.children=le}return X(C.type,ie,void 0,void 0,re,F)},ze.createContext=function(C){return C={$$typeof:p,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:m,_context:C},C},ze.createElement=function(C,$,W){var F,ie={},re=null;if($!=null)for(F in $.key!==void 0&&(re=""+$.key),$)I.call($,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ie[F]=$[F]);var ne=arguments.length-2;if(ne===1)ie.children=W;else if(1<ne){for(var le=Array(ne),te=0;te<ne;te++)le[te]=arguments[te+2];ie.children=le}if(C&&C.defaultProps)for(F in ne=C.defaultProps,ne)ie[F]===void 0&&(ie[F]=ne[F]);return X(C,re,void 0,void 0,null,ie)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(C){return{$$typeof:g,render:C}},ze.isValidElement=B,ze.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:E}},ze.memo=function(C,$){return{$$typeof:f,type:C,compare:$===void 0?null:$}},ze.startTransition=function(C){var $=M.T,W={};M.T=W;try{var F=C(),ie=M.S;ie!==null&&ie(W,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(K,U)}catch(re){U(re)}finally{M.T=$}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(C){return M.H.use(C)},ze.useActionState=function(C,$,W){return M.H.useActionState(C,$,W)},ze.useCallback=function(C,$){return M.H.useCallback(C,$)},ze.useContext=function(C){return M.H.useContext(C)},ze.useDebugValue=function(){},ze.useDeferredValue=function(C,$){return M.H.useDeferredValue(C,$)},ze.useEffect=function(C,$,W){var F=M.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(C,$)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(C,$,W){return M.H.useImperativeHandle(C,$,W)},ze.useInsertionEffect=function(C,$){return M.H.useInsertionEffect(C,$)},ze.useLayoutEffect=function(C,$){return M.H.useLayoutEffect(C,$)},ze.useMemo=function(C,$){return M.H.useMemo(C,$)},ze.useOptimistic=function(C,$){return M.H.useOptimistic(C,$)},ze.useReducer=function(C,$,W){return M.H.useReducer(C,$,W)},ze.useRef=function(C){return M.H.useRef(C)},ze.useState=function(C){return M.H.useState(C)},ze.useSyncExternalStore=function(C,$,W){return M.H.useSyncExternalStore(C,$,W)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.1.1",ze}var fh;function au(){return fh||(fh=1,$o.exports=Gg()),$o.exports}var h=au();const Pg=Qg(h);var Qo={exports:{}},Bl={},Vo={exports:{}},Io={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function Yg(){return hh||(hh=1,(function(l){function r(b,E){var U=b.length;b.push(E);e:for(;0<U;){var K=U-1>>>1,C=b[K];if(0<d(C,E))b[K]=E,b[U]=C,U=K;else break e}}function c(b){return b.length===0?null:b[0]}function o(b){if(b.length===0)return null;var E=b[0],U=b.pop();if(U!==E){b[0]=U;e:for(var K=0,C=b.length,$=C>>>1;K<$;){var W=2*(K+1)-1,F=b[W],ie=W+1,re=b[ie];if(0>d(F,U))ie<C&&0>d(re,F)?(b[K]=re,b[ie]=U,K=ie):(b[K]=F,b[W]=U,K=W);else if(ie<C&&0>d(re,U))b[K]=re,b[ie]=U,K=ie;else break e}}return E}function d(b,E){var U=b.sortIndex-E.sortIndex;return U!==0?U:b.id-E.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var p=Date,g=p.now();l.unstable_now=function(){return p.now()-g}}var x=[],f=[],y=1,v=null,S=3,k=!1,w=!1,N=!1,z=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(b){for(var E=c(f);E!==null;){if(E.callback===null)o(f);else if(E.startTime<=b)o(f),E.sortIndex=E.expirationTime,r(x,E);else break;E=c(f)}}function M(b){if(N=!1,L(b),!w)if(c(x)!==null)w=!0,I||(I=!0,Y());else{var E=c(f);E!==null&&V(M,E.startTime-b)}}var I=!1,X=-1,P=5,B=-1;function q(){return z?!0:!(l.unstable_now()-B<P)}function _(){if(z=!1,I){var b=l.unstable_now();B=b;var E=!0;try{e:{w=!1,N&&(N=!1,T(X),X=-1),k=!0;var U=S;try{t:{for(L(b),v=c(x);v!==null&&!(v.expirationTime>b&&q());){var K=v.callback;if(typeof K=="function"){v.callback=null,S=v.priorityLevel;var C=K(v.expirationTime<=b);if(b=l.unstable_now(),typeof C=="function"){v.callback=C,L(b),E=!0;break t}v===c(x)&&o(x),L(b)}else o(x);v=c(x)}if(v!==null)E=!0;else{var $=c(f);$!==null&&V(M,$.startTime-b),E=!1}}break e}finally{v=null,S=U,k=!1}E=void 0}}finally{E?Y():I=!1}}}var Y;if(typeof O=="function")Y=function(){O(_)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,H=Q.port2;Q.port1.onmessage=_,Y=function(){H.postMessage(null)}}else Y=function(){A(_,0)};function V(b,E){X=A(function(){b(l.unstable_now())},E)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(b){b.callback=null},l.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<b?Math.floor(1e3/b):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_next=function(b){switch(S){case 1:case 2:case 3:var E=3;break;default:E=S}var U=S;S=E;try{return b()}finally{S=U}},l.unstable_requestPaint=function(){z=!0},l.unstable_runWithPriority=function(b,E){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var U=S;S=b;try{return E()}finally{S=U}},l.unstable_scheduleCallback=function(b,E,U){var K=l.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?K+U:K):U=K,b){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=U+C,b={id:y++,callback:E,priorityLevel:b,startTime:U,expirationTime:C,sortIndex:-1},U>K?(b.sortIndex=U,r(f,b),c(x)===null&&b===c(f)&&(N?(T(X),X=-1):N=!0,V(M,U-K))):(b.sortIndex=C,r(x,b),w||k||(w=!0,I||(I=!0,Y()))),b},l.unstable_shouldYield=q,l.unstable_wrapCallback=function(b){var E=S;return function(){var U=S;S=E;try{return b.apply(this,arguments)}finally{S=U}}}})(Io)),Io}var xh;function Xg(){return xh||(xh=1,Vo.exports=Yg()),Vo.exports}var Go={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function Fg(){if(ph)return Ct;ph=1;var l=au();function r(x){var f="https://react.dev/errors/"+x;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+x+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(r(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(x,f,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:v==null?null:""+v,children:x,containerInfo:f,implementation:y}}var p=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,f){if(x==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ct.createPortal=function(x,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return m(x,f,null,y)},Ct.flushSync=function(x){var f=p.T,y=o.p;try{if(p.T=null,o.p=2,x)return x()}finally{p.T=f,o.p=y,o.d.f()}},Ct.preconnect=function(x,f){typeof x=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,o.d.C(x,f))},Ct.prefetchDNS=function(x){typeof x=="string"&&o.d.D(x)},Ct.preinit=function(x,f){if(typeof x=="string"&&f&&typeof f.as=="string"){var y=f.as,v=g(y,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,k=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?o.d.S(x,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:k}):y==="script"&&o.d.X(x,{crossOrigin:v,integrity:S,fetchPriority:k,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ct.preinitModule=function(x,f){if(typeof x=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=g(f.as,f.crossOrigin);o.d.M(x,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&o.d.M(x)},Ct.preload=function(x,f){if(typeof x=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,v=g(y,f.crossOrigin);o.d.L(x,y,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ct.preloadModule=function(x,f){if(typeof x=="string")if(f){var y=g(f.as,f.crossOrigin);o.d.m(x,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else o.d.m(x)},Ct.requestFormReset=function(x){o.d.r(x)},Ct.unstable_batchedUpdates=function(x,f){return x(f)},Ct.useFormState=function(x,f,y){return p.H.useFormState(x,f,y)},Ct.useFormStatus=function(){return p.H.useHostTransitionStatus()},Ct.version="19.1.1",Ct}var gh;function Qh(){if(gh)return Go.exports;gh=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),Go.exports=Fg(),Go.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function Zg(){if(yh)return Bl;yh=1;var l=Xg(),r=au(),c=Qh();function o(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function p(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function g(e){if(m(e)!==e)throw Error(o(188))}function x(e){var s=e.alternate;if(!s){if(s=m(e),s===null)throw Error(o(188));return s!==e?null:e}for(var a=e,n=s;;){var i=a.return;if(i===null)break;var u=i.alternate;if(u===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===a)return g(i),e;if(u===n)return g(i),s;u=u.sibling}throw Error(o(188))}if(a.return!==n.return)a=i,n=u;else{for(var j=!1,D=i.child;D;){if(D===a){j=!0,a=i,n=u;break}if(D===n){j=!0,n=i,a=u;break}D=D.sibling}if(!j){for(D=u.child;D;){if(D===a){j=!0,a=u,n=i;break}if(D===n){j=!0,n=u,a=i;break}D=D.sibling}if(!j)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:s}function f(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=f(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=_&&e[_]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case z:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case O:return(e.displayName||"Context")+".Provider";case T:return(e._context.displayName||"Context")+".Consumer";case L:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return s=e.displayName||null,s!==null?s:H(e.type)||"Memo";case P:s=e._payload,e=e._init;try{return H(e(s))}catch{}}return null}var V=Array.isArray,b=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},K=[],C=-1;function $(e){return{current:e}}function W(e){0>C||(e.current=K[C],K[C]=null,C--)}function F(e,s){C++,K[C]=e.current,e.current=s}var ie=$(null),re=$(null),ne=$(null),le=$(null);function te(e,s){switch(F(ne,s),F(re,e),F(ie,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Rf(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Rf(s),e=Uf(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(ie),F(ie,e)}function pe(){W(ie),W(re),W(ne)}function oe(e){e.memoizedState!==null&&F(le,e);var s=ie.current,a=Uf(s,e.type);s!==a&&(F(re,e),F(ie,a))}function ye(e){re.current===e&&(W(ie),W(re)),le.current===e&&(W(le),El._currentValue=U)}var ge=Object.prototype.hasOwnProperty,be=l.unstable_scheduleCallback,Ce=l.unstable_cancelCallback,Re=l.unstable_shouldYield,je=l.unstable_requestPaint,ue=l.unstable_now,xe=l.unstable_getCurrentPriorityLevel,Se=l.unstable_ImmediatePriority,Ee=l.unstable_UserBlockingPriority,rt=l.unstable_NormalPriority,qn=l.unstable_LowPriority,Bn=l.unstable_IdlePriority,_n=l.log,Kl=l.unstable_setDisableYieldValue,Rn=null,Rt=null;function Hs(e){if(typeof _n=="function"&&Kl(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Rn,e)}catch{}}var Ut=Math.clz32?Math.clz32:Ax,kx=Math.log,Dx=Math.LN2;function Ax(e){return e>>>=0,e===0?32:31-(kx(e)/Dx|0)|0}var Jl=256,Wl=4194304;function ya(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ei(e,s,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,u=e.suspendedLanes,j=e.pingedLanes;e=e.warmLanes;var D=n&134217727;return D!==0?(n=D&~u,n!==0?i=ya(n):(j&=D,j!==0?i=ya(j):a||(a=D&~e,a!==0&&(i=ya(a))))):(D=n&~u,D!==0?i=ya(D):j!==0?i=ya(j):a||(a=n&~e,a!==0&&(i=ya(a)))),i===0?0:s!==0&&s!==i&&(s&u)===0&&(u=i&-i,a=s&-s,u>=a||u===32&&(a&4194048)!==0)?s:i}function Un(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Tx(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(){var e=Jl;return Jl<<=1,(Jl&4194048)===0&&(Jl=256),e}function bu(){var e=Wl;return Wl<<=1,(Wl&62914560)===0&&(Wl=4194304),e}function Ar(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function Hn(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ex(e,s,a,n,i,u){var j=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var D=e.entanglements,R=e.expirationTimes,ee=e.hiddenUpdates;for(a=j&~a;0<a;){var ce=31-Ut(a),me=1<<ce;D[ce]=0,R[ce]=-1;var se=ee[ce];if(se!==null)for(ee[ce]=null,ce=0;ce<se.length;ce++){var ae=se[ce];ae!==null&&(ae.lane&=-536870913)}a&=~me}n!==0&&Nu(e,n,0),u!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=u&~(j&~s))}function Nu(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var n=31-Ut(s);e.entangledLanes|=s,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function wu(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var n=31-Ut(a),i=1<<n;i&s|e[n]&s&&(e[n]|=s),a&=~i}}function Tr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Er(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Su(){var e=E.p;return e!==0?e:(e=window.event,e===void 0?32:nh(e.type))}function zx(e,s){var a=E.p;try{return E.p=e,s()}finally{E.p=a}}var $s=Math.random().toString(36).slice(2),wt="__reactFiber$"+$s,At="__reactProps$"+$s,Ha="__reactContainer$"+$s,zr="__reactEvents$"+$s,Mx="__reactListeners$"+$s,Ox="__reactHandles$"+$s,Cu="__reactResources$"+$s,$n="__reactMarker$"+$s;function Mr(e){delete e[wt],delete e[At],delete e[zr],delete e[Mx],delete e[Ox]}function $a(e){var s=e[wt];if(s)return s;for(var a=e.parentNode;a;){if(s=a[Ha]||a[wt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=Vf(e);e!==null;){if(a=e[wt])return a;e=Vf(e)}return s}e=a,a=e.parentNode}return null}function Qa(e){if(e=e[wt]||e[Ha]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function Qn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(o(33))}function Va(e){var s=e[Cu];return s||(s=e[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ft(e){e[$n]=!0}var ku=new Set,Du={};function va(e,s){Ia(e,s),Ia(e+"Capture",s)}function Ia(e,s){for(Du[e]=s,e=0;e<s.length;e++)ku.add(s[e])}var Lx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Au={},Tu={};function qx(e){return ge.call(Tu,e)?!0:ge.call(Au,e)?!1:Lx.test(e)?Tu[e]=!0:(Au[e]=!0,!1)}function ti(e,s,a){if(qx(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var n=s.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function si(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Ns(e,s,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+n)}}var Or,Eu;function Ga(e){if(Or===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Or=s&&s[1]||"",Eu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+e+Eu}var Lr=!1;function qr(e,s){if(!e||Lr)return"";Lr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var se=ae}Reflect.construct(e,[],me)}else{try{me.call()}catch(ae){se=ae}e.call(me.prototype)}}else{try{throw Error()}catch(ae){se=ae}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=n.DetermineComponentFrameRoot(),j=u[0],D=u[1];if(j&&D){var R=j.split(`
`),ee=D.split(`
`);for(i=n=0;n<R.length&&!R[n].includes("DetermineComponentFrameRoot");)n++;for(;i<ee.length&&!ee[i].includes("DetermineComponentFrameRoot");)i++;if(n===R.length||i===ee.length)for(n=R.length-1,i=ee.length-1;1<=n&&0<=i&&R[n]!==ee[i];)i--;for(;1<=n&&0<=i;n--,i--)if(R[n]!==ee[i]){if(n!==1||i!==1)do if(n--,i--,0>i||R[n]!==ee[i]){var ce=`
`+R[n].replace(" at new "," at ");return e.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",e.displayName)),ce}while(1<=n&&0<=i);break}}}finally{Lr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ga(a):""}function Bx(e){switch(e.tag){case 26:case 27:case 5:return Ga(e.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 15:return qr(e.type,!1);case 11:return qr(e.type.render,!1);case 1:return qr(e.type,!0);case 31:return Ga("Activity");default:return""}}function zu(e){try{var s="";do s+=Bx(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mu(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _x(e){var s=Mu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,u=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return i.call(this)},set:function(j){n=""+j,u.call(this,j)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(j){n=""+j},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ai(e){e._valueTracker||(e._valueTracker=_x(e))}function Ou(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),n="";return e&&(n=Mu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(s.setValue(e),!0):!1}function ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rx=/[\n"\\]/g;function Zt(e){return e.replace(Rx,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Br(e,s,a,n,i,u,j,D){e.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.type=j:e.removeAttribute("type"),s!=null?j==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Ft(s)):e.value!==""+Ft(s)&&(e.value=""+Ft(s)):j!=="submit"&&j!=="reset"||e.removeAttribute("value"),s!=null?_r(e,j,Ft(s)):a!=null?_r(e,j,Ft(a)):n!=null&&e.removeAttribute("value"),i==null&&u!=null&&(e.defaultChecked=!!u),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.name=""+Ft(D):e.removeAttribute("name")}function Lu(e,s,a,n,i,u,j,D){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),s!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||s!=null))return;a=a!=null?""+Ft(a):"",s=s!=null?""+Ft(s):a,D||s===e.value||(e.value=s),e.defaultValue=s}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=D?e.checked:!!n,e.defaultChecked=!!n,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(e.name=j)}function _r(e,s,a){s==="number"&&ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Pa(e,s,a,n){if(e=e.options,s){s={};for(var i=0;i<a.length;i++)s["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=s.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Ft(a),s=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}s!==null||e[i].disabled||(s=e[i])}s!==null&&(s.selected=!0)}}function qu(e,s,a){if(s!=null&&(s=""+Ft(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+Ft(a):""}function Bu(e,s,a,n){if(s==null){if(n!=null){if(a!=null)throw Error(o(92));if(V(n)){if(1<n.length)throw Error(o(93));n=n[0]}a=n}a==null&&(a=""),s=a}a=Ft(s),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function Ya(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var Ux=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(e,s,a){var n=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":n?e.setProperty(s,a):typeof a!="number"||a===0||Ux.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Ru(e,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||s!=null&&s.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in s)n=s[i],s.hasOwnProperty(i)&&a[i]!==n&&_u(e,i,n)}else for(var u in s)s.hasOwnProperty(u)&&_u(e,u,s[u])}function Rr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$x=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(e){return $x.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ur=null;function Hr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,Fa=null;function Uu(e){var s=Qa(e);if(s&&(e=s.stateNode)){var a=e[At]||null;e:switch(e=s.stateNode,s.type){case"input":if(Br(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Zt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var n=a[s];if(n!==e&&n.form===e.form){var i=n[At]||null;if(!i)throw Error(o(90));Br(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(s=0;s<a.length;s++)n=a[s],n.form===e.form&&Ou(n)}break e;case"textarea":qu(e,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Pa(e,!!a.multiple,s,!1)}}}var $r=!1;function Hu(e,s,a){if($r)return e(s,a);$r=!0;try{var n=e(s);return n}finally{if($r=!1,(Xa!==null||Fa!==null)&&(Ii(),Xa&&(s=Xa,e=Fa,Fa=Xa=null,Uu(s),e)))for(s=0;s<e.length;s++)Uu(e[s])}}function Vn(e,s){var a=e.stateNode;if(a===null)return null;var n=a[At]||null;if(n===null)return null;a=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if(ws)try{var In={};Object.defineProperty(In,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{Qr=!1}var Qs=null,Vr=null,ii=null;function $u(){if(ii)return ii;var e,s=Vr,a=s.length,n,i="value"in Qs?Qs.value:Qs.textContent,u=i.length;for(e=0;e<a&&s[e]===i[e];e++);var j=a-e;for(n=1;n<=j&&s[a-n]===i[u-n];n++);return ii=i.slice(e,1<n?1-n:void 0)}function ri(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function Qu(){return!1}function Tt(e){function s(a,n,i,u,j){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=u,this.target=j,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(a=e[D],this[D]=a?a(u):u[D]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ci:Qu,this.isPropagationStopped=Qu,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),s}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oi=Tt(ja),Gn=y({},ja,{view:0,detail:0}),Qx=Tt(Gn),Ir,Gr,Pn,ui=y({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pn&&(Pn&&e.type==="mousemove"?(Ir=e.screenX-Pn.screenX,Gr=e.screenY-Pn.screenY):Gr=Ir=0,Pn=e),Ir)},movementY:function(e){return"movementY"in e?e.movementY:Gr}}),Vu=Tt(ui),Vx=y({},ui,{dataTransfer:0}),Ix=Tt(Vx),Gx=y({},Gn,{relatedTarget:0}),Pr=Tt(Gx),Px=y({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),Yx=Tt(Px),Xx=y({},ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fx=Tt(Xx),Zx=y({},ja,{data:0}),Iu=Tt(Zx),Kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ep(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Wx[e])?!!s[e]:!1}function Yr(){return ep}var tp=y({},Gn,{key:function(e){if(e.key){var s=Kx[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sp=Tt(tp),ap=y({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=Tt(ap),np=y({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),lp=Tt(np),ip=y({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),rp=Tt(ip),cp=y({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),op=Tt(cp),up=y({},ja,{newState:0,oldState:0}),dp=Tt(up),mp=[9,13,27,32],Xr=ws&&"CompositionEvent"in window,Yn=null;ws&&"documentMode"in document&&(Yn=document.documentMode);var fp=ws&&"TextEvent"in window&&!Yn,Pu=ws&&(!Xr||Yn&&8<Yn&&11>=Yn),Yu=" ",Xu=!1;function Fu(e,s){switch(e){case"keyup":return mp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Za=!1;function hp(e,s){switch(e){case"compositionend":return Zu(s);case"keypress":return s.which!==32?null:(Xu=!0,Yu);case"textInput":return e=s.data,e===Yu&&Xu?null:e;default:return null}}function xp(e,s){if(Za)return e==="compositionend"||!Xr&&Fu(e,s)?(e=$u(),ii=Vr=Qs=null,Za=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pu&&s.locale!=="ko"?null:s.data;default:return null}}var pp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!pp[e.type]:s==="textarea"}function Ju(e,s,a,n){Xa?Fa?Fa.push(n):Fa=[n]:Xa=n,s=Zi(s,"onChange"),0<s.length&&(a=new oi("onChange","change",null,a,n),e.push({event:a,listeners:s}))}var Xn=null,Fn=null;function gp(e){Of(e,0)}function di(e){var s=Qn(e);if(Ou(s))return e}function Wu(e,s){if(e==="change")return s}var ed=!1;if(ws){var Fr;if(ws){var Zr="oninput"in document;if(!Zr){var td=document.createElement("div");td.setAttribute("oninput","return;"),Zr=typeof td.oninput=="function"}Fr=Zr}else Fr=!1;ed=Fr&&(!document.documentMode||9<document.documentMode)}function sd(){Xn&&(Xn.detachEvent("onpropertychange",ad),Fn=Xn=null)}function ad(e){if(e.propertyName==="value"&&di(Fn)){var s=[];Ju(s,Fn,e,Hr(e)),Hu(gp,s)}}function yp(e,s,a){e==="focusin"?(sd(),Xn=s,Fn=a,Xn.attachEvent("onpropertychange",ad)):e==="focusout"&&sd()}function vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return di(Fn)}function jp(e,s){if(e==="click")return di(s)}function bp(e,s){if(e==="input"||e==="change")return di(s)}function Np(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ht=typeof Object.is=="function"?Object.is:Np;function Zn(e,s){if(Ht(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!ge.call(s,i)||!Ht(e[i],s[i]))return!1}return!0}function nd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,s){var a=nd(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=s&&n>=s)return{node:a,offset:s-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=nd(a)}}function id(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?id(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function rd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=ni(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=ni(e.document)}return s}function Kr(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var wp=ws&&"documentMode"in document&&11>=document.documentMode,Ka=null,Jr=null,Kn=null,Wr=!1;function cd(e,s,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wr||Ka==null||Ka!==ni(n)||(n=Ka,"selectionStart"in n&&Kr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kn&&Zn(Kn,n)||(Kn=n,n=Zi(Jr,"onSelect"),0<n.length&&(s=new oi("onSelect","select",null,s,a),e.push({event:s,listeners:n}),s.target=Ka)))}function ba(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var Ja={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},ec={},od={};ws&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Na(e){if(ec[e])return ec[e];if(!Ja[e])return e;var s=Ja[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in od)return ec[e]=s[a];return e}var ud=Na("animationend"),dd=Na("animationiteration"),md=Na("animationstart"),Sp=Na("transitionrun"),Cp=Na("transitionstart"),kp=Na("transitioncancel"),fd=Na("transitionend"),hd=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function rs(e,s){hd.set(e,s),va(s,[e])}var xd=new WeakMap;function Kt(e,s){if(typeof e=="object"&&e!==null){var a=xd.get(e);return a!==void 0?a:(s={value:e,source:s,stack:zu(s)},xd.set(e,s),s)}return{value:e,source:s,stack:zu(s)}}var Jt=[],Wa=0,sc=0;function mi(){for(var e=Wa,s=sc=Wa=0;s<e;){var a=Jt[s];Jt[s++]=null;var n=Jt[s];Jt[s++]=null;var i=Jt[s];Jt[s++]=null;var u=Jt[s];if(Jt[s++]=null,n!==null&&i!==null){var j=n.pending;j===null?i.next=i:(i.next=j.next,j.next=i),n.pending=i}u!==0&&pd(a,i,u)}}function fi(e,s,a,n){Jt[Wa++]=e,Jt[Wa++]=s,Jt[Wa++]=a,Jt[Wa++]=n,sc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function ac(e,s,a,n){return fi(e,s,a,n),hi(e)}function en(e,s){return fi(e,null,null,s),hi(e)}function pd(e,s,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,u=e.return;u!==null;)u.childLanes|=a,n=u.alternate,n!==null&&(n.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(i=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,i&&s!==null&&(i=31-Ut(a),e=u.hiddenUpdates,n=e[i],n===null?e[i]=[s]:n.push(s),s.lane=a|536870912),u):null}function hi(e){if(50<Nl)throw Nl=0,oo=null,Error(o(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var tn={};function Dp(e,s,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,s,a,n){return new Dp(e,s,a,n)}function nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ss(e,s){var a=e.alternate;return a===null?(a=$t(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function gd(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function xi(e,s,a,n,i,u){var j=0;if(n=e,typeof e=="function")nc(e)&&(j=1);else if(typeof e=="string")j=Tg(e,a,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case B:return e=$t(31,a,s,i),e.elementType=B,e.lanes=u,e;case w:return wa(a.children,i,u,s);case N:j=8,i|=24;break;case z:return e=$t(12,a,s,i|2),e.elementType=z,e.lanes=u,e;case M:return e=$t(13,a,s,i),e.elementType=M,e.lanes=u,e;case I:return e=$t(19,a,s,i),e.elementType=I,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case O:j=10;break e;case T:j=9;break e;case L:j=11;break e;case X:j=14;break e;case P:j=16,n=null;break e}j=29,a=Error(o(130,e===null?"null":typeof e,"")),n=null}return s=$t(j,a,s,i),s.elementType=e,s.type=n,s.lanes=u,s}function wa(e,s,a,n){return e=$t(7,e,n,s),e.lanes=a,e}function lc(e,s,a){return e=$t(6,e,null,s),e.lanes=a,e}function ic(e,s,a){return s=$t(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var sn=[],an=0,pi=null,gi=0,Wt=[],es=0,Sa=null,Cs=1,ks="";function Ca(e,s){sn[an++]=gi,sn[an++]=pi,pi=e,gi=s}function yd(e,s,a){Wt[es++]=Cs,Wt[es++]=ks,Wt[es++]=Sa,Sa=e;var n=Cs;e=ks;var i=32-Ut(n)-1;n&=~(1<<i),a+=1;var u=32-Ut(s)+i;if(30<u){var j=i-i%5;u=(n&(1<<j)-1).toString(32),n>>=j,i-=j,Cs=1<<32-Ut(s)+i|a<<i|n,ks=u+e}else Cs=1<<u|a<<i|n,ks=e}function rc(e){e.return!==null&&(Ca(e,1),yd(e,1,0))}function cc(e){for(;e===pi;)pi=sn[--an],sn[an]=null,gi=sn[--an],sn[an]=null;for(;e===Sa;)Sa=Wt[--es],Wt[es]=null,ks=Wt[--es],Wt[es]=null,Cs=Wt[--es],Wt[es]=null}var kt=null,We=null,Ue=!1,ka=null,ms=!1,oc=Error(o(519));function Da(e){var s=Error(o(418,""));throw el(Kt(s,e)),oc}function vd(e){var s=e.stateNode,a=e.type,n=e.memoizedProps;switch(s[wt]=e,s[At]=n,a){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(a=0;a<Sl.length;a++)qe(Sl[a],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":qe("invalid",s),Lu(s,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ai(s);break;case"select":qe("invalid",s);break;case"textarea":qe("invalid",s),Bu(s,n.value,n.defaultValue,n.children),ai(s)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||n.suppressHydrationWarning===!0||_f(s.textContent,a)?(n.popover!=null&&(qe("beforetoggle",s),qe("toggle",s)),n.onScroll!=null&&qe("scroll",s),n.onScrollEnd!=null&&qe("scrollend",s),n.onClick!=null&&(s.onclick=Ki),s=!0):s=!1,s||Da(e)}function jd(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:kt=kt.return}}function Jn(e){if(e!==kt)return!1;if(!Ue)return jd(e),Ue=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ko(e.type,e.memoizedProps)),a=!a),a&&We&&Da(e),jd(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){We=os(e.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}We=null}}else s===27?(s=We,na(e.type)?(e=Eo,Eo=null,We=e):We=s):We=kt?os(e.stateNode.nextSibling):null;return!0}function Wn(){We=kt=null,Ue=!1}function bd(){var e=ka;return e!==null&&(Mt===null?Mt=e:Mt.push.apply(Mt,e),ka=null),e}function el(e){ka===null?ka=[e]:ka.push(e)}var uc=$(null),Aa=null,Ds=null;function Vs(e,s,a){F(uc,s._currentValue),s._currentValue=a}function As(e){e._currentValue=uc.current,W(uc)}function dc(e,s,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===a)break;e=e.return}}function mc(e,s,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){var j=i.child;u=u.firstContext;e:for(;u!==null;){var D=u;u=i;for(var R=0;R<s.length;R++)if(D.context===s[R]){u.lanes|=a,D=u.alternate,D!==null&&(D.lanes|=a),dc(u.return,a,e),n||(j=null);break e}u=D.next}}else if(i.tag===18){if(j=i.return,j===null)throw Error(o(341));j.lanes|=a,u=j.alternate,u!==null&&(u.lanes|=a),dc(j,a,e),j=null}else j=i.child;if(j!==null)j.return=i;else for(j=i;j!==null;){if(j===e){j=null;break}if(i=j.sibling,i!==null){i.return=j.return,j=i;break}j=j.return}i=j}}function tl(e,s,a,n){e=null;for(var i=s,u=!1;i!==null;){if(!u){if((i.flags&524288)!==0)u=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var j=i.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var D=i.type;Ht(i.pendingProps.value,j.value)||(e!==null?e.push(D):e=[D])}}else if(i===le.current){if(j=i.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(El):e=[El])}i=i.return}e!==null&&mc(s,e,a,n),s.flags|=262144}function yi(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ta(e){Aa=e,Ds=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return Nd(Aa,e)}function vi(e,s){return Aa===null&&Ta(e),Nd(e,s)}function Nd(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ds===null){if(e===null)throw Error(o(308));Ds=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Ds=Ds.next=s;return a}var Ap=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},Tp=l.unstable_scheduleCallback,Ep=l.unstable_NormalPriority,dt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fc(){return{controller:new Ap,data:new Map,refCount:0}}function sl(e){e.refCount--,e.refCount===0&&Tp(Ep,function(){e.controller.abort()})}var al=null,hc=0,nn=0,ln=null;function zp(e,s){if(al===null){var a=al=[];hc=0,nn=go(),ln={status:"pending",value:void 0,then:function(n){a.push(n)}}}return hc++,s.then(wd,wd),s}function wd(){if(--hc===0&&al!==null){ln!==null&&(ln.status="fulfilled");var e=al;al=null,nn=0,ln=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function Mp(e,s){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=s;for(var i=0;i<a.length;i++)(0,a[i])(s)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var Sd=b.S;b.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&zp(e,s),Sd!==null&&Sd(e,s)};var Ea=$(null);function xc(){var e=Ea.current;return e!==null?e:Pe.pooledCache}function ji(e,s){s===null?F(Ea,Ea.current):F(Ea,s.pool)}function Cd(){var e=xc();return e===null?null:{parent:dt._currentValue,pool:e}}var nl=Error(o(460)),kd=Error(o(474)),bi=Error(o(542)),pc={then:function(){}};function Dd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ni(){}function Ad(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(Ni,Ni),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Ed(e),e;default:if(typeof s.status=="string")s.then(Ni,Ni);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=s,e.status="pending",e.then(function(n){if(s.status==="pending"){var i=s;i.status="fulfilled",i.value=n}},function(n){if(s.status==="pending"){var i=s;i.status="rejected",i.reason=n}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Ed(e),e}throw ll=s,nl}}var ll=null;function Td(){if(ll===null)throw Error(o(459));var e=ll;return ll=null,e}function Ed(e){if(e===nl||e===bi)throw Error(o(483))}var Is=!1;function gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yc(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(e,s,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(He&2)!==0){var i=n.pending;return i===null?s.next=s:(s.next=i.next,i.next=s),n.pending=s,s=hi(e),pd(e,null,a),s}return fi(e,n,s,a),hi(e)}function il(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var n=s.lanes;n&=e.pendingLanes,a|=n,s.lanes=a,wu(e,a)}}function vc(e,s){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var j={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?i=u=j:u=u.next=j,a=a.next}while(a!==null);u===null?i=u=s:u=u.next=s}else i=u=s;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:u,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var jc=!1;function rl(){if(jc){var e=ln;if(e!==null)throw e}}function cl(e,s,a,n){jc=!1;var i=e.updateQueue;Is=!1;var u=i.firstBaseUpdate,j=i.lastBaseUpdate,D=i.shared.pending;if(D!==null){i.shared.pending=null;var R=D,ee=R.next;R.next=null,j===null?u=ee:j.next=ee,j=R;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,D=ce.lastBaseUpdate,D!==j&&(D===null?ce.firstBaseUpdate=ee:D.next=ee,ce.lastBaseUpdate=R))}if(u!==null){var me=i.baseState;j=0,ce=ee=R=null,D=u;do{var se=D.lane&-536870913,ae=se!==D.lane;if(ae?(Be&se)===se:(n&se)===se){se!==0&&se===nn&&(jc=!0),ce!==null&&(ce=ce.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ae=e,ke=D;se=s;var Ie=a;switch(ke.tag){case 1:if(Ae=ke.payload,typeof Ae=="function"){me=Ae.call(Ie,me,se);break e}me=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ke.payload,se=typeof Ae=="function"?Ae.call(Ie,me,se):Ae,se==null)break e;me=y({},me,se);break e;case 2:Is=!0}}se=D.callback,se!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=i.callbacks,ae===null?i.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ce===null?(ee=ce=ae,R=me):ce=ce.next=ae,j|=se;if(D=D.next,D===null){if(D=i.shared.pending,D===null)break;ae=D,D=ae.next,ae.next=null,i.lastBaseUpdate=ae,i.shared.pending=null}}while(!0);ce===null&&(R=me),i.baseState=R,i.firstBaseUpdate=ee,i.lastBaseUpdate=ce,u===null&&(i.shared.lanes=0),ea|=j,e.lanes=j,e.memoizedState=me}}function zd(e,s){if(typeof e!="function")throw Error(o(191,e));e.call(s)}function Md(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)zd(a[e],s)}var rn=$(null),wi=$(0);function Od(e,s){e=qs,F(wi,e),F(rn,s),qs=e|s.baseLanes}function bc(){F(wi,qs),F(rn,rn.current)}function Nc(){qs=wi.current,W(rn),W(wi)}var Ys=0,Me=null,Qe=null,ct=null,Si=!1,cn=!1,za=!1,Ci=0,ol=0,on=null,Op=0;function nt(){throw Error(o(321))}function wc(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Ht(e[a],s[a]))return!1;return!0}function Sc(e,s,a,n,i,u){return Ys=u,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,b.H=e===null||e.memoizedState===null?pm:gm,za=!1,u=a(n,i),za=!1,cn&&(u=qd(s,a,n,i)),Ld(e),u}function Ld(e){b.H=zi;var s=Qe!==null&&Qe.next!==null;if(Ys=0,ct=Qe=Me=null,Si=!1,ol=0,on=null,s)throw Error(o(300));e===null||ht||(e=e.dependencies,e!==null&&yi(e)&&(ht=!0))}function qd(e,s,a,n){Me=e;var i=0;do{if(cn&&(on=null),ol=0,cn=!1,25<=i)throw Error(o(301));if(i+=1,ct=Qe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}b.H=Hp,u=s(a,n)}while(cn);return u}function Lp(){var e=b.H,s=e.useState()[0];return s=typeof s.then=="function"?ul(s):s,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Me.flags|=1024),s}function Cc(){var e=Ci!==0;return Ci=0,e}function kc(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function Dc(e){if(Si){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Si=!1}Ys=0,ct=Qe=Me=null,cn=!1,ol=Ci=0,on=null}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Me.memoizedState=ct=e:ct=ct.next=e,ct}function ot(){if(Qe===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var s=ct===null?Me.memoizedState:ct.next;if(s!==null)ct=s,Qe=e;else{if(e===null)throw Me.alternate===null?Error(o(467)):Error(o(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},ct===null?Me.memoizedState=ct=e:ct=ct.next=e}return ct}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(e){var s=ol;return ol+=1,on===null&&(on=[]),e=Ad(on,e,s),s=Me,(ct===null?s.memoizedState:ct.next)===null&&(s=s.alternate,b.H=s===null||s.memoizedState===null?pm:gm),e}function ki(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ul(e);if(e.$$typeof===O)return St(e)}throw Error(o(438,String(e)))}function Tc(e){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var n=Me.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(s={data:n.data.map(function(i){return i.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ac(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),n=0;n<e;n++)a[n]=q;return s.index++,a}function Ts(e,s){return typeof s=="function"?s(e):s}function Di(e){var s=ot();return Ec(s,Qe,e)}function Ec(e,s,a){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=a;var i=e.baseQueue,u=n.pending;if(u!==null){if(i!==null){var j=i.next;i.next=u.next,u.next=j}s.baseQueue=i=u,n.pending=null}if(u=e.baseState,i===null)e.memoizedState=u;else{s=i.next;var D=j=null,R=null,ee=s,ce=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(Be&me)===me:(Ys&me)===me){var se=ee.revertLane;if(se===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===nn&&(ce=!0);else if((Ys&se)===se){ee=ee.next,se===nn&&(ce=!0);continue}else me={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},R===null?(D=R=me,j=u):R=R.next=me,Me.lanes|=se,ea|=se;me=ee.action,za&&a(u,me),u=ee.hasEagerState?ee.eagerState:a(u,me)}else se={lane:me,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},R===null?(D=R=se,j=u):R=R.next=se,Me.lanes|=me,ea|=me;ee=ee.next}while(ee!==null&&ee!==s);if(R===null?j=u:R.next=D,!Ht(u,e.memoizedState)&&(ht=!0,ce&&(a=ln,a!==null)))throw a;e.memoizedState=u,e.baseState=j,e.baseQueue=R,n.lastRenderedState=u}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function zc(e){var s=ot(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,u=s.memoizedState;if(i!==null){a.pending=null;var j=i=i.next;do u=e(u,j.action),j=j.next;while(j!==i);Ht(u,s.memoizedState)||(ht=!0),s.memoizedState=u,s.baseQueue===null&&(s.baseState=u),a.lastRenderedState=u}return[u,n]}function Bd(e,s,a){var n=Me,i=ot(),u=Ue;if(u){if(a===void 0)throw Error(o(407));a=a()}else a=s();var j=!Ht((Qe||i).memoizedState,a);j&&(i.memoizedState=a,ht=!0),i=i.queue;var D=Ud.bind(null,n,i,e);if(dl(2048,8,D,[e]),i.getSnapshot!==s||j||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,un(9,Ai(),Rd.bind(null,n,i,a,s),null),Pe===null)throw Error(o(349));u||(Ys&124)!==0||_d(n,s,a)}return a}function _d(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=Ac(),Me.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function Rd(e,s,a,n){s.value=a,s.getSnapshot=n,Hd(s)&&$d(e)}function Ud(e,s,a){return a(function(){Hd(s)&&$d(e)})}function Hd(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Ht(e,a)}catch{return!0}}function $d(e){var s=en(e,2);s!==null&&Pt(s,e,2)}function Mc(e){var s=Et();if(typeof e=="function"){var a=e;if(e=a(),za){Hs(!0);try{a()}finally{Hs(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},s}function Qd(e,s,a,n){return e.baseState=a,Ec(e,Qe,typeof n=="function"?n:Ts)}function qp(e,s,a,n,i){if(Ei(e))throw Error(o(485));if(e=s.action,e!==null){var u={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){u.listeners.push(j)}};b.T!==null?a(!0):u.isTransition=!1,n(u),a=s.pending,a===null?(u.next=s.pending=u,Vd(s,u)):(u.next=a.next,s.pending=a.next=u)}}function Vd(e,s){var a=s.action,n=s.payload,i=e.state;if(s.isTransition){var u=b.T,j={};b.T=j;try{var D=a(i,n),R=b.S;R!==null&&R(j,D),Id(e,s,D)}catch(ee){Oc(e,s,ee)}finally{b.T=u}}else try{u=a(i,n),Id(e,s,u)}catch(ee){Oc(e,s,ee)}}function Id(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Gd(e,s,n)},function(n){return Oc(e,s,n)}):Gd(e,s,a)}function Gd(e,s,a){s.status="fulfilled",s.value=a,Pd(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,Vd(e,a)))}function Oc(e,s,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do s.status="rejected",s.reason=a,Pd(s),s=s.next;while(s!==n)}e.action=null}function Pd(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function Yd(e,s){return s}function Xd(e,s){if(Ue){var a=Pe.formState;if(a!==null){e:{var n=Me;if(Ue){if(We){t:{for(var i=We,u=ms;i.nodeType!==8;){if(!u){i=null;break t}if(i=os(i.nextSibling),i===null){i=null;break t}}u=i.data,i=u==="F!"||u==="F"?i:null}if(i){We=os(i.nextSibling),n=i.data==="F!";break e}}Da(n)}n=!1}n&&(s=a[0])}}return a=Et(),a.memoizedState=a.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:s},a.queue=n,a=fm.bind(null,Me,n),n.dispatch=a,n=Mc(!1),u=Rc.bind(null,Me,!1,n.queue),n=Et(),i={state:s,dispatch:null,action:e,pending:null},n.queue=i,a=qp.bind(null,Me,i,u,a),i.dispatch=a,n.memoizedState=e,[s,a,!1]}function Fd(e){var s=ot();return Zd(s,Qe,e)}function Zd(e,s,a){if(s=Ec(e,s,Yd)[0],e=Di(Ts)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var n=ul(s)}catch(j){throw j===nl?bi:j}else n=s;s=ot();var i=s.queue,u=i.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,un(9,Ai(),Bp.bind(null,i,a),null)),[n,u,e]}function Bp(e,s){e.action=s}function Kd(e){var s=ot(),a=Qe;if(a!==null)return Zd(s,a,e);ot(),s=s.memoizedState,a=ot();var n=a.queue.dispatch;return a.memoizedState=e,[s,n,!1]}function un(e,s,a,n){return e={tag:e,create:a,deps:n,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Ac(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,s.lastEffect=e),e}function Ai(){return{destroy:void 0,resource:void 0}}function Jd(){return ot().memoizedState}function Ti(e,s,a,n){var i=Et();n=n===void 0?null:n,Me.flags|=e,i.memoizedState=un(1|s,Ai(),a,n)}function dl(e,s,a,n){var i=ot();n=n===void 0?null:n;var u=i.memoizedState.inst;Qe!==null&&n!==null&&wc(n,Qe.memoizedState.deps)?i.memoizedState=un(s,u,a,n):(Me.flags|=e,i.memoizedState=un(1|s,u,a,n))}function Wd(e,s){Ti(8390656,8,e,s)}function em(e,s){dl(2048,8,e,s)}function tm(e,s){return dl(4,2,e,s)}function sm(e,s){return dl(4,4,e,s)}function am(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function nm(e,s,a){a=a!=null?a.concat([e]):null,dl(4,4,am.bind(null,s,e),a)}function Lc(){}function lm(e,s){var a=ot();s=s===void 0?null:s;var n=a.memoizedState;return s!==null&&wc(s,n[1])?n[0]:(a.memoizedState=[e,s],e)}function im(e,s){var a=ot();s=s===void 0?null:s;var n=a.memoizedState;if(s!==null&&wc(s,n[1]))return n[0];if(n=e(),za){Hs(!0);try{e()}finally{Hs(!1)}}return a.memoizedState=[n,s],n}function qc(e,s,a){return a===void 0||(Ys&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=uf(),Me.lanes|=e,ea|=e,a)}function rm(e,s,a,n){return Ht(a,s)?a:rn.current!==null?(e=qc(e,a,n),Ht(e,s)||(ht=!0),e):(Ys&42)===0?(ht=!0,e.memoizedState=a):(e=uf(),Me.lanes|=e,ea|=e,s)}function cm(e,s,a,n,i){var u=E.p;E.p=u!==0&&8>u?u:8;var j=b.T,D={};b.T=D,Rc(e,!1,s,a);try{var R=i(),ee=b.S;if(ee!==null&&ee(D,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ce=Mp(R,n);ml(e,s,ce,Gt(e))}else ml(e,s,n,Gt(e))}catch(me){ml(e,s,{then:function(){},status:"rejected",reason:me},Gt())}finally{E.p=u,b.T=j}}function _p(){}function Bc(e,s,a,n){if(e.tag!==5)throw Error(o(476));var i=om(e).queue;cm(e,i,s,U,a===null?_p:function(){return um(e),a(n)})}function om(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:U},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function um(e){var s=om(e).next.queue;ml(e,s,{},Gt())}function _c(){return St(El)}function dm(){return ot().memoizedState}function mm(){return ot().memoizedState}function Rp(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Gt();e=Gs(a);var n=Ps(s,e,a);n!==null&&(Pt(n,s,a),il(n,s,a)),s={cache:fc()},e.payload=s;return}s=s.return}}function Up(e,s,a){var n=Gt();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ei(e)?hm(s,a):(a=ac(e,s,a,n),a!==null&&(Pt(a,e,n),xm(a,s,n)))}function fm(e,s,a){var n=Gt();ml(e,s,a,n)}function ml(e,s,a,n){var i={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ei(e))hm(s,i);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=s.lastRenderedReducer,u!==null))try{var j=s.lastRenderedState,D=u(j,a);if(i.hasEagerState=!0,i.eagerState=D,Ht(D,j))return fi(e,s,i,0),Pe===null&&mi(),!1}catch{}finally{}if(a=ac(e,s,i,n),a!==null)return Pt(a,e,n),xm(a,s,n),!0}return!1}function Rc(e,s,a,n){if(n={lane:2,revertLane:go(),action:n,hasEagerState:!1,eagerState:null,next:null},Ei(e)){if(s)throw Error(o(479))}else s=ac(e,a,n,2),s!==null&&Pt(s,e,2)}function Ei(e){var s=e.alternate;return e===Me||s!==null&&s===Me}function hm(e,s){cn=Si=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function xm(e,s,a){if((a&4194048)!==0){var n=s.lanes;n&=e.pendingLanes,a|=n,s.lanes=a,wu(e,a)}}var zi={readContext:St,use:ki,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt},pm={readContext:St,use:ki,useCallback:function(e,s){return Et().memoizedState=[e,s===void 0?null:s],e},useContext:St,useEffect:Wd,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,Ti(4194308,4,am.bind(null,s,e),a)},useLayoutEffect:function(e,s){return Ti(4194308,4,e,s)},useInsertionEffect:function(e,s){Ti(4,2,e,s)},useMemo:function(e,s){var a=Et();s=s===void 0?null:s;var n=e();if(za){Hs(!0);try{e()}finally{Hs(!1)}}return a.memoizedState=[n,s],n},useReducer:function(e,s,a){var n=Et();if(a!==void 0){var i=a(s);if(za){Hs(!0);try{a(s)}finally{Hs(!1)}}}else i=s;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Up.bind(null,Me,e),[n.memoizedState,e]},useRef:function(e){var s=Et();return e={current:e},s.memoizedState=e},useState:function(e){e=Mc(e);var s=e.queue,a=fm.bind(null,Me,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:Lc,useDeferredValue:function(e,s){var a=Et();return qc(a,e,s)},useTransition:function(){var e=Mc(!1);return e=cm.bind(null,Me,e.queue,!0,!1),Et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var n=Me,i=Et();if(Ue){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Pe===null)throw Error(o(349));(Be&124)!==0||_d(n,s,a)}i.memoizedState=a;var u={value:a,getSnapshot:s};return i.queue=u,Wd(Ud.bind(null,n,u,e),[e]),n.flags|=2048,un(9,Ai(),Rd.bind(null,n,u,a,s),null),a},useId:function(){var e=Et(),s=Pe.identifierPrefix;if(Ue){var a=ks,n=Cs;a=(n&~(1<<32-Ut(n)-1)).toString(32)+a,s="«"+s+"R"+a,a=Ci++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=Op++,s="«"+s+"r"+a.toString(32)+"»";return e.memoizedState=s},useHostTransitionStatus:_c,useFormState:Xd,useActionState:Xd,useOptimistic:function(e){var s=Et();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Rc.bind(null,Me,!0,a),a.dispatch=s,[e,s]},useMemoCache:Tc,useCacheRefresh:function(){return Et().memoizedState=Rp.bind(null,Me)}},gm={readContext:St,use:ki,useCallback:lm,useContext:St,useEffect:em,useImperativeHandle:nm,useInsertionEffect:tm,useLayoutEffect:sm,useMemo:im,useReducer:Di,useRef:Jd,useState:function(){return Di(Ts)},useDebugValue:Lc,useDeferredValue:function(e,s){var a=ot();return rm(a,Qe.memoizedState,e,s)},useTransition:function(){var e=Di(Ts)[0],s=ot().memoizedState;return[typeof e=="boolean"?e:ul(e),s]},useSyncExternalStore:Bd,useId:dm,useHostTransitionStatus:_c,useFormState:Fd,useActionState:Fd,useOptimistic:function(e,s){var a=ot();return Qd(a,Qe,e,s)},useMemoCache:Tc,useCacheRefresh:mm},Hp={readContext:St,use:ki,useCallback:lm,useContext:St,useEffect:em,useImperativeHandle:nm,useInsertionEffect:tm,useLayoutEffect:sm,useMemo:im,useReducer:zc,useRef:Jd,useState:function(){return zc(Ts)},useDebugValue:Lc,useDeferredValue:function(e,s){var a=ot();return Qe===null?qc(a,e,s):rm(a,Qe.memoizedState,e,s)},useTransition:function(){var e=zc(Ts)[0],s=ot().memoizedState;return[typeof e=="boolean"?e:ul(e),s]},useSyncExternalStore:Bd,useId:dm,useHostTransitionStatus:_c,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,s){var a=ot();return Qe!==null?Qd(a,Qe,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:mm},dn=null,fl=0;function Mi(e){var s=fl;return fl+=1,dn===null&&(dn=[]),Ad(dn,e,s)}function hl(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Oi(e,s){throw s.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(s),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function ym(e){var s=e._init;return s(e._payload)}function vm(e){function s(Z,G){if(e){var J=Z.deletions;J===null?(Z.deletions=[G],Z.flags|=16):J.push(G)}}function a(Z,G){if(!e)return null;for(;G!==null;)s(Z,G),G=G.sibling;return null}function n(Z){for(var G=new Map;Z!==null;)Z.key!==null?G.set(Z.key,Z):G.set(Z.index,Z),Z=Z.sibling;return G}function i(Z,G){return Z=Ss(Z,G),Z.index=0,Z.sibling=null,Z}function u(Z,G,J){return Z.index=J,e?(J=Z.alternate,J!==null?(J=J.index,J<G?(Z.flags|=67108866,G):J):(Z.flags|=67108866,G)):(Z.flags|=1048576,G)}function j(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function D(Z,G,J,de){return G===null||G.tag!==6?(G=lc(J,Z.mode,de),G.return=Z,G):(G=i(G,J),G.return=Z,G)}function R(Z,G,J,de){var Ne=J.type;return Ne===w?ce(Z,G,J.props.children,de,J.key):G!==null&&(G.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===P&&ym(Ne)===G.type)?(G=i(G,J.props),hl(G,J),G.return=Z,G):(G=xi(J.type,J.key,J.props,null,Z.mode,de),hl(G,J),G.return=Z,G)}function ee(Z,G,J,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=ic(J,Z.mode,de),G.return=Z,G):(G=i(G,J.children||[]),G.return=Z,G)}function ce(Z,G,J,de,Ne){return G===null||G.tag!==7?(G=wa(J,Z.mode,de,Ne),G.return=Z,G):(G=i(G,J),G.return=Z,G)}function me(Z,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=lc(""+G,Z.mode,J),G.return=Z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return J=xi(G.type,G.key,G.props,null,Z.mode,J),hl(J,G),J.return=Z,J;case k:return G=ic(G,Z.mode,J),G.return=Z,G;case P:var de=G._init;return G=de(G._payload),me(Z,G,J)}if(V(G)||Y(G))return G=wa(G,Z.mode,J,null),G.return=Z,G;if(typeof G.then=="function")return me(Z,Mi(G),J);if(G.$$typeof===O)return me(Z,vi(Z,G),J);Oi(Z,G)}return null}function se(Z,G,J,de){var Ne=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ne!==null?null:D(Z,G,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return J.key===Ne?R(Z,G,J,de):null;case k:return J.key===Ne?ee(Z,G,J,de):null;case P:return Ne=J._init,J=Ne(J._payload),se(Z,G,J,de)}if(V(J)||Y(J))return Ne!==null?null:ce(Z,G,J,de,null);if(typeof J.then=="function")return se(Z,G,Mi(J),de);if(J.$$typeof===O)return se(Z,G,vi(Z,J),de);Oi(Z,J)}return null}function ae(Z,G,J,de,Ne){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Z=Z.get(J)||null,D(G,Z,""+de,Ne);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return Z=Z.get(de.key===null?J:de.key)||null,R(G,Z,de,Ne);case k:return Z=Z.get(de.key===null?J:de.key)||null,ee(G,Z,de,Ne);case P:var Oe=de._init;return de=Oe(de._payload),ae(Z,G,J,de,Ne)}if(V(de)||Y(de))return Z=Z.get(J)||null,ce(G,Z,de,Ne,null);if(typeof de.then=="function")return ae(Z,G,J,Mi(de),Ne);if(de.$$typeof===O)return ae(Z,G,J,vi(G,de),Ne);Oi(G,de)}return null}function Ae(Z,G,J,de){for(var Ne=null,Oe=null,we=G,De=G=0,pt=null;we!==null&&De<J.length;De++){we.index>De?(pt=we,we=null):pt=we.sibling;var _e=se(Z,we,J[De],de);if(_e===null){we===null&&(we=pt);break}e&&we&&_e.alternate===null&&s(Z,we),G=u(_e,G,De),Oe===null?Ne=_e:Oe.sibling=_e,Oe=_e,we=pt}if(De===J.length)return a(Z,we),Ue&&Ca(Z,De),Ne;if(we===null){for(;De<J.length;De++)we=me(Z,J[De],de),we!==null&&(G=u(we,G,De),Oe===null?Ne=we:Oe.sibling=we,Oe=we);return Ue&&Ca(Z,De),Ne}for(we=n(we);De<J.length;De++)pt=ae(we,Z,De,J[De],de),pt!==null&&(e&&pt.alternate!==null&&we.delete(pt.key===null?De:pt.key),G=u(pt,G,De),Oe===null?Ne=pt:Oe.sibling=pt,Oe=pt);return e&&we.forEach(function(oa){return s(Z,oa)}),Ue&&Ca(Z,De),Ne}function ke(Z,G,J,de){if(J==null)throw Error(o(151));for(var Ne=null,Oe=null,we=G,De=G=0,pt=null,_e=J.next();we!==null&&!_e.done;De++,_e=J.next()){we.index>De?(pt=we,we=null):pt=we.sibling;var oa=se(Z,we,_e.value,de);if(oa===null){we===null&&(we=pt);break}e&&we&&oa.alternate===null&&s(Z,we),G=u(oa,G,De),Oe===null?Ne=oa:Oe.sibling=oa,Oe=oa,we=pt}if(_e.done)return a(Z,we),Ue&&Ca(Z,De),Ne;if(we===null){for(;!_e.done;De++,_e=J.next())_e=me(Z,_e.value,de),_e!==null&&(G=u(_e,G,De),Oe===null?Ne=_e:Oe.sibling=_e,Oe=_e);return Ue&&Ca(Z,De),Ne}for(we=n(we);!_e.done;De++,_e=J.next())_e=ae(we,Z,De,_e.value,de),_e!==null&&(e&&_e.alternate!==null&&we.delete(_e.key===null?De:_e.key),G=u(_e,G,De),Oe===null?Ne=_e:Oe.sibling=_e,Oe=_e);return e&&we.forEach(function($g){return s(Z,$g)}),Ue&&Ca(Z,De),Ne}function Ie(Z,G,J,de){if(typeof J=="object"&&J!==null&&J.type===w&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case S:e:{for(var Ne=J.key;G!==null;){if(G.key===Ne){if(Ne=J.type,Ne===w){if(G.tag===7){a(Z,G.sibling),de=i(G,J.props.children),de.return=Z,Z=de;break e}}else if(G.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===P&&ym(Ne)===G.type){a(Z,G.sibling),de=i(G,J.props),hl(de,J),de.return=Z,Z=de;break e}a(Z,G);break}else s(Z,G);G=G.sibling}J.type===w?(de=wa(J.props.children,Z.mode,de,J.key),de.return=Z,Z=de):(de=xi(J.type,J.key,J.props,null,Z.mode,de),hl(de,J),de.return=Z,Z=de)}return j(Z);case k:e:{for(Ne=J.key;G!==null;){if(G.key===Ne)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){a(Z,G.sibling),de=i(G,J.children||[]),de.return=Z,Z=de;break e}else{a(Z,G);break}else s(Z,G);G=G.sibling}de=ic(J,Z.mode,de),de.return=Z,Z=de}return j(Z);case P:return Ne=J._init,J=Ne(J._payload),Ie(Z,G,J,de)}if(V(J))return Ae(Z,G,J,de);if(Y(J)){if(Ne=Y(J),typeof Ne!="function")throw Error(o(150));return J=Ne.call(J),ke(Z,G,J,de)}if(typeof J.then=="function")return Ie(Z,G,Mi(J),de);if(J.$$typeof===O)return Ie(Z,G,vi(Z,J),de);Oi(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(a(Z,G.sibling),de=i(G,J),de.return=Z,Z=de):(a(Z,G),de=lc(J,Z.mode,de),de.return=Z,Z=de),j(Z)):a(Z,G)}return function(Z,G,J,de){try{fl=0;var Ne=Ie(Z,G,J,de);return dn=null,Ne}catch(we){if(we===nl||we===bi)throw we;var Oe=$t(29,we,null,Z.mode);return Oe.lanes=de,Oe.return=Z,Oe}finally{}}}var mn=vm(!0),jm=vm(!1),ts=$(null),fs=null;function Xs(e){var s=e.alternate;F(mt,mt.current&1),F(ts,e),fs===null&&(s===null||rn.current!==null||s.memoizedState!==null)&&(fs=e)}function bm(e){if(e.tag===22){if(F(mt,mt.current),F(ts,e),fs===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(fs=e)}}else Fs()}function Fs(){F(mt,mt.current),F(ts,ts.current)}function Es(e){W(ts),fs===e&&(fs=null),W(mt)}var mt=$(0);function Li(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||To(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Uc(e,s,a,n){s=e.memoizedState,a=a(n,s),a=a==null?s:y({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Hc={enqueueSetState:function(e,s,a){e=e._reactInternals;var n=Gt(),i=Gs(n);i.payload=s,a!=null&&(i.callback=a),s=Ps(e,i,n),s!==null&&(Pt(s,e,n),il(s,e,n))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var n=Gt(),i=Gs(n);i.tag=1,i.payload=s,a!=null&&(i.callback=a),s=Ps(e,i,n),s!==null&&(Pt(s,e,n),il(s,e,n))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Gt(),n=Gs(a);n.tag=2,s!=null&&(n.callback=s),s=Ps(e,n,a),s!==null&&(Pt(s,e,a),il(s,e,a))}};function Nm(e,s,a,n,i,u,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,j):s.prototype&&s.prototype.isPureReactComponent?!Zn(a,n)||!Zn(i,u):!0}function wm(e,s,a,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,n),s.state!==e&&Hc.enqueueReplaceState(s,s.state,null)}function Ma(e,s){var a=s;if("ref"in s){a={};for(var n in s)n!=="ref"&&(a[n]=s[n])}if(e=e.defaultProps){a===s&&(a=y({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}var qi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Sm(e){qi(e)}function Cm(e){console.error(e)}function km(e){qi(e)}function Bi(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(n){setTimeout(function(){throw n})}}function Dm(e,s,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function $c(e,s,a){return a=Gs(a),a.tag=3,a.payload={element:null},a.callback=function(){Bi(e,s)},a}function Am(e){return e=Gs(e),e.tag=3,e}function Tm(e,s,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var u=n.value;e.payload=function(){return i(u)},e.callback=function(){Dm(s,a,n)}}var j=a.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(e.callback=function(){Dm(s,a,n),typeof i!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var D=n.stack;this.componentDidCatch(n.value,{componentStack:D!==null?D:""})})}function $p(e,s,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(s=a.alternate,s!==null&&tl(s,a,i,!0),a=ts.current,a!==null){switch(a.tag){case 13:return fs===null?mo():a.alternate===null&&et===0&&(et=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===pc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([n]):s.add(n),ho(e,n,i)),!1;case 22:return a.flags|=65536,n===pc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([n]):a.add(n)),ho(e,n,i)),!1}throw Error(o(435,a.tag))}return ho(e,n,i),mo(),!1}if(Ue)return s=ts.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=i,n!==oc&&(e=Error(o(422),{cause:n}),el(Kt(e,a)))):(n!==oc&&(s=Error(o(423),{cause:n}),el(Kt(s,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Kt(n,a),i=$c(e.stateNode,n,i),vc(e,i),et!==4&&(et=2)),!1;var u=Error(o(520),{cause:n});if(u=Kt(u,a),bl===null?bl=[u]:bl.push(u),et!==4&&(et=2),s===null)return!0;n=Kt(n,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=$c(a.stateNode,n,e),vc(a,e),!1;case 1:if(s=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Am(i),Tm(i,e,a,n),vc(a,i),!1}a=a.return}while(a!==null);return!1}var Em=Error(o(461)),ht=!1;function yt(e,s,a,n){s.child=e===null?jm(s,null,a,n):mn(s,e.child,a,n)}function zm(e,s,a,n,i){a=a.render;var u=s.ref;if("ref"in n){var j={};for(var D in n)D!=="ref"&&(j[D]=n[D])}else j=n;return Ta(s),n=Sc(e,s,a,j,u,i),D=Cc(),e!==null&&!ht?(kc(e,s,i),zs(e,s,i)):(Ue&&D&&rc(s),s.flags|=1,yt(e,s,n,i),s.child)}function Mm(e,s,a,n,i){if(e===null){var u=a.type;return typeof u=="function"&&!nc(u)&&u.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=u,Om(e,s,u,n,i)):(e=xi(a.type,null,n,s,s.mode,i),e.ref=s.ref,e.return=s,s.child=e)}if(u=e.child,!Fc(e,i)){var j=u.memoizedProps;if(a=a.compare,a=a!==null?a:Zn,a(j,n)&&e.ref===s.ref)return zs(e,s,i)}return s.flags|=1,e=Ss(u,n),e.ref=s.ref,e.return=s,s.child=e}function Om(e,s,a,n,i){if(e!==null){var u=e.memoizedProps;if(Zn(u,n)&&e.ref===s.ref)if(ht=!1,s.pendingProps=n=u,Fc(e,i))(e.flags&131072)!==0&&(ht=!0);else return s.lanes=e.lanes,zs(e,s,i)}return Qc(e,s,a,n,i)}function Lm(e,s,a){var n=s.pendingProps,i=n.children,u=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((s.flags&128)!==0){if(n=u!==null?u.baseLanes|a:a,e!==null){for(i=s.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;s.childLanes=u&~n}else s.childLanes=0,s.child=null;return qm(e,s,n,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&ji(s,u!==null?u.cachePool:null),u!==null?Od(s,u):bc(),bm(s);else return s.lanes=s.childLanes=536870912,qm(e,s,u!==null?u.baseLanes|a:a,a)}else u!==null?(ji(s,u.cachePool),Od(s,u),Fs(),s.memoizedState=null):(e!==null&&ji(s,null),bc(),Fs());return yt(e,s,i,a),s.child}function qm(e,s,a,n){var i=xc();return i=i===null?null:{parent:dt._currentValue,pool:i},s.memoizedState={baseLanes:a,cachePool:i},e!==null&&ji(s,null),bc(),bm(s),e!==null&&tl(e,s,n,!0),null}function _i(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function Qc(e,s,a,n,i){return Ta(s),a=Sc(e,s,a,n,void 0,i),n=Cc(),e!==null&&!ht?(kc(e,s,i),zs(e,s,i)):(Ue&&n&&rc(s),s.flags|=1,yt(e,s,a,i),s.child)}function Bm(e,s,a,n,i,u){return Ta(s),s.updateQueue=null,a=qd(s,n,a,i),Ld(e),n=Cc(),e!==null&&!ht?(kc(e,s,u),zs(e,s,u)):(Ue&&n&&rc(s),s.flags|=1,yt(e,s,a,u),s.child)}function _m(e,s,a,n,i){if(Ta(s),s.stateNode===null){var u=tn,j=a.contextType;typeof j=="object"&&j!==null&&(u=St(j)),u=new a(n,u),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Hc,s.stateNode=u,u._reactInternals=s,u=s.stateNode,u.props=n,u.state=s.memoizedState,u.refs={},gc(s),j=a.contextType,u.context=typeof j=="object"&&j!==null?St(j):tn,u.state=s.memoizedState,j=a.getDerivedStateFromProps,typeof j=="function"&&(Uc(s,a,j,n),u.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(j=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),j!==u.state&&Hc.enqueueReplaceState(u,u.state,null),cl(s,n,u,i),rl(),u.state=s.memoizedState),typeof u.componentDidMount=="function"&&(s.flags|=4194308),n=!0}else if(e===null){u=s.stateNode;var D=s.memoizedProps,R=Ma(a,D);u.props=R;var ee=u.context,ce=a.contextType;j=tn,typeof ce=="object"&&ce!==null&&(j=St(ce));var me=a.getDerivedStateFromProps;ce=typeof me=="function"||typeof u.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,ce||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(D||ee!==j)&&wm(s,u,n,j),Is=!1;var se=s.memoizedState;u.state=se,cl(s,n,u,i),rl(),ee=s.memoizedState,D||se!==ee||Is?(typeof me=="function"&&(Uc(s,a,me,n),ee=s.memoizedState),(R=Is||Nm(s,a,R,n,se,ee,j))?(ce||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=ee),u.props=n,u.state=ee,u.context=j,n=R):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{u=s.stateNode,yc(e,s),j=s.memoizedProps,ce=Ma(a,j),u.props=ce,me=s.pendingProps,se=u.context,ee=a.contextType,R=tn,typeof ee=="object"&&ee!==null&&(R=St(ee)),D=a.getDerivedStateFromProps,(ee=typeof D=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(j!==me||se!==R)&&wm(s,u,n,R),Is=!1,se=s.memoizedState,u.state=se,cl(s,n,u,i),rl();var ae=s.memoizedState;j!==me||se!==ae||Is||e!==null&&e.dependencies!==null&&yi(e.dependencies)?(typeof D=="function"&&(Uc(s,a,D,n),ae=s.memoizedState),(ce=Is||Nm(s,a,ce,n,se,ae,R)||e!==null&&e.dependencies!==null&&yi(e.dependencies))?(ee||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,ae,R),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,ae,R)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||j===e.memoizedProps&&se===e.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&se===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=ae),u.props=n,u.state=ae,u.context=R,n=ce):(typeof u.componentDidUpdate!="function"||j===e.memoizedProps&&se===e.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&se===e.memoizedState||(s.flags|=1024),n=!1)}return u=n,_i(e,s),n=(s.flags&128)!==0,u||n?(u=s.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:u.render(),s.flags|=1,e!==null&&n?(s.child=mn(s,e.child,null,i),s.child=mn(s,null,a,i)):yt(e,s,a,i),s.memoizedState=u.state,e=s.child):e=zs(e,s,i),e}function Rm(e,s,a,n){return Wn(),s.flags|=256,yt(e,s,a,n),s.child}var Vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(e){return{baseLanes:e,cachePool:Cd()}}function Gc(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=ss),e}function Um(e,s,a){var n=s.pendingProps,i=!1,u=(s.flags&128)!==0,j;if((j=u)||(j=e!==null&&e.memoizedState===null?!1:(mt.current&2)!==0),j&&(i=!0,s.flags&=-129),j=(s.flags&32)!==0,s.flags&=-33,e===null){if(Ue){if(i?Xs(s):Fs(),Ue){var D=We,R;if(R=D){e:{for(R=D,D=ms;R.nodeType!==8;){if(!D){D=null;break e}if(R=os(R.nextSibling),R===null){D=null;break e}}D=R}D!==null?(s.memoizedState={dehydrated:D,treeContext:Sa!==null?{id:Cs,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},R=$t(18,null,null,0),R.stateNode=D,R.return=s,s.child=R,kt=s,We=null,R=!0):R=!1}R||Da(s)}if(D=s.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return To(D)?s.lanes=32:s.lanes=536870912,null;Es(s)}return D=n.children,n=n.fallback,i?(Fs(),i=s.mode,D=Ri({mode:"hidden",children:D},i),n=wa(n,i,a,null),D.return=s,n.return=s,D.sibling=n,s.child=D,i=s.child,i.memoizedState=Ic(a),i.childLanes=Gc(e,j,a),s.memoizedState=Vc,n):(Xs(s),Pc(s,D))}if(R=e.memoizedState,R!==null&&(D=R.dehydrated,D!==null)){if(u)s.flags&256?(Xs(s),s.flags&=-257,s=Yc(e,s,a)):s.memoizedState!==null?(Fs(),s.child=e.child,s.flags|=128,s=null):(Fs(),i=n.fallback,D=s.mode,n=Ri({mode:"visible",children:n.children},D),i=wa(i,D,a,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,mn(s,e.child,null,a),n=s.child,n.memoizedState=Ic(a),n.childLanes=Gc(e,j,a),s.memoizedState=Vc,s=i);else if(Xs(s),To(D)){if(j=D.nextSibling&&D.nextSibling.dataset,j)var ee=j.dgst;j=ee,n=Error(o(419)),n.stack="",n.digest=j,el({value:n,source:null,stack:null}),s=Yc(e,s,a)}else if(ht||tl(e,s,a,!1),j=(a&e.childLanes)!==0,ht||j){if(j=Pe,j!==null&&(n=a&-a,n=(n&42)!==0?1:Tr(n),n=(n&(j.suspendedLanes|a))!==0?0:n,n!==0&&n!==R.retryLane))throw R.retryLane=n,en(e,n),Pt(j,e,n),Em;D.data==="$?"||mo(),s=Yc(e,s,a)}else D.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=R.treeContext,We=os(D.nextSibling),kt=s,Ue=!0,ka=null,ms=!1,e!==null&&(Wt[es++]=Cs,Wt[es++]=ks,Wt[es++]=Sa,Cs=e.id,ks=e.overflow,Sa=s),s=Pc(s,n.children),s.flags|=4096);return s}return i?(Fs(),i=n.fallback,D=s.mode,R=e.child,ee=R.sibling,n=Ss(R,{mode:"hidden",children:n.children}),n.subtreeFlags=R.subtreeFlags&65011712,ee!==null?i=Ss(ee,i):(i=wa(i,D,a,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,D=e.child.memoizedState,D===null?D=Ic(a):(R=D.cachePool,R!==null?(ee=dt._currentValue,R=R.parent!==ee?{parent:ee,pool:ee}:R):R=Cd(),D={baseLanes:D.baseLanes|a,cachePool:R}),i.memoizedState=D,i.childLanes=Gc(e,j,a),s.memoizedState=Vc,n):(Xs(s),a=e.child,e=a.sibling,a=Ss(a,{mode:"visible",children:n.children}),a.return=s,a.sibling=null,e!==null&&(j=s.deletions,j===null?(s.deletions=[e],s.flags|=16):j.push(e)),s.child=a,s.memoizedState=null,a)}function Pc(e,s){return s=Ri({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Ri(e,s){return e=$t(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yc(e,s,a){return mn(s,e.child,null,a),e=Pc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Hm(e,s,a){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),dc(e.return,s,a)}function Xc(e,s,a,n,i){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(u.isBackwards=s,u.rendering=null,u.renderingStartTime=0,u.last=n,u.tail=a,u.tailMode=i)}function $m(e,s,a){var n=s.pendingProps,i=n.revealOrder,u=n.tail;if(yt(e,s,n.children,a),n=mt.current,(n&2)!==0)n=n&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hm(e,a,s);else if(e.tag===19)Hm(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(F(mt,n),i){case"forwards":for(a=s.child,i=null;a!==null;)e=a.alternate,e!==null&&Li(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=s.child,s.child=null):(i=a.sibling,a.sibling=null),Xc(s,!1,i,a,u);break;case"backwards":for(a=null,i=s.child,s.child=null;i!==null;){if(e=i.alternate,e!==null&&Li(e)===null){s.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Xc(s,!0,a,null,u);break;case"together":Xc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zs(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),ea|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(tl(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(o(153));if(s.child!==null){for(e=s.child,a=Ss(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Ss(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function Fc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&yi(e)))}function Qp(e,s,a){switch(s.tag){case 3:te(s,s.stateNode.containerInfo),Vs(s,dt,e.memoizedState.cache),Wn();break;case 27:case 5:oe(s);break;case 4:te(s,s.stateNode.containerInfo);break;case 10:Vs(s,s.type,s.memoizedProps.value);break;case 13:var n=s.memoizedState;if(n!==null)return n.dehydrated!==null?(Xs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Um(e,s,a):(Xs(s),e=zs(e,s,a),e!==null?e.sibling:null);Xs(s);break;case 19:var i=(e.flags&128)!==0;if(n=(a&s.childLanes)!==0,n||(tl(e,s,a,!1),n=(a&s.childLanes)!==0),i){if(n)return $m(e,s,a);s.flags|=128}if(i=s.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),F(mt,mt.current),n)break;return null;case 22:case 23:return s.lanes=0,Lm(e,s,a);case 24:Vs(s,dt,e.memoizedState.cache)}return zs(e,s,a)}function Qm(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)ht=!0;else{if(!Fc(e,a)&&(s.flags&128)===0)return ht=!1,Qp(e,s,a);ht=(e.flags&131072)!==0}else ht=!1,Ue&&(s.flags&1048576)!==0&&yd(s,gi,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var n=s.elementType,i=n._init;if(n=i(n._payload),s.type=n,typeof n=="function")nc(n)?(e=Ma(n,e),s.tag=1,s=_m(null,s,n,e,a)):(s.tag=0,s=Qc(null,s,n,e,a));else{if(n!=null){if(i=n.$$typeof,i===L){s.tag=11,s=zm(null,s,n,e,a);break e}else if(i===X){s.tag=14,s=Mm(null,s,n,e,a);break e}}throw s=H(n)||n,Error(o(306,s,""))}}return s;case 0:return Qc(e,s,s.type,s.pendingProps,a);case 1:return n=s.type,i=Ma(n,s.pendingProps),_m(e,s,n,i,a);case 3:e:{if(te(s,s.stateNode.containerInfo),e===null)throw Error(o(387));n=s.pendingProps;var u=s.memoizedState;i=u.element,yc(e,s),cl(s,n,null,a);var j=s.memoizedState;if(n=j.cache,Vs(s,dt,n),n!==u.cache&&mc(s,[dt],a,!0),rl(),n=j.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:j.cache},s.updateQueue.baseState=u,s.memoizedState=u,s.flags&256){s=Rm(e,s,n,a);break e}else if(n!==i){i=Kt(Error(o(424)),s),el(i),s=Rm(e,s,n,a);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(We=os(e.firstChild),kt=s,Ue=!0,ka=null,ms=!0,a=jm(s,null,n,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wn(),n===i){s=zs(e,s,a);break e}yt(e,s,n,a)}s=s.child}return s;case 26:return _i(e,s),e===null?(a=Yf(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ue||(a=s.type,e=s.pendingProps,n=Ji(ne.current).createElement(a),n[wt]=s,n[At]=e,jt(n,a,e),ft(n),s.stateNode=n):s.memoizedState=Yf(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return oe(s),e===null&&Ue&&(n=s.stateNode=If(s.type,s.pendingProps,ne.current),kt=s,ms=!0,i=We,na(s.type)?(Eo=i,We=os(n.firstChild)):We=i),yt(e,s,s.pendingProps.children,a),_i(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Ue&&((i=n=We)&&(n=pg(n,s.type,s.pendingProps,ms),n!==null?(s.stateNode=n,kt=s,We=os(n.firstChild),ms=!1,i=!0):i=!1),i||Da(s)),oe(s),i=s.type,u=s.pendingProps,j=e!==null?e.memoizedProps:null,n=u.children,ko(i,u)?n=null:j!==null&&ko(i,j)&&(s.flags|=32),s.memoizedState!==null&&(i=Sc(e,s,Lp,null,null,a),El._currentValue=i),_i(e,s),yt(e,s,n,a),s.child;case 6:return e===null&&Ue&&((e=a=We)&&(a=gg(a,s.pendingProps,ms),a!==null?(s.stateNode=a,kt=s,We=null,e=!0):e=!1),e||Da(s)),null;case 13:return Um(e,s,a);case 4:return te(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=mn(s,null,n,a):yt(e,s,n,a),s.child;case 11:return zm(e,s,s.type,s.pendingProps,a);case 7:return yt(e,s,s.pendingProps,a),s.child;case 8:return yt(e,s,s.pendingProps.children,a),s.child;case 12:return yt(e,s,s.pendingProps.children,a),s.child;case 10:return n=s.pendingProps,Vs(s,s.type,n.value),yt(e,s,n.children,a),s.child;case 9:return i=s.type._context,n=s.pendingProps.children,Ta(s),i=St(i),n=n(i),s.flags|=1,yt(e,s,n,a),s.child;case 14:return Mm(e,s,s.type,s.pendingProps,a);case 15:return Om(e,s,s.type,s.pendingProps,a);case 19:return $m(e,s,a);case 31:return n=s.pendingProps,a=s.mode,n={mode:n.mode,children:n.children},e===null?(a=Ri(n,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ss(e.child,n),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Lm(e,s,a);case 24:return Ta(s),n=St(dt),e===null?(i=xc(),i===null&&(i=Pe,u=fc(),i.pooledCache=u,u.refCount++,u!==null&&(i.pooledCacheLanes|=a),i=u),s.memoizedState={parent:n,cache:i},gc(s),Vs(s,dt,i)):((e.lanes&a)!==0&&(yc(e,s),cl(s,null,null,a),rl()),i=e.memoizedState,u=s.memoizedState,i.parent!==n?(i={parent:n,cache:n},s.memoizedState=i,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=i),Vs(s,dt,n)):(n=u.cache,Vs(s,dt,n),n!==i.cache&&mc(s,[dt],a,!0))),yt(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ms(e){e.flags|=4}function Vm(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jf(s)){if(s=ts.current,s!==null&&((Be&4194048)===Be?fs!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==fs))throw ll=pc,kd;e.flags|=8192}}function Ui(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?bu():536870912,e.lanes|=s,pn|=s)}function xl(e,s){if(!Ue)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ze(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(s)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,s}function Vp(e,s,a){var n=s.pendingProps;switch(cc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return Ze(s),null;case 3:return a=s.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),As(dt),pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Jn(s)?Ms(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bd())),Ze(s),null;case 26:return a=s.memoizedState,e===null?(Ms(s),a!==null?(Ze(s),Vm(s,a)):(Ze(s),s.flags&=-16777217)):a?a!==e.memoizedState?(Ms(s),Ze(s),Vm(s,a)):(Ze(s),s.flags&=-16777217):(e.memoizedProps!==n&&Ms(s),Ze(s),s.flags&=-16777217),null;case 27:ye(s),a=ne.current;var i=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==n&&Ms(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return Ze(s),null}e=ie.current,Jn(s)?vd(s):(e=If(i,n,a),s.stateNode=e,Ms(s))}return Ze(s),null;case 5:if(ye(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==n&&Ms(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return Ze(s),null}if(e=ie.current,Jn(s))vd(s);else{switch(i=Ji(ne.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?i.createElement(a,{is:n.is}):i.createElement(a)}}e[wt]=s,e[At]=n;e:for(i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s.stateNode=e;e:switch(jt(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ms(s)}}return Ze(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==n&&Ms(s);else{if(typeof n!="string"&&s.stateNode===null)throw Error(o(166));if(e=ne.current,Jn(s)){if(e=s.stateNode,a=s.memoizedProps,n=null,i=kt,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[wt]=s,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||_f(e.nodeValue,a)),e||Da(s)}else e=Ji(e).createTextNode(n),e[wt]=s,s.stateNode=e}return Ze(s),null;case 13:if(n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Jn(s),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[wt]=s}else Wn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),i=!1}else i=bd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return s.flags&256?(Es(s),s):(Es(s),null)}if(Es(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=s.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var u=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==i&&(n.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),Ui(s,s.updateQueue),Ze(s),null;case 4:return pe(),e===null&&bo(s.stateNode.containerInfo),Ze(s),null;case 10:return As(s.type),Ze(s),null;case 19:if(W(mt),i=s.memoizedState,i===null)return Ze(s),null;if(n=(s.flags&128)!==0,u=i.rendering,u===null)if(n)xl(i,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(u=Li(e),u!==null){for(s.flags|=128,xl(i,!1),e=u.updateQueue,s.updateQueue=e,Ui(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)gd(a,e),a=a.sibling;return F(mt,mt.current&1|2),s.child}e=e.sibling}i.tail!==null&&ue()>Qi&&(s.flags|=128,n=!0,xl(i,!1),s.lanes=4194304)}else{if(!n)if(e=Li(u),e!==null){if(s.flags|=128,n=!0,e=e.updateQueue,s.updateQueue=e,Ui(s,e),xl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!Ue)return Ze(s),null}else 2*ue()-i.renderingStartTime>Qi&&a!==536870912&&(s.flags|=128,n=!0,xl(i,!1),s.lanes=4194304);i.isBackwards?(u.sibling=s.child,s.child=u):(e=i.last,e!==null?e.sibling=u:s.child=u,i.last=u)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=ue(),s.sibling=null,e=mt.current,F(mt,n?e&1|2:e&1),s):(Ze(s),null);case 22:case 23:return Es(s),Nc(),n=s.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(s.flags|=8192):n&&(s.flags|=8192),n?(a&536870912)!==0&&(s.flags&128)===0&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),a=s.updateQueue,a!==null&&Ui(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(s.flags|=2048),e!==null&&W(Ea),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),As(dt),Ze(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Ip(e,s){switch(cc(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return As(dt),pe(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return ye(s),null;case 13:if(Es(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Wn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return W(mt),null;case 4:return pe(),null;case 10:return As(s.type),null;case 22:case 23:return Es(s),Nc(),e!==null&&W(Ea),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return As(dt),null;case 25:return null;default:return null}}function Im(e,s){switch(cc(s),s.tag){case 3:As(dt),pe();break;case 26:case 27:case 5:ye(s);break;case 4:pe();break;case 13:Es(s);break;case 19:W(mt);break;case 10:As(s.type);break;case 22:case 23:Es(s),Nc(),e!==null&&W(Ea);break;case 24:As(dt)}}function pl(e,s){try{var a=s.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var u=a.create,j=a.inst;n=u(),j.destroy=n}a=a.next}while(a!==i)}}catch(D){Ge(s,s.return,D)}}function Zs(e,s,a){try{var n=s.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var u=i.next;n=u;do{if((n.tag&e)===e){var j=n.inst,D=j.destroy;if(D!==void 0){j.destroy=void 0,i=s;var R=a,ee=D;try{ee()}catch(ce){Ge(i,R,ce)}}}n=n.next}while(n!==u)}}catch(ce){Ge(s,s.return,ce)}}function Gm(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{Md(s,a)}catch(n){Ge(e,e.return,n)}}}function Pm(e,s,a){a.props=Ma(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Ge(e,s,n)}}function gl(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){Ge(e,s,i)}}function hs(e,s){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){Ge(e,s,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Ge(e,s,i)}else a.current=null}function Ym(e){var s=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){Ge(e,e.return,i)}}function Zc(e,s,a){try{var n=e.stateNode;dg(n,e.type,a,s),n[At]=s}catch(i){Ge(e,e.return,i)}}function Xm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&na(e.type)||e.tag===4}function Kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&na(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,s,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ki));else if(n!==4&&(n===27&&na(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(Jc(e,s,a),e=e.sibling;e!==null;)Jc(e,s,a),e=e.sibling}function Hi(e,s,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(n!==4&&(n===27&&na(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Hi(e,s,a),e=e.sibling;e!==null;)Hi(e,s,a),e=e.sibling}function Fm(e){var s=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=s.attributes;i.length;)s.removeAttributeNode(i[0]);jt(s,n,a),s[wt]=e,s[At]=a}catch(u){Ge(e,e.return,u)}}var Os=!1,lt=!1,Wc=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Gp(e,s){if(e=e.containerInfo,So=nr,e=rd(e),Kr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var j=0,D=-1,R=-1,ee=0,ce=0,me=e,se=null;t:for(;;){for(var ae;me!==a||i!==0&&me.nodeType!==3||(D=j+i),me!==u||n!==0&&me.nodeType!==3||(R=j+n),me.nodeType===3&&(j+=me.nodeValue.length),(ae=me.firstChild)!==null;)se=me,me=ae;for(;;){if(me===e)break t;if(se===a&&++ee===i&&(D=j),se===u&&++ce===n&&(R=j),(ae=me.nextSibling)!==null)break;me=se,se=me.parentNode}me=ae}a=D===-1||R===-1?null:{start:D,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Co={focusedElem:e,selectionRange:a},nr=!1,xt=s;xt!==null;)if(s=xt,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,xt=e;else for(;xt!==null;){switch(s=xt,u=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=s,i=u.memoizedProps,u=u.memoizedState,n=a.stateNode;try{var Ae=Ma(a.type,i,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(Ae,u),n.__reactInternalSnapshotBeforeUpdate=e}catch(ke){Ge(a,a.return,ke)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)Ao(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ao(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=s.sibling,e!==null){e.return=s.return,xt=e;break}xt=s.return}}function Km(e,s,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Ks(e,a),n&4&&pl(5,a);break;case 1:if(Ks(e,a),n&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(j){Ge(a,a.return,j)}else{var i=Ma(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(i,s,e.__reactInternalSnapshotBeforeUpdate)}catch(j){Ge(a,a.return,j)}}n&64&&Gm(a),n&512&&gl(a,a.return);break;case 3:if(Ks(e,a),n&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Md(e,s)}catch(j){Ge(a,a.return,j)}}break;case 27:s===null&&n&4&&Fm(a);case 26:case 5:Ks(e,a),s===null&&n&4&&Ym(a),n&512&&gl(a,a.return);break;case 12:Ks(e,a);break;case 13:Ks(e,a),n&4&&ef(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=eg.bind(null,a),yg(e,a))));break;case 22:if(n=a.memoizedState!==null||Os,!n){s=s!==null&&s.memoizedState!==null||lt,i=Os;var u=lt;Os=n,(lt=s)&&!u?Js(e,a,(a.subtreeFlags&8772)!==0):Ks(e,a),Os=i,lt=u}break;case 30:break;default:Ks(e,a)}}function Jm(e){var s=e.alternate;s!==null&&(e.alternate=null,Jm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Mr(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,zt=!1;function Ls(e,s,a){for(a=a.child;a!==null;)Wm(e,s,a),a=a.sibling}function Wm(e,s,a){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Rn,a)}catch{}switch(a.tag){case 26:lt||hs(a,s),Ls(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:lt||hs(a,s);var n=Xe,i=zt;na(a.type)&&(Xe=a.stateNode,zt=!1),Ls(e,s,a),kl(a.stateNode),Xe=n,zt=i;break;case 5:lt||hs(a,s);case 6:if(n=Xe,i=zt,Xe=null,Ls(e,s,a),Xe=n,zt=i,Xe!==null)if(zt)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(a.stateNode)}catch(u){Ge(a,s,u)}else try{Xe.removeChild(a.stateNode)}catch(u){Ge(a,s,u)}break;case 18:Xe!==null&&(zt?(e=Xe,Qf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ll(e)):Qf(Xe,a.stateNode));break;case 4:n=Xe,i=zt,Xe=a.stateNode.containerInfo,zt=!0,Ls(e,s,a),Xe=n,zt=i;break;case 0:case 11:case 14:case 15:lt||Zs(2,a,s),lt||Zs(4,a,s),Ls(e,s,a);break;case 1:lt||(hs(a,s),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Pm(a,s,n)),Ls(e,s,a);break;case 21:Ls(e,s,a);break;case 22:lt=(n=lt)||a.memoizedState!==null,Ls(e,s,a),lt=n;break;default:Ls(e,s,a)}}function ef(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ll(e)}catch(a){Ge(s,s.return,a)}}function Pp(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Zm),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Zm),s;default:throw Error(o(435,e.tag))}}function eo(e,s){var a=Pp(e);s.forEach(function(n){var i=tg.bind(null,e,n);a.has(n)||(a.add(n),n.then(i,i))})}function Qt(e,s){var a=s.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],u=e,j=s,D=j;e:for(;D!==null;){switch(D.tag){case 27:if(na(D.type)){Xe=D.stateNode,zt=!1;break e}break;case 5:Xe=D.stateNode,zt=!1;break e;case 3:case 4:Xe=D.stateNode.containerInfo,zt=!0;break e}D=D.return}if(Xe===null)throw Error(o(160));Wm(u,j,i),Xe=null,zt=!1,u=i.alternate,u!==null&&(u.return=null),i.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)tf(s,e),s=s.sibling}var cs=null;function tf(e,s){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(s,e),Vt(e),n&4&&(Zs(3,e,e.return),pl(3,e),Zs(5,e,e.return));break;case 1:Qt(s,e),Vt(e),n&512&&(lt||a===null||hs(a,a.return)),n&64&&Os&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=cs;if(Qt(s,e),Vt(e),n&512&&(lt||a===null||hs(a,a.return)),n&4){var u=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":u=i.getElementsByTagName("title")[0],(!u||u[$n]||u[wt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=i.createElement(n),i.head.insertBefore(u,i.querySelector("head > title"))),jt(u,n,a),u[wt]=e,ft(u),n=u;break e;case"link":var j=Zf("link","href",i).get(n+(a.href||""));if(j){for(var D=0;D<j.length;D++)if(u=j[D],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){j.splice(D,1);break t}}u=i.createElement(n),jt(u,n,a),i.head.appendChild(u);break;case"meta":if(j=Zf("meta","content",i).get(n+(a.content||""))){for(D=0;D<j.length;D++)if(u=j[D],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){j.splice(D,1);break t}}u=i.createElement(n),jt(u,n,a),i.head.appendChild(u);break;default:throw Error(o(468,n))}u[wt]=e,ft(u),n=u}e.stateNode=n}else Kf(i,e.type,e.stateNode);else e.stateNode=Ff(i,n,e.memoizedProps);else u!==n?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,n===null?Kf(i,e.type,e.stateNode):Ff(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Qt(s,e),Vt(e),n&512&&(lt||a===null||hs(a,a.return)),a!==null&&n&4&&Zc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Qt(s,e),Vt(e),n&512&&(lt||a===null||hs(a,a.return)),e.flags&32){i=e.stateNode;try{Ya(i,"")}catch(ae){Ge(e,e.return,ae)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Zc(e,i,a!==null?a.memoizedProps:i)),n&1024&&(Wc=!0);break;case 6:if(Qt(s,e),Vt(e),n&4){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(ae){Ge(e,e.return,ae)}}break;case 3:if(tr=null,i=cs,cs=Wi(s.containerInfo),Qt(s,e),cs=i,Vt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(s.containerInfo)}catch(ae){Ge(e,e.return,ae)}Wc&&(Wc=!1,sf(e));break;case 4:n=cs,cs=Wi(e.stateNode.containerInfo),Qt(s,e),Vt(e),cs=n;break;case 12:Qt(s,e),Vt(e);break;case 13:Qt(s,e),Vt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(io=ue()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,eo(e,n)));break;case 22:i=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,ee=Os,ce=lt;if(Os=ee||i,lt=ce||R,Qt(s,e),lt=ce,Os=ee,Vt(e),n&8192)e:for(s=e.stateNode,s._visibility=i?s._visibility&-2:s._visibility|1,i&&(a===null||R||Os||lt||Oa(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){R=a=s;try{if(u=R.stateNode,i)j=u.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{D=R.stateNode;var me=R.memoizedProps.style,se=me!=null&&me.hasOwnProperty("display")?me.display:null;D.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ae){Ge(R,R.return,ae)}}}else if(s.tag===6){if(a===null){R=s;try{R.stateNode.nodeValue=i?"":R.memoizedProps}catch(ae){Ge(R,R.return,ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,eo(e,a))));break;case 19:Qt(s,e),Vt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,eo(e,n)));break;case 30:break;case 21:break;default:Qt(s,e),Vt(e)}}function Vt(e){var s=e.flags;if(s&2){try{for(var a,n=e.return;n!==null;){if(Xm(n)){a=n;break}n=n.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var i=a.stateNode,u=Kc(e);Hi(e,u,i);break;case 5:var j=a.stateNode;a.flags&32&&(Ya(j,""),a.flags&=-33);var D=Kc(e);Hi(e,D,j);break;case 3:case 4:var R=a.stateNode.containerInfo,ee=Kc(e);Jc(e,ee,R);break;default:throw Error(o(161))}}catch(ce){Ge(e,e.return,ce)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function sf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;sf(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Ks(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Km(e,s.alternate,s),s=s.sibling}function Oa(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Zs(4,s,s.return),Oa(s);break;case 1:hs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Pm(s,s.return,a),Oa(s);break;case 27:kl(s.stateNode);case 26:case 5:hs(s,s.return),Oa(s);break;case 22:s.memoizedState===null&&Oa(s);break;case 30:Oa(s);break;default:Oa(s)}e=e.sibling}}function Js(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var n=s.alternate,i=e,u=s,j=u.flags;switch(u.tag){case 0:case 11:case 15:Js(i,u,a),pl(4,u);break;case 1:if(Js(i,u,a),n=u,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(ee){Ge(n,n.return,ee)}if(n=u,i=n.updateQueue,i!==null){var D=n.stateNode;try{var R=i.shared.hiddenCallbacks;if(R!==null)for(i.shared.hiddenCallbacks=null,i=0;i<R.length;i++)zd(R[i],D)}catch(ee){Ge(n,n.return,ee)}}a&&j&64&&Gm(u),gl(u,u.return);break;case 27:Fm(u);case 26:case 5:Js(i,u,a),a&&n===null&&j&4&&Ym(u),gl(u,u.return);break;case 12:Js(i,u,a);break;case 13:Js(i,u,a),a&&j&4&&ef(i,u);break;case 22:u.memoizedState===null&&Js(i,u,a),gl(u,u.return);break;case 30:break;default:Js(i,u,a)}s=s.sibling}}function to(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&sl(a))}function so(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&sl(e))}function xs(e,s,a,n){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)af(e,s,a,n),s=s.sibling}function af(e,s,a,n){var i=s.flags;switch(s.tag){case 0:case 11:case 15:xs(e,s,a,n),i&2048&&pl(9,s);break;case 1:xs(e,s,a,n);break;case 3:xs(e,s,a,n),i&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&sl(e)));break;case 12:if(i&2048){xs(e,s,a,n),e=s.stateNode;try{var u=s.memoizedProps,j=u.id,D=u.onPostCommit;typeof D=="function"&&D(j,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ge(s,s.return,R)}}else xs(e,s,a,n);break;case 13:xs(e,s,a,n);break;case 23:break;case 22:u=s.stateNode,j=s.alternate,s.memoizedState!==null?u._visibility&2?xs(e,s,a,n):yl(e,s):u._visibility&2?xs(e,s,a,n):(u._visibility|=2,fn(e,s,a,n,(s.subtreeFlags&10256)!==0)),i&2048&&to(j,s);break;case 24:xs(e,s,a,n),i&2048&&so(s.alternate,s);break;default:xs(e,s,a,n)}}function fn(e,s,a,n,i){for(i=i&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var u=e,j=s,D=a,R=n,ee=j.flags;switch(j.tag){case 0:case 11:case 15:fn(u,j,D,R,i),pl(8,j);break;case 23:break;case 22:var ce=j.stateNode;j.memoizedState!==null?ce._visibility&2?fn(u,j,D,R,i):yl(u,j):(ce._visibility|=2,fn(u,j,D,R,i)),i&&ee&2048&&to(j.alternate,j);break;case 24:fn(u,j,D,R,i),i&&ee&2048&&so(j.alternate,j);break;default:fn(u,j,D,R,i)}s=s.sibling}}function yl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,n=s,i=n.flags;switch(n.tag){case 22:yl(a,n),i&2048&&to(n.alternate,n);break;case 24:yl(a,n),i&2048&&so(n.alternate,n);break;default:yl(a,n)}s=s.sibling}}var vl=8192;function hn(e){if(e.subtreeFlags&vl)for(e=e.child;e!==null;)nf(e),e=e.sibling}function nf(e){switch(e.tag){case 26:hn(e),e.flags&vl&&e.memoizedState!==null&&zg(cs,e.memoizedState,e.memoizedProps);break;case 5:hn(e);break;case 3:case 4:var s=cs;cs=Wi(e.stateNode.containerInfo),hn(e),cs=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=vl,vl=16777216,hn(e),vl=s):hn(e));break;default:hn(e)}}function lf(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function jl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];xt=n,cf(n,e)}lf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rf(e),e=e.sibling}function rf(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&Zs(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,$i(e)):jl(e);break;default:jl(e)}}function $i(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];xt=n,cf(n,e)}lf(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Zs(8,s,s.return),$i(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,$i(s));break;default:$i(s)}e=e.sibling}}function cf(e,s){for(;xt!==null;){var a=xt;switch(a.tag){case 0:case 11:case 15:Zs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:sl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,xt=n;else e:for(a=e;xt!==null;){n=xt;var i=n.sibling,u=n.return;if(Jm(n),n===a){xt=null;break e}if(i!==null){i.return=u,xt=i;break e}xt=u}}}var Yp={getCacheForType:function(e){var s=St(dt),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},Xp=typeof WeakMap=="function"?WeakMap:Map,He=0,Pe=null,Le=null,Be=0,$e=0,It=null,Ws=!1,xn=!1,ao=!1,qs=0,et=0,ea=0,La=0,no=0,ss=0,pn=0,bl=null,Mt=null,lo=!1,io=0,Qi=1/0,Vi=null,ta=null,vt=0,sa=null,gn=null,yn=0,ro=0,co=null,of=null,Nl=0,oo=null;function Gt(){if((He&2)!==0&&Be!==0)return Be&-Be;if(b.T!==null){var e=nn;return e!==0?e:go()}return Su()}function uf(){ss===0&&(ss=(Be&536870912)===0||Ue?ju():536870912);var e=ts.current;return e!==null&&(e.flags|=32),ss}function Pt(e,s,a){(e===Pe&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(vn(e,0),aa(e,Be,ss,!1)),Hn(e,a),((He&2)===0||e!==Pe)&&(e===Pe&&((He&2)===0&&(La|=a),et===4&&aa(e,Be,ss,!1)),ps(e))}function df(e,s,a){if((He&6)!==0)throw Error(o(327));var n=!a&&(s&124)===0&&(s&e.expiredLanes)===0||Un(e,s),i=n?Kp(e,s):fo(e,s,!0),u=n;do{if(i===0){xn&&!n&&aa(e,s,0,!1);break}else{if(a=e.current.alternate,u&&!Fp(a)){i=fo(e,s,!1),u=!1;continue}if(i===2){if(u=s,e.errorRecoveryDisabledLanes&u)var j=0;else j=e.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){s=j;e:{var D=e;i=bl;var R=D.current.memoizedState.isDehydrated;if(R&&(vn(D,j).flags|=256),j=fo(D,j,!1),j!==2){if(ao&&!R){D.errorRecoveryDisabledLanes|=u,La|=u,i=4;break e}u=Mt,Mt=i,u!==null&&(Mt===null?Mt=u:Mt.push.apply(Mt,u))}i=j}if(u=!1,i!==2)continue}}if(i===1){vn(e,0),aa(e,s,0,!0);break}e:{switch(n=e,u=i,u){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:aa(n,s,ss,!Ws);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(i=io+300-ue(),10<i)){if(aa(n,s,ss,!Ws),ei(n,0,!0)!==0)break e;n.timeoutHandle=Hf(mf.bind(null,n,a,Mt,Vi,lo,s,ss,La,pn,Ws,u,2,-0,0),i);break e}mf(n,a,Mt,Vi,lo,s,ss,La,pn,Ws,u,0,-0,0)}}break}while(!0);ps(e)}function mf(e,s,a,n,i,u,j,D,R,ee,ce,me,se,ae){if(e.timeoutHandle=-1,me=s.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Tl={stylesheets:null,count:0,unsuspend:Eg},nf(s),me=Mg(),me!==null)){e.cancelPendingCommit=me(vf.bind(null,e,s,u,a,n,i,j,D,R,ce,1,se,ae)),aa(e,u,j,!ee);return}vf(e,s,u,a,n,i,j,D,R)}function Fp(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],u=i.getSnapshot;i=i.value;try{if(!Ht(u(),i))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function aa(e,s,a,n){s&=~no,s&=~La,e.suspendedLanes|=s,e.pingedLanes&=~s,n&&(e.warmLanes|=s),n=e.expirationTimes;for(var i=s;0<i;){var u=31-Ut(i),j=1<<u;n[u]=-1,i&=~j}a!==0&&Nu(e,a,s)}function Ii(){return(He&6)===0?(wl(0),!1):!0}function uo(){if(Le!==null){if($e===0)var e=Le.return;else e=Le,Ds=Aa=null,Dc(e),dn=null,fl=0,e=Le;for(;e!==null;)Im(e.alternate,e),e=e.return;Le=null}}function vn(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,fg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),uo(),Pe=e,Le=a=Ss(e.current,null),Be=s,$e=0,It=null,Ws=!1,xn=Un(e,s),ao=!1,pn=ss=no=La=ea=et=0,Mt=bl=null,lo=!1,(s&8)!==0&&(s|=s&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=s;0<n;){var i=31-Ut(n),u=1<<i;s|=e[i],n&=~u}return qs=s,mi(),a}function ff(e,s){Me=null,b.H=zi,s===nl||s===bi?(s=Td(),$e=3):s===kd?(s=Td(),$e=4):$e=s===Em?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,It=s,Le===null&&(et=1,Bi(e,Kt(s,e.current)))}function hf(){var e=b.H;return b.H=zi,e===null?zi:e}function xf(){var e=b.A;return b.A=Yp,e}function mo(){et=4,Ws||(Be&4194048)!==Be&&ts.current!==null||(xn=!0),(ea&134217727)===0&&(La&134217727)===0||Pe===null||aa(Pe,Be,ss,!1)}function fo(e,s,a){var n=He;He|=2;var i=hf(),u=xf();(Pe!==e||Be!==s)&&(Vi=null,vn(e,s)),s=!1;var j=et;e:do try{if($e!==0&&Le!==null){var D=Le,R=It;switch($e){case 8:uo(),j=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(s=!0);var ee=$e;if($e=0,It=null,jn(e,D,R,ee),a&&xn){j=0;break e}break;default:ee=$e,$e=0,It=null,jn(e,D,R,ee)}}Zp(),j=et;break}catch(ce){ff(e,ce)}while(!0);return s&&e.shellSuspendCounter++,Ds=Aa=null,He=n,b.H=i,b.A=u,Le===null&&(Pe=null,Be=0,mi()),j}function Zp(){for(;Le!==null;)pf(Le)}function Kp(e,s){var a=He;He|=2;var n=hf(),i=xf();Pe!==e||Be!==s?(Vi=null,Qi=ue()+500,vn(e,s)):xn=Un(e,s);e:do try{if($e!==0&&Le!==null){s=Le;var u=It;t:switch($e){case 1:$e=0,It=null,jn(e,s,u,1);break;case 2:case 9:if(Dd(u)){$e=0,It=null,gf(s);break}s=function(){$e!==2&&$e!==9||Pe!==e||($e=7),ps(e)},u.then(s,s);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Dd(u)?($e=0,It=null,gf(s)):($e=0,It=null,jn(e,s,u,7));break;case 5:var j=null;switch(Le.tag){case 26:j=Le.memoizedState;case 5:case 27:var D=Le;if(!j||Jf(j)){$e=0,It=null;var R=D.sibling;if(R!==null)Le=R;else{var ee=D.return;ee!==null?(Le=ee,Gi(ee)):Le=null}break t}}$e=0,It=null,jn(e,s,u,5);break;case 6:$e=0,It=null,jn(e,s,u,6);break;case 8:uo(),et=6;break e;default:throw Error(o(462))}}Jp();break}catch(ce){ff(e,ce)}while(!0);return Ds=Aa=null,b.H=n,b.A=i,He=a,Le!==null?0:(Pe=null,Be=0,mi(),et)}function Jp(){for(;Le!==null&&!Re();)pf(Le)}function pf(e){var s=Qm(e.alternate,e,qs);e.memoizedProps=e.pendingProps,s===null?Gi(e):Le=s}function gf(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=Bm(a,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=Bm(a,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Dc(s);default:Im(a,s),s=Le=gd(s,qs),s=Qm(a,s,qs)}e.memoizedProps=e.pendingProps,s===null?Gi(e):Le=s}function jn(e,s,a,n){Ds=Aa=null,Dc(s),dn=null,fl=0;var i=s.return;try{if($p(e,i,s,a,Be)){et=1,Bi(e,Kt(a,e.current)),Le=null;return}}catch(u){if(i!==null)throw Le=i,u;et=1,Bi(e,Kt(a,e.current)),Le=null;return}s.flags&32768?(Ue||n===1?e=!0:xn||(Be&536870912)!==0?e=!1:(Ws=e=!0,(n===2||n===9||n===3||n===6)&&(n=ts.current,n!==null&&n.tag===13&&(n.flags|=16384))),yf(s,e)):Gi(s)}function Gi(e){var s=e;do{if((s.flags&32768)!==0){yf(s,Ws);return}e=s.return;var a=Vp(s.alternate,s,qs);if(a!==null){Le=a;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=e}while(s!==null);et===0&&(et=5)}function yf(e,s){do{var a=Ip(e.alternate,e);if(a!==null){a.flags&=32767,Le=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Le=e;return}Le=e=a}while(e!==null);et=6,Le=null}function vf(e,s,a,n,i,u,j,D,R){e.cancelPendingCommit=null;do Pi();while(vt!==0);if((He&6)!==0)throw Error(o(327));if(s!==null){if(s===e.current)throw Error(o(177));if(u=s.lanes|s.childLanes,u|=sc,Ex(e,a,u,j,D,R),e===Pe&&(Le=Pe=null,Be=0),gn=s,sa=e,yn=a,ro=u,co=i,of=n,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sg(rt,function(){return Sf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||n){n=b.T,b.T=null,i=E.p,E.p=2,j=He,He|=4;try{Gp(e,s,a)}finally{He=j,E.p=i,b.T=n}}vt=1,jf(),bf(),Nf()}}function jf(){if(vt===1){vt=0;var e=sa,s=gn,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=b.T,b.T=null;var n=E.p;E.p=2;var i=He;He|=4;try{tf(s,e);var u=Co,j=rd(e.containerInfo),D=u.focusedElem,R=u.selectionRange;if(j!==D&&D&&D.ownerDocument&&id(D.ownerDocument.documentElement,D)){if(R!==null&&Kr(D)){var ee=R.start,ce=R.end;if(ce===void 0&&(ce=ee),"selectionStart"in D)D.selectionStart=ee,D.selectionEnd=Math.min(ce,D.value.length);else{var me=D.ownerDocument||document,se=me&&me.defaultView||window;if(se.getSelection){var ae=se.getSelection(),Ae=D.textContent.length,ke=Math.min(R.start,Ae),Ie=R.end===void 0?ke:Math.min(R.end,Ae);!ae.extend&&ke>Ie&&(j=Ie,Ie=ke,ke=j);var Z=ld(D,ke),G=ld(D,Ie);if(Z&&G&&(ae.rangeCount!==1||ae.anchorNode!==Z.node||ae.anchorOffset!==Z.offset||ae.focusNode!==G.node||ae.focusOffset!==G.offset)){var J=me.createRange();J.setStart(Z.node,Z.offset),ae.removeAllRanges(),ke>Ie?(ae.addRange(J),ae.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),ae.addRange(J))}}}}for(me=[],ae=D;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<me.length;D++){var de=me[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}nr=!!So,Co=So=null}finally{He=i,E.p=n,b.T=a}}e.current=s,vt=2}}function bf(){if(vt===2){vt=0;var e=sa,s=gn,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=b.T,b.T=null;var n=E.p;E.p=2;var i=He;He|=4;try{Km(e,s.alternate,s)}finally{He=i,E.p=n,b.T=a}}vt=3}}function Nf(){if(vt===4||vt===3){vt=0,je();var e=sa,s=gn,a=yn,n=of;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?vt=5:(vt=0,gn=sa=null,wf(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ta=null),Er(a),s=s.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Rn,s,void 0,(s.current.flags&128)===128)}catch{}if(n!==null){s=b.T,i=E.p,E.p=2,b.T=null;try{for(var u=e.onRecoverableError,j=0;j<n.length;j++){var D=n[j];u(D.value,{componentStack:D.stack})}}finally{b.T=s,E.p=i}}(yn&3)!==0&&Pi(),ps(e),i=e.pendingLanes,(a&4194090)!==0&&(i&42)!==0?e===oo?Nl++:(Nl=0,oo=e):Nl=0,wl(0)}}function wf(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,sl(s)))}function Pi(e){return jf(),bf(),Nf(),Sf()}function Sf(){if(vt!==5)return!1;var e=sa,s=ro;ro=0;var a=Er(yn),n=b.T,i=E.p;try{E.p=32>a?32:a,b.T=null,a=co,co=null;var u=sa,j=yn;if(vt=0,gn=sa=null,yn=0,(He&6)!==0)throw Error(o(331));var D=He;if(He|=4,rf(u.current),af(u,u.current,j,a),He=D,wl(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Rn,u)}catch{}return!0}finally{E.p=i,b.T=n,wf(e,s)}}function Cf(e,s,a){s=Kt(a,s),s=$c(e.stateNode,s,2),e=Ps(e,s,2),e!==null&&(Hn(e,2),ps(e))}function Ge(e,s,a){if(e.tag===3)Cf(e,e,a);else for(;s!==null;){if(s.tag===3){Cf(s,e,a);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ta===null||!ta.has(n))){e=Kt(a,e),a=Am(2),n=Ps(s,a,2),n!==null&&(Tm(a,n,s,e),Hn(n,2),ps(n));break}}s=s.return}}function ho(e,s,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Xp;var i=new Set;n.set(s,i)}else i=n.get(s),i===void 0&&(i=new Set,n.set(s,i));i.has(a)||(ao=!0,i.add(a),e=Wp.bind(null,e,s,a),s.then(e,e))}function Wp(e,s,a){var n=e.pingCache;n!==null&&n.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Pe===e&&(Be&a)===a&&(et===4||et===3&&(Be&62914560)===Be&&300>ue()-io?(He&2)===0&&vn(e,0):no|=a,pn===Be&&(pn=0)),ps(e)}function kf(e,s){s===0&&(s=bu()),e=en(e,s),e!==null&&(Hn(e,s),ps(e))}function eg(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),kf(e,a)}function tg(e,s){var a=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(s),kf(e,a)}function sg(e,s){return be(e,s)}var Yi=null,bn=null,xo=!1,Xi=!1,po=!1,qa=0;function ps(e){e!==bn&&e.next===null&&(bn===null?Yi=bn=e:bn=bn.next=e),Xi=!0,xo||(xo=!0,ng())}function wl(e,s){if(!po&&Xi){po=!0;do for(var a=!1,n=Yi;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var u=0;else{var j=n.suspendedLanes,D=n.pingedLanes;u=(1<<31-Ut(42|e)+1)-1,u&=i&~(j&~D),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Ef(n,u))}else u=Be,u=ei(n,n===Pe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(u&3)===0||Un(n,u)||(a=!0,Ef(n,u));n=n.next}while(a);po=!1}}function ag(){Df()}function Df(){Xi=xo=!1;var e=0;qa!==0&&(mg()&&(e=qa),qa=0);for(var s=ue(),a=null,n=Yi;n!==null;){var i=n.next,u=Af(n,s);u===0?(n.next=null,a===null?Yi=i:a.next=i,i===null&&(bn=a)):(a=n,(e!==0||(u&3)!==0)&&(Xi=!0)),n=i}wl(e)}function Af(e,s){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var j=31-Ut(u),D=1<<j,R=i[j];R===-1?((D&a)===0||(D&n)!==0)&&(i[j]=Tx(D,s)):R<=s&&(e.expiredLanes|=D),u&=~D}if(s=Pe,a=Be,a=ei(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===s&&($e===2||$e===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Ce(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Un(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(n!==null&&Ce(n),Er(a)){case 2:case 8:a=Ee;break;case 32:a=rt;break;case 268435456:a=Bn;break;default:a=rt}return n=Tf.bind(null,e),a=be(a,n),e.callbackPriority=s,e.callbackNode=a,s}return n!==null&&n!==null&&Ce(n),e.callbackPriority=2,e.callbackNode=null,2}function Tf(e,s){if(vt!==0&&vt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Pi()&&e.callbackNode!==a)return null;var n=Be;return n=ei(e,e===Pe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(df(e,n,s),Af(e,ue()),e.callbackNode!=null&&e.callbackNode===a?Tf.bind(null,e):null)}function Ef(e,s){if(Pi())return null;df(e,s,!0)}function ng(){hg(function(){(He&6)!==0?be(Se,ag):Df()})}function go(){return qa===0&&(qa=ju()),qa}function zf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:li(""+e)}function Mf(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function lg(e,s,a,n,i){if(s==="submit"&&a&&a.stateNode===i){var u=zf((i[At]||null).action),j=n.submitter;j&&(s=(s=j[At]||null)?zf(s.formAction):j.getAttribute("formAction"),s!==null&&(u=s,j=null));var D=new oi("action","action",null,n,i);e.push({event:D,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(qa!==0){var R=j?Mf(i,j):new FormData(i);Bc(a,{pending:!0,data:R,method:i.method,action:u},null,R)}}else typeof u=="function"&&(D.preventDefault(),R=j?Mf(i,j):new FormData(i),Bc(a,{pending:!0,data:R,method:i.method,action:u},u,R))},currentTarget:i}]})}}for(var yo=0;yo<tc.length;yo++){var vo=tc[yo],ig=vo.toLowerCase(),rg=vo[0].toUpperCase()+vo.slice(1);rs(ig,"on"+rg)}rs(ud,"onAnimationEnd"),rs(dd,"onAnimationIteration"),rs(md,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(Sp,"onTransitionRun"),rs(Cp,"onTransitionStart"),rs(kp,"onTransitionCancel"),rs(fd,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),va("onBeforeInput",["compositionend","keypress","textInput","paste"]),va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Of(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var u=void 0;if(s)for(var j=n.length-1;0<=j;j--){var D=n[j],R=D.instance,ee=D.currentTarget;if(D=D.listener,R!==u&&i.isPropagationStopped())break e;u=D,i.currentTarget=ee;try{u(i)}catch(ce){qi(ce)}i.currentTarget=null,u=R}else for(j=0;j<n.length;j++){if(D=n[j],R=D.instance,ee=D.currentTarget,D=D.listener,R!==u&&i.isPropagationStopped())break e;u=D,i.currentTarget=ee;try{u(i)}catch(ce){qi(ce)}i.currentTarget=null,u=R}}}}function qe(e,s){var a=s[zr];a===void 0&&(a=s[zr]=new Set);var n=e+"__bubble";a.has(n)||(Lf(s,e,2,!1),a.add(n))}function jo(e,s,a){var n=0;s&&(n|=4),Lf(a,e,n,s)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function bo(e){if(!e[Fi]){e[Fi]=!0,ku.forEach(function(a){a!=="selectionchange"&&(cg.has(a)||jo(a,!1,e),jo(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Fi]||(s[Fi]=!0,jo("selectionchange",!1,s))}}function Lf(e,s,a,n){switch(nh(s)){case 2:var i=qg;break;case 8:i=Bg;break;default:i=qo}a=i.bind(null,s,a,e),i=void 0,!Qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(s,a,{capture:!0,passive:i}):e.addEventListener(s,a,!0):i!==void 0?e.addEventListener(s,a,{passive:i}):e.addEventListener(s,a,!1)}function No(e,s,a,n,i){var u=n;if((s&1)===0&&(s&2)===0&&n!==null)e:for(;;){if(n===null)return;var j=n.tag;if(j===3||j===4){var D=n.stateNode.containerInfo;if(D===i)break;if(j===4)for(j=n.return;j!==null;){var R=j.tag;if((R===3||R===4)&&j.stateNode.containerInfo===i)return;j=j.return}for(;D!==null;){if(j=$a(D),j===null)return;if(R=j.tag,R===5||R===6||R===26||R===27){n=u=j;continue e}D=D.parentNode}}n=n.return}Hu(function(){var ee=u,ce=Hr(a),me=[];e:{var se=hd.get(e);if(se!==void 0){var ae=oi,Ae=e;switch(e){case"keypress":if(ri(a)===0)break e;case"keydown":case"keyup":ae=sp;break;case"focusin":Ae="focus",ae=Pr;break;case"focusout":Ae="blur",ae=Pr;break;case"beforeblur":case"afterblur":ae=Pr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Ix;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=lp;break;case ud:case dd:case md:ae=Yx;break;case fd:ae=rp;break;case"scroll":case"scrollend":ae=Qx;break;case"wheel":ae=op;break;case"copy":case"cut":case"paste":ae=Fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Gu;break;case"toggle":case"beforetoggle":ae=dp}var ke=(s&4)!==0,Ie=!ke&&(e==="scroll"||e==="scrollend"),Z=ke?se!==null?se+"Capture":null:se;ke=[];for(var G=ee,J;G!==null;){var de=G;if(J=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||J===null||Z===null||(de=Vn(G,Z),de!=null&&ke.push(Cl(G,de,J))),Ie)break;G=G.return}0<ke.length&&(se=new ae(se,Ae,null,a,ce),me.push({event:se,listeners:ke}))}}if((s&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",se&&a!==Ur&&(Ae=a.relatedTarget||a.fromElement)&&($a(Ae)||Ae[Ha]))break e;if((ae||se)&&(se=ce.window===ce?ce:(se=ce.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(Ae=a.relatedTarget||a.toElement,ae=ee,Ae=Ae?$a(Ae):null,Ae!==null&&(Ie=m(Ae),ke=Ae.tag,Ae!==Ie||ke!==5&&ke!==27&&ke!==6)&&(Ae=null)):(ae=null,Ae=ee),ae!==Ae)){if(ke=Vu,de="onMouseLeave",Z="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(ke=Gu,de="onPointerLeave",Z="onPointerEnter",G="pointer"),Ie=ae==null?se:Qn(ae),J=Ae==null?se:Qn(Ae),se=new ke(de,G+"leave",ae,a,ce),se.target=Ie,se.relatedTarget=J,de=null,$a(ce)===ee&&(ke=new ke(Z,G+"enter",Ae,a,ce),ke.target=J,ke.relatedTarget=Ie,de=ke),Ie=de,ae&&Ae)t:{for(ke=ae,Z=Ae,G=0,J=ke;J;J=Nn(J))G++;for(J=0,de=Z;de;de=Nn(de))J++;for(;0<G-J;)ke=Nn(ke),G--;for(;0<J-G;)Z=Nn(Z),J--;for(;G--;){if(ke===Z||Z!==null&&ke===Z.alternate)break t;ke=Nn(ke),Z=Nn(Z)}ke=null}else ke=null;ae!==null&&qf(me,se,ae,ke,!1),Ae!==null&&Ie!==null&&qf(me,Ie,Ae,ke,!0)}}e:{if(se=ee?Qn(ee):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var Ne=Wu;else if(Ku(se))if(ed)Ne=bp;else{Ne=vp;var Oe=yp}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ee&&Rr(ee.elementType)&&(Ne=Wu):Ne=jp;if(Ne&&(Ne=Ne(e,ee))){Ju(me,Ne,a,ce);break e}Oe&&Oe(e,se,ee),e==="focusout"&&ee&&se.type==="number"&&ee.memoizedProps.value!=null&&_r(se,"number",se.value)}switch(Oe=ee?Qn(ee):window,e){case"focusin":(Ku(Oe)||Oe.contentEditable==="true")&&(Ka=Oe,Jr=ee,Kn=null);break;case"focusout":Kn=Jr=Ka=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":Wr=!1,cd(me,a,ce);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":cd(me,a,ce)}var we;if(Xr)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Za?Fu(e,a)&&(De="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Pu&&a.locale!=="ko"&&(Za||De!=="onCompositionStart"?De==="onCompositionEnd"&&Za&&(we=$u()):(Qs=ce,Vr="value"in Qs?Qs.value:Qs.textContent,Za=!0)),Oe=Zi(ee,De),0<Oe.length&&(De=new Iu(De,e,null,a,ce),me.push({event:De,listeners:Oe}),we?De.data=we:(we=Zu(a),we!==null&&(De.data=we)))),(we=fp?hp(e,a):xp(e,a))&&(De=Zi(ee,"onBeforeInput"),0<De.length&&(Oe=new Iu("onBeforeInput","beforeinput",null,a,ce),me.push({event:Oe,listeners:De}),Oe.data=we)),lg(me,e,ee,a,ce)}Of(me,s)})}function Cl(e,s,a){return{instance:e,listener:s,currentTarget:a}}function Zi(e,s){for(var a=s+"Capture",n=[];e!==null;){var i=e,u=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||u===null||(i=Vn(e,a),i!=null&&n.unshift(Cl(e,i,u)),i=Vn(e,s),i!=null&&n.push(Cl(e,i,u))),e.tag===3)return n;e=e.return}return[]}function Nn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qf(e,s,a,n,i){for(var u=s._reactName,j=[];a!==null&&a!==n;){var D=a,R=D.alternate,ee=D.stateNode;if(D=D.tag,R!==null&&R===n)break;D!==5&&D!==26&&D!==27||ee===null||(R=ee,i?(ee=Vn(a,u),ee!=null&&j.unshift(Cl(a,ee,R))):i||(ee=Vn(a,u),ee!=null&&j.push(Cl(a,ee,R)))),a=a.return}j.length!==0&&e.push({event:s,listeners:j})}var og=/\r\n?/g,ug=/\u0000|\uFFFD/g;function Bf(e){return(typeof e=="string"?e:""+e).replace(og,`
`).replace(ug,"")}function _f(e,s){return s=Bf(s),Bf(e)===s}function Ki(){}function Ve(e,s,a,n,i,u){switch(a){case"children":typeof n=="string"?s==="body"||s==="textarea"&&n===""||Ya(e,n):(typeof n=="number"||typeof n=="bigint")&&s!=="body"&&Ya(e,""+n);break;case"className":si(e,"class",n);break;case"tabIndex":si(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":si(e,a,n);break;case"style":Ru(e,n,u);break;case"data":if(s!=="object"){si(e,"data",n);break}case"src":case"href":if(n===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=li(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(s!=="input"&&Ve(e,s,"name",i.name,i,null),Ve(e,s,"formEncType",i.formEncType,i,null),Ve(e,s,"formMethod",i.formMethod,i,null),Ve(e,s,"formTarget",i.formTarget,i,null)):(Ve(e,s,"encType",i.encType,i,null),Ve(e,s,"method",i.method,i,null),Ve(e,s,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=li(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Ki);break;case"onScroll":n!=null&&qe("scroll",e);break;case"onScrollEnd":n!=null&&qe("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=li(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":qe("beforetoggle",e),qe("toggle",e),ti(e,"popover",n);break;case"xlinkActuate":Ns(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ns(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ns(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ns(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ns(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ns(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ns(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ns(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ns(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ti(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hx.get(a)||a,ti(e,a,n))}}function wo(e,s,a,n,i,u){switch(a){case"style":Ru(e,n,u);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Ya(e,n):(typeof n=="number"||typeof n=="bigint")&&Ya(e,""+n);break;case"onScroll":n!=null&&qe("scroll",e);break;case"onScrollEnd":n!=null&&qe("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Du.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),s=a.slice(2,i?a.length-7:void 0),u=e[At]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(s,u,i),typeof n=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):ti(e,a,n)}}}function jt(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",e),qe("load",e);var n=!1,i=!1,u;for(u in a)if(a.hasOwnProperty(u)){var j=a[u];if(j!=null)switch(u){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ve(e,s,u,j,a,null)}}i&&Ve(e,s,"srcSet",a.srcSet,a,null),n&&Ve(e,s,"src",a.src,a,null);return;case"input":qe("invalid",e);var D=u=j=i=null,R=null,ee=null;for(n in a)if(a.hasOwnProperty(n)){var ce=a[n];if(ce!=null)switch(n){case"name":i=ce;break;case"type":j=ce;break;case"checked":R=ce;break;case"defaultChecked":ee=ce;break;case"value":u=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(o(137,s));break;default:Ve(e,s,n,ce,a,null)}}Lu(e,u,D,R,ee,j,i,!1),ai(e);return;case"select":qe("invalid",e),n=j=u=null;for(i in a)if(a.hasOwnProperty(i)&&(D=a[i],D!=null))switch(i){case"value":u=D;break;case"defaultValue":j=D;break;case"multiple":n=D;default:Ve(e,s,i,D,a,null)}s=u,a=j,e.multiple=!!n,s!=null?Pa(e,!!n,s,!1):a!=null&&Pa(e,!!n,a,!0);return;case"textarea":qe("invalid",e),u=i=n=null;for(j in a)if(a.hasOwnProperty(j)&&(D=a[j],D!=null))switch(j){case"value":n=D;break;case"defaultValue":i=D;break;case"children":u=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(91));break;default:Ve(e,s,j,D,a,null)}Bu(e,n,i,u),ai(e);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(n=a[R],n!=null))switch(R){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ve(e,s,R,n,a,null)}return;case"dialog":qe("beforetoggle",e),qe("toggle",e),qe("cancel",e),qe("close",e);break;case"iframe":case"object":qe("load",e);break;case"video":case"audio":for(n=0;n<Sl.length;n++)qe(Sl[n],e);break;case"image":qe("error",e),qe("load",e);break;case"details":qe("toggle",e);break;case"embed":case"source":case"link":qe("error",e),qe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in a)if(a.hasOwnProperty(ee)&&(n=a[ee],n!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ve(e,s,ee,n,a,null)}return;default:if(Rr(s)){for(ce in a)a.hasOwnProperty(ce)&&(n=a[ce],n!==void 0&&wo(e,s,ce,n,a,void 0));return}}for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!=null&&Ve(e,s,D,n,a,null))}function dg(e,s,a,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,u=null,j=null,D=null,R=null,ee=null,ce=null;for(ae in a){var me=a[ae];if(a.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":R=me;default:n.hasOwnProperty(ae)||Ve(e,s,ae,null,n,me)}}for(var se in n){var ae=n[se];if(me=a[se],n.hasOwnProperty(se)&&(ae!=null||me!=null))switch(se){case"type":u=ae;break;case"name":i=ae;break;case"checked":ee=ae;break;case"defaultChecked":ce=ae;break;case"value":j=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,s));break;default:ae!==me&&Ve(e,s,se,ae,n,me)}}Br(e,j,D,R,ee,ce,u,i);return;case"select":ae=j=D=se=null;for(u in a)if(R=a[u],a.hasOwnProperty(u)&&R!=null)switch(u){case"value":break;case"multiple":ae=R;default:n.hasOwnProperty(u)||Ve(e,s,u,null,n,R)}for(i in n)if(u=n[i],R=a[i],n.hasOwnProperty(i)&&(u!=null||R!=null))switch(i){case"value":se=u;break;case"defaultValue":D=u;break;case"multiple":j=u;default:u!==R&&Ve(e,s,i,u,n,R)}s=D,a=j,n=ae,se!=null?Pa(e,!!a,se,!1):!!n!=!!a&&(s!=null?Pa(e,!!a,s,!0):Pa(e,!!a,a?[]:"",!1));return;case"textarea":ae=se=null;for(D in a)if(i=a[D],a.hasOwnProperty(D)&&i!=null&&!n.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Ve(e,s,D,null,n,i)}for(j in n)if(i=n[j],u=a[j],n.hasOwnProperty(j)&&(i!=null||u!=null))switch(j){case"value":se=i;break;case"defaultValue":ae=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==u&&Ve(e,s,j,i,n,u)}qu(e,se,ae);return;case"option":for(var Ae in a)if(se=a[Ae],a.hasOwnProperty(Ae)&&se!=null&&!n.hasOwnProperty(Ae))switch(Ae){case"selected":e.selected=!1;break;default:Ve(e,s,Ae,null,n,se)}for(R in n)if(se=n[R],ae=a[R],n.hasOwnProperty(R)&&se!==ae&&(se!=null||ae!=null))switch(R){case"selected":e.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Ve(e,s,R,se,n,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)se=a[ke],a.hasOwnProperty(ke)&&se!=null&&!n.hasOwnProperty(ke)&&Ve(e,s,ke,null,n,se);for(ee in n)if(se=n[ee],ae=a[ee],n.hasOwnProperty(ee)&&se!==ae&&(se!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,s));break;default:Ve(e,s,ee,se,n,ae)}return;default:if(Rr(s)){for(var Ie in a)se=a[Ie],a.hasOwnProperty(Ie)&&se!==void 0&&!n.hasOwnProperty(Ie)&&wo(e,s,Ie,void 0,n,se);for(ce in n)se=n[ce],ae=a[ce],!n.hasOwnProperty(ce)||se===ae||se===void 0&&ae===void 0||wo(e,s,ce,se,n,ae);return}}for(var Z in a)se=a[Z],a.hasOwnProperty(Z)&&se!=null&&!n.hasOwnProperty(Z)&&Ve(e,s,Z,null,n,se);for(me in n)se=n[me],ae=a[me],!n.hasOwnProperty(me)||se===ae||se==null&&ae==null||Ve(e,s,me,se,n,ae)}var So=null,Co=null;function Ji(e){return e.nodeType===9?e:e.ownerDocument}function Rf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uf(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function ko(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Do=null;function mg(){var e=window.event;return e&&e.type==="popstate"?e===Do?!1:(Do=e,!0):(Do=null,!1)}var Hf=typeof setTimeout=="function"?setTimeout:void 0,fg=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(xg)}:Hf;function xg(e){setTimeout(function(){throw e})}function na(e){return e==="head"}function Qf(e,s){var a=s,n=0,i=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(0<n&&8>n){a=n;var j=e.ownerDocument;if(a&1&&kl(j.documentElement),a&2&&kl(j.body),a&4)for(a=j.head,kl(a),j=a.firstChild;j;){var D=j.nextSibling,R=j.nodeName;j[$n]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&j.rel.toLowerCase()==="stylesheet"||a.removeChild(j),j=D}}if(i===0){e.removeChild(u),Ll(s);return}i--}else a==="$"||a==="$?"||a==="$!"?i++:n=a.charCodeAt(0)-48;else n=0;a=u}while(a);Ll(s)}function Ao(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ao(a),Mr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function pg(e,s,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[$n])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var u=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=os(e.nextSibling),e===null)break}return null}function gg(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=os(e.nextSibling),e===null))return null;return e}function To(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function yg(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var n=function(){s(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function os(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Eo=null;function Vf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function If(e,s,a){switch(s=Ji(a),e){case"html":if(e=s.documentElement,!e)throw Error(o(452));return e;case"head":if(e=s.head,!e)throw Error(o(453));return e;case"body":if(e=s.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function kl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Mr(e)}var as=new Map,Gf=new Set;function Wi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bs=E.d;E.d={f:vg,r:jg,D:bg,C:Ng,L:wg,m:Sg,X:kg,S:Cg,M:Dg};function vg(){var e=Bs.f(),s=Ii();return e||s}function jg(e){var s=Qa(e);s!==null&&s.tag===5&&s.type==="form"?um(s):Bs.r(e)}var wn=typeof document>"u"?null:document;function Pf(e,s,a){var n=wn;if(n&&typeof s=="string"&&s){var i=Zt(s);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Gf.has(i)||(Gf.add(i),e={rel:e,crossOrigin:a,href:s},n.querySelector(i)===null&&(s=n.createElement("link"),jt(s,"link",e),ft(s),n.head.appendChild(s)))}}function bg(e){Bs.D(e),Pf("dns-prefetch",e,null)}function Ng(e,s){Bs.C(e,s),Pf("preconnect",e,s)}function wg(e,s,a){Bs.L(e,s,a);var n=wn;if(n&&e&&s){var i='link[rel="preload"][as="'+Zt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+Zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+Zt(a.imageSizes)+'"]')):i+='[href="'+Zt(e)+'"]';var u=i;switch(s){case"style":u=Sn(e);break;case"script":u=Cn(e)}as.has(u)||(e=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),as.set(u,e),n.querySelector(i)!==null||s==="style"&&n.querySelector(Dl(u))||s==="script"&&n.querySelector(Al(u))||(s=n.createElement("link"),jt(s,"link",e),ft(s),n.head.appendChild(s)))}}function Sg(e,s){Bs.m(e,s);var a=wn;if(a&&e){var n=s&&typeof s.as=="string"?s.as:"script",i='link[rel="modulepreload"][as="'+Zt(n)+'"][href="'+Zt(e)+'"]',u=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Cn(e)}if(!as.has(u)&&(e=y({rel:"modulepreload",href:e},s),as.set(u,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(u)))return}n=a.createElement("link"),jt(n,"link",e),ft(n),a.head.appendChild(n)}}}function Cg(e,s,a){Bs.S(e,s,a);var n=wn;if(n&&e){var i=Va(n).hoistableStyles,u=Sn(e);s=s||"default";var j=i.get(u);if(!j){var D={loading:0,preload:null};if(j=n.querySelector(Dl(u)))D.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},a),(a=as.get(u))&&zo(e,a);var R=j=n.createElement("link");ft(R),jt(R,"link",e),R._p=new Promise(function(ee,ce){R.onload=ee,R.onerror=ce}),R.addEventListener("load",function(){D.loading|=1}),R.addEventListener("error",function(){D.loading|=2}),D.loading|=4,er(j,s,n)}j={type:"stylesheet",instance:j,count:1,state:D},i.set(u,j)}}}function kg(e,s){Bs.X(e,s);var a=wn;if(a&&e){var n=Va(a).hoistableScripts,i=Cn(e),u=n.get(i);u||(u=a.querySelector(Al(i)),u||(e=y({src:e,async:!0},s),(s=as.get(i))&&Mo(e,s),u=a.createElement("script"),ft(u),jt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(i,u))}}function Dg(e,s){Bs.M(e,s);var a=wn;if(a&&e){var n=Va(a).hoistableScripts,i=Cn(e),u=n.get(i);u||(u=a.querySelector(Al(i)),u||(e=y({src:e,async:!0,type:"module"},s),(s=as.get(i))&&Mo(e,s),u=a.createElement("script"),ft(u),jt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(i,u))}}function Yf(e,s,a,n){var i=(i=ne.current)?Wi(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Sn(a.href),a=Va(i).hoistableStyles,n=a.get(s),n||(n={type:"style",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Sn(a.href);var u=Va(i).hoistableStyles,j=u.get(e);if(j||(i=i.ownerDocument||i,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,j),(u=i.querySelector(Dl(e)))&&!u._p&&(j.instance=u,j.state.loading=5),as.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},as.set(e,a),u||Ag(i,e,a,j.state))),s&&n===null)throw Error(o(528,""));return j}if(s&&n!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cn(a),a=Va(i).hoistableScripts,n=a.get(s),n||(n={type:"script",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Sn(e){return'href="'+Zt(e)+'"'}function Dl(e){return'link[rel="stylesheet"]['+e+"]"}function Xf(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ag(e,s,a,n){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?n.loading=1:(s=e.createElement("link"),n.preload=s,s.addEventListener("load",function(){return n.loading|=1}),s.addEventListener("error",function(){return n.loading|=2}),jt(s,"link",a),ft(s),e.head.appendChild(s))}function Cn(e){return'[src="'+Zt(e)+'"]'}function Al(e){return"script[async]"+e}function Ff(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var n=e.querySelector('style[data-href~="'+Zt(a.href)+'"]');if(n)return s.instance=n,ft(n),n;var i=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ft(n),jt(n,"style",i),er(n,a.precedence,e),s.instance=n;case"stylesheet":i=Sn(a.href);var u=e.querySelector(Dl(i));if(u)return s.state.loading|=4,s.instance=u,ft(u),u;n=Xf(a),(i=as.get(i))&&zo(n,i),u=(e.ownerDocument||e).createElement("link"),ft(u);var j=u;return j._p=new Promise(function(D,R){j.onload=D,j.onerror=R}),jt(u,"link",n),s.state.loading|=4,er(u,a.precedence,e),s.instance=u;case"script":return u=Cn(a.src),(i=e.querySelector(Al(u)))?(s.instance=i,ft(i),i):(n=a,(i=as.get(u))&&(n=y({},a),Mo(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),ft(i),jt(i,"link",n),e.head.appendChild(i),s.instance=i);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(n=s.instance,s.state.loading|=4,er(n,a.precedence,e));return s.instance}function er(e,s,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,u=i,j=0;j<n.length;j++){var D=n[j];if(D.dataset.precedence===s)u=D;else if(u!==i)break}u?u.parentNode.insertBefore(e,u.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function zo(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Mo(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var tr=null;function Zf(e,s,a){if(tr===null){var n=new Map,i=tr=new Map;i.set(a,n)}else i=tr,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var u=a[i];if(!(u[$n]||u[wt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var j=u.getAttribute(s)||"";j=e+j;var D=n.get(j);D?D.push(u):n.set(j,[u])}}return n}function Kf(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function Tg(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Jf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Tl=null;function Eg(){}function zg(e,s,a){if(Tl===null)throw Error(o(475));var n=Tl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var i=Sn(a.href),u=e.querySelector(Dl(i));if(u){e=u._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=sr.bind(n),e.then(n,n)),s.state.loading|=4,s.instance=u,ft(u);return}u=e.ownerDocument||e,a=Xf(a),(i=as.get(i))&&zo(a,i),u=u.createElement("link"),ft(u);var j=u;j._p=new Promise(function(D,R){j.onload=D,j.onerror=R}),jt(u,"link",a),s.instance=u}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(n.count++,s=sr.bind(n),e.addEventListener("load",s),e.addEventListener("error",s))}}function Mg(){if(Tl===null)throw Error(o(475));var e=Tl;return e.stylesheets&&e.count===0&&Oo(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&Oo(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function sr(){if(this.count--,this.count===0){if(this.stylesheets)Oo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ar=null;function Oo(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ar=new Map,s.forEach(Og,e),ar=null,sr.call(e))}function Og(e,s){if(!(s.state.loading&4)){var a=ar.get(e);if(a)var n=a.get(null);else{a=new Map,ar.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<i.length;u++){var j=i[u];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(a.set(j.dataset.precedence,j),n=j)}n&&a.set(null,n)}i=s.instance,j=i.getAttribute("data-precedence"),u=a.get(j)||n,u===n&&a.set(null,i),a.set(j,i),this.count++,n=sr.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),u?u.parentNode.insertBefore(i,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),s.state.loading|=4}}var El={$$typeof:O,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Lg(e,s,a,n,i,u,j,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.hiddenUpdates=Ar(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=u,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Wf(e,s,a,n,i,u,j,D,R,ee,ce,me){return e=new Lg(e,s,a,j,D,R,ee,me),s=1,u===!0&&(s|=24),u=$t(3,null,null,s),e.current=u,u.stateNode=e,s=fc(),s.refCount++,e.pooledCache=s,s.refCount++,u.memoizedState={element:n,isDehydrated:a,cache:s},gc(u),e}function eh(e){return e?(e=tn,e):tn}function th(e,s,a,n,i,u){i=eh(i),n.context===null?n.context=i:n.pendingContext=i,n=Gs(s),n.payload={element:a},u=u===void 0?null:u,u!==null&&(n.callback=u),a=Ps(e,n,s),a!==null&&(Pt(a,e,s),il(a,e,s))}function sh(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function Lo(e,s){sh(e,s),(e=e.alternate)&&sh(e,s)}function ah(e){if(e.tag===13){var s=en(e,67108864);s!==null&&Pt(s,e,67108864),Lo(e,67108864)}}var nr=!0;function qg(e,s,a,n){var i=b.T;b.T=null;var u=E.p;try{E.p=2,qo(e,s,a,n)}finally{E.p=u,b.T=i}}function Bg(e,s,a,n){var i=b.T;b.T=null;var u=E.p;try{E.p=8,qo(e,s,a,n)}finally{E.p=u,b.T=i}}function qo(e,s,a,n){if(nr){var i=Bo(n);if(i===null)No(e,s,n,lr,a),lh(e,n);else if(Rg(i,e,s,a,n))n.stopPropagation();else if(lh(e,n),s&4&&-1<_g.indexOf(e)){for(;i!==null;){var u=Qa(i);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var j=ya(u.pendingLanes);if(j!==0){var D=u;for(D.pendingLanes|=2,D.entangledLanes|=2;j;){var R=1<<31-Ut(j);D.entanglements[1]|=R,j&=~R}ps(u),(He&6)===0&&(Qi=ue()+500,wl(0))}}break;case 13:D=en(u,2),D!==null&&Pt(D,u,2),Ii(),Lo(u,2)}if(u=Bo(n),u===null&&No(e,s,n,lr,a),u===i)break;i=u}i!==null&&n.stopPropagation()}else No(e,s,n,null,a)}}function Bo(e){return e=Hr(e),_o(e)}var lr=null;function _o(e){if(lr=null,e=$a(e),e!==null){var s=m(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=p(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return lr=e,null}function nh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Se:return 2;case Ee:return 8;case rt:case qn:return 32;case Bn:return 268435456;default:return 32}default:return 32}}var Ro=!1,la=null,ia=null,ra=null,zl=new Map,Ml=new Map,ca=[],_g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lh(e,s){switch(e){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":zl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(s.pointerId)}}function Ol(e,s,a,n,i,u){return e===null||e.nativeEvent!==u?(e={blockedOn:s,domEventName:a,eventSystemFlags:n,nativeEvent:u,targetContainers:[i]},s!==null&&(s=Qa(s),s!==null&&ah(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,i!==null&&s.indexOf(i)===-1&&s.push(i),e)}function Rg(e,s,a,n,i){switch(s){case"focusin":return la=Ol(la,e,s,a,n,i),!0;case"dragenter":return ia=Ol(ia,e,s,a,n,i),!0;case"mouseover":return ra=Ol(ra,e,s,a,n,i),!0;case"pointerover":var u=i.pointerId;return zl.set(u,Ol(zl.get(u)||null,e,s,a,n,i)),!0;case"gotpointercapture":return u=i.pointerId,Ml.set(u,Ol(Ml.get(u)||null,e,s,a,n,i)),!0}return!1}function ih(e){var s=$a(e.target);if(s!==null){var a=m(s);if(a!==null){if(s=a.tag,s===13){if(s=p(a),s!==null){e.blockedOn=s,zx(e.priority,function(){if(a.tag===13){var n=Gt();n=Tr(n);var i=en(a,n);i!==null&&Pt(i,a,n),Lo(a,n)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ir(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=Bo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Ur=n,a.target.dispatchEvent(n),Ur=null}else return s=Qa(a),s!==null&&ah(s),e.blockedOn=a,!1;s.shift()}return!0}function rh(e,s,a){ir(e)&&a.delete(s)}function Ug(){Ro=!1,la!==null&&ir(la)&&(la=null),ia!==null&&ir(ia)&&(ia=null),ra!==null&&ir(ra)&&(ra=null),zl.forEach(rh),Ml.forEach(rh)}function rr(e,s){e.blockedOn===s&&(e.blockedOn=null,Ro||(Ro=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Ug)))}var cr=null;function ch(e){cr!==e&&(cr=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){cr===e&&(cr=null);for(var s=0;s<e.length;s+=3){var a=e[s],n=e[s+1],i=e[s+2];if(typeof n!="function"){if(_o(n||a)===null)continue;break}var u=Qa(a);u!==null&&(e.splice(s,3),s-=3,Bc(u,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function Ll(e){function s(R){return rr(R,e)}la!==null&&rr(la,e),ia!==null&&rr(ia,e),ra!==null&&rr(ra,e),zl.forEach(s),Ml.forEach(s);for(var a=0;a<ca.length;a++){var n=ca[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ca.length&&(a=ca[0],a.blockedOn===null);)ih(a),a.blockedOn===null&&ca.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],u=a[n+1],j=i[At]||null;if(typeof u=="function")j||ch(a);else if(j){var D=null;if(u&&u.hasAttribute("formAction")){if(i=u,j=u[At]||null)D=j.formAction;else if(_o(i)!==null)continue}else D=j.action;typeof D=="function"?a[n+1]=D:(a.splice(n,3),n-=3),ch(a)}}}function Uo(e){this._internalRoot=e}or.prototype.render=Uo.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,n=Gt();th(a,n,e,s,null,null)},or.prototype.unmount=Uo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;th(e.current,2,null,e,null,null),Ii(),s[Ha]=null}};function or(e){this._internalRoot=e}or.prototype.unstable_scheduleHydration=function(e){if(e){var s=Su();e={blockedOn:null,target:e,priority:s};for(var a=0;a<ca.length&&s!==0&&s<ca[a].priority;a++);ca.splice(a,0,e),a===0&&ih(e)}};var oh=r.version;if(oh!=="19.1.1")throw Error(o(527,oh,"19.1.1"));E.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(s),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var Hg={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:b,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ur=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ur.isDisabled&&ur.supportsFiber)try{Rn=ur.inject(Hg),Rt=ur}catch{}}return Bl.createRoot=function(e,s){if(!d(e))throw Error(o(299));var a=!1,n="",i=Sm,u=Cm,j=km,D=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(u=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(D=s.unstable_transitionCallbacks)),s=Wf(e,1,!1,null,null,a,n,i,u,j,D,null),e[Ha]=s.current,bo(e),new Uo(s)},Bl.hydrateRoot=function(e,s,a){if(!d(e))throw Error(o(299));var n=!1,i="",u=Sm,j=Cm,D=km,R=null,ee=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(j=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(ee=a.formState)),s=Wf(e,1,!0,s,a??null,n,i,u,j,D,R,ee),s.context=eh(null),a=s.current,n=Gt(),n=Tr(n),i=Gs(n),i.callback=null,Ps(a,i,n),a=n,s.current.lanes=a,Hn(s,a),ps(s),e[Ha]=s.current,bo(e),new or(s)},Bl.version="19.1.1",Bl}var vh;function Kg(){if(vh)return Qo.exports;vh=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),Qo.exports=Zg(),Qo.exports}var Jg=Kg();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jh="popstate";function Wg(l={}){function r(d,m){let{pathname:p="/",search:g="",hash:x=""}=Ua(d.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Ko("",{pathname:p,search:g,hash:x},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function c(d,m){let p=d.document.querySelector("base"),g="";if(p&&p.getAttribute("href")){let x=d.location.href,f=x.indexOf("#");g=f===-1?x:x.slice(0,f)}return g+"#"+(typeof m=="string"?m:Gl(m))}function o(d,m){us(d.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(m)})`)}return t0(r,c,o,l)}function Ke(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function us(l,r){if(!l){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function e0(){return Math.random().toString(36).substring(2,10)}function bh(l,r){return{usr:l.state,key:l.key,idx:r}}function Ko(l,r,c=null,o){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof r=="string"?Ua(r):r,state:c,key:r&&r.key||o||e0()}}function Gl({pathname:l="/",search:r="",hash:c=""}){return r&&r!=="?"&&(l+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(l+=c.charAt(0)==="#"?c:"#"+c),l}function Ua(l){let r={};if(l){let c=l.indexOf("#");c>=0&&(r.hash=l.substring(c),l=l.substring(0,c));let o=l.indexOf("?");o>=0&&(r.search=l.substring(o),l=l.substring(0,o)),l&&(r.pathname=l)}return r}function t0(l,r,c,o={}){let{window:d=document.defaultView,v5Compat:m=!1}=o,p=d.history,g="POP",x=null,f=y();f==null&&(f=0,p.replaceState({...p.state,idx:f},""));function y(){return(p.state||{idx:null}).idx}function v(){g="POP";let z=y(),A=z==null?null:z-f;f=z,x&&x({action:g,location:N.location,delta:A})}function S(z,A){g="PUSH";let T=Ko(N.location,z,A);c&&c(T,z),f=y()+1;let O=bh(T,f),L=N.createHref(T);try{p.pushState(O,"",L)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;d.location.assign(L)}m&&x&&x({action:g,location:N.location,delta:1})}function k(z,A){g="REPLACE";let T=Ko(N.location,z,A);c&&c(T,z),f=y();let O=bh(T,f),L=N.createHref(T);p.replaceState(O,"",L),m&&x&&x({action:g,location:N.location,delta:0})}function w(z){return s0(z)}let N={get action(){return g},get location(){return l(d,p)},listen(z){if(x)throw new Error("A history only accepts one active listener");return d.addEventListener(jh,v),x=z,()=>{d.removeEventListener(jh,v),x=null}},createHref(z){return r(d,z)},createURL:w,encodeLocation(z){let A=w(z);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:S,replace:k,go(z){return p.go(z)}};return N}function s0(l,r=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(c,"No window.location.(origin|href) available to create URL");let o=typeof l=="string"?l:Gl(l);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=c+o),new URL(o,c)}function Vh(l,r,c="/"){return a0(l,r,c,!1)}function a0(l,r,c,o){let d=typeof r=="string"?Ua(r):r,m=Us(d.pathname||"/",c);if(m==null)return null;let p=Ih(l);n0(p);let g=null;for(let x=0;g==null&&x<p.length;++x){let f=x0(m);g=f0(p[x],f,o)}return g}function Ih(l,r=[],c=[],o="",d=!1){let m=(p,g,x=d,f)=>{let y={relativePath:f===void 0?p.path||"":f,caseSensitive:p.caseSensitive===!0,childrenIndex:g,route:p};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&x)return;Ke(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let v=Rs([o,y.relativePath]),S=c.concat(y);p.children&&p.children.length>0&&(Ke(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Ih(p.children,r,S,v,x)),!(p.path==null&&!p.index)&&r.push({path:v,score:d0(v,p.index),routesMeta:S})};return l.forEach((p,g)=>{if(p.path===""||!p.path?.includes("?"))m(p,g);else for(let x of Gh(p.path))m(p,g,!0,x)}),r}function Gh(l){let r=l.split("/");if(r.length===0)return[];let[c,...o]=r,d=c.endsWith("?"),m=c.replace(/\?$/,"");if(o.length===0)return d?[m,""]:[m];let p=Gh(o.join("/")),g=[];return g.push(...p.map(x=>x===""?m:[m,x].join("/"))),d&&g.push(...p),g.map(x=>l.startsWith("/")&&x===""?"/":x)}function n0(l){l.sort((r,c)=>r.score!==c.score?c.score-r.score:m0(r.routesMeta.map(o=>o.childrenIndex),c.routesMeta.map(o=>o.childrenIndex)))}var l0=/^:[\w-]+$/,i0=3,r0=2,c0=1,o0=10,u0=-2,Nh=l=>l==="*";function d0(l,r){let c=l.split("/"),o=c.length;return c.some(Nh)&&(o+=u0),r&&(o+=r0),c.filter(d=>!Nh(d)).reduce((d,m)=>d+(l0.test(m)?i0:m===""?c0:o0),o)}function m0(l,r){return l.length===r.length&&l.slice(0,-1).every((o,d)=>o===r[d])?l[l.length-1]-r[r.length-1]:0}function f0(l,r,c=!1){let{routesMeta:o}=l,d={},m="/",p=[];for(let g=0;g<o.length;++g){let x=o[g],f=g===o.length-1,y=m==="/"?r:r.slice(m.length)||"/",v=gr({path:x.relativePath,caseSensitive:x.caseSensitive,end:f},y),S=x.route;if(!v&&f&&c&&!o[o.length-1].route.index&&(v=gr({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},y)),!v)return null;Object.assign(d,v.params),p.push({params:d,pathname:Rs([m,v.pathname]),pathnameBase:v0(Rs([m,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(m=Rs([m,v.pathnameBase]))}return p}function gr(l,r){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[c,o]=h0(l.path,l.caseSensitive,l.end),d=r.match(c);if(!d)return null;let m=d[0],p=m.replace(/(.)\/+$/,"$1"),g=d.slice(1);return{params:o.reduce((f,{paramName:y,isOptional:v},S)=>{if(y==="*"){let w=g[S]||"";p=m.slice(0,m.length-w.length).replace(/(.)\/+$/,"$1")}const k=g[S];return v&&!k?f[y]=void 0:f[y]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:m,pathnameBase:p,pattern:l}}function h0(l,r=!1,c=!0){us(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let o=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,g,x)=>(o.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(o.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),o]}function x0(l){try{return l.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return us(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),l}}function Us(l,r){if(r==="/")return l;if(!l.toLowerCase().startsWith(r.toLowerCase()))return null;let c=r.endsWith("/")?r.length-1:r.length,o=l.charAt(c);return o&&o!=="/"?null:l.slice(c)||"/"}function p0(l,r="/"){let{pathname:c,search:o="",hash:d=""}=typeof l=="string"?Ua(l):l;return{pathname:c?c.startsWith("/")?c:g0(c,r):r,search:j0(o),hash:b0(d)}}function g0(l,r){let c=r.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?c.length>1&&c.pop():d!=="."&&c.push(d)}),c.length>1?c.join("/"):"/"}function Po(l,r,c,o){return`Cannot include a '${l}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function y0(l){return l.filter((r,c)=>c===0||r.route.path&&r.route.path.length>0)}function Ph(l){let r=y0(l);return r.map((c,o)=>o===r.length-1?c.pathname:c.pathnameBase)}function Yh(l,r,c,o=!1){let d;typeof l=="string"?d=Ua(l):(d={...l},Ke(!d.pathname||!d.pathname.includes("?"),Po("?","pathname","search",d)),Ke(!d.pathname||!d.pathname.includes("#"),Po("#","pathname","hash",d)),Ke(!d.search||!d.search.includes("#"),Po("#","search","hash",d)));let m=l===""||d.pathname==="",p=m?"/":d.pathname,g;if(p==null)g=c;else{let v=r.length-1;if(!o&&p.startsWith("..")){let S=p.split("/");for(;S[0]==="..";)S.shift(),v-=1;d.pathname=S.join("/")}g=v>=0?r[v]:"/"}let x=p0(d,g),f=p&&p!=="/"&&p.endsWith("/"),y=(m||p===".")&&c.endsWith("/");return!x.pathname.endsWith("/")&&(f||y)&&(x.pathname+="/"),x}var Rs=l=>l.join("/").replace(/\/\/+/g,"/"),v0=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),j0=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,b0=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function N0(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var Xh=["POST","PUT","PATCH","DELETE"];new Set(Xh);var w0=["GET",...Xh];new Set(w0);var On=h.createContext(null);On.displayName="DataRouter";var Nr=h.createContext(null);Nr.displayName="DataRouterState";h.createContext(!1);var Fh=h.createContext({isTransitioning:!1});Fh.displayName="ViewTransition";var S0=h.createContext(new Map);S0.displayName="Fetchers";var C0=h.createContext(null);C0.displayName="Await";var bs=h.createContext(null);bs.displayName="Navigation";var Yl=h.createContext(null);Yl.displayName="Location";var ds=h.createContext({outlet:null,matches:[],isDataRoute:!1});ds.displayName="Route";var nu=h.createContext(null);nu.displayName="RouteError";function k0(l,{relative:r}={}){Ke(Xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:o}=h.useContext(bs),{hash:d,pathname:m,search:p}=Fl(l,{relative:r}),g=m;return c!=="/"&&(g=m==="/"?c:Rs([c,m])),o.createHref({pathname:g,search:p,hash:d})}function Xl(){return h.useContext(Yl)!=null}function fa(){return Ke(Xl(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Yl).location}var Zh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kh(l){h.useContext(bs).static||h.useLayoutEffect(l)}function lu(){let{isDataRoute:l}=h.useContext(ds);return l?Q0():D0()}function D0(){Ke(Xl(),"useNavigate() may be used only in the context of a <Router> component.");let l=h.useContext(On),{basename:r,navigator:c}=h.useContext(bs),{matches:o}=h.useContext(ds),{pathname:d}=fa(),m=JSON.stringify(Ph(o)),p=h.useRef(!1);return Kh(()=>{p.current=!0}),h.useCallback((x,f={})=>{if(us(p.current,Zh),!p.current)return;if(typeof x=="number"){c.go(x);return}let y=Yh(x,JSON.parse(m),d,f.relative==="path");l==null&&r!=="/"&&(y.pathname=y.pathname==="/"?r:Rs([r,y.pathname])),(f.replace?c.replace:c.push)(y,f.state,f)},[r,c,m,d,l])}var A0=h.createContext(null);function T0(l){let r=h.useContext(ds).outlet;return r&&h.createElement(A0.Provider,{value:l},r)}function E0(){let{matches:l}=h.useContext(ds),r=l[l.length-1];return r?r.params:{}}function Fl(l,{relative:r}={}){let{matches:c}=h.useContext(ds),{pathname:o}=fa(),d=JSON.stringify(Ph(c));return h.useMemo(()=>Yh(l,JSON.parse(d),o,r==="path"),[l,d,o,r])}function z0(l,r){return Jh(l,r)}function Jh(l,r,c,o,d){Ke(Xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=h.useContext(bs),{matches:p}=h.useContext(ds),g=p[p.length-1],x=g?g.params:{},f=g?g.pathname:"/",y=g?g.pathnameBase:"/",v=g&&g.route;{let T=v&&v.path||"";Wh(f,!v||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let S=fa(),k;if(r){let T=typeof r=="string"?Ua(r):r;Ke(y==="/"||T.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${T.pathname}" was given in the \`location\` prop.`),k=T}else k=S;let w=k.pathname||"/",N=w;if(y!=="/"){let T=y.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let z=Vh(l,{pathname:N});us(v||z!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),us(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=B0(z&&z.map(T=>Object.assign({},T,{params:Object.assign({},x,T.params),pathname:Rs([y,m.encodeLocation?m.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?y:Rs([y,m.encodeLocation?m.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),p,c,o,d);return r&&A?h.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},A):A}function M0(){let l=$0(),r=N0(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),c=l instanceof Error?l.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},p=null;return console.error("Error handled by React Router default ErrorBoundary:",l),p=h.createElement(h.Fragment,null,h.createElement("p",null,"💿 Hey developer 👋"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:m},"ErrorBoundary")," or"," ",h.createElement("code",{style:m},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},r),c?h.createElement("pre",{style:d},c):null,p)}var O0=h.createElement(M0,null),L0=class extends h.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,r){return r.location!==l.location||r.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:r.error,location:r.location,revalidation:l.revalidation||r.revalidation}}componentDidCatch(l,r){this.props.unstable_onError?this.props.unstable_onError(l,r):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?h.createElement(ds.Provider,{value:this.props.routeContext},h.createElement(nu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q0({routeContext:l,match:r,children:c}){let o=h.useContext(On);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(ds.Provider,{value:l},c)}function B0(l,r=[],c=null,o=null,d=null){if(l==null){if(!c)return null;if(c.errors)l=c.matches;else if(r.length===0&&!c.initialized&&c.matches.length>0)l=c.matches;else return null}let m=l,p=c?.errors;if(p!=null){let f=m.findIndex(y=>y.route.id&&p?.[y.route.id]!==void 0);Ke(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),m=m.slice(0,Math.min(m.length,f+1))}let g=!1,x=-1;if(c)for(let f=0;f<m.length;f++){let y=m[f];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(x=f),y.route.id){let{loaderData:v,errors:S}=c,k=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||k){g=!0,x>=0?m=m.slice(0,x+1):m=[m[0]];break}}}return m.reduceRight((f,y,v)=>{let S,k=!1,w=null,N=null;c&&(S=p&&y.route.id?p[y.route.id]:void 0,w=y.route.errorElement||O0,g&&(x<0&&v===0?(Wh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,N=null):x===v&&(k=!0,N=y.route.hydrateFallbackElement||null)));let z=r.concat(m.slice(0,v+1)),A=()=>{let T;return S?T=w:k?T=N:y.route.Component?T=h.createElement(y.route.Component,null):y.route.element?T=y.route.element:T=f,h.createElement(q0,{match:y,routeContext:{outlet:f,matches:z,isDataRoute:c!=null},children:T})};return c&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?h.createElement(L0,{location:c.location,revalidation:c.revalidation,component:w,error:S,children:A(),routeContext:{outlet:null,matches:z,isDataRoute:!0},unstable_onError:o}):A()},null)}function iu(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _0(l){let r=h.useContext(On);return Ke(r,iu(l)),r}function R0(l){let r=h.useContext(Nr);return Ke(r,iu(l)),r}function U0(l){let r=h.useContext(ds);return Ke(r,iu(l)),r}function ru(l){let r=U0(l),c=r.matches[r.matches.length-1];return Ke(c.route.id,`${l} can only be used on routes that contain a unique "id"`),c.route.id}function H0(){return ru("useRouteId")}function $0(){let l=h.useContext(nu),r=R0("useRouteError"),c=ru("useRouteError");return l!==void 0?l:r.errors?.[c]}function Q0(){let{router:l}=_0("useNavigate"),r=ru("useNavigate"),c=h.useRef(!1);return Kh(()=>{c.current=!0}),h.useCallback(async(d,m={})=>{us(c.current,Zh),c.current&&(typeof d=="number"?l.navigate(d):await l.navigate(d,{fromRouteId:r,...m}))},[l,r])}var wh={};function Wh(l,r,c){!r&&!wh[l]&&(wh[l]=!0,us(!1,c))}h.memo(V0);function V0({routes:l,future:r,state:c,unstable_onError:o}){return Jh(l,void 0,c,o,r)}function I0(l){return T0(l.context)}function Yt(l){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G0({basename:l="/",children:r=null,location:c,navigationType:o="POP",navigator:d,static:m=!1}){Ke(!Xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=l.replace(/^\/*/,"/"),g=h.useMemo(()=>({basename:p,navigator:d,static:m,future:{}}),[p,d,m]);typeof c=="string"&&(c=Ua(c));let{pathname:x="/",search:f="",hash:y="",state:v=null,key:S="default"}=c,k=h.useMemo(()=>{let w=Us(x,p);return w==null?null:{location:{pathname:w,search:f,hash:y,state:v,key:S},navigationType:o}},[p,x,f,y,v,S,o]);return us(k!=null,`<Router basename="${p}"> is not able to match the URL "${x}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:h.createElement(bs.Provider,{value:g},h.createElement(Yl.Provider,{children:r,value:k}))}function P0({children:l,location:r}){return z0(Jo(l),r)}function Jo(l,r=[]){let c=[];return h.Children.forEach(l,(o,d)=>{if(!h.isValidElement(o))return;let m=[...r,d];if(o.type===h.Fragment){c.push.apply(c,Jo(o.props.children,m));return}Ke(o.type===Yt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!o.props.index||!o.props.children,"An index route cannot have child routes.");let p={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=Jo(o.props.children,m)),c.push(p)}),c}var hr="get",xr="application/x-www-form-urlencoded";function wr(l){return l!=null&&typeof l.tagName=="string"}function Y0(l){return wr(l)&&l.tagName.toLowerCase()==="button"}function X0(l){return wr(l)&&l.tagName.toLowerCase()==="form"}function F0(l){return wr(l)&&l.tagName.toLowerCase()==="input"}function Z0(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function K0(l,r){return l.button===0&&(!r||r==="_self")&&!Z0(l)}var dr=null;function J0(){if(dr===null)try{new FormData(document.createElement("form"),0),dr=!1}catch{dr=!0}return dr}var W0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yo(l){return l!=null&&!W0.has(l)?(us(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xr}"`),null):l}function ey(l,r){let c,o,d,m,p;if(X0(l)){let g=l.getAttribute("action");o=g?Us(g,r):null,c=l.getAttribute("method")||hr,d=Yo(l.getAttribute("enctype"))||xr,m=new FormData(l)}else if(Y0(l)||F0(l)&&(l.type==="submit"||l.type==="image")){let g=l.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=l.getAttribute("formaction")||g.getAttribute("action");if(o=x?Us(x,r):null,c=l.getAttribute("formmethod")||g.getAttribute("method")||hr,d=Yo(l.getAttribute("formenctype"))||Yo(g.getAttribute("enctype"))||xr,m=new FormData(g,l),!J0()){let{name:f,type:y,value:v}=l;if(y==="image"){let S=f?`${f}.`:"";m.append(`${S}x`,"0"),m.append(`${S}y`,"0")}else f&&m.append(f,v)}}else{if(wr(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=hr,o=null,d=xr,p=l}return m&&d==="text/plain"&&(p=m,m=void 0),{action:o,method:c.toLowerCase(),encType:d,formData:m,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cu(l,r){if(l===!1||l===null||typeof l>"u")throw new Error(r)}function ty(l,r,c){let o=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o.pathname==="/"?o.pathname=`_root.${c}`:r&&Us(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${c}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${c}`,o}async function sy(l,r){if(l.id in r)return r[l.id];try{let c=await import(l.module);return r[l.id]=c,c}catch(c){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ay(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function ny(l,r,c){let o=await Promise.all(l.map(async d=>{let m=r.routes[d.route.id];if(m){let p=await sy(m,c);return p.links?p.links():[]}return[]}));return cy(o.flat(1).filter(ay).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Sh(l,r,c,o,d,m){let p=(x,f)=>c[f]?x.route.id!==c[f].route.id:!0,g=(x,f)=>c[f].pathname!==x.pathname||c[f].route.path?.endsWith("*")&&c[f].params["*"]!==x.params["*"];return m==="assets"?r.filter((x,f)=>p(x,f)||g(x,f)):m==="data"?r.filter((x,f)=>{let y=o.routes[x.route.id];if(!y||!y.hasLoader)return!1;if(p(x,f)||g(x,f))return!0;if(x.route.shouldRevalidate){let v=x.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ly(l,r,{includeHydrateFallback:c}={}){return iy(l.map(o=>{let d=r.routes[o.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),c&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function iy(l){return[...new Set(l)]}function ry(l){let r={},c=Object.keys(l).sort();for(let o of c)r[o]=l[o];return r}function cy(l,r){let c=new Set;return new Set(r),l.reduce((o,d)=>{let m=JSON.stringify(ry(d));return c.has(m)||(c.add(m),o.push({key:m,link:d})),o},[])}function ex(){let l=h.useContext(On);return cu(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function oy(){let l=h.useContext(Nr);return cu(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var ou=h.createContext(void 0);ou.displayName="FrameworkContext";function tx(){let l=h.useContext(ou);return cu(l,"You must render this element inside a <HydratedRouter> element"),l}function uy(l,r){let c=h.useContext(ou),[o,d]=h.useState(!1),[m,p]=h.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:f,onMouseLeave:y,onTouchStart:v}=r,S=h.useRef(null);h.useEffect(()=>{if(l==="render"&&p(!0),l==="viewport"){let N=A=>{A.forEach(T=>{p(T.isIntersecting)})},z=new IntersectionObserver(N,{threshold:.5});return S.current&&z.observe(S.current),()=>{z.disconnect()}}},[l]),h.useEffect(()=>{if(o){let N=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(N)}}},[o]);let k=()=>{d(!0)},w=()=>{d(!1),p(!1)};return c?l!=="intent"?[m,S,{}]:[m,S,{onFocus:_l(g,k),onBlur:_l(x,w),onMouseEnter:_l(f,k),onMouseLeave:_l(y,w),onTouchStart:_l(v,k)}]:[!1,S,{}]}function _l(l,r){return c=>{l&&l(c),c.defaultPrevented||r(c)}}function dy({page:l,...r}){let{router:c}=ex(),o=h.useMemo(()=>Vh(c.routes,l,c.basename),[c.routes,l,c.basename]);return o?h.createElement(fy,{page:l,matches:o,...r}):null}function my(l){let{manifest:r,routeModules:c}=tx(),[o,d]=h.useState([]);return h.useEffect(()=>{let m=!1;return ny(l,r,c).then(p=>{m||d(p)}),()=>{m=!0}},[l,r,c]),o}function fy({page:l,matches:r,...c}){let o=fa(),{manifest:d,routeModules:m}=tx(),{basename:p}=ex(),{loaderData:g,matches:x}=oy(),f=h.useMemo(()=>Sh(l,r,x,d,o,"data"),[l,r,x,d,o]),y=h.useMemo(()=>Sh(l,r,x,d,o,"assets"),[l,r,x,d,o]),v=h.useMemo(()=>{if(l===o.pathname+o.search+o.hash)return[];let w=new Set,N=!1;if(r.forEach(A=>{let T=d.routes[A.route.id];!T||!T.hasLoader||(!f.some(O=>O.route.id===A.route.id)&&A.route.id in g&&m[A.route.id]?.shouldRevalidate||T.hasClientLoader?N=!0:w.add(A.route.id))}),w.size===0)return[];let z=ty(l,p,"data");return N&&w.size>0&&z.searchParams.set("_routes",r.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[z.pathname+z.search]},[p,g,o,d,f,r,l,m]),S=h.useMemo(()=>ly(y,d),[y,d]),k=my(y);return h.createElement(h.Fragment,null,v.map(w=>h.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...c})),S.map(w=>h.createElement("link",{key:w,rel:"modulepreload",href:w,...c})),k.map(({key:w,link:N})=>h.createElement("link",{key:w,nonce:c.nonce,...N})))}function hy(...l){return r=>{l.forEach(c=>{typeof c=="function"?c(r):c!=null&&(c.current=r)})}}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sx&&(window.__reactRouterVersion="7.8.2")}catch{}function xy({basename:l,children:r,window:c}){let o=h.useRef();o.current==null&&(o.current=Wg({window:c,v5Compat:!0}));let d=o.current,[m,p]=h.useState({action:d.action,location:d.location}),g=h.useCallback(x=>{h.startTransition(()=>p(x))},[p]);return h.useLayoutEffect(()=>d.listen(g),[d,g]),h.createElement(G0,{basename:l,children:r,location:m.location,navigationType:m.action,navigator:d})}var ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nx=h.forwardRef(function({onClick:r,discover:c="render",prefetch:o="none",relative:d,reloadDocument:m,replace:p,state:g,target:x,to:f,preventScrollReset:y,viewTransition:v,...S},k){let{basename:w}=h.useContext(bs),N=typeof f=="string"&&ax.test(f),z,A=!1;if(typeof f=="string"&&N&&(z=f,sx))try{let B=new URL(window.location.href),q=f.startsWith("//")?new URL(B.protocol+f):new URL(f),_=Us(q.pathname,w);q.origin===B.origin&&_!=null?f=_+q.search+q.hash:A=!0}catch{us(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=k0(f,{relative:d}),[O,L,M]=uy(o,S),I=yy(f,{replace:p,state:g,target:x,preventScrollReset:y,relative:d,viewTransition:v});function X(B){r&&r(B),B.defaultPrevented||I(B)}let P=h.createElement("a",{...S,...M,href:z||T,onClick:A||m?r:X,ref:hy(k,L),target:x,"data-discover":!N&&c==="render"?"true":void 0});return O&&!N?h.createElement(h.Fragment,null,P,h.createElement(dy,{page:T})):P});nx.displayName="Link";var Ul=h.forwardRef(function({"aria-current":r="page",caseSensitive:c=!1,className:o="",end:d=!1,style:m,to:p,viewTransition:g,children:x,...f},y){let v=Fl(p,{relative:f.relative}),S=fa(),k=h.useContext(Nr),{navigator:w,basename:N}=h.useContext(bs),z=k!=null&&wy(v)&&g===!0,A=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,T=S.pathname,O=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;c||(T=T.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&N&&(O=Us(O,N)||O);const L=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let M=T===A||!d&&T.startsWith(A)&&T.charAt(L)==="/",I=O!=null&&(O===A||!d&&O.startsWith(A)&&O.charAt(A.length)==="/"),X={isActive:M,isPending:I,isTransitioning:z},P=M?r:void 0,B;typeof o=="function"?B=o(X):B=[o,M?"active":null,I?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let q=typeof m=="function"?m(X):m;return h.createElement(nx,{...f,"aria-current":P,className:B,ref:y,style:q,to:p,viewTransition:g},typeof x=="function"?x(X):x)});Ul.displayName="NavLink";var py=h.forwardRef(({discover:l="render",fetcherKey:r,navigate:c,reloadDocument:o,replace:d,state:m,method:p=hr,action:g,onSubmit:x,relative:f,preventScrollReset:y,viewTransition:v,...S},k)=>{let w=by(),N=Ny(g,{relative:f}),z=p.toLowerCase()==="get"?"get":"post",A=typeof g=="string"&&ax.test(g),T=O=>{if(x&&x(O),O.defaultPrevented)return;O.preventDefault();let L=O.nativeEvent.submitter,M=L?.getAttribute("formmethod")||p;w(L||O.currentTarget,{fetcherKey:r,method:M,navigate:c,replace:d,state:m,relative:f,preventScrollReset:y,viewTransition:v})};return h.createElement("form",{ref:k,method:z,action:N,onSubmit:o?x:T,...S,"data-discover":!A&&l==="render"?"true":void 0})});py.displayName="Form";function gy(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lx(l){let r=h.useContext(On);return Ke(r,gy(l)),r}function yy(l,{target:r,replace:c,state:o,preventScrollReset:d,relative:m,viewTransition:p}={}){let g=lu(),x=fa(),f=Fl(l,{relative:m});return h.useCallback(y=>{if(K0(y,r)){y.preventDefault();let v=c!==void 0?c:Gl(x)===Gl(f);g(l,{replace:v,state:o,preventScrollReset:d,relative:m,viewTransition:p})}},[x,g,f,c,o,r,l,d,m,p])}var vy=0,jy=()=>`__${String(++vy)}__`;function by(){let{router:l}=lx("useSubmit"),{basename:r}=h.useContext(bs),c=H0();return h.useCallback(async(o,d={})=>{let{action:m,method:p,encType:g,formData:x,body:f}=ey(o,r);if(d.navigate===!1){let y=d.fetcherKey||jy();await l.fetch(y,c,d.action||m,{preventScrollReset:d.preventScrollReset,formData:x,body:f,formMethod:d.method||p,formEncType:d.encType||g,flushSync:d.flushSync})}else await l.navigate(d.action||m,{preventScrollReset:d.preventScrollReset,formData:x,body:f,formMethod:d.method||p,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:c,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,r,c])}function Ny(l,{relative:r}={}){let{basename:c}=h.useContext(bs),o=h.useContext(ds);Ke(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),m={...Fl(l||".",{relative:r})},p=fa();if(l==null){m.search=p.search;let g=new URLSearchParams(m.search),x=g.getAll("index");if(x.some(y=>y==="")){g.delete("index"),x.filter(v=>v).forEach(v=>g.append("index",v));let y=g.toString();m.search=y?`?${y}`:""}}return(!l||l===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(m.pathname=m.pathname==="/"?c:Rs([c,m.pathname])),Gl(m)}function wy(l,{relative:r}={}){let c=h.useContext(Fh);Ke(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=lx("useViewTransitionState"),d=Fl(l,{relative:r});if(!c.isTransitioning)return!1;let m=Us(c.currentLocation.pathname,o)||c.currentLocation.pathname,p=Us(c.nextLocation.pathname,o)||c.nextLocation.pathname;return gr(d.pathname,p)!=null||gr(d.pathname,m)!=null}var uu=Qh();const Sy=(l,r={})=>{const{threshold:c=50,edgeThreshold:o=20,enabled:d=!0}=r,m=h.useRef(null),p=h.useRef(null),g=h.useRef(null);h.useEffect(()=>{if(!d)return;const x=v=>{const S=v.touches[0];m.current=S.clientX,p.current=S.clientY,g.current=Date.now()},f=v=>{if(!m.current||!p.current)return;const S=v.touches[0],k=S.clientX-m.current,w=S.clientY-p.current;Math.abs(k)>Math.abs(w)&&Math.abs(k)>10&&v.preventDefault()},y=v=>{if(!m.current||!p.current||!g.current)return;const S=v.changedTouches[0],k=S.clientX-m.current,w=S.clientY-p.current;if(Date.now()-g.current>500){m.current=null,p.current=null,g.current=null;return}const z=Math.abs(k),A=Math.abs(w);z>A&&z>c?k>0?l.onSwipeRight?.():l.onSwipeLeft?.():A>z&&A>c&&(w>0?l.onSwipeDown?.():l.onSwipeUp?.()),m.current=null,p.current=null,g.current=null};return document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",y,{passive:!0}),()=>{document.removeEventListener("touchstart",x),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",y)}},[l,c,o,d])},Cy=(l,r={})=>{const{edgeWidth:c=20,enabled:o=!0}=r,d=h.useRef(null),m=h.useRef(null),p=h.useRef(!1);h.useEffect(()=>{if(!o)return;const g=y=>{const v=y.touches[0];d.current=v.clientX,m.current=v.clientY,v.clientX<=c?p.current=!0:p.current=!1},x=y=>{if(!p.current||!d.current||!m.current)return;const v=y.touches[0],S=v.clientX-d.current,k=v.clientY-m.current;Math.abs(S)>Math.abs(k)&&S>10&&y.preventDefault()},f=y=>{if(!p.current||!d.current||!m.current){p.current=!1;return}const v=y.changedTouches[0],S=v.clientX-d.current,k=v.clientY-m.current;Math.abs(S)>Math.abs(k)&&S>50&&l(),d.current=null,m.current=null,p.current=!1};return document.addEventListener("touchstart",g,{passive:!0}),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",f,{passive:!0}),()=>{document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",f)}},[l,c,o])};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dy=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,c,o)=>o?o.toUpperCase():c.toLowerCase()),Ch=l=>{const r=Dy(l);return r.charAt(0).toUpperCase()+r.slice(1)},ix=(...l)=>l.filter((r,c,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===c).join(" ").trim(),Ay=l=>{for(const r in l)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ty={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=h.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:d="",children:m,iconNode:p,...g},x)=>h.createElement("svg",{ref:x,...Ty,width:r,height:r,stroke:l,strokeWidth:o?Number(c)*24/Number(r):c,className:ix("lucide",d),...!m&&!Ay(g)&&{"aria-hidden":"true"},...g},[...p.map(([f,y])=>h.createElement(f,y)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(l,r)=>{const c=h.forwardRef(({className:o,...d},m)=>h.createElement(Ey,{ref:m,iconNode:r,className:ix(`lucide-${ky(Ch(l))}`,`lucide-${l}`,o),...d}));return c.displayName=Ch(l),c};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_a=ve("activity",zy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kh=ve("arrow-left",My);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ly=ve("arrow-right",Oy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],By=ve("banknote",qy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ry=ve("book-open",_y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bt=ve("calendar",Uy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rx=ve("chart-column",Hy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],cx=ve("chart-pie",$y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wo=ve("check",Qy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ra=ve("chevron-down",Vy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],du=ve("chevron-left",Iy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Pl=ve("chevron-right",Gy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zl=ve("chevron-up",Py);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],it=ve("circle-alert",Yy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],eu=ve("circle-check-big",Xy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Zy=ve("circle-x",Fy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tu=ve("clock",Ky);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Wy=ve("cloud-off",Jy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],tv=ve("cloud",ev);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Dh=ve("copy",sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ah=ve("database",av);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],gs=ve("dollar-sign",nv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Dt=ve("download",lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],mu=ve("droplets",iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ha=ve("ellipsis-vertical",rv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ov=ve("eye-off",cv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yr=ve("eye",uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$l=ve("factory",dv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Ot=ve("file-json",mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],st=ve("file-text",fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fu=ve("funnel",hv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],pv=ve("github",xv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],yv=ve("hash",gv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ox=ve("info",vv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Th=ve("key",jv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Nv=ve("layout-dashboard",bv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Eh=ve("list",wv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cv=ve("loader-circle",Sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xo=ve("lock",kv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Av=ve("log-out",Dv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hu=ve("map-pin",Tv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M12 3v6",key:"1holv5"}],["path",{d:"M16.76 3a2 2 0 0 1 1.8 1.1l2.23 4.479a2 2 0 0 1 .21.891V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9.472a2 2 0 0 1 .211-.894L5.45 4.1A2 2 0 0 1 7.24 3z",key:"187q7i"}],["path",{d:"M3.054 9.013h17.893",key:"grwhos"}]],ux=ve("package-2",Ev);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gt=ve("package",zv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Bt=ve("pen",Mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Sr=ve("phone",Ov);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lt=ve("plus",Lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Bv=ve("printer",qv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fe=ve("refresh-cw",_v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dx=ve("save",Rv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xa=ve("search",Uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mx=ve("settings",Hv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fx=ve("shield",$v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Cr=ve("shopping-cart",Qv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ns=ve("square-check-big",Vv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ls=ve("square",Iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],su=ve("sticky-note",Gv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],zh=ve("tags",Pv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nt=ve("trash-2",Yv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],kr=ve("trending-down",Xv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],is=ve("trending-up",Fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ys=ve("triangle-alert",Zv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qt=ve("truck",Kv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vs=ve("upload",Jv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ln=ve("user-check",Wv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_t=ve("user",ej);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],js=ve("users",tj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],ma=ve("weight",sj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],nj=ve("wheat",aj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],mr=ve("wrench",lj);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],En=ve("x",ij),Mh=[{title:"Dashboard",path:"/",icon:t.jsx(Nv,{size:20})},{title:"Inventory",path:"/inventory",icon:t.jsx(gt,{size:20})},{title:"Customers",icon:t.jsx(js,{size:20}),subItems:[{title:"Customer List",path:"/customers",icon:t.jsx(Eh,{size:18})},{title:"Sales",path:"/customers/sales",icon:t.jsx(Cr,{size:18})},{title:"Loadings",path:"/customers/loadings",icon:t.jsx(qt,{size:18})},{title:"Ledger",path:"/customers/ledger",icon:t.jsx(Ry,{size:18})}]},{title:"Suppliers",icon:t.jsx(qt,{size:20}),subItems:[{title:"Supplier List",path:"/suppliers",icon:t.jsx(Eh,{size:18})},{title:"Paddy Trucks",path:"/suppliers/paddy-trucks",icon:t.jsx(nj,{size:18})}]},{title:"Reports",path:"/reports",icon:t.jsx(st,{size:20})},{title:"Settings",path:"/settings",icon:t.jsx(mx,{size:20})}],rj=()=>{const[l,r]=h.useState([]),[c,o]=h.useState(!1),[d,m]=h.useState(null),[p,g]=h.useState(!1),x=fa();h.useEffect(()=>{o(!1)},[x]),h.useEffect(()=>(c?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[c]),h.useEffect(()=>{if(d){const v=setTimeout(()=>{m(null)},500);return()=>clearTimeout(v)}},[d]),Cy(()=>{c||o(!0)},{edgeWidth:30,enabled:!c&&window.innerWidth<1024}),Sy({onSwipeLeft:()=>{c&&o(!1)}},{threshold:80,enabled:c&&window.innerWidth<1024}),h.useEffect(()=>{if(window.innerWidth<1024&&!localStorage.getItem("swipeHintShown")){g(!0);const S=setTimeout(()=>{g(!1),localStorage.setItem("swipeHintShown","true")},3e3);return()=>clearTimeout(S)}},[]);const f=v=>{r(S=>(!S.includes(v)&&m(v),S.includes(v)?S.filter(w=>w!==v):[...S,v]))},y=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-16 px-4 border-b border-gray-800/50 flex items-center",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($l,{size:20,className:"text-gray-400"}),t.jsx("h1",{className:"text-lg font-semibold text-gray-200",children:"Supreme Rice Mills"})]})}),t.jsx("nav",{className:"p-4 space-y-2",children:Mh.map(v=>t.jsx("div",{children:v.path?t.jsxs(Ul,{to:v.path,end:v.path==="/",className:({isActive:S})=>`sidebar-item ${S?"sidebar-item-active":"glass-hover"}`,onClick:()=>o(!1),children:[v.icon,t.jsx("span",{children:v.title})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"sidebar-item glass-hover",onClick:()=>f(v.title),children:[v.icon,t.jsx("span",{className:"flex-1",children:v.title}),l.includes(v.title)?t.jsx(Ra,{size:18}):t.jsx(Pl,{size:18})]}),t.jsx("div",{className:`overflow-hidden transition-all duration-400 ease-[cubic-bezier(0.4,0.0,0.2,1)] ${l.includes(v.title)?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:v.subItems&&t.jsx("div",{className:"ml-4 mt-2 space-y-1 pb-2",children:v.subItems.map((S,k)=>t.jsxs(Ul,{to:S.path,end:!0,className:({isActive:w})=>`sidebar-item text-sm transition-all duration-300 ${w?"sidebar-item-active":"glass-hover"}`,onClick:()=>o(!1),style:{animation:d===v.title?`slideInFromLeft 0.3s ease-out ${k*.05}s both`:"none"},children:[S.icon,t.jsx("span",{children:S.title})]},S.path))})})]})},v.title))})]});return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:`lg:hidden fixed left-4 z-40 w-10 h-10 rounded-xl glass backdrop-blur-xl transition-all duration-300 ${c?"bg-white/20 shadow-lg":"bg-white/10 hover:bg-white/15 hover:shadow-md"}`,style:{top:"12px"},onClick:()=>o(!c),children:t.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:t.jsxs("div",{className:"relative w-5 h-4 flex flex-col justify-between",children:[t.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transform transition-all duration-300 origin-left ${c?"rotate-45 translate-y-0.5":""}`}),t.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transition-all duration-300 ${c?"opacity-0 translate-x-3":""}`}),t.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transform transition-all duration-300 origin-left ${c?"-rotate-45 -translate-y-0.5":""}`})]})})}),t.jsx("aside",{className:"hidden lg:block w-64 h-screen glass border-r border-gray-800/50 sticky top-0",children:t.jsx(y,{})}),t.jsxs("div",{className:`lg:hidden fixed inset-0 z-50 ${c?"pointer-events-auto":"pointer-events-none"}`,children:[t.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-500 ease-out ${c?"opacity-80 backdrop-blur-sm":"opacity-0"}`,onClick:()=>o(!1)}),t.jsxs("div",{className:`absolute inset-y-0 left-0 w-full max-w-sm flex flex-col bg-gradient-to-br from-gray-900/95 via-gray-900/98 to-black/95 backdrop-blur-2xl shadow-2xl transition-transform duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] ${c?"translate-x-0":"-translate-x-full"}`,children:[t.jsxs("div",{className:"h-16 px-4 border-b border-gray-800/50 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($l,{size:20,className:"text-gray-400"}),t.jsx("h1",{className:"text-lg font-semibold text-gray-200",children:"Supreme Rice Mills"})]}),t.jsx("button",{onClick:()=>o(!1),className:"p-2 glass rounded-lg hover:bg-white/10 transition-all",children:t.jsx(En,{size:18})})]}),t.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:t.jsx("div",{className:"space-y-2",children:Mh.map(v=>t.jsx("div",{children:v.path?t.jsxs(Ul,{to:v.path,end:v.path==="/",className:({isActive:S})=>`flex items-center gap-4 p-4 rounded-xl transition-all ${S?"bg-white/10 text-white shadow-lg":"text-gray-300 hover:bg-white/5 hover:text-white"}`,onClick:()=>o(!1),children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:v.icon}),t.jsx("span",{className:"font-medium text-base",children:v.title}),v.path&&t.jsx(Ly,{size:16,className:"ml-auto opacity-50"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:"w-full flex items-center gap-4 p-4 rounded-xl text-gray-300 hover:bg-white/5 hover:text-white transition-all",onClick:()=>f(v.title),children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:v.icon}),t.jsx("span",{className:"font-medium text-base flex-1 text-left",children:v.title}),l.includes(v.title)?t.jsx(Ra,{size:18}):t.jsx(Pl,{size:18})]}),t.jsx("div",{className:`overflow-hidden transition-all duration-400 ease-[cubic-bezier(0.4,0.0,0.2,1)] ${l.includes(v.title)?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:v.subItems&&t.jsx("div",{className:"mt-2 ml-4 space-y-1 pb-2",children:v.subItems.map((S,k)=>t.jsxs(Ul,{to:S.path,end:!0,className:({isActive:w})=>`flex items-center gap-3 p-3 pl-8 rounded-lg transition-all duration-300 ${w?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-gray-200"}`,onClick:()=>o(!1),style:{animation:d===v.title?`slideInFromLeft 0.3s ease-out ${k*.05}s both`:"none"},children:[S.icon||t.jsx("div",{className:"w-4"}),t.jsx("span",{className:"text-sm",children:S.title})]},S.path))})})]})},v.title))})}),t.jsx("div",{className:"p-6 border-t border-gray-800/50",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:t.jsx($l,{size:18,className:"text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium",children:"Supreme Rice Mills"}),t.jsx("p",{className:"text-xs text-muted",children:"v1.0.0"})]})]})})]})]}),p&&t.jsx("div",{className:"lg:hidden fixed left-0 top-1/2 -translate-y-1/2 z-40 pointer-events-none animate-pulse",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-16 bg-gradient-to-r from-white/60 to-transparent rounded-r-full"}),t.jsx("div",{className:"bg-black/80 backdrop-blur-sm px-3 py-2 rounded-full",children:t.jsx("p",{className:"text-xs text-white/90 whitespace-nowrap",children:"Swipe from edge →"})})]})})]})},Je=l=>{if(!l)return"-";try{const r=typeof l=="string"?new Date(l):l;if(isNaN(r.getTime()))return"-";const c=r.getDate().toString().padStart(2,"0"),o=(r.getMonth()+1).toString().padStart(2,"0"),d=r.getFullYear();return`${c}/${o}/${d}`}catch{return"-"}},cj=()=>{const{isAuthenticated:l,syncStatus:r,lastSync:c,syncData:o,logout:d}=h.useContext(vu),[m,p]=h.useState(!1),g=f=>{if(!f)return"Not synced";const y=new Date(f),S=Math.floor((new Date().getTime()-y.getTime())/1e3);return S<60?"Just now":S<3600?`${Math.floor(S/60)}m ago`:S<86400?`${Math.floor(S/3600)}h ago`:Je(y)};if(!l)return t.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 glass rounded-lg text-yellow-400/80 hover:bg-white/5 transition-all",children:[t.jsx(Wy,{size:18}),t.jsx("span",{className:"text-sm hidden sm:inline",children:"Offline Mode"})]});const x=()=>r==="syncing"?"bg-blue-500/10 border-blue-500/30 text-blue-400":r==="error"?"bg-red-500/10 border-red-500/30 text-red-400":r==="success"?"bg-green-500/10 border-green-500/30 text-green-400":"glass hover:bg-white/5";return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>p(!m),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all ${x()}`,children:[r==="syncing"?t.jsx(Fe,{size:18,className:"animate-spin"}):r==="error"?t.jsx(it,{size:18}):r==="success"?t.jsx(Wo,{size:18}):t.jsx(pv,{size:18}),t.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:r==="syncing"?"Syncing...":r==="error"?"Sync Error":r==="success"?"Synced":"GitHub"})]}),m&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),t.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-gray-900 border border-gray-700 rounded-xl shadow-2xl z-50 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-800/50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Sync Status"}),t.jsx(tv,{size:14,className:"text-gray-500"})]}),t.jsxs("p",{className:"text-sm text-gray-300",children:["Last sync: ",t.jsx("span",{className:"text-white font-medium",children:g(c)})]})]}),t.jsxs("div",{className:"p-2",children:[t.jsxs("button",{onClick:()=>{o(),p(!1)},disabled:r==="syncing",className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:bg-white/5 rounded-lg transition-all disabled:opacity-50",children:[t.jsx(Fe,{size:16,className:r==="syncing"?"animate-spin":""}),t.jsx("span",{children:"Sync Now"}),r==="syncing"&&t.jsx("span",{className:"ml-auto text-xs text-blue-400",children:"In progress..."})]}),t.jsx("div",{className:"my-2 border-t border-gray-800/50"}),t.jsxs("button",{onClick:()=>{d(),p(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:[t.jsx(Av,{size:16}),t.jsx("span",{children:"Disconnect GitHub"})]})]})]})]})]})},oj=()=>t.jsx("header",{className:"h-16 glass border-b border-gray-800/50 sticky top-0 z-20",children:t.jsx("div",{className:"h-full px-4 sm:px-6 flex items-center justify-end",children:t.jsx("div",{className:"flex items-center",children:t.jsx(cj,{})})})}),uj=()=>null,dj=()=>t.jsxs("div",{className:"flex min-h-screen bg-gray-950",children:[t.jsx(rj,{}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx(oj,{}),t.jsx("main",{className:"flex-1 p-6 overflow-auto",children:t.jsx(I0,{})})]}),t.jsx(uj,{})]});class mj{cache=new Map;DEFAULT_TTL=300*1e3;get(r){const c=this.cache.get(r);return c?Date.now()-c.timestamp>c.ttl?(this.cache.delete(r),null):c.data:null}set(r,c,o=this.DEFAULT_TTL){this.cache.set(r,{data:c,timestamp:Date.now(),ttl:o})}delete(r){return this.cache.delete(r)}clear(){this.cache.clear()}has(r){const c=this.cache.get(r);return c?Date.now()-c.timestamp>c.ttl?(this.cache.delete(r),!1):!0:!1}getSize(){return this.cache.size}}class fj{queue=[];add(r,c,o){this.queue.push({id:Date.now().toString(),type:r,operation:c,data:o,timestamp:Date.now()}),console.log(`Queued offline operation: ${c} ${r}`)}getAll(){return[...this.queue]}clear(){const r=this.queue.length;this.queue=[],r>0&&console.log(`Cleared ${r} offline operations`)}getSize(){return this.queue.length}isEmpty(){return this.queue.length===0}removeById(r){const c=this.queue.length;return this.queue=this.queue.filter(o=>o.id!==r),this.queue.length<c}getOldestOperation(){return this.queue.length>0?this.queue[0]:null}getNewestOperation(){return this.queue.length>0?this.queue[this.queue.length-1]:null}}class hj{broadcastChannel=null;onDataUpdate=null;storageListener=null;constructor(){this.setupSync()}setupSync(){try{"BroadcastChannel"in window&&(this.broadcastChannel=new BroadcastChannel("supreme_data_sync"),this.broadcastChannel.onmessage=r=>{r.data.type==="data_update"&&this.onDataUpdate&&this.onDataUpdate(r.data.data)}),this.storageListener=r=>{if(r.key==="supreme_data_sync"&&r.newValue)try{const c=JSON.parse(r.newValue);c.timestamp>Date.now()-1e3&&this.onDataUpdate&&this.onDataUpdate(c.data)}catch(c){console.error("Failed to parse cross-tab update:",c)}},window.addEventListener("storage",this.storageListener)}catch(r){console.error("Failed to setup cross-tab sync:",r)}}broadcast(r){try{const c={type:"data_update",data:r,timestamp:Date.now()};this.broadcastChannel&&this.broadcastChannel.postMessage(c),localStorage.setItem("supreme_data_sync",JSON.stringify({data:r,timestamp:Date.now()})),setTimeout(()=>{localStorage.removeItem("supreme_data_sync")},100)}catch(c){console.error("Failed to broadcast data change:",c)}}onUpdate(r){this.onDataUpdate=r}destroy(){this.broadcastChannel&&(this.broadcastChannel.close(),this.broadcastChannel=null),this.storageListener&&(window.removeEventListener("storage",this.storageListener),this.storageListener=null),this.onDataUpdate=null}}class xj{config;currentSha=null;encodeBase64(r){const c=new TextEncoder().encode(r),o=Array.from(c).map(d=>String.fromCharCode(d)).join("");return btoa(o)}decodeBase64(r){const c=atob(r),o=new Uint8Array(Array.from(c).map(d=>d.charCodeAt(0)));return new TextDecoder().decode(o)}constructor(r){this.config=r}updateToken(r){this.config.token=r}async verifyToken(){if(!this.config.token)return!1;try{return(await fetch(`${this.config.apiBase}/user`,{headers:{Authorization:`Bearer ${this.config.token}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(r){return console.error("Token verification failed:",r),!1}}async fetchData(){if(!this.config.token)throw new Error("No authentication token");try{const r=await fetch(`${this.config.apiBase}/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.path}?ref=${this.config.branch}&t=${Date.now()}`,{headers:{Authorization:`Bearer ${this.config.token}`,Accept:"application/vnd.github.v3+json"}});if(r.status===404)return null;if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);const c=await r.json(),o=this.decodeBase64(c.content),d=JSON.parse(o);return this.currentSha=c.sha,{data:{products:d.products||[],categories:d.categories||[],movements:d.movements||[],productionEntries:d.productionEntries||[],customers:d.customers||[],sales:d.sales||[],ledgerEntries:d.ledgerEntries||[],bookedStock:d.bookedStock||[],loadings:d.loadings||[],suppliers:d.suppliers||[],paddyTrucks:d.paddyTrucks||[]},sha:c.sha}}catch(r){throw console.error("Error fetching data from GitHub:",r),r}}async saveData(r,c){if(!this.config.token)throw new Error("No authentication token");const o={...r,metadata:{lastUpdated:new Date().toISOString(),version:"3.0.0"}},d=this.encodeBase64(JSON.stringify(o,null,2)),m={message:`Update data - ${new Date().toISOString()}`,content:d,branch:this.config.branch},p=c||this.currentSha;p&&(m.sha=p);const g=await fetch(`${this.config.apiBase}/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.path}`,{method:"PUT",headers:{Authorization:`Bearer ${this.config.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(m)});if(!g.ok)throw g.status===409?new Error("SHA_CONFLICT"):new Error(`GitHub save failed: ${g.status}`);const x=await g.json();return this.currentSha=x.content.sha,x.content.sha}async checkConnection(){if(!this.config.token)return navigator.onLine;try{return(await fetch(`${this.config.apiBase}/user`,{method:"HEAD",headers:{Authorization:`Bearer ${this.config.token}`,Accept:"application/vnd.github.v3+json"},cache:"no-cache"})).ok}catch{return!1}}getCurrentSha(){return this.currentSha}setCurrentSha(r){this.currentSha=r}}class pj{mergeArrays(r,c,o="id"){const d=new Map;return r.forEach(m=>{d.set(m[o],m)}),c.forEach(m=>{d.set(m[o],m)}),Array.from(d.values())}mergeDataStates(r,c){return{products:this.mergeArrays(r.products,c.products,"id"),categories:this.mergeArrays(r.categories,c.categories,"id"),movements:this.mergeArrays(r.movements,c.movements,"id"),productionEntries:this.mergeArrays(r.productionEntries,c.productionEntries,"id"),customers:this.mergeArrays(r.customers,c.customers,"id"),sales:this.mergeArrays(r.sales,c.sales,"id"),ledgerEntries:this.mergeArrays(r.ledgerEntries,c.ledgerEntries,"id"),bookedStock:this.mergeArrays(r.bookedStock,c.bookedStock,"id"),loadings:this.mergeArrays(r.loadings,c.loadings,"id"),suppliers:this.mergeArrays(r.suppliers,c.suppliers,"id"),paddyTrucks:this.mergeArrays(r.paddyTrucks,c.paddyTrucks,"id")}}getDefaultDataState(){return{products:[],categories:[],movements:[],productionEntries:[],customers:[],sales:[],ledgerEntries:[],bookedStock:[],loadings:[],suppliers:[],paddyTrucks:[]}}}class gj{cacheManager;offlineQueue;crossTabSync;githubAPI;dataMerger;memoryData;dataListeners=new Set;connectionListeners=new Set;isOnline=navigator.onLine;saveDebounceTimer=null;pendingSaves=new Set;batchUpdateInProgress=!1;batchUpdateQueue=[];saveLock=!1;saveQueue=Promise.resolve();CACHE_TTL=300*1e3;DEBOUNCE_DELAY=2e3;connectionCheckInterval=null;constructor(){this.cacheManager=new mj,this.offlineQueue=new fj,this.crossTabSync=new hj,this.dataMerger=new pj;const r={owner:"wissamyah",repo:"suprememanagement-data",path:"data/data.json",branch:"main",token:null,apiBase:"https://api.github.com"};this.githubAPI=new xj(r),this.memoryData=this.dataMerger.getDefaultDataState(),this.setupEventListeners(),this.crossTabSync.onUpdate(c=>{this.memoryData=c,this.dataListeners.forEach(o=>o(this.memoryData))})}setupEventListeners(){window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),this.connectionCheckInterval=setInterval(()=>this.checkConnection(),3e4)}async initialize(r){if(this.githubAPI.updateToken(r),!await this.githubAPI.verifyToken())throw new Error("Invalid GitHub token");return await this.loadAllData(),!0}async loadAllData(r=!1){const c="all_data";if(!r){const o=this.cacheManager.get(c);if(o)return this.memoryData=o,this.notifyDataListeners(),o}try{const o=await this.githubAPI.fetchData();return o?(this.memoryData=o.data,this.cacheManager.set("github_sha",o.sha,1/0)):this.memoryData=this.dataMerger.getDefaultDataState(),this.cacheManager.set(c,this.memoryData,this.CACHE_TTL),this.notifyDataListeners(),this.memoryData}catch(o){if(console.error("Error loading data from GitHub:",o),!this.isOnline)return this.memoryData;throw o}}getData(r){return this.memoryData[r]}async updateData(r,c,o=!1){const d=this.memoryData[r];this.memoryData[r]=c,this.notifyDataListeners(),this.pendingSaves.add(r);try{if(this.batchUpdateInProgress){this.batchUpdateQueue.push({type:r,data:c});return}this.isOnline?o?await this.saveToGitHub():this.scheduleDebouncedSave():this.offlineQueue.add(r,"update",c)}catch(m){throw console.error(`Failed to update ${r}:`,m),this.memoryData[r]=d,this.notifyDataListeners(),m}}startBatchUpdate(){this.batchUpdateInProgress=!0,this.batchUpdateQueue=[]}async endBatchUpdate(){if(!this.batchUpdateInProgress)return;this.batchUpdateInProgress=!1;const r=this.batchUpdateQueue.length>0;if(this.batchUpdateQueue=[],await this.saveQueue,r&&this.isOnline)try{await this.saveToGitHub()}catch(c){console.error("Batch update save failed:",c)}}async saveToGitHub(){if(!this.isOnline)throw new Error("Cannot save: offline");if(!this.batchUpdateInProgress)return this.saveQueue=this.saveQueue.then(async()=>{if(!this.batchUpdateInProgress&&!this.saveLock){this.saveLock=!0;try{this.pendingSaves.clear();let r=this.cacheManager.get("github_sha");r||(await this.loadAllData(!0),r=this.cacheManager.get("github_sha"));try{const c=await this.githubAPI.saveData(this.memoryData,r||void 0);this.cacheManager.set("github_sha",c,1/0),console.log("Data saved to GitHub successfully")}catch(c){if(c.message==="SHA_CONFLICT")console.log("SHA mismatch detected, merging changes..."),await this.handleShaConflict();else throw c}}catch(r){throw console.error("Failed to save to GitHub:",r),r}finally{this.saveLock=!1}}}),this.saveQueue}async handleShaConflict(){const r={...this.memoryData};await this.loadAllData(!0);const c=this.cacheManager.get("github_sha");if(this.memoryData=this.dataMerger.mergeDataStates(this.memoryData,r),c){const o=await this.githubAPI.saveData(this.memoryData,c||void 0);this.cacheManager.set("github_sha",o,1/0),console.log("Data saved to GitHub successfully after merge")}}scheduleDebouncedSave(){this.saveDebounceTimer&&clearTimeout(this.saveDebounceTimer),this.saveDebounceTimer=setTimeout(()=>{this.saveToGitHub().catch(r=>{console.error("Debounced save failed:",r)})},this.DEBOUNCE_DELAY)}async processOfflineQueue(){if(!this.offlineQueue.isEmpty()){console.log(`Processing ${this.offlineQueue.getSize()} offline operations`);try{await this.saveToGitHub(),this.offlineQueue.clear(),console.log("Offline queue processed successfully")}catch(r){console.error("Failed to process offline queue:",r)}}}handleOnline=()=>{console.log("Connection restored"),this.isOnline=!0,this.notifyConnectionListeners(),this.processOfflineQueue()};handleOffline=()=>{console.log("Connection lost"),this.isOnline=!1,this.notifyConnectionListeners()};async checkConnection(){const r=!this.isOnline;this.isOnline=await this.githubAPI.checkConnection(),r&&this.isOnline?this.handleOnline():!r&&!this.isOnline&&this.handleOffline()}subscribeToData(r){return this.dataListeners.add(r),r(this.memoryData),()=>{this.dataListeners.delete(r)}}subscribeToConnection(r){return this.connectionListeners.add(r),r(this.isOnline),()=>{this.connectionListeners.delete(r)}}notifyDataListeners(){this.dataListeners.forEach(r=>r(this.memoryData)),this.crossTabSync.broadcast(this.memoryData)}notifyConnectionListeners(){this.connectionListeners.forEach(r=>r(this.isOnline))}isAuthenticated(){return this.githubAPI.verifyToken().then(r=>r).catch(()=>!1)}getConnectionStatus(){return this.isOnline}getOfflineQueueSize(){return this.offlineQueue.getSize()}async forceSync(){if(!this.isOnline)throw new Error("Cannot sync while offline");this.saveDebounceTimer&&(clearTimeout(this.saveDebounceTimer),this.saveDebounceTimer=null),await this.saveToGitHub(),this.offlineQueue.isEmpty()||await this.processOfflineQueue()}async clearAllData(){this.memoryData=this.dataMerger.getDefaultDataState(),this.notifyDataListeners(),this.isOnline&&await this.saveToGitHub()}destroy(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),this.saveDebounceTimer&&clearTimeout(this.saveDebounceTimer),this.connectionCheckInterval&&clearInterval(this.connectionCheckInterval),this.dataListeners.clear(),this.connectionListeners.clear(),this.cacheManager.clear(),this.crossTabSync.destroy()}}const he=new gj,fr={get:l=>(console.warn("storage.get() called - GitHub Direct mode doesn't use localStorage"),null),set:(l,r)=>{console.warn("storage.set() called - GitHub Direct mode doesn't use localStorage")},remove:l=>{console.warn("storage.remove() called - GitHub Direct mode doesn't use localStorage")},clear:()=>{console.warn("storage.clear() called - Use githubDataManager.clearAllData() instead")}},Ye=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),hx=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"customers",immediate:!0}),{data:f,updateData:y}=tt({dataType:"ledgerEntries",immediate:!0}),v=r,S=c,k=h.useCallback((P,B,q="Lagos")=>{try{if(l.find(H=>H.name.toLowerCase()===P.toLowerCase()||H.phone===B))return{success:!1,errors:["Customer with this name or phone already exists"]};const Y=new Date,Q={id:Ye(),name:P,phone:B,state:q,balance:0,createdAt:Y,updatedAt:Y};return o([...l,Q]).catch(console.error),{success:!0,customer:Q}}catch(_){return console.error("Error adding customer:",_),{success:!1,errors:["Failed to add customer"]}}},[l,o]),w=h.useCallback(async(P,B)=>{try{if((B.name||B.phone)&&l.find(Y=>Y.id!==P&&(B.name&&Y.name.toLowerCase()===B.name.toLowerCase()||B.phone&&Y.phone===B.phone)))return{success:!1,errors:["Another customer with this name or phone already exists"]};const q=l.map(_=>_.id===P?{..._,...B,updatedAt:new Date}:_);return he.startBatchUpdate(),await Promise.all([o(q)]),await he.endBatchUpdate(),{success:!0}}catch(q){return console.error("Error updating customer:",q),{success:!1,errors:["Failed to update customer"]}}},[l,o]),N=h.useCallback(async P=>{try{if(!l.find(Y=>Y.id===P))return{success:!1,error:"Customer not found"};if(f.some(Y=>Y.customerId===P))return{success:!1,error:"Cannot delete customer with transaction history"};const _=l.filter(Y=>Y.id!==P);return he.startBatchUpdate(),await Promise.all([o(_)]),await he.endBatchUpdate(),{success:!0}}catch(B){return console.error("Error deleting customer:",B),{success:!1,error:"Failed to delete customer"}}},[l,f,o]),z=h.useCallback(async(P,B,q,_,Y,Q,H,V=new Date,b)=>{try{const E=l.find(te=>te.id===P);if(!E)return{success:!1,error:"Customer not found"};const U=new Date,K={id:Ye(),customerId:P,customerName:E.name,date:V,transactionType:B,referenceId:Q,referenceNumber:H,description:q,debit:_,credit:Y,runningBalance:0,notes:b,createdAt:U,updatedAt:U},C=[...f.filter(te=>te.customerId===P),K];C.sort((te,pe)=>{const oe=new Date(te.date).getTime(),ye=new Date(pe.date).getTime();return oe!==ye?oe-ye:new Date(te.createdAt).getTime()-new Date(pe.createdAt).getTime()});let $=0;const W=C.map(te=>($=$-te.debit+te.credit,{...te,runningBalance:$,updatedAt:te.id===K.id?U:te.updatedAt})),ie=[...f.filter(te=>te.customerId!==P),...W],re=W[W.length-1],ne=re?re.runningBalance:0,le=l.map(te=>te.id===P?{...te,balance:ne,updatedAt:U}:te);return he.startBatchUpdate(),await Promise.all([y(ie),o(le)]),await he.endBatchUpdate(),{success:!0}}catch(E){return console.error("Error adding ledger entry:",E),{success:!1,error:"Failed to add ledger entry"}}},[l,f,o,y]),A=h.useCallback(async P=>{try{const B=f.find(U=>U.id===P);if(!B)return{success:!1,error:"Ledger entry not found"};if(B.referenceId)return{success:!1,error:"Cannot delete entries with references"};const q=f.filter(U=>U.id!==P),Y=[...q.filter(U=>U.customerId===B.customerId)].sort((U,K)=>{const C=new Date(U.date).getTime(),$=new Date(K.date).getTime();return C!==$?C-$:new Date(U.createdAt).getTime()-new Date(K.createdAt).getTime()});let Q=0;const H=Y.map(U=>(Q=Q-U.debit+U.credit,{...U,runningBalance:Q,updatedAt:new Date})),V=q.map(U=>U.customerId===B.customerId&&H.find(C=>C.id===U.id)||U);let b=l;if(l.find(U=>U.id===B.customerId)){const U=H[H.length-1],K=U?U.runningBalance:0;b=l.map(C=>C.id===B.customerId?{...C,balance:K,updatedAt:new Date}:C)}return he.startBatchUpdate(),await Promise.all([o(b),y(V)]),await he.endBatchUpdate(),{success:!0}}catch(B){return console.error("Error deleting ledger entry:",B),{success:!1,error:"Failed to delete ledger entry"}}},[l,f,o,y]),T=h.useCallback(P=>l.find(B=>B.id===P),[l]),O=h.useCallback(P=>f.filter(B=>B.customerId===P),[f]),L=h.useCallback(()=>{const P=l.length,B=l.filter(H=>(H.balance||0)>0).length,q=l.reduce((H,V)=>H+(V.balance||0),0),_=l.reduce((H,V)=>Math.max(0,V.balance||0)+H,0),Y=l.reduce((H,V)=>Math.min(0,V.balance||0)+H,0),Q=l.filter(H=>(H.balance||0)>0).length;return{totalCustomers:P,activeCustomers:B,totalBalance:q,totalPositiveBalance:_,totalNegativeBalance:Y,customersWithDebt:Q}},[l]),M=h.useCallback(async()=>{try{const P=new Map;f.forEach(_=>{P.has(_.customerId)||P.set(_.customerId,[]),P.get(_.customerId).push(_)});const B=[],q=[...l];return P.forEach((_,Y)=>{const Q=[..._].sort((b,E)=>{const U=new Date(b.date).getTime(),K=new Date(E.date).getTime();return U!==K?U-K:new Date(b.createdAt).getTime()-new Date(E.createdAt).getTime()});let H=0;Q.forEach(b=>{H=H-b.debit+b.credit,B.push({...b,runningBalance:H,updatedAt:new Date})});const V=q.findIndex(b=>b.id===Y);V!==-1&&(q[V]={...q[V],balance:H,updatedAt:new Date})}),await Promise.all([y(B),o(q)]),{success:!0}}catch(P){return console.error("Error recalculating balances:",P),{success:!1,error:"Failed to recalculate balances"}}},[f,l,y,o]),I=h.useCallback(async(P,B={mode:"merge"})=>{try{let q=[],_=0,Y=0,Q=0;const H=[];if(B.mode==="replace")q=P,_=P.length;else if(B.mode==="add-new"){const V=new Set(l.map(b=>b.id));q=[...l];for(const b of P)V.has(b.id)?Q++:(q.push(b),_++)}else{const V=new Map(l.map(b=>[b.id,b]));for(const b of P){const E=V.get(b.id);E?B.preserveExisting?new Date(b.updatedAt)>new Date(E.updatedAt)?(V.set(b.id,b),Y++):Q++:(V.set(b.id,b),Y++):(V.set(b.id,b),_++)}q=Array.from(V.values())}return await o(q),{success:!0,imported:_,updated:Y,skipped:Q,errors:H.length>0?H:void 0}}catch(q){return console.error("Error importing customers:",q),{success:!1,imported:0,updated:0,skipped:0,errors:["Failed to import customers: "+(q instanceof Error?q.message:"Unknown error")]}}},[l,o]),X=h.useCallback(async P=>{try{if(P.ledgerEntries){const B=new Set(f.map(Y=>Y.id)),q=P.ledgerEntries.filter(Y=>!B.has(Y.id)),_=[...f,...q];_.sort((Y,Q)=>{const H=new Date(Y.date).getTime(),V=new Date(Q.date).getTime();return H!==V?H-V:new Date(Y.createdAt).getTime()-new Date(Q.createdAt).getTime()}),await y(_)}return{success:!0}}catch(B){return console.error("Error importing related data:",B),{success:!1,error:"Failed to import related data: "+(B instanceof Error?B.message:"Unknown error")}}},[f,y]);return{customers:l,ledgerEntries:f,loading:v,error:S,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:S,addCustomer:k,updateCustomer:w,deleteCustomer:N,getCustomerById:T,getStatistics:L,importCustomers:I,importRelatedData:X,addLedgerEntry:z,deleteLedgerEntry:A,getCustomerLedger:O,recalculateAllBalances:M,forceSync:x,refreshData:g}},yj=()=>hx(),xx=h.createContext(null),vj=({children:l})=>{const r=yj(),[c,o]=h.useState({products:[],categories:[],movements:[],productionEntries:[],customers:[],sales:[],ledgerEntries:[],bookedStock:[],loadings:[],suppliers:[],paddyTrucks:[]}),[d,m]=h.useState(!0),[p,g]=h.useState(0),x=h.useRef(!0);h.useEffect(()=>{x.current=!0;const y=he.subscribeToData(k=>{x.current&&(o(k),g(w=>w+1))}),v=he.subscribeToConnection(k=>{x.current&&m(k)});return(async()=>{try{const k={products:he.getData("products"),categories:he.getData("categories"),movements:he.getData("movements"),productionEntries:he.getData("productionEntries"),customers:he.getData("customers"),sales:he.getData("sales"),ledgerEntries:he.getData("ledgerEntries"),bookedStock:he.getData("bookedStock"),loadings:he.getData("loadings"),suppliers:he.getData("suppliers"),paddyTrucks:he.getData("paddyTrucks")};o(k)}catch(k){console.error("Error loading initial data:",k)}})(),()=>{x.current=!1,y(),v()}},[]);const f=()=>{g(y=>y+1)};return h.useEffect(()=>{r.customers&&r.ledgerEntries&&o(y=>({...y,customers:r.customers,ledgerEntries:r.ledgerEntries}))},[r.customers,r.ledgerEntries]),t.jsx(xx.Provider,{value:{data:c,isOnline:d,refreshKey:p,triggerRefresh:f,customersHook:r},children:l})},xu=()=>{const l=h.useContext(xx);if(!l)throw new Error("useDataContext must be used within a DataProvider");return l};function tt(l){const{dataType:r,immediate:c=!1}=l;let o=null,d=null,m=null;try{const V=xu();o=V.data[r],d=V.isOnline,m=V.refreshKey}catch{}const[p,g]=h.useState([]),[x,f]=h.useState(!0),[y,v]=h.useState(null),[S,k]=h.useState(!0),[w,N]=h.useState(!1),[z,A]=h.useState(0),T=o!==null?o:p,O=d!==null?d:S,L=h.useRef(!0),M=h.useRef(null),I=h.useRef(null);h.useEffect(()=>(L.current=!0,o!==null?(f(!1),()=>{L.current=!1}):(M.current=he.subscribeToData(b=>{L.current&&(g(b[r]),f(!1))}),I.current=he.subscribeToConnection(b=>{L.current&&(k(b),A(he.getOfflineQueueSize()))}),(async()=>{try{f(!0);const b=he.getData(r);g(b)}catch(b){console.error(`Error loading ${String(r)}:`,b),v(b instanceof Error?b.message:"Failed to load data")}finally{L.current&&f(!1)}})(),()=>{L.current=!1,M.current?.(),I.current?.()})),[r,o,m]);const X=h.useCallback(async V=>{try{N(!0),v(null),await he.updateData(r,V,c),A(he.getOfflineQueueSize())}catch(b){throw console.error(`Error updating ${String(r)}:`,b),v(b instanceof Error?b.message:"Failed to update data"),b}finally{L.current&&N(!1)}},[r,c]),P=h.useCallback(async()=>{try{f(!0),v(null),await he.loadAllData(!0)}catch(V){console.error(`Error refreshing ${String(r)}:`,V),v(V instanceof Error?V.message:"Failed to refresh data")}finally{L.current&&f(!1)}},[r]),B=h.useCallback(async()=>{try{N(!0),v(null),await he.forceSync(),A(0)}catch(V){throw console.error("Error forcing sync:",V),v(V instanceof Error?V.message:"Failed to sync"),V}finally{L.current&&N(!1)}},[]),q=h.useCallback(async V=>{const b=[...T,V];await X(b)},[T,X]),_=h.useCallback(async(V,b)=>{const E=T.map(U=>U.id===V?{...U,...b,updatedAt:new Date}:U);await X(E)},[T,X]),Y=h.useCallback(async V=>{const b=T.filter(E=>E.id!==V);await X(b)},[T,X]),Q=h.useCallback(V=>T.find(b=>b.id===V),[T]),H=h.useCallback(async V=>{const b=new Map(V.map(U=>[U.id,U.changes])),E=T.map(U=>{const K=b.get(U.id);return K?{...U,...K,updatedAt:new Date}:U});await X(E)},[T,X]);return{data:T,loading:x,error:y,isOnline:O,isSyncing:w,offlineQueueSize:z,updateData:X,addItem:q,updateItem:_,deleteItem:Y,findById:Q,batchUpdate:H,refresh:P,forceSync:B}}const jj=(l,r)=>Math.max(0,l-r),kn=(l,r)=>l===0?"out-of-stock":l<=r?"low-stock":"in-stock",Oh=l=>({production:"Production",sales:"Sales",loading:"Loading",adjustment:"Adjustment",return:"Return",damage:"Damage"})[l]||l,bj=l=>({production:"text-green-400",sales:"text-blue-400",loading:"text-orange-400",adjustment:"text-purple-400",return:"text-yellow-400",damage:"text-red-400"})[l]||"text-gray-400",Nj=l=>JSON.stringify(l,null,2),wj=l=>{const r=["ID","Name","Category","On Hand","Booked","Available","Unit","Status","Reorder Level"],c=l.map(d=>[d.id,d.name,d.category,d.quantityOnHand,d.quantityBooked,d.availableQuantity,d.unit,d.status,d.reorderLevel]);return[r.join(","),...c.map(d=>d.join(","))].join(`
`)},Sj=l=>{try{const r=JSON.parse(l);return Array.isArray(r)?r.map(o=>({id:o.id||Ye(),name:o.name||"",category:o.category||"Uncategorized",quantityOnHand:Number(o.quantityOnHand||o.quantity||0),quantityBooked:Number(o.quantityBooked||0),availableQuantity:jj(Number(o.quantityOnHand||o.quantity||0),Number(o.quantityBooked||0)),unit:o.unit||"pcs",reorderLevel:Number(o.reorderLevel||10),status:o.status||"in-stock",createdAt:o.createdAt?new Date(o.createdAt):new Date,updatedAt:o.updatedAt?new Date(o.updatedAt):new Date})):null}catch(r){return console.error("Error importing inventory:",r),null}},Cj=l=>{const r=[];return(!l.name||l.name.trim()==="")&&r.push("Product name is required"),(!l.category||l.category.trim()==="")&&r.push("Product category is required"),l.quantityOnHand!==void 0&&l.quantityOnHand<0&&r.push("Quantity on hand cannot be negative"),l.reorderLevel!==void 0&&l.reorderLevel<0&&r.push("Reorder level cannot be negative"),r},kj=(l,r)=>{let c=[...l];if(r.productId&&(c=c.filter(o=>o.productId===r.productId)),r.movementType&&(c=c.filter(o=>o.movementType===r.movementType)),r.dateFrom&&(c=c.filter(o=>new Date(o.date)>=r.dateFrom)),r.dateTo&&(c=c.filter(o=>new Date(o.date)<=r.dateTo)),r.minQuantity!==void 0&&(c=c.filter(o=>Math.abs(o.quantity)>=r.minQuantity)),r.maxQuantity!==void 0&&(c=c.filter(o=>Math.abs(o.quantity)<=r.maxQuantity)),r.searchTerm){const o=r.searchTerm.toLowerCase();c=c.filter(d=>d.productName.toLowerCase().includes(o)||d.notes?.toLowerCase().includes(o)||d.reference?.toLowerCase().includes(o))}return c.sort((o,d)=>new Date(d.date).getTime()-new Date(o.date).getTime())},Ql=(l,r,c)=>{const o=c==="json"?"application/json":"text/csv",d=new Blob([l],{type:o}),m=URL.createObjectURL(d),p=document.createElement("a");p.href=m,p.download=r,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(m)},px=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"products",immediate:!0}),{data:f,updateData:y}=tt({dataType:"categories",immediate:!0}),{data:v,updateData:S}=tt({dataType:"movements",immediate:!0}),{data:k,updateData:w}=tt({dataType:"productionEntries",immediate:!0}),{data:N}=tt({dataType:"bookedStock"}),z=h.useCallback(b=>N.filter(E=>E.productId===b&&E.status==="pending").reduce((E,U)=>E+U.quantity,0),[N]),A=r,T=c,O=h.useCallback(async(b,E)=>{try{const U=new Date,K={id:Ye(),name:b,description:E,createdAt:U,updatedAt:U};return he.startBatchUpdate(),await Promise.all([y([...f,K])]),await he.endBatchUpdate(),{success:!0}}catch(U){return console.error("Error adding category:",U),{success:!1}}},[f,y]),L=h.useCallback(async(b,E,U)=>{try{const K=f.map(C=>C.id===b?{...C,name:E,description:U,updatedAt:new Date}:C);return he.startBatchUpdate(),await Promise.all([y(K)]),await he.endBatchUpdate(),{success:!0}}catch(K){return console.error("Error updating category:",K),{success:!1}}},[f,y]),M=h.useCallback(async b=>{try{if(l.filter(K=>K.category===f.find(C=>C.id===b)?.name).length>0)return console.warn("Cannot delete category with existing products"),{success:!1};const U=f.filter(K=>K.id!==b);return he.startBatchUpdate(),await Promise.all([y(U)]),await he.endBatchUpdate(),{success:!0}}catch(E){return console.error("Error deleting category:",E),{success:!1}}},[f,l,y]),I=h.useCallback(async(b,E,U,K,C)=>{try{const $=new Date,W={name:b,category:E,quantityOnHand:U,quantityBooked:0,availableQuantity:U,unit:K,status:kn(U,C),reorderLevel:C},F=Cj(W);if(F.length>0)return console.error("Product validation failed:",F),{success:!1,errors:F};const ie={...W,id:Ye(),createdAt:$,updatedAt:$};he.startBatchUpdate(),await o([...l,ie]);const re={id:Ye(),productId:ie.id,productName:ie.name,movementType:"adjustment",quantity:ie.quantityOnHand,previousQuantity:0,newQuantity:ie.quantityOnHand,reference:"Initial stock",notes:`Initial stock for ${ie.name}`,date:$,createdAt:$,updatedAt:$};return await S([...v,re]),await he.endBatchUpdate(),{success:!0}}catch($){return console.error("Error adding product:",$),{success:!1,errors:["Failed to add product"]}}},[l,v,o,S]),X=h.useCallback(async(b,E)=>{try{const U=l.map(K=>K.id===b?{...K,...E,status:kn(E.quantityOnHand!==void 0?E.quantityOnHand:K.quantityOnHand,E.reorderLevel!==void 0?E.reorderLevel:K.reorderLevel),updatedAt:new Date}:K);return he.startBatchUpdate(),await Promise.all([o(U)]),await he.endBatchUpdate(),{success:!0}}catch(U){return console.error("Error updating product:",U),{success:!1,errors:["Failed to update product"]}}},[l,o]),P=h.useCallback(async b=>{try{const E=l.find(C=>C.id===b);if(!E)return console.error("Product not found for deletion"),{success:!1};console.log(`Deleting product: ${E.name} (${b})`);const U=l.filter(C=>C.id!==b),K=v.filter(C=>C.productId!==b);return he.startBatchUpdate(),await Promise.all([o(U),S(K)]),await he.endBatchUpdate(),{success:!0}}catch(E){return console.error("Error deleting product:",E),{success:!1}}},[l,v,o,S]),B=h.useCallback(async b=>{try{const E=l.find(F=>F.id===b.productId);if(!E)return console.error("Product not found"),{success:!1};const U=b.movementType==="production"||b.movementType==="return"?E.quantityOnHand+b.quantity:E.quantityOnHand-b.quantity;if(U<0)return console.error("Insufficient stock"),{success:!1};const K=new Date,C={...b,id:Ye(),createdAt:K},$=[...v,C],W=l.map(F=>F.id===b.productId?{...F,quantityOnHand:U,availableQuantity:U-(F.quantityBooked||0),status:kn(U,F.reorderLevel),updatedAt:K}:F);return he.startBatchUpdate(),await Promise.all([S($),o(W)]),await he.endBatchUpdate(),{success:!0}}catch(E){return console.error("Error adding movement:",E),{success:!1}}},[l,v,S,o]),q=h.useCallback(async(b,E,U,K)=>{try{const C=l.find(ne=>ne.id===b);if(!C)return console.error("Product not found"),{success:!1};const $=E-C.quantityOnHand,W=new Date,F={id:Ye(),productId:b,productName:C.name,movementType:"adjustment",quantity:$,previousQuantity:C.quantityOnHand,newQuantity:E,reference:"Stock adjustment",notes:K||`Stock adjustment: ${U}`,date:W,createdAt:W,updatedAt:W},ie=[...v,F],re=l.map(ne=>ne.id===b?{...ne,quantityOnHand:E,availableQuantity:E-(ne.quantityBooked||0),status:kn(E,ne.reorderLevel),updatedAt:W}:ne);return he.startBatchUpdate(),await Promise.all([S(ie),o(re)]),await he.endBatchUpdate(),console.log(`Stock adjusted for ${C.name}: ${C.quantityOnHand} → ${E} (${$>0?"+":""}${$})`),{success:!0}}catch(C){return console.error("Error adjusting stock:",C),{success:!1}}},[l,v,S,o]),_=h.useCallback(async(b,E,U)=>{try{const K=l.find(ne=>ne.id===b);if(!K)return console.error("Product not found"),{success:!1};const C=new Date,$={id:Ye(),productId:b,productName:K.name,quantity:E,date:C,notes:U,createdAt:C,updatedAt:C};w([...k,$]).catch(ne=>{console.error("Failed to sync production entry to GitHub:",ne)});const W=K.quantityOnHand+E,F={id:Ye(),productId:b,productName:K.name,movementType:"production",quantity:E,previousQuantity:K.quantityOnHand,newQuantity:W,reference:"Production",notes:`Production: ${U||"Production entry"}`,date:C,createdAt:C,updatedAt:C},ie=[...v,F],re=l.map(ne=>ne.id===b?{...ne,quantityOnHand:W,availableQuantity:W-(ne.quantityBooked||0),status:kn(W,ne.reorderLevel),updatedAt:C}:ne);return he.startBatchUpdate(),await Promise.all([S(ie),o(re)]),await he.endBatchUpdate(),{success:!0}}catch(K){return console.error("Error adding production entry:",K),{success:!1}}},[l,k,v,w,S,X]),Y=h.useCallback(async b=>{try{const E=new Date,U=[],K=[],C=[...l];let $=0;const W=[];for(const F of b){const ie=C.findIndex(pe=>pe.id===F.productId);if(ie===-1){const pe=l.find(oe=>oe.id===F.productId);W.push(pe?.name||"Unknown");continue}const re=C[ie],ne={id:Ye(),productId:F.productId,productName:re.name,quantity:F.quantity,date:E,notes:F.notes,createdAt:E,updatedAt:E};U.push(ne);const le=re.quantityOnHand+F.quantity,te={id:Ye(),productId:F.productId,productName:re.name,movementType:"production",quantity:F.quantity,previousQuantity:re.quantityOnHand,newQuantity:le,reference:"Production",notes:`Production: ${F.notes||"Production entry"}`,date:E,createdAt:E,updatedAt:E};K.push(te),C[ie]={...re,quantityOnHand:le,availableQuantity:le-(re.quantityBooked||0),status:kn(le,re.reorderLevel),updatedAt:E},$++}return $>0&&(he.startBatchUpdate(),await Promise.all([o(C),w([...k,...U]),S([...v,...K])]),await he.endBatchUpdate()),{success:$>0,successCount:$,failedProducts:W}}catch(E){return console.error("Error adding batch production entries:",E),{success:!1,successCount:0,failedProducts:[]}}},[l,k,v,o,w,S]),Q=h.useCallback(b=>{const E=l.find(U=>U.id===b);if(E){const U=z(b);return{...E,quantityBooked:U,availableQuantity:E.quantityOnHand-U}}return E},[l,z]),H=h.useCallback(b=>{const E=l.find(K=>K.id===b);if(!E)return 0;const U=z(b);return E.quantityOnHand-U},[l,z]);return{products:h.useMemo(()=>l.map(b=>{const E=z(b.id);return{...b,quantityBooked:E,availableQuantity:b.quantityOnHand-E}}),[l,z]),categories:f,movements:v,productionEntries:k,bookedStock:N,loading:A,error:T,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:T,addCategory:O,updateCategory:L,deleteCategory:M,addProduct:I,updateProduct:X,deleteProduct:P,addMovement:B,adjustStock:q,addProductionEntry:_,addBatchProductionEntries:Y,getProductById:Q,getAvailableQuantity:H,forceSync:x,refreshData:g}},Dj=(l=[])=>{const c=new Date().getFullYear(),o=l.filter(p=>new Date(p.date).getFullYear()===c);let d=1;if(o.length>0){const p=o.map(g=>{const x=g.orderId.match(/ORD-\d{4}-(\d{3})/);return x?parseInt(x[1],10):0}).filter(g=>!isNaN(g));p.length>0&&(d=Math.max(...p)+1)}const m=d.toString().padStart(3,"0");return`ORD-${c}-${m}`},vr=(l,r)=>l*r,ut=l=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(l).replace("NGN","₦"),pr=(l,r)=>{if(r==="all")return l;const c=new Date,o=new Date(c.getFullYear(),c.getMonth(),c.getDate());switch(r){case"today":{const d=new Date(o);return d.setDate(d.getDate()+1),l.filter(m=>{const p=new Date(m.date);return p>=o&&p<d})}case"week":{const d=o.getDay(),m=new Date(o);m.setDate(o.getDate()-d);const p=new Date(m);return p.setDate(m.getDate()+7),l.filter(g=>{const x=new Date(g.date);return x>=m&&x<p})}case"month":{const d=new Date(c.getFullYear(),c.getMonth(),1),m=new Date(c.getFullYear(),c.getMonth()+1,1);return l.filter(p=>{const g=new Date(p.date);return g>=d&&g<m})}default:return l}},Aj=l=>{const r=pr(l,"today"),c=pr(l,"week"),o=pr(l,"month"),d=l.filter(m=>m.paymentStatus!=="paid");return{todaysTotal:r.reduce((m,p)=>m+p.totalAmount,0),weekTotal:c.reduce((m,p)=>m+p.totalAmount,0),monthTotal:o.reduce((m,p)=>m+p.totalAmount,0),pendingPaymentTotal:d.reduce((m,p)=>m+p.totalAmount,0)}},Tj=l=>{const r=JSON.stringify(l,null,2),c="data:application/json;charset=utf-8,"+encodeURIComponent(r),o=`sales-export-${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",o),d.click()},Ej=l=>{const r=["Order ID","Date","Customer","Total Items","Total Amount","Payment Status"],c=l.map(g=>[g.orderId,Je(g.date),g.customerName,g.items.reduce((x,f)=>x+f.quantity,0),ut(g.totalAmount),g.paymentStatus]),o=[r.join(","),...c.map(g=>g.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([o],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),p=URL.createObjectURL(d);m.setAttribute("href",p),m.setAttribute("download",`sales-export-${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},gx=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"sales",immediate:!0}),{data:f,updateData:y}=tt({dataType:"products",immediate:!0}),{data:v,updateData:S}=tt({dataType:"customers",immediate:!0}),{data:k,updateData:w}=tt({dataType:"movements",immediate:!0}),{data:N,updateData:z}=tt({dataType:"ledgerEntries",immediate:!0}),{data:A,updateData:T}=tt({dataType:"bookedStock",immediate:!0}),O=r,L=c,M=h.useCallback(async(Q,H,V=new Date,b="pending")=>{try{const E=v.find(oe=>oe.id===Q);if(!E)return{success:!1,error:"Customer not found"};const U=new Date,K=Dj(l),C=H.reduce((oe,ye)=>oe+ye.total,0),$={id:Ye(),orderId:K,customerId:Q,customerName:E.name,items:H,totalAmount:C,paymentStatus:b,date:V,createdAt:U,updatedAt:U},W=[],F=[],ie=[...f];H.forEach(oe=>{const ye=ie.findIndex(ge=>ge.id===oe.productId);if(ye!==-1){const ge=ie[ye],be={id:Ye(),productId:oe.productId,productName:oe.productName,movementType:"sales",quantity:0,previousQuantity:ge.quantityOnHand,newQuantity:ge.quantityOnHand,reference:`Sale: ${K}`,referenceId:$.id,notes:`Booked ${oe.quantity} ${oe.unit} for ${E.name} (no physical stock change)`,date:V,createdAt:U,updatedAt:U};W.push(be);const Ce={id:Ye(),customerId:Q,customerName:E.name,saleId:$.id,orderId:K,productId:oe.productId,productName:oe.productName,quantity:oe.quantity,quantityLoaded:0,unit:oe.unit,bookingDate:U,status:"pending",createdAt:U,updatedAt:U};F.push(Ce),ie[ye]={...ge,quantityBooked:(ge.quantityBooked||0)+oe.quantity,availableQuantity:ge.quantityOnHand-((ge.quantityBooked||0)+oe.quantity),updatedAt:U}}});const ne=N.filter(oe=>oe.customerId===Q).sort((oe,ye)=>{const ge=new Date(oe.date).getTime(),be=new Date(ye.date).getTime();return ge!==be?be-ge:new Date(ye.createdAt).getTime()-new Date(oe.createdAt).getTime()}),le=ne.length>0?ne[0].runningBalance:0,te={id:Ye(),customerId:Q,customerName:E.name,date:V,transactionType:"sale",referenceId:$.id,referenceNumber:K,description:`Sale ${K}`,debit:C,credit:0,runningBalance:le-C,createdAt:U,updatedAt:U},pe=v.map(oe=>oe.id===Q?{...oe,balance:le-C,updatedAt:U}:oe);return he.startBatchUpdate(),await Promise.all([o([...l,$]),w([...k,...W]),T([...A,...F]),y(ie),z([...N,te]),S(pe)]),await he.endBatchUpdate(),{success:!0,sale:$}}catch(E){return console.error("Error adding sale:",E),{success:!1,error:"Failed to add sale"}}},[l,f,v,k,N,A,o,w,T,y,z,S]),I=h.useCallback(async(Q,H)=>{try{const V=new Date,b=l.find(pe=>pe.id===Q);if(!b)return{success:!1,error:"Sale not found"};const E=l.map(pe=>pe.id===Q?{...pe,...H,updatedAt:V}:pe);let U,K,C;if(H.items&&JSON.stringify(H.items)!==JSON.stringify(b.items)){const pe=new Map(b.items.map(ue=>[ue.productId,ue])),oe=new Map(H.items.map(ue=>[ue.productId,ue])),ye=[];for(const[ue,xe]of oe){const Se=A.find(Ee=>Ee.saleId===Q&&Ee.productId===ue);Se&&Se.quantityLoaded>0&&xe.quantity<Se.quantityLoaded&&ye.push(`Cannot reduce ${xe.productName} to ${xe.quantity} ${xe.unit}. Already loaded: ${Se.quantityLoaded} ${xe.unit}`)}for(const[ue,xe]of pe)if(!oe.has(ue)){const Se=A.find(Ee=>Ee.saleId===Q&&Ee.productId===ue);Se&&Se.quantityLoaded>0&&ye.push(`Cannot remove ${xe.productName}. Already loaded: ${Se.quantityLoaded} ${xe.unit}`)}if(ye.length>0)return{success:!1,errors:ye};const ge=A.map(ue=>{if(ue.saleId===Q){const xe=oe.get(ue.productId);if(xe){const Se={...ue,quantity:xe.quantity,productName:xe.productName,unit:xe.unit,updatedAt:V};return ue.quantityLoaded>=xe.quantity?Se.status="fully-loaded":ue.quantityLoaded>0?Se.status="partial-loaded":Se.status="pending",Se}}return ue}).filter(ue=>ue.saleId===Q?oe.has(ue.productId):!0),be=new Set(ge.filter(ue=>ue.saleId===Q).map(ue=>ue.productId));H.items.forEach(ue=>{if(!be.has(ue.productId)){const xe={id:Ye(),customerId:b.customerId,customerName:b.customerName,saleId:Q,orderId:b.orderId,productId:ue.productId,productName:ue.productName,quantity:ue.quantity,quantityLoaded:0,unit:ue.unit,bookingDate:b.date,status:"pending",createdAt:V,updatedAt:V};ge.push(xe)}});const Ce=f.map(ue=>{const xe=pe.get(ue.id),Se=oe.get(ue.id);if(xe||Se){const Ee=xe?.quantity||0,qn=(Se?.quantity||0)-Ee,Bn=ge.find(Kl=>Kl.saleId===Q&&Kl.productId===ue.id);let _n=qn;return Bn&&Bn.quantityLoaded>0&&qn>0&&(_n=qn),{...ue,quantityBooked:Math.max(0,(ue.quantityBooked||0)+_n),availableQuantity:ue.quantityOnHand-Math.max(0,(ue.quantityBooked||0)+_n),updatedAt:V}}return ue}),Re=k.map(ue=>{if(ue.referenceId===Q&&ue.movementType==="sales"){const xe=oe.get(ue.productId);if(xe){const Se=ge.find(Ee=>Ee.saleId===Q&&Ee.productId===ue.productId);return{...ue,quantity:0,productName:xe.productName,notes:`Booked ${xe.quantity} ${xe.unit} for ${b.customerName}`+(Se&&Se.quantityLoaded>0?` (${Se.quantityLoaded} already loaded)`:" (no physical stock change)"),updatedAt:V}}}return ue}).filter(ue=>ue.referenceId===Q&&ue.movementType==="sales"?oe.has(ue.productId):!0),je=new Set(Re.filter(ue=>ue.referenceId===Q&&ue.movementType==="sales").map(ue=>ue.productId));H.items.forEach(ue=>{if(!je.has(ue.productId)){const xe=f.find(Se=>Se.id===ue.productId);if(xe){const Se={id:Ye(),productId:ue.productId,productName:ue.productName,movementType:"sales",quantity:0,previousQuantity:xe.quantityOnHand,newQuantity:xe.quantityOnHand,reference:`Sale: ${b.orderId}`,referenceId:Q,notes:`Booked ${ue.quantity} ${ue.unit} for ${b.customerName} (no physical stock change)`,date:b.date,createdAt:V,updatedAt:V};Re.push(Se)}}}),U=ge,K=Ce,C=Re}let $=E,W=A,F=f,ie=k,re=N,ne=v;U&&K&&C&&(W=U,F=K,ie=C);const le=H.date&&new Date(H.date).getTime()!==new Date(b.date).getTime(),te=H.totalAmount!==void 0&&H.totalAmount!==b.totalAmount;if(le||te){const pe=H.totalAmount!==void 0?H.totalAmount:b.totalAmount,oe=H.date||b.date,be=N.filter(xe=>xe.customerId===b.customerId).sort((xe,Se)=>{const Ee=new Date(xe.date).getTime(),rt=new Date(Se.date).getTime();return Ee!==rt?Ee-rt:new Date(xe.createdAt).getTime()-new Date(Se.createdAt).getTime()}).map(xe=>xe.referenceId===Q&&xe.transactionType==="sale"?{...xe,date:oe,debit:pe,updatedAt:V}:xe).sort((xe,Se)=>{const Ee=new Date(xe.date).getTime(),rt=new Date(Se.date).getTime();return Ee!==rt?Ee-rt:new Date(xe.createdAt).getTime()-new Date(Se.createdAt).getTime()});let Ce=0;const Re=be.map(xe=>(Ce=Ce-xe.debit+xe.credit,xe.runningBalance!==Ce?{...xe,runningBalance:Ce,updatedAt:V}:xe)),je=N.map(xe=>Re.find(Ee=>Ee.id===xe.id)||xe),ue=v.map(xe=>xe.id===b.customerId?{...xe,balance:Ce,updatedAt:V}:xe);re=je,ne=ue}return he.startBatchUpdate(),await Promise.all([o($),T(W),y(F),w(ie),z(re),S(ne)]),await he.endBatchUpdate(),{success:!0}}catch(V){return console.error("Error updating sale:",V),{success:!1,error:"Failed to update sale"}}},[l,v,N,f,A,k,o,z,S,T,y,w]),X=h.useCallback(async Q=>{try{const H=l.find(re=>re.id===Q);if(!H)return{success:!1,error:"Sale not found"};const V=l.filter(re=>re.id!==Q),b=k.filter(re=>re.referenceId!==Q),E=A.filter(re=>re.saleId!==Q),U=f.map(re=>{const ne=H.items.find(le=>le.productId===re.id);return ne?{...re,quantityBooked:Math.max(0,(re.quantityBooked||0)-ne.quantity),availableQuantity:re.quantityOnHand-Math.max(0,(re.quantityBooked||0)-ne.quantity),updatedAt:new Date}:re}),K=N.filter(re=>re.referenceId!==Q),C=K.filter(re=>re.customerId===H.customerId).sort((re,ne)=>{const le=new Date(re.date).getTime(),te=new Date(ne.date).getTime();return le!==te?le-te:new Date(re.createdAt).getTime()-new Date(ne.createdAt).getTime()});let $=0;const W=C.map(re=>($=$-re.debit+re.credit,re.runningBalance!==$?{...re,runningBalance:$,updatedAt:new Date}:re)),F=K.map(re=>W.find(le=>le.id===re.id)||re),ie=v.map(re=>{if(re.id===H.customerId){const ne=W.length>0?W[W.length-1].runningBalance:0;return{...re,balance:ne,updatedAt:new Date}}return re});return he.startBatchUpdate(),await Promise.all([o(V),w(b),T(E),y(U),z(F),S(ie)]),await he.endBatchUpdate(),{success:!0}}catch(H){return console.error("Error deleting sale:",H),{success:!1,error:"Failed to delete sale"}}},[l,f,v,k,N,A,o,w,T,y,z,S]),P=h.useCallback(Q=>l.find(H=>H.id===Q),[l]),B=h.useCallback(Q=>l.filter(H=>H.customerId===Q),[l]),q=h.useCallback(Q=>A.filter(H=>H.saleId===Q),[A]),_=h.useCallback(()=>f,[f]),Y=h.useCallback(()=>v,[v]);return{sales:l,products:f,customers:v,movements:k,ledgerEntries:N,bookedStock:A,loading:O,error:L,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:L,addSale:M,updateSale:I,deleteSale:X,getSaleById:P,getSalesByCustomer:B,getBookedStockBySale:q,getProducts:_,getCustomers:Y,forceSync:x,refreshData:g}},Lh=l=>{const r=new Map;l.forEach(m=>{const p=r.get(m.loadingId)||[];p.push(m),r.set(m.loadingId,p)});let c=0;l.forEach(m=>{const p=m.loadingId.match(/^LD(\d+)$/);if(p){const g=parseInt(p[1],10);g>c&&(c=g)}});const o=[...l],d=[];return r.forEach((m,p)=>{if(m.length>1){m.sort((g,x)=>new Date(g.createdAt).getTime()-new Date(x.createdAt).getTime());for(let g=1;g<m.length;g++){c++;const x=`LD${String(c).padStart(6,"0")}`,f=o.findIndex(y=>y.id===m[g].id);f!==-1&&(o[f]={...o[f],loadingId:x,updatedAt:new Date().toISOString()},d.push(`Fixed duplicate: ${p} (${m[g].customerName}, ${Je(m[g].date)}) → ${x}`))}}}),d.length>0&&(console.log("🔧 Fixed duplicate loading IDs:"),d.forEach(m=>console.log(`  - ${m}`)),console.log(`✅ Fixed ${d.length} duplicate loading IDs`)),o},qh=l=>{const r=new Set;for(const c of l){if(r.has(c.loadingId))return!0;r.add(c.loadingId)}return!1},yx=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"loadings",immediate:!0}),{data:f,updateData:y}=tt({dataType:"products",immediate:!0}),{data:v}=tt({dataType:"customers",immediate:!0}),{data:S,updateData:k}=tt({dataType:"movements",immediate:!0}),{data:w,updateData:N}=tt({dataType:"bookedStock",immediate:!0}),{data:z}=tt({dataType:"sales",immediate:!0}),A=r,T=c,O=h.useRef(!1);h.useEffect(()=>{if(!A&&l.length>0&&!O.current&&(O.current=!0,qh(l))){console.log("🔍 Duplicate loading IDs detected. Fixing...");const H=Lh(l);o(H).then(()=>{console.log("✅ Successfully fixed duplicate loading IDs")}).catch(V=>{console.error("❌ Error fixing duplicate loading IDs:",V)})}},[A,l,o]);const L=h.useCallback((H,V,b,E,U,K=new Date().toISOString())=>{try{const C=v.find(oe=>oe.id===H);if(!C)return{success:!1,error:"Customer not found"};const $=new Date;let W=0;l.forEach(oe=>{const ye=oe.loadingId.match(/^LD(\d+)$/);if(ye){const ge=parseInt(ye[1],10);ge>W&&(W=ge)}});const F=`LD${String(W+1).padStart(6,"0")}`,ie=V.reduce((oe,ye)=>oe+ye.quantity*ye.unitPrice,0),re={id:Ye(),loadingId:F,customerId:H,customerName:C.name,truckPlateNumber:b,wayBillNumber:U,items:V.map(oe=>({productId:oe.productId,productName:oe.productName,quantity:oe.quantity,unit:oe.unit,unitPrice:oe.unitPrice,bookedStockId:oe.bookedStockId})),totalValue:ie,date:K,createdAt:$.toISOString(),updatedAt:$.toISOString()},ne=[],le=[...f],te=[...w];V.forEach(oe=>{const ye=le.findIndex(ge=>ge.id===oe.productId);if(ye!==-1){const ge=le[ye],be={id:Ye(),productId:oe.productId,productName:oe.productName,movementType:"loading",quantity:-oe.quantity,previousQuantity:ge.quantityOnHand,newQuantity:ge.quantityOnHand-oe.quantity,reference:`Loading: ${F}`,referenceId:re.id,notes:`Loaded for ${C.name}`,date:new Date(K),createdAt:$,updatedAt:$};if(ne.push(be),le[ye]={...ge,quantityOnHand:ge.quantityOnHand-oe.quantity,updatedAt:$},oe.bookedStockId){const Ce=te.findIndex(Re=>Re.id===oe.bookedStockId);if(Ce!==-1){const Re=te[Ce],je=Re.quantityLoaded+oe.quantity,ue=je>=Re.quantity;te[Ce]={...Re,quantityLoaded:je,status:ue?"fully-loaded":"partial-loaded",updatedAt:$},le[ye]={...le[ye],quantityBooked:Math.max(0,(ge.quantityBooked||0)-oe.quantity),availableQuantity:ge.quantityOnHand-oe.quantity-Math.max(0,(ge.quantityBooked||0)-oe.quantity)}}}}}),he.startBatchUpdate();const pe=[o([...l,re]),k([...S,...ne]),y(le)];return V.some(oe=>oe.bookedStockId)&&pe.push(N(te)),Promise.all(pe).then(()=>{he.endBatchUpdate()}).catch(oe=>{console.error("Error in batch update:",oe),he.endBatchUpdate()}),{success:!0,loading:re}}catch(C){return console.error("Error adding loading:",C),{success:!1,error:"Failed to add loading"}}},[l,f,v,S,w,o,k,y,N]),M=h.useCallback((H,V)=>{try{const b=new Date,E=l.find(K=>K.id===H);if(!E)return{success:!1,error:"Loading not found"};if(V.items){const K=[...f],C=[...w],$=[];E.items.forEach(F=>{if(F.bookedStockId){const ie=C.findIndex(ne=>ne.id===F.bookedStockId);if(ie!==-1){const ne=C[ie],le=Math.max(0,ne.quantityLoaded-F.quantity);C[ie]={...ne,quantityLoaded:le,status:le===0?"pending":le>=ne.quantity?"fully-loaded":"partial-loaded",updatedAt:b}}const re=K.findIndex(ne=>ne.id===F.productId);if(re!==-1){const ne=K[re];K[re]={...ne,quantityOnHand:ne.quantityOnHand+F.quantity,quantityBooked:(ne.quantityBooked||0)+F.quantity,availableQuantity:ne.quantityOnHand+F.quantity-((ne.quantityBooked||0)+F.quantity),updatedAt:b}}}}),V.items.forEach(F=>{if(F.bookedStockId){const ie=C.findIndex(ne=>ne.id===F.bookedStockId);if(ie!==-1){const ne=C[ie],le=ne.quantityLoaded+F.quantity,te=le>=ne.quantity;C[ie]={...ne,quantityLoaded:le,status:te?"fully-loaded":"partial-loaded",updatedAt:b}}const re=K.findIndex(ne=>ne.id===F.productId);if(re!==-1){const ne=K[re];K[re]={...ne,quantityOnHand:ne.quantityOnHand-F.quantity,quantityBooked:Math.max(0,(ne.quantityBooked||0)-F.quantity),availableQuantity:ne.quantityOnHand-F.quantity-Math.max(0,(ne.quantityBooked||0)-F.quantity),updatedAt:b};const le={id:Ye(),productId:F.productId,productName:F.productName,movementType:"loading",quantity:F.quantity-(E.items.find(te=>te.productId===F.productId)?.quantity||0),previousQuantity:ne.quantityOnHand,newQuantity:ne.quantityOnHand-F.quantity,reference:`Loading Edit: ${E.loadingId}`,referenceId:E.id,notes:`Updated loading for ${E.customerName}`,date:new Date(V.date||E.date),createdAt:b,updatedAt:b};le.quantity!==0&&$.push(le)}}}),he.startBatchUpdate();const W=[y(K),N(C)];$.length>0&&W.push(k([...S,...$])),Promise.all(W).then(()=>{he.endBatchUpdate()}).catch(F=>{console.error("Error in batch update:",F),he.endBatchUpdate()})}const U=l.map(K=>K.id===H?{...K,...V,updatedAt:b.toISOString()}:K);return o(U).catch(console.error),{success:!0}}catch(b){return console.error("Error updating loading:",b),{success:!1,error:"Failed to update loading"}}},[l,f,w,S,o,y,N,k]),I=h.useCallback(H=>{try{const V=l.find($=>$.id===H);if(!V)return{success:!1,error:"Loading not found"};const b=[...f],E=[...w];V.items.forEach($=>{const W=b.findIndex(F=>F.id===$.productId);if(W!==-1){const F=b[W];b[W]={...F,quantityOnHand:F.quantityOnHand+$.quantity,quantityBooked:(F.quantityBooked||0)+$.quantity,availableQuantity:F.quantityOnHand+$.quantity-((F.quantityBooked||0)+$.quantity),updatedAt:new Date}}if($.bookedStockId){const F=E.findIndex(ie=>ie.id===$.bookedStockId);if(F!==-1){const ie=E[F],re=Math.max(0,ie.quantityLoaded-$.quantity);E[F]={...ie,quantityLoaded:re,status:re===0?"pending":"partial-loaded",updatedAt:new Date}}}});const U=l.filter($=>$.id!==H),K=S.filter($=>$.referenceId!==H);he.startBatchUpdate();const C=[o(U),k(K),y(b)];return V.items.some($=>$.bookedStockId)&&C.push(N(E)),Promise.all(C).then(()=>{he.endBatchUpdate()}).catch($=>{console.error("Error in batch update during deletion:",$),he.endBatchUpdate()}),{success:!0}}catch(V){return console.error("Error deleting loading:",V),{success:!1,error:"Failed to delete loading"}}},[l,S,f,w,o,k,y,N]),X=h.useCallback(H=>l.find(V=>V.id===H),[l]),P=h.useCallback(H=>l.filter(V=>V.customerId===H),[l]),B=h.useCallback(H=>{try{const V=new Date,b=l.map(E=>E.id===H?{...E,updatedAt:V.toISOString()}:E);return o(b).catch(console.error),{success:!0}}catch(V){return console.error("Error completing loading:",V),{success:!1,error:"Failed to complete loading"}}},[l,o]),q=h.useCallback(()=>{const H=new Set;return w.forEach(V=>{(V.status==="pending"||V.status==="confirmed"||V.status==="partial-loaded")&&H.add(V.customerId)}),v.filter(V=>H.has(V.id))},[v,w]),_=h.useCallback(H=>w.filter(V=>V.customerId===H&&(V.status==="pending"||V.status==="confirmed"||V.status==="partial-loaded")).map(V=>{const U=z.find(K=>K.id===V.saleId)?.items.find(K=>K.productId===V.productId)?.price||0;return{...V,availableQuantity:V.quantity-V.quantityLoaded,unitPrice:U}}),[w,z]),Y=h.useCallback(()=>{if(qh(l)){console.log("🔍 Fixing duplicate loading IDs manually...");const H=Lh(l);return o(H).then(()=>(console.log("✅ Successfully fixed duplicate loading IDs"),!0)).catch(V=>(console.error("❌ Error fixing duplicate loading IDs:",V),!1))}return Promise.resolve(!1)},[l,o]),Q=h.useCallback(async()=>{const H=[],V=[];if(w.filter(K=>K.status==="fully-loaded"||K.status==="partial-loaded").forEach(K=>{let C=!1;for(const $ of l){for(const W of $.items)if(W.bookedStockId===K.id){C=!0;break}if(C)break}C||(H.push(K),V.push(`Found orphaned booking: ${K.productName} for ${K.customerName} (${K.quantity} ${K.unit})`))}),H.length===0)return{fixed:0,details:["No orphaned booked stock found"]};const E=[...w],U=[...f];H.forEach(K=>{const C=E.findIndex($=>$.id===K.id);if(C!==-1){E[C]={...K,quantityLoaded:0,status:"pending",updatedAt:new Date};const $=U.findIndex(W=>W.id===K.productId);if($!==-1){const W=U[$],F=(W.quantityBooked||0)+K.quantity;U[$]={...W,quantityBooked:F,availableQuantity:W.quantityOnHand-F,updatedAt:new Date}}}}),he.startBatchUpdate();try{return await Promise.all([N(E),y(U)]),await he.endBatchUpdate(),V.push(`Successfully fixed ${H.length} orphaned booked stock entries`),{fixed:H.length,details:V}}catch(K){return console.error("Error fixing orphaned booked stock:",K),await he.endBatchUpdate(),V.push(`Error occurred while fixing: ${K}`),{fixed:0,details:V}}},[w,l,f,N,y]);return{loadings:l,products:f,customers:v,movements:S,bookedStock:w,loading:A,error:T,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:T,addLoading:L,updateLoading:M,deleteLoading:I,completeLoading:B,getLoadingById:X,getLoadingsByCustomer:P,getCustomersWithBookedStock:q,getCustomerBookedProducts:_,fixDuplicateIds:Y,fixOrphanedBookedStock:Q,forceSync:x,refreshData:g}},vx=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"paddyTrucks",immediate:!0}),f=h.useCallback(async(w,N,z,A,T,O,L,M,I,X,P)=>{try{if(l.find(H=>H.truckPlate.toLowerCase()===A.toLowerCase()&&new Date(H.date).toDateString()===new Date(w).toDateString()))return{success:!1,errors:["A truck with this plate number already exists for this date"]};const q=Math.round((I||0)-(X||0)),_=q*T,Y=new Date,Q={id:Ye(),date:w,supplierId:N,supplierName:z,waybillNumber:M,truckPlate:A,bags:P,netWeight:I,deduction:X,weightAfterDeduction:q,moistureLevel:L,pricePerKg:T,totalAmount:_,agent:O.trim()||void 0,createdAt:Y,updatedAt:Y};return await o([...l,Q]),{success:!0,truck:Q}}catch(B){return console.error("Error adding paddy truck:",B),{success:!1,errors:["Failed to add paddy truck"]}}},[l,o]),y=h.useCallback(async(w,N)=>{try{if(N.truckPlate||N.date){const A=l.find(M=>M.id===w),T=N.truckPlate||A?.truckPlate,O=N.date||A?.date;if(l.find(M=>M.id!==w&&M.truckPlate.toLowerCase()===T?.toLowerCase()&&new Date(M.date).toDateString()===new Date(O).toDateString()))return{success:!1,errors:["Another truck with this plate number already exists for this date"]}}const z=l.map(A=>{if(A.id===w){let T=N.weightAfterDeduction,O=N.totalAmount;if(T===void 0||O===void 0){const L=N.netWeight!==void 0?N.netWeight:A.netWeight,M=N.deduction!==void 0?N.deduction:A.deduction,I=N.pricePerKg!==void 0?N.pricePerKg:A.pricePerKg;T=Math.round((L||0)-(M||0)),O=T*I}return{...A,...N,...T!==void 0?{weightAfterDeduction:T}:{},...O!==void 0?{totalAmount:O}:{},updatedAt:new Date}}return A});return he.startBatchUpdate(),await Promise.all([o(z)]),await he.endBatchUpdate(),{success:!0}}catch(z){return console.error("Error updating paddy truck:",z),{success:!1,errors:["Failed to update paddy truck"]}}},[l,o]),v=h.useCallback(async w=>{try{if(!l.find(A=>A.id===w))return{success:!1,error:"Paddy truck not found"};const z=l.filter(A=>A.id!==w);return he.startBatchUpdate(),await Promise.all([o(z)]),await he.endBatchUpdate(),{success:!0}}catch(N){return console.error("Error deleting paddy truck:",N),{success:!1,error:"Failed to delete paddy truck"}}},[l,o]),S=h.useCallback(w=>l.find(N=>N.id===w),[l]),k=h.useCallback(()=>{const w=l.length,N=l.filter(T=>new Date(T.date).toDateString()===new Date().toDateString()).length,z=l.reduce((T,O)=>T+O.weightAfterDeduction,0),A=l.reduce((T,O)=>T+O.totalAmount,0);return{totalTrucks:w,todayTrucks:N,totalWeight:z,totalValue:A}},[l]);return{paddyTrucks:l,loading:r,error:c,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:c,addPaddyTruck:f,updatePaddyTruck:y,deletePaddyTruck:v,getPaddyTruckById:S,getStatistics:k,forceSync:x,refreshData:g}},jx=()=>{const{data:l=[],loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"suppliers",immediate:!0}),f=h.useCallback(async(w,N,z,A)=>{try{if(l.find(M=>M.name.toLowerCase()===w.toLowerCase()||M.phone===N))return{success:!1,errors:["Supplier with this name or phone already exists"]};const O=new Date,L={id:Ye(),name:w,phone:N,agent:z,notes:A||void 0,createdAt:O,updatedAt:O};return await o([...l,L]),{success:!0,supplier:L}}catch(T){return console.error("Error adding supplier:",T),{success:!1,errors:["Failed to add supplier"]}}},[l,o]),y=h.useCallback(async(w,N)=>{try{if((N.name||N.phone)&&l.find(T=>T.id!==w&&(N.name&&T.name.toLowerCase()===N.name.toLowerCase()||N.phone&&T.phone===N.phone)))return{success:!1,errors:["Another supplier with this name or phone already exists"]};const z=l.map(A=>A.id===w?{...A,...N,updatedAt:new Date}:A);return he.startBatchUpdate(),await Promise.all([o(z)]),await he.endBatchUpdate(),{success:!0}}catch(z){return console.error("Error updating supplier:",z),{success:!1,errors:["Failed to update supplier"]}}},[l,o]),v=h.useCallback(async w=>{try{if(!l.find(A=>A.id===w))return{success:!1,error:"Supplier not found"};const z=l.filter(A=>A.id!==w);return he.startBatchUpdate(),await Promise.all([o(z)]),await he.endBatchUpdate(),{success:!0}}catch(N){return console.error("Error deleting supplier:",N),{success:!1,error:"Failed to delete supplier"}}},[l,o]),S=h.useCallback(w=>l.find(N=>N.id===w),[l]),k=h.useCallback(()=>{const w=l.length,N=l.reduce((A,T)=>(A[T.agent]=(A[T.agent]||0)+1,A),{}),z=Object.entries(N).sort(([,A],[,T])=>T-A)[0];return{totalSuppliers:w,uniqueAgents:Object.keys(N).length,topAgent:z?z[0]:null,topAgentCount:z?z[1]:0}},[l]);return{suppliers:l,loading:r,error:c,isOnline:d,syncInProgress:m,pendingChanges:p,lastSyncError:c,addSupplier:f,updateSupplier:y,deleteSupplier:v,getSupplierById:S,getStatistics:k,forceSync:x,refreshData:g}},jr=(l,r)=>{const c=r.filter(d=>d.customerId===l);if(c.length===0)return 0;const o=[...c].sort((d,m)=>{const p=new Date(d.date).getTime(),g=new Date(m.date).getTime();return p!==g?p-g:new Date(d.createdAt).getTime()-new Date(m.createdAt).getTime()});return o[o.length-1].runningBalance},br=l=>{const r=l.replace(/\D/g,"");if(r.startsWith("234")){const c=r.match(/^(234)(\d{3})(\d{3})(\d{4})$/);if(c)return`+234 ${c[2]} ${c[3]} ${c[4]}`}else if(r.startsWith("0")){const c=r.match(/^(0)(\d{3})(\d{3})(\d{4})$/);if(c)return`${c[1]}${c[2]} ${c[3]} ${c[4]}`}else if(r.length===10){const c=r.match(/^(\d{3})(\d{3})(\d{4})$/);if(c)return`0${c[1]} ${c[2]} ${c[3]}`}return l},An=l=>{const r=l.replace(/\D/g,"");return!!(r.startsWith("234")&&r.length===13||r.startsWith("0")&&r.length===11||!r.startsWith("234")&&!r.startsWith("0")&&r.length===10)},Fo=l=>l<0?"text-red-400":l>0?"text-green-400":"text-gray-400",Bh=l=>l<0?"bg-red-500/5":"",Vl=(l,r=!1)=>{const c=r?Math.abs(l):l;return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(c)},_h=(l,r=!1,c)=>{const o=r&&c?{customers:l,sales:c.sales||[],ledgerEntries:c.ledgerEntries||[],bookedStock:c.bookedStock||[],exportedAt:new Date().toISOString(),version:"2.0"}:l,d=JSON.stringify(o,null,2),m="data:application/json;charset=utf-8,"+encodeURIComponent(d),p=`customers_${r?"full_":""}${new Date().toISOString().split("T")[0]}.json`,g=document.createElement("a");g.setAttribute("href",m),g.setAttribute("download",p),g.click()},zj=l=>{const r=["ID","Name","Phone","State","Balance","Created At","Updated At"],c=l.map(g=>[g.id,g.name,g.phone,g.state,g.balance.toString(),Je(g.createdAt),Je(g.updatedAt)]),o=[r.join(","),...c.map(g=>g.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([o],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),p=URL.createObjectURL(d);m.setAttribute("href",p),m.setAttribute("download",`customers_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Mj=async l=>new Promise((r,c)=>{const o=new FileReader;o.onload=d=>{try{const m=d.target?.result,p=JSON.parse(m);let g=[],x={},f=!1;if(Array.isArray(p))g=p;else if(p.version==="2.0"&&p.customers)g=p.customers,x={sales:p.sales||[],ledgerEntries:p.ledgerEntries||[],bookedStock:p.bookedStock||[]},f=!0;else throw new Error("Invalid file format: Unrecognized data structure");const y=g.map((v,S)=>{if(!v.name||!v.phone||!v.state)throw new Error(`Invalid customer at position ${S+1}: Missing required fields`);return{id:v.id,name:v.name,phone:v.phone,state:v.state,balance:typeof v.balance=="number"?v.balance:0,createdAt:v.createdAt?new Date(v.createdAt):new Date,updatedAt:v.updatedAt?new Date(v.updatedAt):new Date}});r({customers:y,relatedData:f?x:void 0,isFullBackup:f})}catch(m){c(m)}},o.onerror=()=>{c(new Error("Failed to read file"))},o.readAsText(l)}),Oj=(l,r,c)=>{const o=[...l];return o.sort((d,m)=>{let p=d[r],g=m[r];return typeof p=="string"&&(p=p.toLowerCase(),g=g?.toLowerCase()||""),c==="asc"?p>g?1:-1:p<g?1:-1}),o},Lj=(l,r,c,o)=>{let d=[...l];if(r){const m=r.toLowerCase();d=d.filter(p=>p.name.toLowerCase().includes(m)||p.phone.includes(m))}if(c&&c!=="all"&&(d=d.filter(m=>m.state===c)),o&&o!=="all")switch(o){case"positive":d=d.filter(m=>m.balance>0);break;case"negative":d=d.filter(m=>m.balance<0);break;case"zero":d=d.filter(m=>m.balance===0);break}return d},qj=({sales:l,products:r,customers:c,ledgerEntries:o,loadings:d,paddyTrucks:m,suppliers:p,bookedStock:g})=>{const x=new Date,f=new Date(x.getFullYear(),x.getMonth(),x.getDate()),y=new Date(x);y.setDate(x.getDate()-x.getDay());const v=new Date(x.getFullYear(),x.getMonth(),1),S=new Date(x.getFullYear(),x.getMonth()-1,1),k=new Date(x.getFullYear(),x.getMonth(),0),w=h.useMemo(()=>l.reduce((b,E)=>b+E.totalAmount,0),[l]),N=h.useMemo(()=>l.filter(b=>new Date(b.date)>=v).reduce((b,E)=>b+E.totalAmount,0),[l,v]),z=h.useMemo(()=>l.filter(b=>{const E=new Date(b.date);return E>=S&&E<=k}).reduce((b,E)=>b+E.totalAmount,0),[l,S,k]),A=h.useMemo(()=>z===0?N>0?100:0:(N-z)/z*100,[N,z]),T=c.length,O=h.useMemo(()=>c.filter(b=>new Date(b.createdAt)>=v).length,[c,v]),L=r.length,M=h.useMemo(()=>r.filter(b=>b.status==="low-stock"||b.status==="out-of-stock").length,[r]),I=h.useMemo(()=>{const b=l.filter(U=>U.paymentStatus==="pending").length,E=g.filter(U=>U.status==="pending"||U.status==="confirmed").length;return b+E},[l,g]),X=h.useMemo(()=>{const b=new Date(y);b.setDate(b.getDate()-7);const E=new Date(y);return l.filter(U=>{const K=new Date(U.date);return K>=b&&K<E}).length},[l,y]),P=h.useMemo(()=>l.filter(b=>new Date(b.date)>=y).length,[l,y]),B=h.useMemo(()=>X===0?P>0?100:0:(P-X)/X*100,[P,X]),q=h.useMemo(()=>{const b=[];return l.slice(-5).forEach(E=>{b.push({id:E.id,type:"sale",description:`New sale to ${E.customerName} - ₦${E.totalAmount.toLocaleString()}`,time:new Date(E.createdAt)})}),d.slice(-5).forEach(E=>{b.push({id:E.id,type:"loading",description:`Loading completed for ${E.customerName} - Order ${E.loadingId}`,time:new Date(E.createdAt)})}),m.slice(-3).forEach(E=>{b.push({id:E.id,type:"supplier",description:`Paddy truck received from ${E.supplierName} - ${E.weightAfterDeduction}kg`,time:new Date(E.createdAt)})}),r.filter(E=>E.status==="low-stock").slice(0,3).forEach(E=>{b.push({id:E.id,type:"inventory",description:`Low stock alert: ${E.name} (${E.quantityOnHand} ${E.unit} remaining)`,time:new Date(E.updatedAt)})}),b.sort((E,U)=>U.time.getTime()-E.time.getTime()).slice(0,10).map(E=>({...E,timeAgo:Bj(E.time)}))},[l,d,m,r]),_=h.useMemo(()=>g.filter(b=>b.status==="pending"||b.status==="confirmed"||b.status==="partial-loaded").reduce((b,E)=>{const C=l.find(ne=>ne.id===E.saleId)?.items.find(ne=>ne.productId===E.productId)?.price||0,$=b.find(ne=>ne.orderId===E.orderId),W=E.quantity-E.quantityLoaded,F=W*C;if($)return $.items++,$.products.push({productName:E.productName,quantity:W,price:C,total:F}),b;const ie=c.find(ne=>ne.name===E.customerName),re=ie?jr(ie.id,o):0;return[...b,{id:E.id,orderId:E.orderId,customerName:E.customerName,status:E.status,items:1,date:E.bookingDate,balance:re,products:[{productName:E.productName,quantity:W,price:C,total:F}]}]},[]),[g,l,c,o]),Y=h.useMemo(()=>{const b=new Map;return l.forEach(E=>{E.items.forEach(U=>{const K=b.get(U.productId)||{name:U.productName,quantity:0,revenue:0};K.quantity+=U.quantity,K.revenue+=U.total,b.set(U.productId,K)})}),Array.from(b.values()).sort((E,U)=>U.revenue-E.revenue).slice(0,5)},[l]),Q=h.useMemo(()=>({salesToday:l.filter(b=>new Date(b.date)>=f).length,revenueToday:l.filter(b=>new Date(b.date)>=f).reduce((b,E)=>b+E.totalAmount,0),loadingsToday:d.filter(b=>new Date(b.date)>=f).length,paddyTrucksToday:m.filter(b=>new Date(b.date)>=f).length}),[l,d,m,f]),H=h.useMemo(()=>{const b=c.map(C=>({...C,actualBalance:jr(C.id,o)})),E=b.filter(C=>C.actualBalance<0),U=Math.abs(b.reduce((C,$)=>C+Math.min(0,$.actualBalance),0)),K=E.length>0?Math.abs(E.reduce((C,$)=>C+$.actualBalance,0)/E.length):0;return{totalOutstanding:U,customersWithDebt:E.length,averageDebt:K}},[c,o]),V=h.useMemo(()=>({totalSuppliers:p.length,paddyReceivedKg:m.filter(b=>new Date(b.date)>=v).reduce((b,E)=>b+E.weightAfterDeduction,0),thisMonthValue:m.filter(b=>new Date(b.date)>=v).reduce((b,E)=>b+E.totalAmount,0)}),[p,m,v]);return{totalRevenue:w,revenuePercentageChange:A,totalCustomers:T,newCustomersThisMonth:O,totalInventoryItems:L,lowStockItems:M,activeOrders:I,ordersPercentageChange:B,recentActivities:q,pendingDeliveries:_,topSellingProducts:Y,todaySummary:Q,customerDebtSummary:H,supplierSummary:V}};function Bj(l){const c=new Date().getTime()-l.getTime(),o=Math.floor(c/6e4),d=Math.floor(c/36e5),m=Math.floor(c/864e5);return o<1?"just now":o<60?`${o} minute${o>1?"s":""} ago`:d<24?`${d} hour${d>1?"s":""} ago`:m<7?`${m} day${m>1?"s":""} ago`:Je(l)}function bx(l){var r,c,o="";if(typeof l=="string"||typeof l=="number")o+=l;else if(typeof l=="object")if(Array.isArray(l)){var d=l.length;for(r=0;r<d;r++)l[r]&&(c=bx(l[r]))&&(o&&(o+=" "),o+=c)}else for(c in l)l[c]&&(o&&(o+=" "),o+=c);return o}function pu(){for(var l,r,c=0,o="",d=arguments.length;c<d;c++)(l=arguments[c])&&(r=bx(l))&&(o&&(o+=" "),o+=r);return o}const Te=({children:l,className:r,onClick:c})=>t.jsx("div",{className:pu("glass-card",c&&"cursor-pointer glass-hover",r),onClick:c,children:l}),_j=({title:l,value:r,change:c,trend:o,icon:d,subtitle:m})=>t.jsx(Te,{children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-gray-400",children:l}),t.jsx("p",{className:"text-2xl font-bold",children:r}),t.jsxs("div",{className:"flex items-center gap-1",children:[o==="up"?t.jsx(is,{size:16,className:"text-green-400"}):t.jsx(kr,{size:16,className:"text-red-400"}),t.jsx("span",{className:`text-sm ${o==="up"?"text-green-400":"text-red-400"}`,children:c})]}),t.jsx("p",{className:"text-xs text-gray-500",children:m})]}),t.jsx("div",{className:"p-3 glass rounded-lg",children:d})]})}),Rj=({stats:l})=>t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((r,c)=>t.jsx(_j,{...r},c))}),Uj=({activities:l})=>{const r=o=>{switch(o){case"sale":return t.jsx(gs,{size:16});case"loading":return t.jsx(qt,{size:16});case"supplier":return t.jsx(ux,{size:16});case"inventory":return t.jsx(ys,{size:16});default:return t.jsx(_a,{size:16})}},c=o=>{switch(o){case"sale":return"bg-green-500/20 text-green-400";case"loading":return"bg-blue-500/20 text-blue-400";case"supplier":return"bg-purple-500/20 text-purple-400";case"inventory":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}};return t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(_a,{size:20}),"Recent Activity"]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.length>0?l.map(o=>t.jsx("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2 rounded-full ${c(o.type)}`,children:r(o.type)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:o.description}),t.jsx("p",{className:"text-xs text-gray-400",children:o.timeAgo})]})]})},o.id)):t.jsx("p",{className:"text-gray-400 text-center py-4",children:"No recent activities"})})]})},zn=({children:l,content:r,placement:c="top",delay:o=200,className:d=""})=>{const[m,p]=h.useState(!1),[g,x]=h.useState(!1),[f,y]=h.useState({top:-9999,left:-9999}),v=h.useRef(null),S=h.useRef(null),k=h.useRef(null),w=()=>{if(!v.current||!S.current)return;const A=v.current.getBoundingClientRect(),T=S.current.getBoundingClientRect();let O=0,L=0;switch(c){case"top":O=A.top-T.height-8,L=A.left+(A.width-T.width)/2;break;case"bottom":O=A.bottom+8,L=A.left+(A.width-T.width)/2;break;case"left":O=A.top+(A.height-T.height)/2,L=A.left-T.width-8;break;case"right":O=A.top+(A.height-T.height)/2,L=A.right+8;break}const M=10;L<M?L=M:L+T.width>window.innerWidth-M&&(L=window.innerWidth-T.width-M),O<M?c==="top"?O=A.bottom+8:O=M:O+T.height>window.innerHeight-M&&(c==="bottom"?O=A.top-T.height-8:O=window.innerHeight-T.height-M),y({top:O,left:L}),x(!0)},N=()=>{k.current=setTimeout(()=>{p(!0)},o)},z=()=>{k.current&&clearTimeout(k.current),p(!1),x(!1)};return h.useEffect(()=>(m&&(requestAnimationFrame(()=>{w()}),window.addEventListener("resize",w),window.addEventListener("scroll",w,!0)),()=>{window.removeEventListener("resize",w),window.removeEventListener("scroll",w,!0)}),[m]),t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:v,onMouseEnter:N,onMouseLeave:z,className:"inline-block",children:l}),m&&uu.createPortal(t.jsx("div",{ref:S,className:`
            fixed z-50 pointer-events-none
            glass backdrop-blur-md
            px-3 py-2 rounded-lg
            shadow-xl border border-white/10
            transition-opacity duration-200 ease-out
            ${g?"opacity-100":"opacity-0"}
            ${d}
          `,style:{top:`${f.top}px`,left:`${f.left}px`,visibility:g?"visible":"hidden"},children:r}),document.body)]})},Mn=({items:l})=>t.jsxs("div",{className:"min-w-[300px] max-w-[400px]",children:[t.jsx("div",{className:"text-xs font-semibold mb-2 text-white/80",children:"Product Details"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs font-medium text-white/60 pb-1 border-b border-white/10",children:[t.jsx("div",{className:"col-span-1",children:"Product"}),t.jsx("div",{className:"text-right",children:"Qty"}),t.jsx("div",{className:"text-right",children:"Price"}),t.jsx("div",{className:"text-right",children:"Total"})]}),l.map((r,c)=>t.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[t.jsx("div",{className:"col-span-1 truncate",title:r.productName,children:r.productName}),t.jsx("div",{className:"text-right",children:r.quantity}),t.jsxs("div",{className:"text-right",children:["₦",(r.price||0).toLocaleString()]}),t.jsxs("div",{className:"text-right font-medium",children:["₦",(r.total||0).toLocaleString()]})]},c)),t.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs font-bold pt-1 border-t border-white/10",children:[t.jsx("div",{className:"col-span-3 text-right",children:"Grand Total:"}),t.jsxs("div",{className:"text-right text-green-400",children:["₦",l.reduce((r,c)=>r+(c.total||0),0).toLocaleString()]})]})]})]}),Hj=({deliveries:l})=>t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(qt,{size:20}),"Pending Deliveries"]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.length>0?l.map(r=>t.jsxs("div",{className:"p-3 glass rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:["Order ",r.orderId]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Customer: ",r.customerName]}),t.jsx(zn,{content:t.jsx(Mn,{items:r.products}),placement:"top",children:t.jsxs("p",{className:"text-xs text-gray-500 cursor-help underline decoration-dotted",children:[r.items," item",r.items>1?"s":""]})})]}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.status==="confirmed"?"bg-blue-500/20 text-blue-400":r.status==="partial-loaded"?"bg-orange-500/20 text-orange-400":"bg-yellow-500/20 text-yellow-400"}`,children:r.status==="confirmed"?"Confirmed":r.status==="partial-loaded"?"Partial Loaded":"Pending"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${r.balance<0?"bg-red-500/20 text-red-400":r.balance>0?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:["₦",Math.abs(r.balance).toLocaleString()]})})]},r.id)):t.jsx("p",{className:"text-gray-400 text-center py-4",children:"No pending deliveries"})})]}),$j=({products:l})=>t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(is,{size:20}),"Top Selling Products"]}),t.jsx("div",{className:"space-y-3",children:l.length>0?l.map((r,c)=>t.jsxs("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r.name}),t.jsxs("p",{className:"text-sm text-gray-400",children:[r.quantity," units sold"]})]}),t.jsxs("p",{className:"text-green-400 font-semibold",children:["₦",r.revenue.toLocaleString()]})]},c)):t.jsx("p",{className:"text-gray-400 text-center py-4",children:"No sales data available"})})]}),Qj=({products:l})=>{const r=l.filter(c=>c.status==="low-stock"||c.status==="out-of-stock").slice(0,5);return t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(ys,{size:20}),"Low Stock Alerts"]}),t.jsx("div",{className:"space-y-3",children:r.length>0?r.map(c=>t.jsxs("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:c.name}),t.jsx("p",{className:"text-sm text-gray-400",children:c.category})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`font-semibold ${c.status==="out-of-stock"?"text-red-400":"text-yellow-400"}`,children:[c.quantityOnHand," ",c.unit]}),t.jsx("p",{className:"text-xs text-gray-500",children:c.status==="out-of-stock"?"Out of Stock":"Low Stock"})]})]},c.id)):t.jsx("p",{className:"text-gray-400 text-center py-4",children:"All products are well stocked"})})]})},Vj=({todaySummary:l,customerDebtSummary:r,supplierSummary:c})=>t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(tu,{className:"text-gray-400",size:20}),"Today's Summary"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Sales Today"}),t.jsx("span",{className:"font-semibold",children:l.salesToday})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Revenue Today"}),t.jsxs("span",{className:"font-semibold text-green-400",children:["₦",l.revenueToday.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Loadings Today"}),t.jsx("span",{className:"font-semibold",children:l.loadingsToday})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Paddy Trucks"}),t.jsx("span",{className:"font-semibold",children:l.paddyTrucksToday})]})]})]}),t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(js,{size:20}),"Customer Debt Summary"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Total Outstanding"}),t.jsxs("span",{className:"font-semibold text-red-400",children:["₦",r.totalOutstanding.toLocaleString()]})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Customers with Debt"}),t.jsx("span",{className:"font-semibold",children:r.customersWithDebt})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Average Debt"}),t.jsxs("span",{className:"font-semibold",children:["₦",r.averageDebt.toLocaleString()]})]})]})]}),t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(ux,{size:20}),"Supplier Summary"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Total Suppliers"}),t.jsx("span",{className:"font-semibold",children:c.totalSuppliers})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"Paddy Received (kg)"}),t.jsx("span",{className:"font-semibold",children:c.paddyReceivedKg.toLocaleString()})]}),t.jsxs("div",{className:"flex justify-between items-center p-2",children:[t.jsx("span",{className:"text-gray-400",children:"This Month Value"}),t.jsxs("span",{className:"font-semibold text-green-400",children:["₦",c.thisMonthValue.toLocaleString()]})]})]})]})]}),Ij=()=>{const{products:l,loading:r}=px(),{customers:c,ledgerEntries:o,loading:d}=hx(),{sales:m,bookedStock:p,loading:g}=gx(),{loadings:x,loading:f}=yx(),{paddyTrucks:y,loading:v}=vx(),{suppliers:S,loading:k}=jx(),w=r||d||g||f||v||k,{totalRevenue:N,revenuePercentageChange:z,totalCustomers:A,newCustomersThisMonth:T,totalInventoryItems:O,lowStockItems:L,activeOrders:M,ordersPercentageChange:I,recentActivities:X,pendingDeliveries:P,topSellingProducts:B,todaySummary:q,customerDebtSummary:_,supplierSummary:Y}=qj({sales:m,products:l,customers:c,ledgerEntries:o,loadings:x,paddyTrucks:y,suppliers:S,bookedStock:p}),Q=[{title:"Total Revenue",value:`₦${N.toLocaleString()}`,change:`${z>=0?"+":""}${z.toFixed(1)}%`,trend:z>=0?"up":"down",icon:t.jsx(gs,{size:24}),subtitle:"vs last month"},{title:"Total Customers",value:A.toString(),change:`+${T} this month`,trend:"up",icon:t.jsx(js,{size:24}),subtitle:"active customers"},{title:"Inventory Items",value:O.toString(),change:L>0?`${L} low stock`:"All stocked",trend:L>0?"down":"up",icon:t.jsx(gt,{size:24}),subtitle:"unique products"},{title:"Active Orders",value:M.toString(),change:`${I>=0?"+":""}${I.toFixed(0)}%`,trend:I>=0?"up":"down",icon:t.jsx(Cr,{size:24}),subtitle:"vs last week"}];return w?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading dashboard data..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard"}),t.jsx("p",{className:"text-gray-400",children:"Welcome back! Here's what's happening with your business today."})]}),t.jsx(Rj,{stats:Q}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(Uj,{activities:X}),t.jsx(Hj,{deliveries:P})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx($j,{products:B}),t.jsx(Qj,{products:l})]}),t.jsx(Vj,{todaySummary:q,customerDebtSummary:_,supplierSummary:Y})]})},fe=({variant:l="primary",size:r="md",children:c,className:o,disabled:d,loading:m=!1,loadingText:p,onClick:g,...x})=>{const f="font-medium rounded-lg transition-all duration-200 inline-flex items-center justify-center gap-2 transform active:scale-95",y={primary:"bg-white text-gray-900 hover:bg-gray-100 hover:shadow-lg hover:shadow-white/10 disabled:bg-gray-500 disabled:text-gray-300",secondary:"glass glass-hover border border-gray-800/50 text-gray-100 hover:shadow-lg hover:shadow-white/5",danger:"bg-red-600 text-white hover:bg-red-700 hover:shadow-lg hover:shadow-red-600/20 disabled:bg-red-400",ghost:"text-gray-300 hover:bg-white/5 hover:text-gray-100 transition-all duration-200"},v={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},S=async k=>{if(!(m||d)&&g){const w=k.currentTarget,N=w.getBoundingClientRect(),z=document.createElement("span"),A=Math.max(N.width,N.height),T=k.clientX-N.left-A/2,O=k.clientY-N.top-A/2;z.style.width=z.style.height=A+"px",z.style.left=T+"px",z.style.top=O+"px",z.classList.add("ripple"),w.style.position="relative",w.style.overflow="hidden",w.appendChild(z),setTimeout(()=>{z.remove()},600),g(k)}};return t.jsx("button",{className:pu(f,y[l],v[r],(d||m)&&"opacity-50 cursor-not-allowed","relative overflow-hidden",o),disabled:d||m,onClick:S,...x,children:m?t.jsxs(t.Fragment,{children:[t.jsx(Cv,{className:"animate-spin",size:r==="sm"?14:r==="md"?16:18}),t.jsx("span",{children:p||"Loading..."})]}):c})},Gj={success:t.jsx(eu,{size:20,className:"text-green-400 animate-bounce"}),error:t.jsx(Zy,{size:20,className:"text-red-400 animate-pulse"}),warning:t.jsx(it,{size:20,className:"text-yellow-400 animate-pulse"}),info:t.jsx(ox,{size:20,className:"text-blue-400 animate-pulse"})},Pj=({id:l,message:r,type:c,duration:o=5e3,onClose:d})=>{const[m,p]=h.useState(!1),[g,x]=h.useState(100);h.useEffect(()=>{const y=setInterval(()=>{x(S=>S<=0?(clearInterval(y),0):S-100/(o/100))},100),v=setTimeout(()=>{p(!0),setTimeout(()=>d(l),300)},o);return()=>{clearTimeout(v),clearInterval(y)}},[o,l,d]);const f=()=>{p(!0),setTimeout(()=>d(l),300)};return t.jsxs("div",{className:`bg-gray-900/95 backdrop-blur-md border border-white/20 rounded-lg shadow-xl flex flex-col min-w-[320px] max-w-[420px] overflow-hidden transition-all duration-300 transform ${m?"opacity-0 translate-x-full scale-95":"opacity-100 translate-x-0 scale-100 animate-slideInRight"}`,children:[t.jsxs("div",{className:"p-4 flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:Gj[c]}),t.jsx("p",{className:"flex-1 text-sm leading-relaxed",children:r}),t.jsx("button",{onClick:f,className:"flex-shrink-0 p-1 rounded-lg hover:bg-glass transition-all duration-200 hover:rotate-90 transform",children:t.jsx(En,{size:16})})]}),t.jsxs("div",{className:"h-1 bg-black/20 relative overflow-hidden",children:[t.jsx("div",{className:`h-full transition-all duration-100 ease-linear ${c==="success"?"bg-green-400":c==="error"?"bg-red-400":c==="warning"?"bg-yellow-400":"bg-blue-400"}`,style:{width:`${g}%`}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})]})]})},pa=({toasts:l,onClose:r})=>t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 pointer-events-none",children:l.map((c,o)=>t.jsx("div",{className:"pointer-events-auto",style:{animation:`slideDown 0.3s ease-out ${o*.05}s both`},children:t.jsx(Pj,{...c,onClose:r})},c.id))}),Yj=()=>px(),ga=()=>{const[l,r]=h.useState([]),c=h.useCallback((x,f="info",y)=>{const v={id:Ye(),message:x,type:f,duration:y};r(S=>[...S,v])},[]),o=h.useCallback(x=>{r(f=>f.filter(y=>y.id!==x))},[]),d=h.useCallback(x=>{c(x,"success")},[c]),m=h.useCallback(x=>{c(x,"error")},[c]),p=h.useCallback(x=>{c(x,"warning")},[c]),g=h.useCallback(x=>{c(x,"info")},[c]);return{toasts:l,addToast:c,removeToast:o,showSuccess:d,showError:m,showWarning:p,showInfo:g}},Xj=({products:l,movements:r})=>{const c=l.length,o=l.filter(g=>g.status==="low-stock"||g.status==="out-of-stock").length,d=l.reduce((g,x)=>g+x.quantityOnHand,0),m=r.filter(g=>{const x=new Date;return new Date(g.date).toDateString()===x.toDateString()}).length,p=r.filter(g=>g.movementType==="production").slice(0,5);return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"Total Products"}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:c})]}),t.jsx("div",{className:"p-3 glass rounded-lg",children:t.jsx(gt,{size:24,className:"text-blue-400"})})]})}),t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"Low Stock Alerts"}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:o}),o>0&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Needs attention"})]}),t.jsx("div",{className:"p-3 glass rounded-lg",children:t.jsx(ys,{size:24,className:o>0?"text-yellow-400":"text-green-400"})})]})}),t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"Total Stock"}),t.jsxs("p",{className:"text-2xl font-bold mt-1",children:[d.toLocaleString()," units"]})]}),t.jsx("div",{className:"p-3 glass rounded-lg",children:t.jsx(is,{size:24,className:"text-green-400"})})]})}),t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"Today's Movements"}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:m}),p.length>0&&t.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[p[0].quantity," units produced"]})]}),t.jsx("div",{className:"p-3 glass rounded-lg",children:t.jsx(_a,{size:24,className:"text-purple-400"})})]})})]})},Fj=({searchTerm:l,onSearchChange:r,categoryFilter:c,onCategoryChange:o,stockFilter:d,onStockFilterChange:m,categories:p,onClearFilters:g})=>{const x=l||c||d;return t.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search products by name...",value:l,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("select",{value:c,onChange:f=>o(f.target.value),className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-w-[150px] text-gray-100",children:[t.jsx("option",{value:"",children:"All Categories"}),p.map(f=>t.jsx("option",{value:f.name,children:f.name},f.id))]}),t.jsxs("select",{value:d,onChange:f=>m(f.target.value),className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-w-[150px] text-gray-100",children:[t.jsx("option",{value:"",children:"All Stock Levels"}),t.jsx("option",{value:"in-stock",children:"In Stock"}),t.jsx("option",{value:"low-stock",children:"Low Stock"}),t.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]}),x&&t.jsxs(fe,{variant:"ghost",onClick:g,children:[t.jsx(En,{size:20}),"Clear"]})]})},Rh=({onAdjustStock:l,onDelete:r,onViewBookedStock:c})=>{const[o,d]=h.useState(!1),[m,p]=h.useState({top:0,left:0}),g=h.useRef(null),x=h.useRef(null);h.useEffect(()=>{const v=S=>{g.current&&!g.current.contains(S.target)&&x.current&&!x.current.contains(S.target)&&d(!1)};return o&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[o]),h.useEffect(()=>{if(o&&g.current){const v=g.current.getBoundingClientRect(),S=120,k=180,w=window.innerHeight-v.bottom,N=v.top;let z=v.bottom+4,A=v.right-k;w<S&&N>S&&(z=v.top-S-4),A<0&&(A=4),A+k>window.innerWidth&&(A=window.innerWidth-k-4),p({top:z,left:A})}},[o]);const f=()=>{d(!o)},y=v=>{v(),d(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("button",{ref:g,onClick:f,className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Actions",children:t.jsx(ha,{size:14,className:"sm:w-4 sm:h-4"})}),o&&uu.createPortal(t.jsxs("div",{ref:x,className:"fixed rounded-lg shadow-2xl py-1 w-[180px] border border-white/20 bg-gray-900 animate-fadeIn",style:{top:`${m.top}px`,left:`${m.left}px`,zIndex:9999},children:[c?t.jsx("button",{onClick:()=>y(c),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors",children:"View Booked Stock"}):null,t.jsx("button",{onClick:()=>y(l),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors",children:"Adjust Stock"}),t.jsx("button",{onClick:()=>y(r),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors text-red-400",children:"Delete"})]}),document.body)]})},at=({isOpen:l,onClose:r,title:c,children:o,footer:d,size:m="md"})=>{const[p,g]=h.useState(!1),[x,f]=h.useState(!1);h.useEffect(()=>{const S=k=>{k.key==="Escape"&&y()};if(l)g(!0),document.addEventListener("keydown",S),document.body.style.overflow="hidden",setTimeout(()=>{f(!0)},10);else{f(!1);const k=setTimeout(()=>{g(!1),document.body.style.overflow=""},300);return()=>clearTimeout(k)}return()=>{document.removeEventListener("keydown",S),document.body.style.overflow=""}},[l]);const y=()=>{f(!1),setTimeout(()=>{r()},150)};if(!p)return null;const v={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return uu.createPortal(t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:`absolute inset-0 bg-black/70 backdrop-blur-md transition-all duration-300 ease-out ${x?"opacity-100":"opacity-0"}`,onClick:y}),t.jsxs("div",{className:`relative w-full ${v[m]} glass rounded-xl shadow-2xl transition-all duration-300 ease-out transform ${x?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"}`,children:[t.jsxs("div",{className:`flex items-center justify-between p-6 border-b border-gray-800/50 transition-all duration-500 ease-out ${x?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:[t.jsx("h2",{className:"text-xl font-semibold",children:c}),t.jsx("button",{onClick:y,className:"p-2 rounded-lg hover:bg-glass transition-all duration-200 hover:rotate-90 transform",children:t.jsx(En,{size:20})})]}),t.jsx("div",{className:`p-6 transition-all duration-500 delay-75 ease-out ${x?"opacity-100":"opacity-0"}`,style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:o}),d&&t.jsx("div",{className:`flex justify-end gap-3 p-6 border-t border-gray-800/50 transition-all duration-500 delay-100 ease-out ${x?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:d})]})]}),document.body)},Xt=({isOpen:l,onClose:r,onConfirm:c,title:o="Confirm Action",message:d,confirmText:m="Confirm",cancelText:p="Cancel",type:g="warning",loading:x=!1})=>{const f={danger:t.jsx(Nt,{size:48,className:"text-red-400"}),warning:t.jsx(ys,{size:48,className:"text-yellow-400"}),info:t.jsx(ox,{size:48,className:"text-blue-400"})},y=()=>{c(),x||r()},v=t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:x,children:p}),t.jsx(fe,{variant:g==="danger"?"danger":"primary",onClick:y,loading:x,loadingText:"Processing...",children:m})]});return t.jsx(at,{isOpen:l,onClose:r,title:o,footer:v,size:"sm",children:t.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[t.jsx("div",{className:"p-4 glass rounded-full",children:f[g]}),t.jsx("div",{className:"text-gray-200 leading-relaxed",children:d}),g==="danger"&&t.jsx("div",{className:"w-full p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(ys,{size:16}),"This action cannot be undone"]})})]})})},Zj=({products:l,searchTerm:r,categoryFilter:c,stockFilter:o,onEditProduct:d,onDeleteProduct:m,onViewMovement:p,onAdjustStock:g,onViewBookedStock:x})=>{const[f,y]=h.useState("name"),[v,S]=h.useState("asc"),[k,w]=h.useState(new Set),[N,z]=h.useState({show:!1,product:null}),[A,T]=h.useState(!1),O=_=>{f===_?S(v==="asc"?"desc":"asc"):(y(_),S("asc"))},L=h.useMemo(()=>{let _=[...l];if(r){const Y=r.toLowerCase();_=_.filter(Q=>Q.name.toLowerCase().includes(Y)||Q.category.toLowerCase().includes(Y))}return c&&(_=_.filter(Y=>Y.category===c)),o&&(o==="low-stock"?_=_.filter(Y=>Y.status==="low-stock"||Y.status==="out-of-stock"):o==="out-of-stock"?_=_.filter(Y=>Y.status==="out-of-stock"):o==="in-stock"&&(_=_.filter(Y=>Y.status==="in-stock"))),_.sort((Y,Q)=>{let H=Y[f],V=Q[f];return typeof H=="string"&&(H=H.toLowerCase(),V=V.toLowerCase()),v==="asc"?H>V?1:-1:H<V?1:-1}),_},[l,r,c,o,f,v]),M=_=>{const Y=new Set(k);Y.has(_)?Y.delete(_):Y.add(_),w(Y)},I=()=>{k.size===L.length?w(new Set):w(new Set(L.map(_=>_.id)))},X=_=>f!==_?null:v==="asc"?t.jsx(Zl,{size:14}):t.jsx(Ra,{size:14}),P=_=>_.status==="out-of-stock"?t.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-red-500/20 text-red-400 flex items-center gap-1",children:[t.jsx(ys,{size:12}),"Out of Stock"]}):_.status==="low-stock"?t.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[t.jsx(ys,{size:12}),"Low Stock"]}):t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-500/20 text-green-400",children:"In Stock"});if(L.length===0)return t.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[t.jsx(gt,{size:48,className:"mx-auto mb-4 text-muted"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Products Found"}),t.jsx("p",{className:"text-muted",children:r||c||o?"Try adjusting your filters or search term":"Add your first product to get started"})]});const B=_=>{m(_),z({show:!1,product:null})},q=()=>{k.forEach(_=>m(_)),w(new Set),T(!1)};return t.jsxs(t.Fragment,{children:[k.size>0&&t.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[t.jsxs("span",{className:"text-sm",children:[k.size," product",k.size!==1?"s":""," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>w(new Set),children:"Clear"}),t.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>T(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),t.jsx("div",{className:"sm:hidden",children:t.jsx("div",{className:"space-y-3",children:L.map(_=>t.jsxs("div",{className:`glass rounded-lg p-4 ${k.has(_.id)?"ring-2 ring-white/20":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("button",{onClick:()=>M(_.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:k.has(_.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-base",children:_.name}),t.jsxs("p",{className:"text-xs text-muted mt-1",children:[_.category," • ",_.unit]})]})]}),t.jsx("div",{className:"text-right",children:P(_)})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-muted block",children:"On Hand"}),t.jsx("span",{className:"font-medium",children:_.quantityOnHand})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-muted block",children:"Booked"}),t.jsx("span",{className:_.quantityBooked>0?"text-yellow-400":"",children:_.quantityBooked})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-muted block",children:"Available"}),t.jsx("span",{className:`font-medium ${_.availableQuantity===0?"text-red-400":_.availableQuantity<=_.reorderLevel?"text-yellow-400":"text-green-400"}`,children:_.availableQuantity})]})]}),t.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[t.jsx("button",{onClick:()=>d(_),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Product",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>p(_),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Movement",children:t.jsx(_a,{size:16})}),t.jsx(Rh,{onAdjustStock:()=>g(_),onDelete:()=>z({show:!0,product:_}),onViewBookedStock:x?()=>x(_):void 0,productName:_.name})]})]},_.id))})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/5",children:[t.jsx("th",{className:"text-left py-3 px-3",children:t.jsx("button",{onClick:I,className:"p-1 rounded hover:bg-glass transition-colors",children:k.size===L.length&&L.length>0?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>O("name"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Product",X("name")]})}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>O("category"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Category",X("category")]})}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>O("quantityOnHand"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["On Hand",X("quantityOnHand")]})}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>O("quantityBooked"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Booked",X("quantityBooked")]})}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>O("availableQuantity"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Available",X("availableQuantity")]})}),t.jsx("th",{className:"text-center py-3 px-3",children:"Status"}),t.jsx("th",{className:"text-center py-3 px-3",children:"Actions"})]})}),t.jsx("tbody",{children:L.map(_=>t.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${k.has(_.id)?"bg-glass/50":""}`,children:[t.jsx("td",{className:"py-3 px-3",children:t.jsx("button",{onClick:()=>M(_.id),className:"p-1 rounded hover:bg-glass transition-colors",children:k.has(_.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:t.jsx(gt,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:_.name}),t.jsx("p",{className:"text-xs text-muted",children:_.unit})]})]})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:_.category})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:"font-medium",children:_.quantityOnHand})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:_.quantityBooked>0?"text-yellow-400":"",children:_.quantityBooked})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:`font-medium ${_.availableQuantity===0?"text-red-400":_.availableQuantity<=_.reorderLevel?"text-yellow-400":"text-green-400"}`,children:_.availableQuantity})}),t.jsx("td",{className:"py-3 px-3 text-center",children:P(_)}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1 relative",children:[t.jsx("button",{onClick:()=>d(_),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Product",children:t.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>p(_),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Movement",children:t.jsx(_a,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx(Rh,{onAdjustStock:()=>g(_),onDelete:()=>z({show:!0,product:_}),onViewBookedStock:x?()=>x(_):void 0,productName:_.name})]})})]},_.id))})]})}),t.jsx(Xt,{isOpen:N.show,onClose:()=>z({show:!1,product:null}),onConfirm:()=>{N.product&&B(N.product.id)},title:"Delete Product",message:`Are you sure you want to delete "${N.product?.name}"? This will also remove all related movement history.`,confirmText:"Delete Product",type:"danger"}),t.jsx(Xt,{isOpen:A,onClose:()=>T(!1),onConfirm:q,title:"Delete Multiple Products",message:`Are you sure you want to delete ${k.size} selected product${k.size!==1?"s":""}? This action will remove all selected products and their movement history.`,confirmText:`Delete ${k.size} Product${k.size!==1?"s":""}`,type:"danger"})]})},Kj=({isOpen:l,onClose:r,categories:c,onAddCategory:o,onUpdateCategory:d,onDeleteCategory:m})=>{const[p,g]=h.useState(null),[x,f]=h.useState({name:"",description:""}),[y,v]=h.useState(!1),[S,k]=h.useState(null),[w,N]=h.useState(""),[z,A]=h.useState(!1);h.useEffect(()=>{l||(g(null),f({name:"",description:""}),v(!1),k(null),N(""))},[l]);const T=async()=>{if(N(""),!x.name.trim()){N("Category name is required");return}A(!0);const M=await o(x.name.trim(),x.description.trim());A(!1),M.success?(f({name:"",description:""}),v(!1)):N("Failed to add category")},O=async()=>{if(!p)return;N("");const M=document.getElementById(`cat-name-${p.id}`)?.value,I=document.getElementById(`cat-desc-${p.id}`)?.value;if(!M?.trim()){N("Category name is required");return}(await d(p.id,M.trim(),I?.trim())).success?g(null):N("Failed to update category")},L=async M=>{(await m(M)).success||N("Cannot delete category with existing products"),k(null)};return t.jsx(at,{isOpen:l,onClose:r,title:"Manage Categories",size:"lg",children:t.jsxs("div",{className:"space-y-4",children:[w&&t.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400 text-sm",children:w}),t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"text-muted",children:"Manage product categories for your inventory"}),!y&&t.jsxs("button",{onClick:()=>v(!0),className:"p-2 sm:px-3 sm:py-1.5 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm",title:"Add Category",children:[t.jsx(Lt,{size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Add Category"})]})]}),y&&t.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[t.jsx("h3",{className:"font-semibold",children:"Add New Category"}),t.jsx("input",{type:"text",placeholder:"Category name",value:x.name,onChange:M=>f({...x,name:M.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),t.jsx("input",{type:"text",placeholder:"Description (optional)",value:x.description,onChange:M=>f({...x,description:M.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"primary",size:"sm",onClick:T,loading:z,loadingText:"Saving...",disabled:z,children:"Save"}),t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{v(!1),f({name:"",description:""}),N("")},disabled:z,children:"Cancel"})]})]}),t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map(M=>t.jsx("div",{className:"glass p-4 rounded-lg",children:p?.id===M.id?t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{id:`cat-name-${M.id}`,type:"text",defaultValue:M.name,className:"w-full px-3 py-1 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20"}),t.jsx("input",{id:`cat-desc-${M.id}`,type:"text",defaultValue:M.description,placeholder:"Description (optional)",className:"w-full px-3 py-1 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"primary",size:"sm",onClick:O,children:"Save"}),t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{g(null),N("")},children:"Cancel"})]})]}):S===M.id?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-yellow-400",children:"Are you sure you want to delete this category?"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>L(M.id),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400",children:"Delete"}),t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>k(null),children:"Cancel"})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:M.name}),M.description&&t.jsx("p",{className:"text-sm text-muted mt-1",children:M.description})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{g(M),N("")},className:"p-2 rounded-lg hover:bg-glass transition-colors",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>{k(M.id),N("")},className:"p-2 rounded-lg hover:bg-glass transition-colors text-red-400",children:t.jsx(Nt,{size:16})})]})]})},M.id))})]})})},Jj=({isOpen:l,onClose:r,categories:c,onAddProduct:o})=>{const[d,m]=h.useState({name:"",category:"",initialQuantity:0,unit:"bags",reorderLevel:10}),[p,g]=h.useState([]),[x,f]=h.useState(!1);h.useEffect(()=>{l?c.length>0&&!d.category&&m(k=>({...k,category:c[0].name})):(m({name:"",category:c.length>0?c[0].name:"",initialQuantity:0,unit:"bags",reorderLevel:10}),g([]))},[l,c]);const y=async k=>{k.preventDefault(),g([]),f(!0);const w=await o(d.name,d.category,d.initialQuantity,d.unit,d.reorderLevel);f(!1),w.success?r():g(w.errors||["Failed to add product"])},v=(k,w)=>{m(N=>({...N,[k]:w}))},S=t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:x,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:y,loading:x,loadingText:"Adding Product...",disabled:x,children:"Add Product"})]});return t.jsx(at,{isOpen:l,onClose:r,title:"Add New Product",footer:S,size:"md",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p.length>0&&t.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:t.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map((k,w)=>t.jsx("li",{className:"text-sm",children:k},w))})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),t.jsx("input",{type:"text",value:d.name,onChange:k=>v("name",k.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",placeholder:"Enter product name",required:!0,autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),t.jsx("select",{value:d.category,onChange:k=>v("category",k.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,children:c.length===0?t.jsx("option",{value:"",children:"No categories available"}):c.map(k=>t.jsx("option",{value:k.name,children:k.name},k.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Initial Quantity"}),t.jsx("input",{type:"number",value:d.initialQuantity,onChange:k=>v("initialQuantity",Number(k.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Unit"}),t.jsx("select",{value:d.unit,onChange:k=>v("unit",k.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",children:t.jsx("option",{value:"bags",children:"Bags"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reorder Level"}),t.jsx("input",{type:"number",value:d.reorderLevel,onChange:k=>v("reorderLevel",Number(k.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0})]}),t.jsxs("div",{className:"text-sm text-muted",children:[t.jsx("p",{children:"The product will be added with the specified initial quantity."}),t.jsx("p",{children:"You'll receive an alert when stock falls below the reorder level."})]})]})})},Wj=({isOpen:l,onClose:r,product:c,categories:o,onUpdateProduct:d})=>{const[m,p]=h.useState({name:"",category:"",unit:"bags",reorderLevel:10}),[g,x]=h.useState([]),[f,y]=h.useState(!1);h.useEffect(()=>{c&&l&&(p({name:c.name,category:c.category,unit:c.unit,reorderLevel:c.reorderLevel}),x([]))},[c,l]);const v=async w=>{if(w.preventDefault(),!c)return;x([]),y(!0);const N=await d(c.id,{name:m.name,category:m.category,unit:m.unit,reorderLevel:m.reorderLevel});y(!1),N.success?r():x(N.errors||["Failed to update product"])},S=(w,N)=>{p(z=>({...z,[w]:N}))},k=t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:f,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:v,loading:f,loadingText:"Updating...",children:"Update Product"})]});return c?t.jsx(at,{isOpen:l,onClose:r,title:"Edit Product",footer:k,size:"md",children:t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[g.length>0&&t.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:t.jsx("ul",{className:"list-disc list-inside space-y-1",children:g.map((w,N)=>t.jsx("li",{className:"text-sm",children:w},N))})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),t.jsx("input",{type:"text",value:m.name,onChange:w=>S("name",w.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",placeholder:"Enter product name",required:!0,disabled:f})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),t.jsx("select",{value:m.category,onChange:w=>S("category",w.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,disabled:f,children:o.length===0?t.jsx("option",{value:"",children:"No categories available"}):o.map(w=>t.jsx("option",{value:w.name,children:w.name},w.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Unit"}),t.jsx("select",{value:m.unit,onChange:w=>S("unit",w.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",disabled:f,children:t.jsx("option",{value:"bags",children:"Bags"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reorder Level"}),t.jsx("input",{type:"number",value:m.reorderLevel,onChange:w=>S("reorderLevel",Number(w.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0,disabled:f})]})]}),t.jsxs("div",{className:"p-3 rounded-lg glass",children:[t.jsx("p",{className:"text-sm text-muted",children:"Current Stock Information:"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted",children:"On Hand"}),t.jsx("p",{className:"font-medium",children:c.quantityOnHand})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted",children:"Booked"}),t.jsx("p",{className:"font-medium",children:c.quantityBooked})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted",children:"Available"}),t.jsx("p",{className:"font-medium",children:c.availableQuantity})]})]})]}),t.jsx("div",{className:"text-sm text-muted",children:t.jsx("p",{children:"Note: Stock quantities cannot be edited directly. Use Production Entry or Stock Adjustment instead."})})]})}):null},eb=({isOpen:l,onClose:r,products:c,onAddProduction:o})=>{const[d,m]=h.useState([]),[p,g]=h.useState(new Date().toISOString().split("T")[0]),[x,f]=h.useState(new Date().toTimeString().split(" ")[0].slice(0,5)),[y,v]=h.useState([]),[S,k]=h.useState(0),[w,N]=h.useState(!1);h.useEffect(()=>{l?c.length>0&&d.length===0&&z():(m([]),g(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().split(" ")[0].slice(0,5)),v([]),k(0),N(!1))},[l,c]);const z=()=>{if(c.length===0)return;const M={productId:c[0].id,productName:c[0].name,quantity:0,notes:""};m([...d,M])},A=(M,I,X)=>{const P=[...d];if(P[M]={...P[M],[I]:X},I==="productId"){const B=c.find(q=>q.id===X);B&&(P[M].productName=B.name)}m(P)},T=M=>{m(d.filter((I,X)=>X!==M))},O=async()=>{v([]),k(0),N(!0);const M=d.filter(B=>B.quantity>0);if(M.length===0){v(["Please add at least one product with quantity greater than 0"]),N(!1);return}const I=new Date(`${p}T${x}`),X=M.map(B=>({productId:B.productId,quantity:B.quantity,notes:B.notes||`Production on ${Je(I)}`}));(await o(X)).success?(k(M.length),setTimeout(()=>{N(!1),r()},1500)):N(!1)},L=t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:w,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:O,loading:w,loadingText:"Processing...",disabled:w,children:"Add Production"})]});return t.jsx(at,{isOpen:l,onClose:r,title:"Add Production Entry",footer:L,size:"xl",children:t.jsxs("div",{className:"space-y-4",children:[y.length>0&&t.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:t.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.map((M,I)=>t.jsx("li",{className:"text-sm",children:M},I))})}),S>0&&t.jsxs("div",{className:"p-3 rounded-lg bg-green-500/20 text-green-400",children:["Successfully added production for ",S," product(s)!"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Production Date"}),t.jsx("input",{type:"date",value:p,onChange:M=>g(M.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),t.jsx("input",{type:"time",value:x,onChange:M=>f(M.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),t.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"font-medium",children:"Production Items"}),t.jsxs(fe,{variant:"secondary",size:"sm",onClick:z,children:[t.jsx(Lt,{size:18}),"Add Product"]})]}),d.length===0?t.jsxs("div",{className:"glass p-8 rounded-lg text-center",children:[t.jsx(gt,{size:48,className:"mx-auto mb-3 text-muted"}),t.jsx("p",{className:"text-muted",children:"No products added yet"}),t.jsx("p",{className:"text-sm text-muted mt-1",children:'Click "Add Product" to start adding production entries'})]}):d.map((M,I)=>t.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Product"}),t.jsx("select",{value:M.productId,onChange:X=>A(I,"productId",X.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-gray-100",children:c.map(X=>t.jsxs("option",{value:X.id,children:[X.name," (",X.category,")"]},X.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Quantity Produced"}),t.jsx("input",{type:"number",value:M.quantity,onChange:X=>A(I,"quantity",Number(X.target.value)),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",min:"0",placeholder:"Enter quantity"})]})]}),t.jsx("button",{onClick:()=>T(I),className:"ml-3 p-2 rounded-lg hover:bg-glass transition-colors text-red-400",children:t.jsx(Nt,{size:16})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Notes (Optional)"}),t.jsx("input",{type:"text",value:M.notes,onChange:X=>A(I,"notes",X.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Add any notes about this production"})]})]},I))]}),t.jsxs("div",{className:"text-sm text-muted",children:[t.jsx("p",{children:'Production entries will increase the "Quantity on Hand" for selected products.'}),t.jsx("p",{children:"All entries will be logged in the movement history for tracking."})]})]})})},tb=({isOpen:l,onClose:r,product:c,movements:o})=>{const[d,m]=h.useState({movementType:"",dateFrom:"",dateTo:"",minQuantity:"",maxQuantity:"",searchTerm:""}),[p,g]=h.useState(1),x=10;h.useEffect(()=>{l||(m({movementType:"",dateFrom:"",dateTo:"",minQuantity:"",maxQuantity:"",searchTerm:""}),g(1))},[l]);const f=h.useMemo(()=>kj(o,{productId:c?.id,movementType:d.movementType,dateFrom:d.dateFrom?new Date(d.dateFrom):void 0,dateTo:d.dateTo?new Date(d.dateTo):void 0,minQuantity:d.minQuantity?Number(d.minQuantity):void 0,maxQuantity:d.maxQuantity?Number(d.maxQuantity):void 0,searchTerm:d.searchTerm}).sort((N,z)=>{const A=new Date(N.date).getTime();return new Date(z.date).getTime()-A}),[o,c,d]),y=h.useMemo(()=>{const w=(p-1)*x;return f.slice(w,w+x)},[f,p]),v=Math.ceil(f.length/x),S=w=>{if(w==="json"){const N=JSON.stringify(f,null,2);Ql(N,`${c?.name||"movements"}_history.json`,"json")}else{const N=["Date","Type","Quantity","Previous","New","Reference","Notes"],z=f.map(T=>[new Date(T.date).toLocaleString(),Oh(T.movementType),T.quantity.toString(),T.previousQuantity.toString(),T.newQuantity.toString(),T.reference||"",T.notes||""]),A=[N.join(","),...z.map(T=>T.map(O=>`"${O}"`).join(","))].join(`
`);Ql(A,`${c?.name||"movements"}_history.csv`,"csv")}},k=w=>w>0?t.jsx(is,{size:16,className:"text-green-400"}):w<0?t.jsx(kr,{size:16,className:"text-red-400"}):t.jsx(_a,{size:16,className:"text-yellow-400"});return t.jsx(at,{isOpen:l,onClose:r,title:`Movement History${c?` - ${c.name}`:""}`,size:"xl",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[t.jsx(fu,{size:18}),"Filters"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(fe,{variant:"secondary",size:"sm",onClick:()=>S("csv"),children:[t.jsx(Dt,{size:16}),"CSV"]}),t.jsxs(fe,{variant:"secondary",size:"sm",onClick:()=>S("json"),children:[t.jsx(Dt,{size:16}),"JSON"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Movement Type"}),t.jsxs("select",{value:d.movementType,onChange:w=>m({...d,movementType:w.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-gray-100",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"production",children:"Production"}),t.jsx("option",{value:"sales",children:"Sales"}),t.jsx("option",{value:"loading",children:"Loading"}),t.jsx("option",{value:"adjustment",children:"Adjustment"}),t.jsx("option",{value:"return",children:"Return"}),t.jsx("option",{value:"damage",children:"Damage"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Date From"}),t.jsx("input",{type:"date",value:d.dateFrom,onChange:w=>m({...d,dateFrom:w.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Date To"}),t.jsx("input",{type:"date",value:d.dateTo,onChange:w=>m({...d,dateTo:w.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Min Quantity"}),t.jsx("input",{type:"number",value:d.minQuantity,onChange:w=>m({...d,minQuantity:w.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Min"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Max Quantity"}),t.jsx("input",{type:"number",value:d.maxQuantity,onChange:w=>m({...d,maxQuantity:w.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Max"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",value:d.searchTerm,onChange:w=>m({...d,searchTerm:w.target.value}),className:"w-full pl-9 pr-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Search notes..."})]})]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-800/50",children:[t.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Date/Time"}),t.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Type"}),t.jsx("th",{className:"text-right py-2 px-3 text-sm",children:"Quantity"}),t.jsx("th",{className:"text-right py-2 px-3 text-sm",children:"Balance"}),t.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Reference"}),t.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Notes"})]})}),t.jsx("tbody",{children:y.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:6,className:"text-center py-8 text-muted",children:[t.jsx(_a,{size:32,className:"mx-auto mb-2"}),"No movements found"]})}):y.map(w=>t.jsxs("tr",{className:"border-b border-gray-800/30",children:[t.jsx("td",{className:"py-2 px-3 text-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bt,{size:14,className:"text-gray-400"}),new Date(w.date).toLocaleString()]})}),t.jsx("td",{className:"py-2 px-3",children:t.jsx("span",{className:`text-sm font-medium ${bj(w.movementType)}`,children:Oh(w.movementType)})}),t.jsx("td",{className:"py-2 px-3 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[k(w.quantity),t.jsxs("span",{className:`text-sm font-medium ${w.quantity>0?"text-green-400":w.quantity<0?"text-red-400":"text-yellow-400"}`,children:[w.quantity>0?"+":"",w.quantity]})]})}),t.jsx("td",{className:"py-2 px-3 text-right text-sm",children:t.jsxs("div",{className:"text-xs text-muted",children:[w.previousQuantity," → ",w.newQuantity]})}),t.jsx("td",{className:"py-2 px-3 text-sm text-muted",children:w.reference||"-"}),t.jsx("td",{className:"py-2 px-3 text-sm text-muted",children:w.notes||"-"})]},w.id))})]})}),v>1&&t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("div",{className:"text-sm text-muted",children:["Showing ",(p-1)*x+1," to ",Math.min(p*x,f.length)," of ",f.length," entries"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g(w=>Math.max(1,w-1)),disabled:p===1,children:"Previous"}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,v)},(w,N)=>{const z=p>3?p-2+N:N+1;return z>v?null:t.jsx("button",{onClick:()=>g(z),className:`px-3 py-1 rounded-lg text-sm ${z===p?"bg-white/20 text-white":"hover:bg-glass"}`,children:z},z)})}),t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g(w=>Math.min(v,w+1)),disabled:p===v,children:"Next"})]})]})]})})},sb=({isOpen:l,onClose:r,product:c,onAdjustStock:o})=>{const[d,m]=h.useState({newQuantity:0,reason:"",notes:""}),[p,g]=h.useState(""),[x,f]=h.useState(!1),[y,v]=h.useState(!1);h.useEffect(()=>{!l||!c?(m({newQuantity:c?.quantityOnHand||0,reason:"",notes:""}),g(""),v(!1)):m(z=>({...z,newQuantity:c.quantityOnHand}))},[l,c]);const S=async z=>{if(z.preventDefault(),g(""),!c){g("No product selected");return}if(!d.reason.trim()){g("Adjustment reason is required");return}if(d.newQuantity<0){g("Quantity cannot be negative");return}f(!0),await new Promise(A=>setTimeout(A,300)),o(c.id,d.newQuantity,d.reason,d.notes||void 0),f(!1),v(!0),setTimeout(()=>{r()},1500)};if(!c)return null;const k=d.newQuantity-c.quantityOnHand,w=k>0,N=t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:x,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:S,loading:x,loadingText:"Adjusting...",disabled:x,children:"Adjust Stock"})]});return t.jsx(at,{isOpen:l,onClose:r,title:"Stock Adjustment",footer:N,size:"md",children:t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[p&&t.jsxs("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400 text-sm flex items-center gap-2",children:[t.jsx(ys,{size:18}),p]}),y&&t.jsx("div",{className:"p-3 rounded-lg bg-green-500/20 text-green-400 text-sm",children:"Stock adjusted successfully!"}),t.jsxs("div",{className:"glass p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:t.jsx(gt,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:c.name}),t.jsx("p",{className:"text-sm text-muted",children:c.category})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Current Quantity:"}),t.jsxs("p",{className:"font-medium text-lg",children:[c.quantityOnHand," ",c.unit]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Available:"}),t.jsxs("p",{className:"font-medium text-lg",children:[c.availableQuantity," ",c.unit]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"New Quantity"}),t.jsx("input",{type:"number",value:d.newQuantity,onChange:z=>m({...d,newQuantity:Number(z.target.value)}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0}),k!==0&&t.jsxs("p",{className:`text-sm mt-1 ${w?"text-green-400":"text-red-400"}`,children:[w?"+":"",k," ",c.unit]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Adjustment Reason"}),t.jsxs("select",{value:d.reason,onChange:z=>m({...d,reason:z.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,children:[t.jsx("option",{value:"",children:"Select a reason"}),t.jsx("option",{value:"Physical Count Correction",children:"Physical Count Correction"}),t.jsx("option",{value:"Damage/Loss",children:"Damage/Loss"}),t.jsx("option",{value:"Quality Issue",children:"Quality Issue"}),t.jsx("option",{value:"System Error Correction",children:"System Error Correction"}),t.jsx("option",{value:"Return from Customer",children:"Return from Customer"}),t.jsx("option",{value:"Sample/Testing",children:"Sample/Testing"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:d.notes,onChange:z=>m({...d,notes:z.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",rows:3,placeholder:"Add any additional details about this adjustment..."})]}),t.jsx("div",{className:"p-3 glass rounded-lg text-sm text-muted",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ys,{size:16,className:"mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{children:"This adjustment will be logged in the movement history."}),t.jsx("p",{children:"Make sure to document the reason for audit purposes."})]})]})})]})})},ab=()=>{const{data:l,loading:r,error:c,updateData:o,isOnline:d,isSyncing:m,offlineQueueSize:p,refresh:g,forceSync:x}=tt({dataType:"bookedStock",immediate:!0}),f=h.useCallback((T,O,L,M,I,X,P)=>{try{const B=new Date,q={id:Ye(),customerId:L,customerName:M,saleId:X,orderId:P,productId:T,productName:O,quantity:I,quantityLoaded:0,unit:"unit",bookingDate:B,status:"pending",createdAt:B,updatedAt:B};return o([...l,q]).catch(console.error),{success:!0}}catch(B){return console.error("Error adding booked stock:",B),{success:!1,error:"Failed to add booked stock"}}},[l,o]),y=h.useCallback(T=>{try{const O=new Date,L=T.map(M=>({id:Ye(),customerId:M.customerId,customerName:M.customerName,saleId:M.saleId,orderId:M.orderId,productId:M.productId,productName:M.productName,quantity:M.quantity,quantityLoaded:0,unit:"unit",bookingDate:O,status:"pending",createdAt:O,updatedAt:O}));return o([...l,...L]).catch(console.error),{success:!0}}catch(O){return console.error("Error adding batch booked stock:",O),{success:!1,error:"Failed to add batch booked stock"}}},[l,o]),v=h.useCallback((T,O)=>{try{const L=new Date,M=l.map(I=>I.id===T?{...I,status:O,quantityLoaded:O==="fully-loaded"?I.quantity:I.quantityLoaded,updatedAt:L}:I);return o(M).catch(console.error),{success:!0}}catch(L){return console.error("Error updating booked stock status:",L),{success:!1,error:"Failed to update status"}}},[l,o]),S=h.useCallback(T=>{try{const O=l.filter(L=>L.id!==T);return o(O).catch(console.error),{success:!0}}catch(O){return console.error("Error deleting booked stock:",O),{success:!1,error:"Failed to delete booked stock"}}},[l,o]),k=h.useCallback(T=>l.filter(O=>O.saleId===T),[l]),w=h.useCallback(T=>l.filter(O=>O.customerId===T),[l]),N=h.useCallback(T=>l.filter(O=>O.productId===T),[l]),z=h.useCallback(T=>l.filter(O=>O.productId===T&&(O.status==="pending"||O.status==="confirmed")).reduce((O,L)=>O+L.quantity,0),[l]),A=h.useCallback(T=>{try{const O=new Date,L=l.map(M=>T.includes(M.id)?{...M,status:"fully-loaded",quantityLoaded:M.quantity,updatedAt:O}:M);return o(L).catch(console.error),{success:!0}}catch(O){return console.error("Error marking as loaded:",O),{success:!1,error:"Failed to mark as loaded"}}},[l,o]);return{bookedStock:l,loading:r,error:c,isOnline:d,syncInProgress:m,pendingChanges:p,addBookedStock:f,addBatchBookedStock:y,updateBookedStockStatus:v,deleteBookedStock:S,markAsLoaded:A,getBookedStockBySale:k,getBookedStockByCustomer:w,getBookedStockByProduct:N,getTotalBookedQuantity:z,forceSync:x,refreshData:g}},gu=()=>(console.log("[BookedStock] Using GitHub-direct mode (no localStorage)"),ab()),nb=({isOpen:l,product:r,onClose:c})=>{const[o,d]=h.useState([]),{getBookedStockByProduct:m}=gu();if(h.useEffect(()=>{if(r){const f=m(r.id);d(f)}},[r,m]),!r)return null;const p=o.reduce((f,y)=>f+(y.quantity-y.quantityLoaded),0),g=o.reduce((f,y)=>(f[y.customerId]||(f[y.customerId]={customerName:y.customerName,bookings:[],totalQuantity:0}),f[y.customerId].bookings.push(y),f[y.customerId].totalQuantity+=y.quantity-y.quantityLoaded,f),{}),x=f=>{switch(f){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";case"fully-loaded":return"bg-green-500/20 text-green-400";case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return t.jsx(at,{isOpen:l,onClose:c,title:`Booked Stock Details - ${r.name}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"glass rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"On Hand"}),t.jsxs("p",{className:"text-xl font-bold",children:[r.quantityOnHand," ",r.unit]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Booked"}),t.jsxs("p",{className:"text-xl font-bold text-yellow-400",children:[p," ",r.unit]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Available"}),t.jsxs("p",{className:"text-xl font-bold text-green-400",children:[r.quantityOnHand-p," ",r.unit]})]})]})}),o.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(it,{className:"mx-auto mb-3 text-muted",size:48}),t.jsx("p",{className:"text-muted",children:"No active bookings for this product"})]}):t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(g).map(([f,y])=>t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{className:"text-blue-400",size:18}),t.jsx("h4",{className:"font-semibold",children:y.customerName})]}),t.jsxs("span",{className:"text-sm font-medium text-yellow-400",children:["Total: ",y.totalQuantity," ",r.unit]})]}),t.jsx("div",{className:"space-y-2",children:y.bookings.map(v=>t.jsx("div",{className:"pl-6 py-2 border-l-2 border-gray-700",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("p",{className:"text-sm",children:["Order: ",v.orderId]}),t.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${x(v.status)}`,children:v.status.replace("-"," ")})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(gt,{size:12}),v.quantity," ",v.unit]}),v.quantityLoaded>0&&t.jsxs("span",{children:["Loaded: ",v.quantityLoaded]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bt,{className:"text-gray-400",size:12}),Je(v.bookingDate)]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-medium",children:[v.quantity-v.quantityLoaded," ",v.unit]}),t.jsx("p",{className:"text-xs text-muted",children:"remaining"})]})]})},v.id))})]},f))}),t.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-800/50",children:t.jsx(fe,{variant:"ghost",onClick:c,children:"Close"})})]})})},lb=()=>{const[l,r]=h.useState(""),[c,o]=h.useState(""),[d,m]=h.useState(""),[p,g]=h.useState(null),[x,f]=h.useState(null),[y,v]=h.useState(!1),[S,k]=h.useState(!1),[w,N]=h.useState(!1),[z,A]=h.useState(!1),[T,O]=h.useState(!1),[L,M]=h.useState(!1),[I,X]=h.useState(!1),[P,B]=h.useState(null),{products:q,categories:_,movements:Y,loading:Q,addCategory:H,updateCategory:V,deleteCategory:b,addProduct:E,updateProduct:U,deleteProduct:K,addBatchProductionEntries:C,adjustStock:$,refreshData:W}=Yj(),{toasts:F,showSuccess:ie,showError:re,removeToast:ne}=ga();h.useEffect(()=>{const je=ue=>{const xe=ue.target;xe.closest(".settings-dropdown")||v(!1),xe.closest(".mobile-menu-dropdown")||k(!1)};return(y||S)&&document.addEventListener("click",je),()=>{document.removeEventListener("click",je)}},[y,S]);const le=async(je,ue,xe,Se,Ee)=>{const rt=await E(je,ue,xe,Se,Ee);return rt.success?(ie(`Product "${je}" added successfully`),{success:!0}):rt},te=async je=>{const ue=q.find(Se=>Se.id===je);(await K(je)).success?ie(`Product "${ue?.name}" deleted`):re("Failed to delete product")},pe=async je=>{const ue=await C(je);return ue.success&&ue.failedProducts.length===0?ie(`Production added for ${ue.successCount} product${ue.successCount>1?"s":""}`):ue.success&&ue.failedProducts.length>0?re(`Added ${ue.successCount} entries, failed for ${ue.failedProducts.join(", ")}`):re("Failed to add production entries"),ue},oe=async(je,ue,xe,Se)=>{const Ee=await $(je,ue,xe,Se);return Ee.success?(ie("Stock adjusted successfully"),setTimeout(()=>{W()},500)):re("Failed to adjust stock"),Ee.success},ye=je=>{if(je==="json"){const ue=Nj(q);Ql(ue,`inventory_${new Date().toISOString().split("T")[0]}.json`,"json"),ie("Inventory exported as JSON")}else{const ue=wj(q);Ql(ue,`inventory_${new Date().toISOString().split("T")[0]}.csv`,"csv"),ie("Inventory exported as CSV")}},ge=async()=>{const je=document.createElement("input");je.type="file",je.accept=".json",je.onchange=async ue=>{const xe=ue.target.files?.[0];if(!xe)return;const Se=await xe.text(),Ee=Sj(Se);if(Ee){for(const rt of Ee)await E(rt.name,rt.category,rt.quantityOnHand,rt.unit,rt.reorderLevel);ie(`Imported ${Ee.length} products`),W()}else re("Failed to import inventory. Please check the file format.")},je.click()},be=()=>{const je={version:"1.0.0",timestamp:new Date().toISOString(),products:q,categories:_,movements:Y,productionEntries:[]},ue=JSON.stringify(je,null,2);Ql(ue,`inventory_backup_${new Date().toISOString().split("T")[0]}.json`,"json"),ie("Backup created successfully")},Ce=async()=>{const je=document.createElement("input");je.type="file",je.accept=".json",je.onchange=async ue=>{const xe=ue.target.files?.[0];if(!xe)return;const Se=await xe.text();try{const Ee=JSON.parse(Se);Ee.products&&fr.set("products",Ee.products),Ee.categories&&fr.set("product_categories",Ee.categories),Ee.movements&&fr.set("inventory_movements",Ee.movements),Ee.productionEntries&&fr.set("production_entries",Ee.productionEntries),ie("Backup restored successfully"),W()}catch(Ee){console.error("Restore error:",Ee),re("Failed to restore backup. Please check the file format.")}},je.click()},Re=()=>{r(""),o(""),m("")};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-start gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Inventory Management"}),t.jsx("p",{className:"text-muted text-sm sm:text-base",children:"Track production, manage stock levels, and monitor movements"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:je=>{je.stopPropagation(),k(!S)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),S&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[t.jsxs("button",{onClick:je=>{je.stopPropagation(),N(!0),k(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(zh,{size:16}),"Categories"]}),t.jsxs("button",{onClick:je=>{je.stopPropagation(),O(!0),k(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx($l,{size:16}),"Production"]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[t.jsxs(fe,{variant:"secondary",onClick:()=>N(!0),children:[t.jsx(zh,{size:20}),"Categories"]}),t.jsxs(fe,{variant:"secondary",onClick:()=>O(!0),children:[t.jsx($l,{size:20}),"Production"]})]}),t.jsxs("button",{onClick:()=>A(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Product",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Add Product"})]})]})]}),Q?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading inventory..."})]})})}):t.jsx(Xj,{products:q,movements:Y}),t.jsxs(Te,{children:[t.jsxs("div",{className:"mb-6 space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Product Inventory"}),t.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[t.jsxs("button",{onClick:ge,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Import",children:[t.jsx(vs,{size:14,className:"sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Import"})]}),t.jsxs("button",{onClick:()=>ye("csv"),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export CSV",children:[t.jsx(Dt,{size:14,className:"sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),t.jsxs("button",{onClick:()=>ye("json"),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export JSON",children:[t.jsx(Ot,{size:14,className:"sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Export JSON"})]}),t.jsxs("div",{className:"relative settings-dropdown",children:[t.jsx("button",{onClick:je=>{je.stopPropagation(),v(!y)},className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Settings",children:t.jsx(mx,{size:14,className:"sm:w-4 sm:h-4"})}),y&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[140px] bg-gray-900 border border-white/20 animate-fadeIn",children:[t.jsx("button",{onClick:je=>{je.stopPropagation(),be(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors",children:"Create Backup"}),t.jsx("button",{onClick:je=>{je.stopPropagation(),Ce(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors",children:"Restore Backup"})]})]})]})]}),t.jsx(Fj,{searchTerm:l,onSearchChange:r,categoryFilter:c,onCategoryChange:o,stockFilter:d,onStockFilterChange:m,categories:_,onClearFilters:Re})]}),Q?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsx(Zj,{products:q,searchTerm:l,categoryFilter:c,stockFilter:d,onEditProduct:f,onDeleteProduct:te,onViewMovement:je=>{g(je),M(!0)},onAdjustStock:je=>{g(je),X(!0)},onViewBookedStock:je=>{B(je)}})]}),t.jsx(Kj,{isOpen:w,onClose:()=>N(!1),categories:_,onAddCategory:async(je,ue)=>{const xe=await H(je,ue);return xe.success&&ie("Category added successfully"),xe},onUpdateCategory:async(je,ue,xe)=>{const Se=await V(je,ue,xe);return Se.success&&ie("Category updated successfully"),Se},onDeleteCategory:async je=>{const ue=await b(je);return ue.success?ie("Category deleted successfully"):re("Cannot delete category with existing products"),ue}}),t.jsx(Jj,{isOpen:z,onClose:()=>A(!1),categories:_,onAddProduct:le}),t.jsx(Wj,{isOpen:!!x,onClose:()=>f(null),product:x,categories:_,onUpdateProduct:async(je,ue)=>{const xe=await U(je,ue);return xe.success?ie("Product updated successfully"):re("Failed to update product"),xe}}),t.jsx(eb,{isOpen:T,onClose:()=>O(!1),products:q,onAddProduction:pe}),t.jsx(tb,{isOpen:L,onClose:()=>{M(!1),g(null)},product:p,movements:Y}),t.jsx(sb,{isOpen:I,onClose:()=>{X(!1),g(null)},product:p,onAdjustStock:oe}),t.jsx(nb,{isOpen:!!P,product:P,onClose:()=>B(null)}),t.jsx(pa,{toasts:F,onClose:ne})]})},Dn=({className:l,variant:r="text",width:c,height:o})=>{const d="animate-pulse bg-gradient-to-r from-dark-surface to-dark-hover",m={text:"h-4 rounded",circular:"rounded-full",rectangular:"rounded-lg"};return t.jsx("div",{className:pu(d,m[r],l),style:{width:c||(r==="circular"?"40px":"100%"),height:o||(r==="circular"?"40px":r==="rectangular"?"100px":"16px")}})},ib=({stats:l,loading:r})=>{const c=[{title:"Total Customers",value:l.totalCustomers,icon:js,color:"text-blue-400",bgColor:"bg-blue-500/10",format:o=>o.toString()},{title:"Total Receivables",value:l.totalPositiveBalance,icon:is,color:"text-green-400",bgColor:"bg-green-500/10",format:Vl},{title:"Total Payables",value:l.totalNegativeBalance,icon:kr,color:"text-red-400",bgColor:"bg-red-500/10",format:o=>Vl(o,!0)},{title:"Customers with Debt",value:l.customersWithDebt,icon:it,color:"text-yellow-400",bgColor:"bg-yellow-500/10",format:o=>o.toString()}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map((o,d)=>t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-muted mb-1",children:o.title}),r?t.jsx(Dn,{className:"h-8 w-24"}):t.jsx("p",{className:`text-2xl font-bold ${o.color}`,children:o.format(o.value)})]}),t.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:t.jsx(o.icon,{className:o.color,size:20})})]})},d))})},yu=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],rb=({searchTerm:l,stateFilter:r,balanceFilter:c,onSearchChange:o,onStateChange:d,onBalanceChange:m})=>{const p=l||r||c,g=[l,r,c].filter(Boolean).length;return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[t.jsx("div",{className:"lg:col-span-5",children:t.jsxs("div",{className:"relative",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:18}),t.jsx("input",{type:"text",placeholder:"Search by name or phone number...",value:l,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text transition-all duration-200"}),l&&t.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-text hover:text-gray-100 transition-colors",children:t.jsx(En,{size:16})})]})}),t.jsxs("div",{className:"lg:col-span-7 flex flex-wrap items-center gap-3",children:[t.jsx("div",{className:"flex-1 min-w-[150px]",children:t.jsxs("div",{className:"relative",children:[t.jsx(hu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:16}),t.jsxs("select",{value:r,onChange:x=>d(x.target.value),className:"w-full pl-10 pr-8 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm appearance-none cursor-pointer transition-all duration-200",children:[t.jsx("option",{value:"",children:"All States"}),yu.map(x=>t.jsx("option",{value:x,children:x},x))]}),t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-4 h-4 text-muted-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),t.jsx("div",{className:"flex-1 min-w-[150px]",children:t.jsxs("div",{className:"relative",children:[t.jsx(By,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:16}),t.jsxs("select",{value:c,onChange:x=>m(x.target.value),className:"w-full pl-10 pr-8 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm appearance-none cursor-pointer transition-all duration-200",children:[t.jsx("option",{value:"",children:"All Balances"}),t.jsx("option",{value:"positive",children:"Positive Balance"}),t.jsx("option",{value:"negative",children:"Negative Balance"}),t.jsx("option",{value:"zero",children:"Zero Balance"})]}),t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-4 h-4 text-muted-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),p&&t.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 glass rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(fu,{size:14,className:"text-primary"}),t.jsxs("span",{className:"text-sm font-medium",children:[g," filter",g>1?"s":""]})]}),t.jsxs("button",{onClick:()=>{o(""),d(""),m("")},className:"flex items-center gap-1 text-sm text-red-400 hover:text-red-300 transition-colors font-medium",children:[t.jsx(En,{size:14}),"Clear"]})]})]})]})},cb=({customers:l,ledgerEntries:r,searchTerm:c,stateFilter:o,balanceFilter:d,loading:m,onEditCustomer:p,onDeleteCustomer:g,onViewLedger:x,onViewBookings:f,refreshData:y})=>{const[v,S]=h.useState("name"),[k,w]=h.useState("asc"),[N,z]=h.useState(new Set),[A,T]=h.useState({show:!1,customer:null}),[O,L]=h.useState(!1),M=h.useMemo(()=>l.map(H=>({...H,balance:jr(H.id,r)})),[l,r]),I=H=>{v===H?w(k==="asc"?"desc":"asc"):(S(H),w("asc"))},X=h.useMemo(()=>{const H=Lj(M,c,o,d);return Oj(H,v,k)},[M,c,o,d,v,k]),P=()=>{N.size===X.length?z(new Set):z(new Set(X.map(H=>H.id)))},B=H=>{const V=new Set(N);V.has(H)?V.delete(H):V.add(H),z(V)},q=H=>{T({show:!0,customer:H})},_=()=>{A.customer&&(g(A.customer.id),T({show:!1,customer:null}))},Y=()=>{N.forEach(H=>{g(H)}),z(new Set),L(!1)},Q=({field:H})=>v!==H?null:k==="asc"?t.jsx(Zl,{size:14}):t.jsx(Ra,{size:14});return t.jsxs(t.Fragment,{children:[N.size>0&&t.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[t.jsxs("span",{className:"text-sm",children:[N.size," customer",N.size!==1?"s":""," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>z(new Set),children:"Clear"}),t.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>L(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),t.jsx("div",{className:"sm:hidden",children:X.length===0?t.jsx("div",{className:"p-8 text-center text-muted",children:c||o||d?"No customers found matching your filters":"No customers yet"}):t.jsx("div",{className:"space-y-3",children:X.map(H=>t.jsxs("div",{className:`glass rounded-lg p-4 ${N.has(H.id)?"ring-2 ring-white/20":""} ${Bh(H.balance)}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("button",{onClick:()=>B(H.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:N.has(H.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"font-medium text-base",children:H.name})})]}),t.jsx("span",{className:`font-bold text-lg ${Fo(H.balance)}`,children:Vl(H.balance,H.balance<0)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Phone:"}),t.jsx("p",{children:br(H.phone)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"State:"}),t.jsx("p",{children:H.state})]})]}),t.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[t.jsx("button",{onClick:()=>p(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Customer",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>x(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Ledger",children:t.jsx(st,{size:16})}),t.jsx("button",{onClick:()=>f(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Bookings",children:t.jsx(gt,{size:16})}),t.jsx("button",{onClick:()=>q(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Customer",children:t.jsx(Nt,{size:16,className:"text-red-400"})})]})]},H.id))})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/5",children:[t.jsx("th",{className:"text-left py-3 px-3",children:t.jsx("button",{onClick:P,className:"p-1 rounded hover:bg-glass transition-colors",children:N.size===X.length&&X.length>0?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>I("name"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Customer",t.jsx(Q,{field:"name"})]})}),t.jsx("th",{className:"text-left py-3 px-3",children:"Phone"}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>I("state"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["State",t.jsx(Q,{field:"state"})]})}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>I("balance"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Balance",t.jsx(Q,{field:"balance"})]})}),t.jsx("th",{className:"text-center py-3 px-3",children:"Actions"})]})}),t.jsx("tbody",{children:X.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-8 text-center text-muted",children:c||o||d?"No customers found matching your filters":"No customers yet"})}):X.map(H=>t.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${N.has(H.id)?"bg-glass/50":""} ${Bh(H.balance)}`,children:[t.jsx("td",{className:"py-3 px-3",children:t.jsx("button",{onClick:()=>B(H.id),className:"p-1 rounded hover:bg-glass transition-colors",children:N.has(H.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:t.jsx(_t,{size:20})}),t.jsx("div",{children:t.jsx("p",{className:"font-medium",children:H.name})})]})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:br(H.phone)})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:H.state})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:`font-medium ${Fo(H.balance)}`,children:Vl(H.balance,H.balance<0)})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1",children:[t.jsx("button",{onClick:()=>p(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Customer",children:t.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>x(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Ledger",children:t.jsx(st,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>f(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Bookings",children:t.jsx(gt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>q(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Customer",children:t.jsx(Nt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})})]})})]},H.id))})]})}),X.length>0&&t.jsxs("div",{className:"mt-4 text-sm text-muted",children:["Showing ",X.length," of ",M.length," customers"]}),!m&&M.length>0&&t.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Total: ",M.length," customers"]})]}),y&&t.jsxs(fe,{variant:"ghost",size:"sm",onClick:y,children:[t.jsx(Fe,{size:14}),"Refresh"]})]}),A.show&&A.customer&&t.jsx(Xt,{isOpen:A.show,onClose:()=>T({show:!1,customer:null}),onConfirm:_,title:"Delete Customer",message:t.jsxs("div",{children:["Are you sure you want to delete ",t.jsx("strong",{children:A.customer.name}),"?",A.customer.balance!==0&&t.jsx("div",{className:`mt-2 p-2 rounded ${A.customer.balance>0?"bg-green-500/10":"bg-red-500/10"}`,children:t.jsxs("p",{className:"text-sm",children:["This customer has an outstanding balance of"," ",t.jsx("span",{className:`font-semibold ${Fo(A.customer.balance)}`,children:Vl(A.customer.balance,A.customer.balance<0)})]})})]}),confirmText:"Delete",type:"danger"}),O&&t.jsx(Xt,{isOpen:O,onClose:()=>L(!1),onConfirm:Y,title:"Delete Multiple Customers",message:`Are you sure you want to delete ${N.size} selected customer${N.size>1?"s":""}? This action cannot be undone.`,confirmText:"Delete All",type:"danger"})]})},ob=({isOpen:l,onClose:r,onAdd:c})=>{const[o,d]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(""),[f,y]=h.useState("0"),[v,S]=h.useState([]),[k,w]=h.useState(!1),N=async T=>{T.preventDefault(),S([]),w(!0);const O=[];o.trim()||O.push("Customer name is required"),m.trim()?An(m)||O.push("Please enter a valid Nigerian phone number"):O.push("Phone number is required"),g||O.push("State is required");const L=parseFloat(f)||0;if(isNaN(L)&&O.push("Initial balance must be a valid number"),O.length>0){S(O),w(!1);return}const M=c(o.trim(),m.trim(),g,L);M.success?z():S(M.errors||["Failed to add customer"]),w(!1)},z=()=>{d(""),p(""),x(""),y("0"),S([]),r()},A=T=>{const O=T.replace(/[^\d\s+]/g,"");p(O)};return t.jsx(at,{isOpen:l,onClose:z,title:"Add New Customer",size:"md",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:z,disabled:k,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:N,disabled:k,loading:k,loadingText:"Adding Customer...",children:"Add Customer"})]}),children:t.jsxs("form",{onSubmit:N,className:"space-y-4",children:[v.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:v.map((T,O)=>t.jsx("p",{className:"text-sm text-red-400",children:T},O))})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:o,onChange:T=>d(T.target.value),placeholder:"Enter customer name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0,autoFocus:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"tel",value:m,onChange:T=>A(T.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),m&&!An(m)&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),m&&An(m)&&t.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",br(m)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["State ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(hu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsxs("select",{value:g,onChange:T=>x(T.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[t.jsx("option",{value:"",children:"Select a state"}),yu.map(T=>t.jsx("option",{value:T,children:T},T))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Initial Balance"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text text-lg font-medium",children:"₦"}),t.jsx("input",{type:"number",value:f,onChange:T=>y(T.target.value),placeholder:"0.00",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.01"})]}),t.jsx("p",{className:"text-xs text-muted mt-1",children:"Positive for money owed to you, negative for money you owe"})]})]})})},ub=({isOpen:l,customer:r,onClose:c,onUpdate:o})=>{const[d,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState([]),[S,k]=h.useState(!1);h.useEffect(()=>{r&&(m(r.name),g(r.phone),f(r.state))},[r]);const w=async A=>{if(A.preventDefault(),!r)return;v([]),k(!0);const T=[];if(d.trim()||T.push("Customer name is required"),p.trim()?An(p)||T.push("Please enter a valid Nigerian phone number"):T.push("Phone number is required"),x||T.push("State is required"),T.length>0){v(T),k(!1);return}const O={name:d.trim(),phone:p.trim(),state:x},L=await o(r.id,O);L.success?N():v(L.errors||["Failed to update customer"]),k(!1)},N=()=>{m(""),g(""),f(""),v([]),c()},z=A=>{const T=A.replace(/[^\d\s+]/g,"");g(T)};return r?t.jsx(at,{isOpen:l,onClose:N,title:"Edit Customer",size:"md",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:N,disabled:S,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:w,disabled:S,loading:S,loadingText:"Updating Customer...",children:"Update Customer"})]}),children:t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[y.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:y.map((A,T)=>t.jsx("p",{className:"text-sm text-red-400",children:A},T))})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:d,onChange:A=>m(A.target.value),placeholder:"Enter customer name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"tel",value:p,onChange:A=>z(A.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),p&&!An(p)&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),p&&An(p)&&t.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",br(p)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["State ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(hu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsxs("select",{value:x,onChange:A=>f(A.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[t.jsx("option",{value:"",children:"Select a state"}),yu.map(A=>t.jsx("option",{value:A,children:A},A))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Balance"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text text-lg font-medium",children:"₦"}),t.jsx("input",{type:"text",value:r.balance.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2}),className:`w-full pl-10 pr-4 py-2 glass rounded-lg bg-glass/50 cursor-not-allowed ${r.balance>0?"text-green-400":r.balance<0?"text-red-400":"text-gray-400"}`,disabled:!0,readOnly:!0})]})]})]})}):null},db=({isOpen:l,customer:r,onClose:c})=>{const[o,d]=h.useState([]),[m,p]=h.useState(!1),{getBookedStockByCustomer:g}=gu();if(h.useEffect(()=>{if(r){const N=g(r.id);d(N)}},[r,g]),!r)return null;const x=o.filter(N=>N.status==="pending"||N.status==="confirmed"||N.status==="partial-loaded"),f=o.filter(N=>N.status==="fully-loaded"),y=x.reduce((N,z)=>N+(z.quantity-z.quantityLoaded),0),v=f.reduce((N,z)=>N+z.quantity,0),S=m?[...x,...f]:x,k=N=>{switch(N){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";case"fully-loaded":return"bg-green-500/20 text-green-400";case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},w=N=>{switch(N){case"pending":return"⏳";case"confirmed":return"✓";case"partial-loaded":return"📦";case"fully-loaded":return"✅";case"cancelled":return"❌";default:return"•"}};return t.jsx(at,{isOpen:l,onClose:c,title:`Booked Stock - ${r.name}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(tu,{className:"text-gray-400",size:20}),t.jsx("span",{className:"text-xs text-muted",children:"Pending"})]}),t.jsx("p",{className:"text-xl font-bold",children:x.length}),t.jsx("p",{className:"text-sm text-muted",children:"Active Bookings"}),y>0&&t.jsxs("p",{className:"text-sm font-semibold text-yellow-400 mt-1",children:[y," units remaining"]})]}),t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(eu,{className:"text-green-400",size:20}),t.jsx("span",{className:"text-xs text-muted",children:"Completed"})]}),t.jsx("p",{className:"text-xl font-bold",children:f.length}),t.jsx("p",{className:"text-sm text-muted",children:"Fully Loaded"}),v>0&&t.jsxs("p",{className:"text-sm font-semibold text-green-400 mt-1",children:[v," units delivered"]})]})]}),f.length>0&&t.jsx("button",{onClick:()=>p(!m),className:"w-full glass rounded-lg px-4 py-2 flex items-center justify-center gap-2 hover:bg-white/10 transition-colors",children:m?t.jsxs(t.Fragment,{children:[t.jsx(ov,{size:16}),t.jsxs("span",{className:"text-sm",children:["Hide Fully Loaded (",f.length,")"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(yr,{size:16}),t.jsxs("span",{className:"text-sm",children:["Show Fully Loaded (",f.length,")"]})]})}),S.length===0&&!m?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(it,{className:"mx-auto mb-3 text-muted",size:48}),t.jsx("p",{className:"text-muted",children:"No pending bookings for this customer"}),f.length>0&&t.jsx("p",{className:"text-sm text-muted mt-2",children:'Click "Show Fully Loaded" to view completed bookings'})]}):S.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(it,{className:"mx-auto mb-3 text-muted",size:48}),t.jsx("p",{className:"text-muted",children:"No bookings found for this customer"})]}):t.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[x.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[t.jsx(tu,{className:"text-gray-400",size:14}),"Pending & Partially Loaded (",x.length,")"]}),t.jsx("div",{className:"space-y-3",children:x.map(N=>t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg",children:N.productName}),t.jsxs("p",{className:"text-sm text-muted",children:["Order: ",N.orderId]})]}),t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full flex items-center gap-1 ${k(N.status)}`,children:[t.jsx("span",{children:w(N.status)}),N.status.replace("-"," ")]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Quantity Booked:"}),t.jsxs("p",{className:"font-medium",children:[N.quantity," ",N.unit]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Quantity Loaded:"}),t.jsxs("p",{className:"font-medium",children:[N.quantityLoaded," ",N.unit]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Remaining:"}),t.jsxs("p",{className:"font-medium text-yellow-400",children:[N.quantity-N.quantityLoaded," ",N.unit]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Booking Date:"}),t.jsx("p",{className:"font-medium",children:Je(N.bookingDate)})]})]}),N.notes&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:[t.jsx("p",{className:"text-sm text-muted",children:"Notes:"}),t.jsx("p",{className:"text-sm",children:N.notes})]}),N.status==="partial-loaded"&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(is,{className:"text-orange-400",size:16}),t.jsxs("p",{className:"text-sm text-orange-400",children:[Math.round(N.quantityLoaded/N.quantity*100),"% loaded"]})]})})]},N.id))})]}),m&&f.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[t.jsx(eu,{size:14}),"Fully Loaded (",f.length,")"]}),t.jsx("div",{className:"space-y-3",children:f.map(N=>t.jsxs("div",{className:"glass rounded-lg p-4 opacity-75",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg",children:N.productName}),t.jsxs("p",{className:"text-sm text-muted",children:["Order: ",N.orderId]})]}),t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full flex items-center gap-1 ${k(N.status)}`,children:[t.jsx("span",{children:w(N.status)}),N.status.replace("-"," ")]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Quantity Delivered:"}),t.jsxs("p",{className:"font-medium text-green-400",children:[N.quantity," ",N.unit]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Completion Date:"}),t.jsx("p",{className:"font-medium",children:Je(N.updatedAt)})]})]}),N.notes&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:[t.jsx("p",{className:"text-sm text-muted",children:"Notes:"}),t.jsx("p",{className:"text-sm",children:N.notes})]})]},N.id))})]})]}),t.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-800/50",children:t.jsx(fe,{variant:"ghost",onClick:c,children:"Close"})})]})})},mb=()=>{const l=lu(),[r,c]=h.useState(""),[o,d]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(!1),[f,y]=h.useState(null),[v,S]=h.useState(null),[k,w]=h.useState(!1),[N,z]=h.useState(!1),{customersHook:A}=xu(),{customers:T,ledgerEntries:O,loading:L,syncInProgress:M,pendingChanges:I,addCustomer:X,updateCustomer:P,deleteCustomer:B,importCustomers:q,importRelatedData:_,forceSync:Y,refreshData:Q}=A,{toasts:H,showSuccess:V,showError:b,removeToast:E}=ga(),U=h.useMemo(()=>{const le=T.length,te=T.map(Ce=>({...Ce,actualBalance:jr(Ce.id,O)})),pe=te.filter(Ce=>Ce.actualBalance>0).length,oe=te.reduce((Ce,Re)=>Ce+Re.actualBalance,0),ye=te.reduce((Ce,Re)=>Math.max(0,Re.actualBalance)+Ce,0),ge=te.reduce((Ce,Re)=>Math.min(0,Re.actualBalance)+Ce,0),be=te.filter(Ce=>Ce.actualBalance>0).length;return{totalCustomers:le,activeCustomers:pe,totalBalance:oe,totalPositiveBalance:ye,totalNegativeBalance:ge,customersWithDebt:be}},[T,O]),K=(le,te,pe,oe)=>{const ye=X(le,te,pe);return ye.success&&(V(`Customer "${le}" added successfully`),x(!1)),ye},C=async(le,te)=>{const pe=await P(le,te);return pe.success&&(V("Customer updated successfully"),y(null)),pe},$=async le=>{const te=T.find(oe=>oe.id===le),pe=await B(le);pe.success?pe.error?b(pe.error):V(`Customer "${te?.name}" deleted`):b("Failed to delete customer")},W=le=>{l(`/customers/ledger/${le.id}`)},F=le=>{S(le)},ie=(le=!1)=>{le?(_h(T,!0,{ledgerEntries:O}),V("Full backup exported with all related data")):(_h(T),V("Customers exported to JSON")),w(!1)},re=()=>{zj(T),V("Customers exported to CSV"),w(!1)},ne=async le=>{const te=le.target.files?.[0];if(te){try{const pe=await Mj(te),oe=await q(pe.customers,{mode:"merge",preserveExisting:!1});if(pe.isFullBackup&&pe.relatedData){const ge=await _(pe.relatedData);ge.success||b(ge.error||"Failed to import some related data")}const ye=[];oe.imported>0&&ye.push(`${oe.imported} new customers imported`),oe.updated>0&&ye.push(`${oe.updated} customers updated`),oe.skipped>0&&ye.push(`${oe.skipped} customers skipped`),ye.length>0&&V(ye.join(", ")),oe.errors&&oe.errors.length>0&&oe.errors.forEach(ge=>b(ge)),pe.isFullBackup&&V("Full backup restored with all related data")}catch(pe){b(pe.message||"Failed to import customers")}le.target.value="",w(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Customers"}),t.jsx("p",{className:"text-muted",children:"Manage your customer information and relationships"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:le=>{le.stopPropagation(),z(!N)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),N&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[I>0&&!M&&t.jsxs("button",{onClick:le=>{le.stopPropagation(),Y(),z(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",I,")"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),ie(!1),z(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),ie(!0),z(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export Full Backup"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),re(),z(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),t.jsx("span",{className:"text-sm",children:"Import from JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:le=>{ne(le),z(!1)},className:"hidden"})]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[M&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),I>0&&!M&&t.jsxs(fe,{variant:"ghost",onClick:Y,children:[t.jsx(Fe,{size:16}),"Sync (",I,")"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>w(!k),children:[t.jsx(Dt,{size:20}),"Import/Export"]}),k&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[t.jsxs("button",{onClick:()=>ie(!1),className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:()=>ie(!0),className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export Full Backup"]}),t.jsxs("button",{onClick:re,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsx("div",{className:"border-t border-white/10 my-1"}),t.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),"Import / Restore Backup",t.jsx("input",{type:"file",accept:".json",onChange:ne,className:"hidden"})]})]})]})]}),t.jsxs("button",{onClick:()=>x(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Customer",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Add Customer"})]})]})]}),L?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading customers..."})]})})}):t.jsx(ib,{stats:U,loading:L}),t.jsxs(Te,{children:[t.jsx("div",{className:"mb-4",children:t.jsx(rb,{searchTerm:r,stateFilter:o,balanceFilter:m,onSearchChange:c,onStateChange:d,onBalanceChange:p})}),L?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsx(cb,{customers:T,ledgerEntries:O,searchTerm:r,stateFilter:o,balanceFilter:m,loading:!1,onEditCustomer:y,onDeleteCustomer:$,onViewLedger:W,onViewBookings:F,refreshData:Q})]}),t.jsx(ob,{isOpen:g,onClose:()=>x(!1),onAdd:K}),t.jsx(ub,{isOpen:!!f,customer:f,onClose:()=>y(null),onUpdate:C}),t.jsx(db,{isOpen:!!v,customer:v,onClose:()=>S(null)}),t.jsx(pa,{toasts:H,onClose:E}),(k||N)&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{w(!1),z(!1)}})]})},Nx=()=>gx(),fb=({sales:l,searchTerm:r,dateFilter:c,loading:o,onEditSale:d,onDeleteSale:m,onViewDetails:p,onGenerateInvoice:g})=>{const[x,f]=h.useState(null),[y,v]=h.useState(1),S=10,k=h.useMemo(()=>pr(l,c).filter(M=>{if(!r)return!0;const I=r.toLowerCase();return M.orderId.toLowerCase().includes(I)||M.customerName.toLowerCase().includes(I)||M.items.some(X=>X.productName.toLowerCase().includes(I))}).sort((M,I)=>{const X=new Date(M.date).getTime(),P=new Date(I.date).getTime();return P!==X?P-X:new Date(I.createdAt).getTime()-new Date(M.createdAt).getTime()}),[l,c,r]),w=Math.ceil(k.length/S),N=h.useMemo(()=>{const L=(y-1)*S;return k.slice(L,L+S)},[k,y]);h.useMemo(()=>{v(1)},[r,c]);const z=L=>{f(L.id)},A=()=>{x&&(m(x),f(null))},T=()=>{f(null)},O=L=>{switch(L){case"paid":return"bg-green-500/20 text-green-400";case"partial":return"bg-blue-500/20 text-blue-400";case"pending":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return o?t.jsx("div",{className:"space-y-2",children:[...Array(5)].map((L,M)=>t.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[t.jsx(Dn,{className:"h-10 flex-1"}),t.jsx(Dn,{className:"h-10 w-24"}),t.jsx(Dn,{className:"h-10 w-24"}),t.jsx(Dn,{className:"h-10 w-20"})]},M))}):k.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-muted",children:"No sales found"})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"sm:hidden",children:t.jsx("div",{className:"space-y-3",children:N.map(L=>{const M=L.items.reduce((I,X)=>I+X.quantity,0);return t.jsxs("div",{className:"glass rounded-lg p-4 hover:bg-glass/50 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-sm",children:L.orderId}),t.jsx("p",{className:"text-xs text-muted mt-1",children:L.customerName})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-bold text-lg",children:ut(L.totalAmount)}),t.jsx("p",{className:"text-xs text-muted mt-1",children:Je(L.date)})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx(zn,{content:t.jsx(Mn,{items:L.items.map(I=>({productName:I.productName,quantity:I.quantity,price:I.price,total:I.total}))}),placement:"top",children:t.jsxs("span",{className:"cursor-help underline decoration-dotted text-sm",children:[M," ",M===1?"item":"items"]})}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O(L.paymentStatus)}`,children:L.paymentStatus})]}),t.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[p&&t.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>p(L),title:"View Details",children:t.jsx(yr,{size:16})}),t.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>d(L),title:"Edit Sale",children:t.jsx(Bt,{size:16})}),t.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 hover:text-red-400 transition-all duration-200",onClick:()=>z(L),title:"Delete Sale",children:t.jsx(Nt,{size:16,className:"text-red-400"})}),g&&t.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>g(L),title:"Generate Invoice",children:t.jsx(st,{size:16})})]})]},L.id)})})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/5",children:[t.jsx("th",{className:"text-left py-3 px-4",children:"Order ID"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Items"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Payment Status"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),t.jsx("tbody",{children:N.map(L=>{const M=L.items.reduce((I,X)=>I+X.quantity,0);return t.jsxs("tr",{className:"border-b border-white/5 hover:bg-glass/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4 font-medium",children:L.orderId}),t.jsx("td",{className:"py-3 px-4",children:L.customerName}),t.jsx("td",{className:"py-3 px-4",children:Je(L.date)}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(zn,{content:t.jsx(Mn,{items:L.items.map(I=>({productName:I.productName,quantity:I.quantity,price:I.price,total:I.total}))}),placement:"top",children:t.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[M," ",M===1?"item":"items"]})})}),t.jsx("td",{className:"py-3 px-4 font-semibold",children:ut(L.totalAmount)}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O(L.paymentStatus)}`,children:L.paymentStatus})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex gap-0.5 sm:gap-1",children:[p&&t.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>p(L),title:"View Details",children:t.jsx(yr,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>d(L),title:"Edit Sale",children:t.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 hover:text-red-400 transition-all duration-200",onClick:()=>z(L),title:"Delete Sale",children:t.jsx(Nt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})}),g&&t.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>g(L),title:"Generate Invoice",children:t.jsx(st,{size:14,className:"sm:w-4 sm:h-4"})})]})})]},L.id)})})]})}),w>1&&t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[t.jsxs("div",{className:"text-sm text-muted",children:["Showing ",(y-1)*S+1," to"," ",Math.min(y*S,k.length)," of"," ",k.length," entries"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>v(L=>Math.max(1,L-1)),disabled:y===1,children:[t.jsx(du,{size:16}),"Previous"]}),t.jsx("div",{className:"flex items-center gap-1",children:(()=>{const L=[];let I=Math.max(1,y-Math.floor(2.5)),X=Math.min(w,I+5-1);X-I<4&&(I=Math.max(1,X-5+1)),I>1&&(L.push(t.jsx("button",{onClick:()=>v(1),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:"1"},1)),I>2&&L.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"start-ellipsis")));for(let P=I;P<=X;P++)L.push(t.jsx("button",{onClick:()=>v(P),className:`px-3 py-1 rounded-lg text-sm ${P===y?"bg-white/20 text-white font-medium":"hover:bg-glass"}`,children:P},P));return X<w&&(X<w-1&&L.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"end-ellipsis")),L.push(t.jsx("button",{onClick:()=>v(w),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:w},w))),L})()}),t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>v(L=>Math.min(w,L+1)),disabled:y===w,children:["Next",t.jsx(Pl,{size:16})]})]})]}),t.jsx(Xt,{isOpen:!!x,onClose:T,onConfirm:A,title:"Delete Sale",message:"Are you sure you want to delete this sale? This will reverse all inventory bookings and customer balance changes.",confirmText:"Delete",type:"danger"})]})},hb=({isOpen:l,onClose:r,onAdd:c,products:o,customers:d})=>{const[m,p]=h.useState(new Date().toISOString().split("T")[0]),[g,x]=h.useState(""),[f,y]=h.useState([]),[v,S]=h.useState("pending"),[k,w]=h.useState([]),[N,z]=h.useState(!1);h.useEffect(()=>{l&&f.length===0&&A()},[l]);const A=()=>{y([...f,{productId:"",productName:"",quantity:0,unit:"",price:0,total:0}])},T=P=>{y(f.filter((B,q)=>q!==P))},O=(P,B,q)=>{const _=[...f],Y={..._[P]};if(B==="productId"){const Q=o.find(H=>H.id===q);Q&&(Y.productId=q,Y.productName=Q.name,Y.unit=Q.unit,Y.total=vr(Y.quantity,Y.price))}else B==="quantity"||B==="price"?(Y[B]=Number(q)||0,Y.total=vr(Y.quantity,Y.price)):Y[B]=q;_[P]=Y,y(_)},L=()=>f.reduce((P,B)=>P+B.total,0),M=async P=>{P.preventDefault(),w([]),z(!0);const B=[];if(g||B.push("Please select a customer"),m||B.push("Sale date is required"),f.length===0&&B.push("At least one product is required"),f.forEach((_,Y)=>{_.productId||B.push(`Please select a product for item ${Y+1}`),(!_.quantity||_.quantity<=0)&&B.push(`Please enter a valid quantity for item ${Y+1}`),(!_.price||_.price<=0)&&B.push(`Please enter a unit price for ${_.productName||`item ${Y+1}`}`)}),B.length>0){w(B),z(!1);return}const q=await c(g,new Date(m),f,v);q.success?I():w(q.errors||["Failed to add sale"]),z(!1)},I=()=>{p(new Date().toISOString().split("T")[0]),x(""),y([]),S("pending"),w([]),r()},X=o;return t.jsx(at,{isOpen:l,onClose:I,title:"Create New Sale",size:"lg",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:I,disabled:N,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:M,disabled:N||f.length===0,loading:N,loadingText:"Creating Sale...",children:"Create Sale"})]}),children:t.jsxs("form",{onSubmit:M,className:"space-y-4",children:[k.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:k.map((P,B)=>t.jsx("p",{className:"text-sm text-red-400",children:P},B))})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Sale Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"date",value:m,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsxs("select",{value:g,onChange:P=>x(P.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,autoFocus:!0,children:[t.jsx("option",{value:"",children:"Select a customer"}),d.sort((P,B)=>P.name.localeCompare(B.name)).map(P=>t.jsxs("option",{value:P.id,children:[P.name," - ",P.state]},P.id))]})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("label",{className:"text-sm font-medium",children:["Products ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs(fe,{type:"button",variant:"ghost",size:"sm",onClick:A,children:[t.jsx(Lt,{size:16}),"Add Product"]})]}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map((P,B)=>t.jsx("div",{className:"glass rounded-lg p-3",children:t.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[t.jsx("div",{className:"col-span-12 md:col-span-4",children:t.jsxs("select",{value:P.productId,onChange:q=>O(B,"productId",q.target.value),className:"w-full px-3 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select product"}),X.sort((q,_)=>q.name.localeCompare(_.name)).map(q=>{const _=q.quantityOnHand-(q.quantityBooked||0),Y=_<0?`⚠️ ${_}`:_===0?"📦 0":`✅ ${_}`;return t.jsxs("option",{value:q.id,children:[q.name," (",Y," ",q.unit,")"]},q.id)})]})}),t.jsx("div",{className:"col-span-4 md:col-span-2",children:t.jsx("input",{type:"number",value:P.quantity,onChange:q=>O(B,"quantity",q.target.value),onFocus:q=>q.target.select(),placeholder:"Qty",min:"1",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),t.jsx("div",{className:"col-span-4 md:col-span-2",children:t.jsx("input",{type:"number",value:P.price||"",onChange:q=>O(B,"price",q.target.value),placeholder:"Unit Price",min:"0.01",step:"0.01",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),t.jsx("div",{className:"col-span-3 md:col-span-3 flex items-center",children:t.jsx("span",{className:"text-sm font-medium",children:ut(P.total)})}),t.jsx("div",{className:"col-span-1 md:col-span-1 flex items-center justify-end",children:t.jsx(fe,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(B),disabled:f.length===1,children:t.jsx(Nt,{size:14,className:"text-red-400"})})})]})},B))}),f.length>0&&t.jsx("div",{className:"mt-4 p-3 glass rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Cr,{className:"text-green-400",size:20}),t.jsx("span",{className:"text-lg font-medium",children:"Grand Total:"})]}),t.jsx("span",{className:"text-2xl font-bold text-green-400",children:ut(L())})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Status"}),t.jsxs("select",{value:v,onChange:P=>S(P.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"partial",children:"Partial"}),t.jsx("option",{value:"paid",children:"Paid"})]})]})]})})},xb=({isOpen:l,sale:r,onClose:c,onUpdate:o,products:d})=>{const[m,p]=h.useState(""),[g,x]=h.useState([]),[f,y]=h.useState("pending"),[v,S]=h.useState([]),[k,w]=h.useState(!1);h.useEffect(()=>{l&&r&&(p(new Date(r.date).toISOString().split("T")[0]),x(r.items.map(I=>({...I}))),y(r.paymentStatus))},[l,r]);const N=()=>{x([...g,{productId:"",productName:"",quantity:1,unit:"",price:0,total:0}])},z=I=>{x(g.filter((X,P)=>P!==I))},A=(I,X,P)=>{const B=[...g],q={...B[I]};if(X==="productId"){const _=d.find(Y=>Y.id===P);_&&(q.productId=P,q.productName=_.name,q.unit=_.unit,q.price||(q.price=0),q.total=vr(q.quantity,q.price))}else X==="quantity"||X==="price"?(q[X]=Number(P)||0,q.total=vr(q.quantity,q.price)):q[X]=P;B[I]=q,x(B)},T=()=>g.reduce((I,X)=>I+X.total,0),O=async I=>{if(I.preventDefault(),!r)return;S([]),w(!0);const X=[];if(m||X.push("Sale date is required"),g.length===0&&X.push("At least one product is required"),g.forEach((B,q)=>{B.productId||X.push(`Please select a product for item ${q+1}`),(!B.quantity||B.quantity<=0)&&X.push(`Please enter a valid quantity for item ${q+1}`),(!B.price||B.price<=0)&&X.push(`Please enter a unit price for ${B.productName||`item ${q+1}`}`)}),X.length>0){S(X),w(!1);return}const P=await o(r.id,{date:new Date(m),items:g,paymentStatus:f,totalAmount:T()});P.success?L():S(P.errors||["Failed to update sale"]),w(!1)},L=()=>{p(""),x([]),y("pending"),S([]),c()},M=d;return r?t.jsx(at,{isOpen:l,onClose:L,title:"Edit Sale",size:"lg",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:L,disabled:k,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:O,disabled:k||g.length===0,loading:k,loadingText:"Updating Sale...",children:"Update Sale"})]}),children:t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[v.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:v.map((I,X)=>t.jsx("p",{className:"text-sm text-red-400",children:I},X))})]})}),t.jsx("div",{className:"p-3 glass rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(yv,{className:"text-muted-text",size:18}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted",children:"Order ID"}),t.jsx("p",{className:"font-medium",children:r.orderId})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted",children:"Customer"}),t.jsx("p",{className:"font-medium",children:r.customerName})]})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Sale Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"date",value:m,onChange:I=>p(I.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("label",{className:"text-sm font-medium",children:["Products ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs(fe,{type:"button",variant:"ghost",size:"sm",onClick:N,children:[t.jsx(Lt,{size:16}),"Add Product"]})]}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:g.map((I,X)=>t.jsx("div",{className:"glass rounded-lg p-3",children:t.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[t.jsx("div",{className:"col-span-4",children:t.jsxs("select",{value:I.productId,onChange:P=>A(X,"productId",P.target.value),className:"w-full px-3 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select product"}),M.map(P=>{const B=P.quantityOnHand-(P.quantityBooked||0),q=I.productId===P.id,_=B+(q?I.quantity:0),Y=_<0?`⚠️ ${_}`:_===0?"📦 0":`✅ ${_}`;return t.jsxs("option",{value:P.id,children:[P.name," (",Y," ",P.unit,")"]},P.id)})]})}),t.jsx("div",{className:"col-span-2",children:t.jsx("input",{type:"number",value:I.quantity,onChange:P=>A(X,"quantity",P.target.value),placeholder:"Qty",min:"1",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),t.jsx("div",{className:"col-span-2",children:t.jsx("input",{type:"number",value:I.price||"",onChange:P=>A(X,"price",P.target.value),placeholder:"Unit Price",min:"0.01",step:"0.01",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),t.jsx("div",{className:"col-span-3 flex items-center",children:t.jsx("span",{className:"text-sm font-medium",children:ut(I.total)})}),t.jsx("div",{className:"col-span-1 flex items-center justify-end",children:t.jsx(fe,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(X),disabled:g.length===1,children:t.jsx(Nt,{size:14,className:"text-red-400"})})})]})},X))}),g.length>0&&t.jsx("div",{className:"mt-4 p-3 glass rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Cr,{className:"text-green-400",size:20}),t.jsx("span",{className:"text-lg font-medium",children:"Grand Total:"})]}),t.jsx("span",{className:"text-2xl font-bold text-green-400",children:ut(T())})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Status"}),t.jsxs("select",{value:f,onChange:I=>y(I.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"partial",children:"Partial"}),t.jsx("option",{value:"paid",children:"Paid"})]})]}),t.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:t.jsx("p",{className:"text-sm text-yellow-300",children:"Editing this sale will adjust inventory bookings and customer balance based on the changes made."})})]})}):null},pb=()=>{const{bookedStock:l}=gu(),[r,c]=h.useState(null),o=l.filter(f=>["pending","confirmed","partial-loaded"].includes(f.status)),d=o.reduce((f,y)=>(f[y.customerId]||(f[y.customerId]={customerName:y.customerName,bookings:[],totalQuantity:0,productTypes:new Set}),f[y.customerId].bookings.push(y),f[y.customerId].totalQuantity+=y.quantity-y.quantityLoaded,f[y.customerId].productTypes.add(y.productName),f),{}),m=o.length,p=Object.keys(d).length,g=o.reduce((f,y)=>f+(y.quantity-y.quantityLoaded),0),x=f=>{switch(f){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}};return o.length===0?t.jsxs(Te,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Booked Stock Summary"}),t.jsx(gt,{className:"text-blue-400",size:24})]}),t.jsxs("div",{className:"text-center py-8",children:[t.jsx(it,{className:"mx-auto mb-3 text-muted",size:48}),t.jsx("p",{className:"text-muted",children:"No active bookings at the moment"})]})]}):t.jsxs(Te,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Booked Stock Summary"}),t.jsx(gt,{className:"text-blue-400",size:24})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"glass rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[t.jsx(js,{size:16}),"Customers with Bookings"]}),t.jsx("p",{className:"text-2xl font-bold",children:p})]}),t.jsxs("div",{className:"glass rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[t.jsx(gt,{size:16}),"Active Bookings"]}),t.jsx("p",{className:"text-2xl font-bold",children:m})]}),t.jsxs("div",{className:"glass rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[t.jsx(is,{size:16}),"Total Quantity Booked"]}),t.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:g})]})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(d).map(([f,y])=>t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start cursor-pointer",onClick:()=>c(r===f?null:f),children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(js,{className:"text-blue-400",size:18}),t.jsx("h3",{className:"font-semibold text-lg",children:y.customerName})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Products: "}),t.jsx("span",{className:"font-medium",children:y.productTypes.size})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Bookings: "}),t.jsx("span",{className:"font-medium",children:y.bookings.length})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted",children:"Total Quantity: "}),t.jsxs("span",{className:"font-medium text-yellow-400",children:[y.totalQuantity," units"]})]})]})]}),t.jsx("div",{className:"text-sm text-muted",children:r===f?"▲":"▼"})]}),r===f&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800/50 space-y-2",children:y.bookings.map(v=>t.jsxs("div",{className:"flex justify-between items-center py-2 px-3 glass rounded",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-medium",children:v.productName}),t.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${x(v.status)}`,children:v.status.replace("-"," ")})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted",children:[t.jsxs("span",{children:["Order: ",v.orderId]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bt,{className:"text-gray-400",size:12}),Je(v.bookingDate)]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-medium",children:[v.quantity-v.quantityLoaded," ",v.unit]}),v.quantityLoaded>0&&t.jsxs("p",{className:"text-xs text-muted",children:[v.quantityLoaded," loaded"]})]})]},v.id))})]},f))})]})},gb=()=>{const[l,r]=h.useState(""),[c,o]=h.useState("all"),[d,m]=h.useState(!1),[p,g]=h.useState(null),[x,f]=h.useState(!1),[y,v]=h.useState(!1),{sales:S,loading:k,syncInProgress:w,pendingChanges:N,addSale:z,updateSale:A,deleteSale:T,getProducts:O,getCustomers:L,forceSync:M}=Nx(),{toasts:I,showSuccess:X,showError:P,removeToast:B}=ga(),q=Aj(S),_=async(b,E,U,K)=>{const C=U.map(W=>({productId:W.productId,productName:W.productName,quantity:W.quantity,unit:W.unit||"unit",price:W.price||W.unitPrice||0,total:W.total||W.quantity*(W.price||W.unitPrice||0)})),$=await z(b,C,E,K);return $.success&&(X("Sale created successfully"),m(!1)),$},Y=async(b,E)=>{const U=await A(b,E);return U.success&&(X("Sale updated successfully"),g(null)),U},Q=async b=>{const E=S.find(K=>K.id===b);(await T(b)).success?X(`Sale ${E?.orderId} deleted`):P("Failed to delete sale")},H=()=>{Tj(S),X("Sales exported to JSON"),f(!1)},V=()=>{Ej(S),X("Sales exported to CSV"),f(!1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Sales"}),t.jsx("p",{className:"text-muted",children:"Track and manage your sales transactions"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:b=>{b.stopPropagation(),v(!y)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),y&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[N>0&&!w&&t.jsxs("button",{onClick:b=>{b.stopPropagation(),M(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",N,")"]}),t.jsxs("button",{onClick:b=>{b.stopPropagation(),H(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:b=>{b.stopPropagation(),V(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[w&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),N>0&&!w&&t.jsxs(fe,{variant:"ghost",onClick:M,children:[t.jsx(Fe,{size:16}),"Sync (",N,")"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>f(!x),children:[t.jsx(Dt,{size:20}),"Export"]}),x&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[t.jsxs("button",{onClick:H,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:V,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]})]})]})]}),t.jsxs("button",{onClick:()=>m(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"New Sale",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"New Sale"})]})]})]}),k?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading sales data..."})]})})}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Today's Sales"}),t.jsx("p",{className:"text-2xl font-bold",children:ut(q.todaysTotal)})]}),t.jsx(is,{className:"text-green-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"This Week"}),t.jsx("p",{className:"text-2xl font-bold",children:ut(q.weekTotal)})]}),t.jsx(bt,{className:"text-blue-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"This Month"}),t.jsx("p",{className:"text-2xl font-bold",children:ut(q.monthTotal)})]}),t.jsx(bt,{className:"text-purple-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Pending Payment"}),t.jsx("p",{className:"text-2xl font-bold",children:ut(q.pendingPaymentTotal)})]}),t.jsx(gs,{className:"text-yellow-400",size:24})]})})]}),t.jsx(pb,{}),t.jsxs(Te,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search by order ID or customer...",value:l,onChange:b=>r(b.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:c,onChange:b=>o(b.target.value),children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"})]})]}),k?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsx(fb,{sales:S,searchTerm:l,dateFilter:c,loading:!1,onEditSale:g,onDeleteSale:Q})]}),t.jsx(hb,{isOpen:d,onClose:()=>m(!1),onAdd:_,products:O(),customers:L()}),t.jsx(xb,{isOpen:!!p,sale:p,onClose:()=>g(null),onUpdate:Y,products:O()}),t.jsx(pa,{toasts:I,onClose:B}),(x||y)&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{f(!1),v(!1)}})]})},wx=({currentPage:l,totalPages:r,itemsPerPage:c,totalItems:o,onPageChange:d})=>{if(r<=1)return null;const m=(l-1)*c+1,p=Math.min(l*c,o),g=()=>{const x=[];let y=Math.max(1,l-Math.floor(2.5)),v=Math.min(r,y+5-1);v-y<4&&(y=Math.max(1,v-5+1)),y>1&&(x.push(t.jsx("button",{onClick:()=>d(1),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:"1"},1)),y>2&&x.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"start-ellipsis")));for(let S=y;S<=v;S++)x.push(t.jsx("button",{onClick:()=>d(S),className:`px-3 py-1 rounded-lg text-sm ${S===l?"bg-white/20 text-white font-medium":"hover:bg-glass"}`,children:S},S));return v<r&&(v<r-1&&x.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"end-ellipsis")),x.push(t.jsx("button",{onClick:()=>d(r),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:r},r))),x};return t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[t.jsxs("div",{className:"text-sm text-muted",children:["Showing ",m," to ",p," of ",o," entries"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>d(Math.max(1,l-1)),disabled:l===1,children:[t.jsx(du,{size:16}),"Previous"]}),t.jsx("div",{className:"flex items-center gap-1",children:g()}),t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>d(Math.min(r,l+1)),disabled:l===r,children:["Next",t.jsx(Pl,{size:16})]})]})]})},yb=()=>yx(),Uh=l=>{const r=new Date(l),c=String(r.getDate()).padStart(2,"0"),o=String(r.getMonth()+1).padStart(2,"0"),d=r.getFullYear();return`${c}/${o}/${d}`},vb=({loadings:l,searchTerm:r,dateFilter:c,onEditLoading:o,onDeleteLoading:d})=>{const[m,p]=h.useState("date"),[g,x]=h.useState("desc"),[f,y]=h.useState({show:!1,loading:null}),[v,S]=h.useState(null),k=O=>{m===O?x(g==="asc"?"desc":"asc"):(p(O),x("asc"))},w=h.useMemo(()=>{let O=[...l];if(r){const L=r.toLowerCase();O=O.filter(M=>M.loadingId.toLowerCase().includes(L)||M.customerName.toLowerCase().includes(L)||M.truckPlateNumber.toLowerCase().includes(L)||M.wayBillNumber&&M.wayBillNumber.toLowerCase().includes(L))}if(c&&c!=="all"){const L=new Date;L.setHours(0,0,0,0),O=O.filter(M=>{const I=new Date(M.date);switch(I.setHours(0,0,0,0),c){case"today":return I.getTime()===L.getTime();case"week":const X=new Date(L);return X.setDate(X.getDate()-7),I>=X;case"month":const P=new Date(L);return P.setMonth(P.getMonth()-1),I>=P;default:return!0}})}return O.sort((L,M)=>{let I=0;switch(m){case"date":const X=new Date(L.date).getTime(),P=new Date(M.date).getTime();if(I=X-P,I===0){const B=new Date(L.createdAt).getTime(),q=new Date(M.createdAt).getTime();I=B-q}break;case"customer":I=L.customerName.localeCompare(M.customerName);break;case"totalValue":I=L.totalValue-M.totalValue;break}return g==="asc"?I:-I}),O},[l,r,c,m,g]),N=O=>{y({show:!0,loading:O})},z=()=>{f.loading&&(d(f.loading.id),y({show:!1,loading:null}))},A=O=>{S(v===O?null:O)},T=({field:O})=>m!==O?null:g==="asc"?t.jsx(Zl,{size:14}):t.jsx(Ra,{size:14});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"block md:hidden space-y-4",children:w.map(O=>t.jsxs("div",{className:"glass rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:O.loadingId}),t.jsxs("p",{className:"text-sm text-muted flex items-center gap-1 mt-1",children:[t.jsx(bt,{className:"text-gray-400",size:14}),Uh(O.date)]})]}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-lg font-bold text-green-400",children:ut(O.totalValue)})})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(_t,{size:14,className:"text-muted"}),t.jsx("span",{children:O.customerName})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(qt,{size:14,className:"text-muted"}),t.jsx("span",{children:O.truckPlateNumber})]}),O.wayBillNumber&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(st,{size:14,className:"text-muted"}),t.jsx("span",{children:O.wayBillNumber})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(gt,{size:14,className:"text-muted"}),t.jsx(zn,{content:t.jsx(Mn,{items:O.items.map(L=>({productName:L.productName,quantity:L.quantity,price:L.unitPrice,total:L.quantity*L.unitPrice}))}),placement:"top",children:t.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[O.items.length," ",O.items.length===1?"item":"items"]})})]})]}),t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>A(O.id),className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1 mb-2",children:[t.jsx(yr,{size:14}),v===O.id?"Hide":"View"," Items"]}),v===O.id&&t.jsx("div",{className:"mt-2 space-y-1 text-sm glass rounded p-2",children:O.items.map((L,M)=>t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:L.productName}),t.jsxs("span",{className:"text-muted",children:[L.quantity," ",L.unit," @ ",ut(L.unitPrice)]})]},M))})]}),t.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-800/50",children:[t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>o(O),className:"flex-1",children:[t.jsx(Bt,{size:16}),"Edit"]}),t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>N(O),className:"flex-1 text-red-400 hover:text-red-300",children:[t.jsx(Nt,{size:16}),"Delete"]})]})]},O.id))}),t.jsxs("div",{className:"hidden md:block overflow-x-auto",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-800/50",children:[t.jsx("th",{className:"text-left py-3 px-4",children:"Loading ID"}),t.jsx("th",{className:"text-left py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>k("date"),children:t.jsxs("div",{className:"flex items-center gap-1",children:["Date",t.jsx(T,{field:"date"})]})}),t.jsx("th",{className:"text-left py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>k("customer"),children:t.jsxs("div",{className:"flex items-center gap-1",children:["Customer",t.jsx(T,{field:"customer"})]})}),t.jsx("th",{className:"text-left py-3 px-4",children:"Truck"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Way Bill"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Products"}),t.jsx("th",{className:"text-right py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>k("totalValue"),children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Value",t.jsx(T,{field:"totalValue"})]})}),t.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),t.jsx("tbody",{children:w.map(O=>t.jsxs("tr",{className:"border-b border-gray-800/30 hover:bg-glass",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"font-medium",children:O.loadingId})}),t.jsx("td",{className:"py-3 px-4",children:Uh(O.date)}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_t,{size:16,className:"text-muted"}),O.customerName]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{size:16,className:"text-muted"}),O.truckPlateNumber]})}),t.jsx("td",{className:"py-3 px-4",children:O.wayBillNumber||"-"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(zn,{content:t.jsx(Mn,{items:O.items.map(L=>({productName:L.productName,quantity:L.quantity,price:L.unitPrice,total:L.quantity*L.unitPrice}))}),placement:"top",children:t.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[O.items.length," ",O.items.length===1?"item":"items"]})})}),t.jsx("td",{className:"py-3 px-4 text-right",children:t.jsx("span",{className:"font-semibold text-green-400",children:ut(O.totalValue)})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>o(O),className:"p-1.5 rounded hover:bg-glass transition-colors",title:"Edit",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>N(O),className:"p-1.5 rounded hover:bg-glass transition-colors text-red-400",title:"Delete",children:t.jsx(Nt,{size:16})})]})})]},O.id))})]}),w.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(qt,{className:"mx-auto mb-4 text-muted",size:48}),t.jsx("p",{className:"text-muted",children:"No loadings found"})]})]}),t.jsx(Xt,{isOpen:f.show,onClose:()=>y({show:!1,loading:null}),onConfirm:z,title:"Delete Loading",message:t.jsxs("div",{children:[t.jsxs("p",{children:["Are you sure you want to delete loading ",t.jsx("strong",{children:f.loading?.loadingId}),"?"]}),t.jsx("p",{className:"mt-2 text-sm text-muted",children:"This will restore the booked stock quantities and inventory levels."})]}),confirmText:"Delete",type:"danger"})]})},da=l=>l?l.replace(/\u00A0/g," ").replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\u2000-\u200A\u202F\u205F]/g," ").replace(/[\u2013\u2014]/g,"-").replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\s+/g," ").trim():"",Hl=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(l),jb=l=>{const r=JSON.stringify(l,null,2),c="data:application/json;charset=utf-8,"+encodeURIComponent(r),o=`loadings_${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",o),d.click()},bb=l=>{const r=["Loading ID","Date","Customer Name","Truck Plate Number","Way Bill Number","Products","Total Quantity","Total Value","Created At"],c=l.map(g=>{const x=g.items.map(y=>`${y.productName} (${y.quantity} ${y.unit} @ ${Hl(y.unitPrice)})`).join("; "),f=g.items.reduce((y,v)=>y+v.quantity,0);return[g.loadingId,g.date,g.customerName,g.truckPlateNumber,g.wayBillNumber||"",x,f.toString(),g.totalValue.toFixed(2),g.createdAt]}),o=[r.join(","),...c.map(g=>g.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([o],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),p=URL.createObjectURL(d);m.setAttribute("href",p),m.setAttribute("download",`loadings_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Nb=async l=>new Promise((r,c)=>{const o=new FileReader;o.onload=d=>{try{const m=d.target?.result,p=JSON.parse(m);if(!Array.isArray(p))throw new Error("Invalid file format: expected an array of loadings");const g=p.filter(x=>x.loadingId&&x.date&&x.customerId&&x.customerName&&x.truckPlateNumber&&Array.isArray(x.items));r(g)}catch{c(new Error("Failed to parse JSON file"))}},o.onerror=()=>{c(new Error("Failed to read file"))},o.readAsText(l)}),wb=l=>{const r=new Date;r.setHours(0,0,0,0);const c=l.filter(g=>{const x=new Date(g.date);return x.setHours(0,0,0,0),x.getTime()===r.getTime()}),o=new Date(r);o.setDate(o.getDate()-7);const d=l.filter(g=>{const x=new Date(g.date);return x.setHours(0,0,0,0),x>=o}),m=new Date(r);m.setMonth(m.getMonth()-1);const p=l.filter(g=>{const x=new Date(g.date);return x.setHours(0,0,0,0),x>=m});return{todaysCount:c.length,todaysValue:c.reduce((g,x)=>g+x.totalValue,0),weekCount:d.length,weekValue:d.reduce((g,x)=>g+x.totalValue,0),monthCount:p.length,monthValue:p.reduce((g,x)=>g+x.totalValue,0),totalCount:l.length,totalValue:l.reduce((g,x)=>g+x.totalValue,0)}},Sb=({isOpen:l,onClose:r,onAdd:c,customersWithBookings:o,getCustomerBookedProducts:d})=>{const[m,p]=h.useState(new Date().toISOString().split("T")[0]),[g,x]=h.useState(""),[f,y]=h.useState(""),[v,S]=h.useState(""),[k,w]=h.useState([]),[N,z]=h.useState([]),[A,T]=h.useState(!1),[O,L]=h.useState([]);h.useEffect(()=>{l&&(p(new Date().toISOString().split("T")[0]),x(""),y(""),S(""),w([]),z([]),L([]))},[l]),h.useEffect(()=>{if(g){const B=d(g);L(B);const q=B.map(_=>({productId:_.productId,productName:_.productName,quantity:0,unit:_.unit,unitPrice:_.unitPrice,bookedStockId:_.id,maxQuantity:_.availableQuantity}));w(q)}else L([]),w([])},[g,d]);const M=(B,q,_)=>{const Y=[...k],Q={...Y[B]};{const H=Number(_)||0;Q.quantity=Math.min(H,Q.maxQuantity)}Y[B]=Q,w(Y)},I=()=>k.reduce((B,q)=>B+q.quantity*q.unitPrice,0),X=()=>{const B=[];return m||B.push("Date is required"),g||B.push("Customer is required"),f.trim()||B.push("Truck plate number is required"),k.some(_=>_.quantity>0&&_.unitPrice>0)||B.push("At least one product must have quantity and price"),k.forEach(_=>{_.quantity>_.maxQuantity&&B.push(`${_.productName}: Quantity exceeds available (${_.maxQuantity} ${_.unit})`)}),z(B),B.length===0},P=async()=>{if(X()){T(!0),z([]);try{const B=k.filter(_=>_.quantity>0&&_.unitPrice>0),q=await c(m,g,da(f),da(v)||void 0,B);q.success?r():z([q.error||"Failed to create loading"])}catch(B){z([B.message||"An error occurred"])}finally{T(!1)}}};return t.jsx(at,{isOpen:l,onClose:r,title:"New Loading",size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[N.length>0&&t.jsx("div",{className:"glass rounded-lg p-4 border border-red-500/20 bg-red-500/10",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:20}),t.jsx("div",{className:"space-y-1",children:N.map((B,q)=>t.jsx("p",{className:"text-sm text-red-400",children:B},q))})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(bt,{className:"inline mr-2 text-white",size:16}),"Date"]}),t.jsx("input",{type:"date",value:m,onChange:B=>p(B.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(_t,{className:"inline mr-2",size:16}),"Customer"]}),t.jsxs("select",{value:g,onChange:B=>x(B.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",autoFocus:!0,children:[t.jsx("option",{value:"",children:"Select customer with bookings"}),o.map(B=>t.jsx("option",{value:B.id,children:B.name},B.id))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(qt,{className:"inline mr-2",size:16}),"Truck Plate Number *"]}),t.jsx("input",{type:"text",value:f,onChange:B=>y(da(B.target.value)),placeholder:"e.g., ABC-123",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(st,{className:"inline mr-2",size:16}),"Way Bill Number (Optional)"]}),t.jsx("input",{type:"text",value:v,onChange:B=>S(da(B.target.value)),placeholder:"e.g., WB-2024-001",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),g&&k.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[t.jsx(gt,{size:20}),"Booked Products"]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:k.map((B,q)=>{const _=O[q];return t.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:B.productName}),t.jsxs("p",{className:"text-sm text-muted",children:["Order: ",_?.orderId," | Available: ",B.maxQuantity," ",B.unit]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Loading Quantity"}),t.jsx("input",{type:"number",min:"0",max:B.maxQuantity,value:B.quantity,onChange:Y=>M(q,"quantity",Y.target.value),className:"w-full p-2 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:`Max: ${B.maxQuantity}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Unit Price"}),t.jsx("div",{className:"p-2 glass rounded bg-gray-800/50 text-gray-300",children:ut(B.unitPrice)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Total"}),t.jsx("div",{className:"p-2 glass rounded text-right font-medium",children:ut(B.quantity*B.unitPrice)})]})]})]},q)})})]}),k.length>0&&t.jsx("div",{className:"glass rounded-lg p-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-semibold",children:"Total Value:"}),t.jsx("span",{className:"text-2xl font-bold text-green-400",children:ut(I())})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800/50",children:[t.jsx(fe,{variant:"ghost",onClick:r,disabled:A,children:"Cancel"}),t.jsxs(fe,{variant:"primary",onClick:P,loading:A,loadingText:"Creating Loading...",disabled:!g||k.length===0,children:[t.jsx(Lt,{size:20}),"Add Loading"]})]})]})})},Cb=({isOpen:l,loading:r,onClose:c,onUpdate:o,customersWithBookings:d,getCustomerBookedProducts:m})=>{const[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState(""),[S,k]=h.useState(""),[w,N]=h.useState([]),[z,A]=h.useState([]),[T,O]=h.useState(!1),[L,M]=h.useState([]);h.useEffect(()=>{if(r&&l){g(r.date),f(r.customerId),v(r.truckPlateNumber),k(r.wayBillNumber||""),N(r.items),A([]);const _=m(r.customerId).map(Y=>{const Q=r.items.find(H=>H.bookedStockId===Y.id);return Q?{...Y,availableQuantity:Y.availableQuantity+Q.quantity}:Y});M(_)}},[r,l,m]);const I=(q,_,Y)=>{const Q=[...w],H={...Q[q]};{const V=Number(Y)||0,b=L.find(U=>U.id===H.bookedStockId),E=b?b.availableQuantity:999999;H.quantity=Math.min(V,E)}Q[q]=H,N(Q)},X=()=>w.reduce((q,_)=>q+_.quantity*_.unitPrice,0),P=()=>{const q=[];return p||q.push("Date is required"),x||q.push("Customer is required"),y.trim()||q.push("Truck plate number is required"),w.some(Y=>Y.quantity>0&&Y.unitPrice>0)||q.push("At least one product must have quantity and price"),w.forEach(Y=>{const Q=L.find(H=>H.id===Y.bookedStockId);Q&&Y.quantity>Q.availableQuantity&&q.push(`${Y.productName}: Quantity exceeds available (${Q.availableQuantity} ${Y.unit})`)}),A(q),q.length===0},B=async()=>{if(!(!P()||!r)){O(!0),A([]);try{const q=w.filter(Y=>Y.quantity>0&&Y.unitPrice>0),_=await o(r.id,{date:p,customerId:x,customerName:d.find(Y=>Y.id===x)?.name||r.customerName,truckPlateNumber:da(y),wayBillNumber:da(S)||void 0,items:q,totalValue:X()});_.success?c():A([_.error||"Failed to update loading"])}catch(q){A([q.message||"An error occurred"])}finally{O(!1)}}};return r?t.jsx(at,{isOpen:l,onClose:c,title:`Edit Loading - ${r.loadingId}`,size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[z.length>0&&t.jsx("div",{className:"glass rounded-lg p-4 border border-red-500/20 bg-red-500/10",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:20}),t.jsx("div",{className:"space-y-1",children:z.map((q,_)=>t.jsx("p",{className:"text-sm text-red-400",children:q},_))})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(bt,{className:"inline mr-2 text-white",size:16}),"Date"]}),t.jsx("input",{type:"date",value:p,onChange:q=>g(q.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(_t,{className:"inline mr-2",size:16}),"Customer"]}),t.jsxs("select",{value:x,onChange:q=>f(q.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:!0,children:[t.jsx("option",{value:"",children:"Select customer"}),d.map(q=>t.jsx("option",{value:q.id,children:q.name},q.id))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(qt,{className:"inline mr-2",size:16}),"Truck Plate Number *"]}),t.jsx("input",{type:"text",value:y,onChange:q=>v(da(q.target.value)),placeholder:"e.g., ABC-123",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(st,{className:"inline mr-2",size:16}),"Way Bill Number (Optional)"]}),t.jsx("input",{type:"text",value:S,onChange:q=>k(da(q.target.value)),placeholder:"e.g., WB-2024-001",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),w.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[t.jsx(gt,{size:20}),"Loaded Products"]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:w.map((q,_)=>{const Y=L.find(H=>H.id===q.bookedStockId),Q=Y?Y.availableQuantity:q.quantity;return t.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:q.productName}),t.jsxs("p",{className:"text-sm text-muted",children:["Available: ",Q," ",q.unit]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Loading Quantity"}),t.jsx("input",{type:"number",min:"0",max:Q,value:q.quantity,onChange:H=>I(_,"quantity",H.target.value),className:"w-full p-2 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:`Max: ${Q}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Unit Price"}),t.jsx("div",{className:"p-2 glass rounded bg-gray-800/50 text-gray-300",children:ut(q.unitPrice)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-muted mb-1",children:"Total"}),t.jsx("div",{className:"p-2 glass rounded text-right font-medium",children:ut(q.quantity*q.unitPrice)})]})]})]},_)})})]}),w.length>0&&t.jsx("div",{className:"glass rounded-lg p-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-semibold",children:"Total Value:"}),t.jsx("span",{className:"text-2xl font-bold text-green-400",children:ut(X())})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800/50",children:[t.jsx(fe,{variant:"ghost",onClick:c,disabled:T,children:"Cancel"}),t.jsxs(fe,{variant:"primary",onClick:B,loading:T,loadingText:"Updating Loading...",children:[t.jsx(dx,{size:20}),"Update Loading"]})]})]})}):null},kb=()=>{const[l,r]=h.useState(""),[c,o]=h.useState("all"),[d,m]=h.useState(!1),[p,g]=h.useState(null),[x,f]=h.useState(!1),[y,v]=h.useState(!1),[S,k]=h.useState(1),w=15,{loadings:N,loading:z,syncInProgress:A,pendingChanges:T,addLoading:O,updateLoading:L,deleteLoading:M,getCustomersWithBookedStock:I,getCustomerBookedProducts:X,forceSync:P,fixDuplicateIds:B,fixOrphanedBookedStock:q}=yb(),{toasts:_,showSuccess:Y,showError:Q,removeToast:H}=ga(),V=wb(N),b=h.useMemo(()=>{let le=[...N];if(l){const ge=l.toLowerCase();le=le.filter(be=>be.loadingId.toLowerCase().includes(ge)||be.customerName.toLowerCase().includes(ge)||be.truckPlateNumber.toLowerCase().includes(ge)||be.wayBillNumber&&be.wayBillNumber.toLowerCase().includes(ge))}const te=new Date,pe=new Date(te.setHours(0,0,0,0)),oe=new Date(te.setDate(te.getDate()-te.getDay())),ye=new Date(te.getFullYear(),te.getMonth(),1);return c==="today"?le=le.filter(ge=>new Date(ge.date)>=pe):c==="week"?le=le.filter(ge=>new Date(ge.date)>=oe):c==="month"&&(le=le.filter(ge=>new Date(ge.date)>=ye)),le.sort((ge,be)=>new Date(be.date).getTime()-new Date(ge.date).getTime()),le},[N,l,c]),E=h.useMemo(()=>{const le=(S-1)*w,te=le+w;return b.slice(le,te)},[b,S]),U=Math.ceil(b.length/w);h.useMemo(()=>{k(1)},[l,c]);const K=(le,te,pe,oe,ye)=>{const ge=ye.map(Ce=>({productId:Ce.productId,productName:Ce.productName,quantity:Ce.quantity,unit:Ce.unit||"unit",unitPrice:Ce.unitPrice||0,bookedStockId:Ce.bookedStockId||"",saleId:Ce.saleId,orderId:Ce.orderId})),be=O(te,ge,pe,"",oe,le);return be.success&&(Y("Loading created successfully"),m(!1)),be},C=(le,te)=>{const pe=L(le,te);return pe.success&&(Y("Loading updated successfully"),g(null)),pe},$=le=>{const te=N.find(oe=>oe.id===le);M(le).success?Y(`Loading ${te?.loadingId} deleted`):Q("Failed to delete loading")},W=()=>{jb(N),Y("Loadings exported to JSON"),f(!1)},F=()=>{bb(N),Y("Loadings exported to CSV"),f(!1)},ie=async le=>{const te=le.target.files?.[0];if(te){try{const pe=await Nb(te);Y(`Imported ${pe.length} loadings`)}catch(pe){Q(pe.message||"Failed to import loadings")}le.target.value="",f(!1)}},re=async()=>{const le=await B();Y(le?"Duplicate loading IDs have been fixed":"No duplicate loading IDs found")},ne=async()=>{try{const le=await q();le.fixed>0?(Y(`Fixed ${le.fixed} orphaned booked stock entries`),console.log("Orphaned stock fix details:",le.details)):Y("No orphaned booked stock found")}catch(le){Q("Failed to fix orphaned booked stock"),console.error("Error fixing orphaned stock:",le)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Loadings"}),t.jsx("p",{className:"text-muted",children:"Track and manage loading operations"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:le=>{le.stopPropagation(),v(!y)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),y&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[T>0&&!A&&t.jsxs("button",{onClick:le=>{le.stopPropagation(),P(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",T,")"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),W(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),F(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),t.jsx("span",{className:"text-sm",children:"Import from JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:le=>{ie(le),v(!1)},className:"hidden"})]}),t.jsxs("div",{className:"border-t border-gray-800/50",children:[t.jsxs("button",{onClick:le=>{le.stopPropagation(),re(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2 text-yellow-400",children:[t.jsx(mr,{size:16}),"Fix Duplicate IDs"]}),t.jsxs("button",{onClick:le=>{le.stopPropagation(),ne(),v(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2 text-orange-400",children:[t.jsx(mr,{size:16}),"Fix Orphaned Stock"]})]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[A&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),T>0&&!A&&t.jsxs(fe,{variant:"ghost",onClick:P,children:[t.jsx(Fe,{size:16}),"Sync (",T,")"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>f(!x),children:[t.jsx(Dt,{size:20}),"Import/Export"]}),x&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[t.jsxs("button",{onClick:W,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:F,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),"Import from JSON",t.jsx("input",{type:"file",accept:".json",onChange:ie,className:"hidden"})]}),t.jsxs("div",{className:"border-t border-gray-800/50",children:[t.jsxs("button",{onClick:re,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2 text-yellow-400",children:[t.jsx(mr,{size:16}),"Fix Duplicate IDs"]}),t.jsxs("button",{onClick:ne,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2 text-orange-400",children:[t.jsx(mr,{size:16}),"Fix Orphaned Stock"]})]})]})]})]}),t.jsxs("button",{onClick:()=>m(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"New Loading",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"New Loading"})]})]})]}),z?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading data..."})]})})}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Today's Loadings"}),t.jsx("p",{className:"text-2xl font-bold",children:V.todaysCount}),t.jsx("p",{className:"text-sm text-green-400",children:Hl(V.todaysValue)})]}),t.jsx(qt,{className:"text-blue-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"This Week"}),t.jsx("p",{className:"text-2xl font-bold",children:V.weekCount}),t.jsx("p",{className:"text-sm text-green-400",children:Hl(V.weekValue)})]}),t.jsx(bt,{className:"text-purple-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"This Month"}),t.jsx("p",{className:"text-2xl font-bold",children:V.monthCount}),t.jsx("p",{className:"text-sm text-green-400",children:Hl(V.monthValue)})]}),t.jsx(is,{className:"text-yellow-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Value"}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:Hl(V.totalValue)}),t.jsxs("p",{className:"text-sm text-muted",children:[V.totalCount," loadings"]})]}),t.jsx(gs,{className:"text-green-400",size:24})]})})]}),t.jsxs(Te,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search by loading ID, customer, truck, or way bill...",value:l,onChange:le=>r(le.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:c,onChange:le=>o(le.target.value),children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"})]})]}),z?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsxs(t.Fragment,{children:[t.jsx(vb,{loadings:E,searchTerm:"",dateFilter:"all",onEditLoading:g,onDeleteLoading:$}),t.jsx(wx,{currentPage:S,totalPages:U,itemsPerPage:w,totalItems:b.length,onPageChange:k})]})]}),t.jsx(Sb,{isOpen:d,onClose:()=>m(!1),onAdd:K,customersWithBookings:I(),getCustomerBookedProducts:X}),t.jsx(Cb,{isOpen:!!p,loading:p,onClose:()=>g(null),onUpdate:C,customersWithBookings:I(),getCustomerBookedProducts:X}),t.jsx(pa,{toasts:_,onClose:H}),(x||y)&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{f(!1),v(!1)}})]})},Db=({customerId:l,ledgerEntries:r,customers:c,searchTerm:o,transactionFilter:d,dateFrom:m,dateTo:p,currentPage:g,itemsPerPage:x})=>{const f=l?c.find(N=>N.id===l):null,y=h.useMemo(()=>l?r.filter(N=>N.customerId===l).sort((N,z)=>{const A=new Date(N.date).getTime(),T=new Date(z.date).getTime();return T!==A?T-A:new Date(z.createdAt).getTime()-new Date(N.createdAt).getTime()}):r.sort((N,z)=>{const A=new Date(N.date).getTime(),T=new Date(z.date).getTime();return T!==A?T-A:new Date(z.createdAt).getTime()-new Date(N.createdAt).getTime()}),[l,r]),v=h.useMemo(()=>{let N=[...y];if(o){const z=o.toLowerCase();N=N.filter(A=>A.customerName.toLowerCase().includes(z)||A.description.toLowerCase().includes(z)||A.referenceNumber?.toLowerCase().includes(z)||A.notes?.toLowerCase().includes(z))}if(d!=="all"&&(N=N.filter(z=>z.transactionType===d)),m){const z=new Date(m);N=N.filter(A=>new Date(A.date)>=z)}if(p){const z=new Date(p);z.setHours(23,59,59,999),N=N.filter(A=>new Date(A.date)<=z)}return N},[y,o,d,m,p]),S=Math.ceil(v.length/x),k=h.useMemo(()=>{const N=(g-1)*x;return v.slice(N,N+x)},[v,g,x]),w=h.useMemo(()=>{const N=k.reduce((L,M)=>L+M.debit,0),z=k.reduce((L,M)=>L+M.credit,0),A=v.reduce((L,M)=>L+M.debit,0),T=v.reduce((L,M)=>L+M.credit,0);let O=0;if(l){const L=r.filter(M=>M.customerId===l).sort((M,I)=>{const X=new Date(M.date).getTime(),P=new Date(I.date).getTime();return X!==P?X-P:new Date(M.createdAt).getTime()-new Date(I.createdAt).getTime()});L.length>0?O=L[L.length-1].runningBalance:f&&(O=f.balance)}else O=T-A;return{totalDebit:A,totalCredit:T,balance:O,pageTotalDebit:N,pageTotalCredit:z}},[v,k,l,r,f]);return{currentCustomer:f,ledgerData:y,filteredEntries:v,paginatedEntries:k,totals:w,totalPages:S}},Ab=({isOpen:l,customerName:r,onClose:c,onAdd:o})=>{const[d,m]=h.useState(""),[p,g]=h.useState("bank_transfer"),[x,f]=h.useState(""),[y,v]=h.useState(new Date().toISOString().split("T")[0]),[S,k]=h.useState({}),[w,N]=h.useState(!1);h.useEffect(()=>{l&&(m(""),g("bank_transfer"),f(""),v(new Date().toISOString().split("T")[0]),k({}))},[l]);const z=()=>{const O={};return(!d||parseFloat(d)<=0)&&(O.amount="Amount must be greater than 0"),y||(O.date="Date is required"),k(O),Object.keys(O).length===0},A=async O=>{if(O.preventDefault(),!z())return;N(!0);const L=await o(parseFloat(d),p,"",x,new Date(y));N(!1),L.success&&(m(""),g("bank_transfer"),f(""),v(new Date().toISOString().split("T")[0]),k({}))},T=()=>{w||(c(),m(""),g("bank_transfer"),f(""),v(new Date().toISOString().split("T")[0]),k({}))};return t.jsx(at,{isOpen:l,onClose:T,title:`Record Payment - ${r}`,children:t.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Amount (₦) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",step:"0.01",value:d,onChange:O=>m(O.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${S.amount?"ring-2 ring-red-400":""}`,placeholder:"Enter amount",disabled:w,autoFocus:!0}),S.amount&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:S.amount})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Method ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("select",{value:p,onChange:O=>g(O.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:w,children:[t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),t.jsx("option",{value:"cash",children:"Cash"}),t.jsx("option",{value:"cheque",children:"Cheque"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"date",value:y,onChange:O=>v(O.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${S.date?"ring-2 ring-red-400":""}`,disabled:w}),S.date&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:S.date})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:x,onChange:O=>f(O.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-h-[80px]",placeholder:"Add any additional notes...",disabled:w})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(fe,{type:"button",variant:"ghost",onClick:T,disabled:w,className:"flex-1",children:"Cancel"}),t.jsx(fe,{type:"submit",variant:"primary",disabled:w,className:"flex-1",children:w?"Recording...":"Record Payment"})]})]})})},Tb=({isOpen:l,customerName:r,onClose:c,onAdd:o,editingEntry:d,onUpdate:m})=>{const[p,g]=h.useState("adjustment"),[x,f]=h.useState("debit"),[y,v]=h.useState(""),[S,k]=h.useState(""),[w,N]=h.useState(""),[z,A]=h.useState(new Date().toISOString().split("T")[0]),[T,O]=h.useState({}),[L,M]=h.useState(!1);h.useEffect(()=>{d&&(g(d.transactionType),f(d.debit>0?"debit":"credit"),v((d.debit||d.credit).toString()),k(d.description),N(d.notes||""),A(new Date(d.date).toISOString().split("T")[0]))},[d]);const I=()=>{const B={};return(!y||parseFloat(y)<=0)&&(B.amount="Amount must be greater than 0"),S.trim()||(B.description="Description is required"),z||(B.date="Date is required"),O(B),Object.keys(B).length===0},X=async B=>{if(B.preventDefault(),!I())return;M(!0);const q=x==="debit"?parseFloat(y):0,_=x==="credit"?parseFloat(y):0;let Y;d&&m?Y=await m(d.id,{transactionType:p,debit:q,credit:_,description:S,notes:w,date:new Date(z)}):o?Y=await o(p,q,_,S,w,new Date(z)):Y={success:!1},M(!1),Y.success&&P()},P=()=>{L||(c(),g("adjustment"),f("debit"),v(""),k(""),N(""),A(new Date().toISOString().split("T")[0]),O({}))};return t.jsx(at,{isOpen:l,onClose:P,title:d?`Edit Entry - ${r}`:`Manual Entry - ${r}`,children:t.jsxs("form",{onSubmit:X,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Transaction Type ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("select",{value:p,onChange:B=>g(B.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:L||d!=null&&d.transactionType==="sale",children:d?.transactionType==="sale"?t.jsx("option",{value:"sale",children:"Sale"}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"adjustment",children:"Adjustment"}),t.jsx("option",{value:"opening_balance",children:"Opening Balance"}),t.jsx("option",{value:"credit_note",children:"Credit Note"}),!d&&t.jsx("option",{value:"payment",children:"Payment"})]})}),d?.transactionType==="sale"&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Sale entries are managed through the sales module"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Entry Type ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>f("debit"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${x==="debit"?"bg-red-500/20 text-red-400 ring-2 ring-red-400":"glass hover:bg-white/10"}`,disabled:L||p==="payment",children:"Debit (Customer Owes)"}),t.jsx("button",{type:"button",onClick:()=>f("credit"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${x==="credit"?"bg-green-500/20 text-green-400 ring-2 ring-green-400":"glass hover:bg-white/10"}`,disabled:L||d?.transactionType==="sale",children:"Credit (Customer Paid)"})]}),p==="payment"&&t.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Payments are always credits. Use the Payment button for better tracking."}),d?.transactionType==="sale"&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Sales are always debits"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Amount (₦) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",step:"0.01",value:y,onChange:B=>v(B.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${T.amount?"ring-2 ring-red-400":""}`,placeholder:"Enter amount",disabled:L}),T.amount&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:T.amount})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Description ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"text",value:S,onChange:B=>k(B.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${T.description?"ring-2 ring-red-400":""}`,placeholder:"Enter description",disabled:L}),T.description&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:T.description})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"date",value:z,onChange:B=>A(B.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${T.date?"ring-2 ring-red-400":""}`,disabled:L}),T.date&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:T.date})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:w,onChange:B=>N(B.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-h-[80px]",placeholder:"Add any additional notes...",disabled:L})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx(fe,{type:"button",variant:"ghost",onClick:P,disabled:L,className:"flex-1",children:"Cancel"}),t.jsx(fe,{type:"submit",variant:"primary",disabled:L,className:"flex-1",children:L?d?"Updating...":"Adding...":d?"Update Entry":"Add Entry"})]})]})})},Eb=({totalDebit:l,totalCredit:r,balance:c,customerId:o})=>{const d=m=>`₦${Math.abs(m).toLocaleString()}`;return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Sales/Debits"}),t.jsx("p",{className:"text-2xl font-bold text-red-400",children:d(l)})]}),t.jsx(is,{className:"text-red-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Payments/Credits"}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:d(r)})]}),t.jsx(kr,{className:"text-green-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:o?"Current Balance":"Net Outstanding"}),t.jsx("p",{className:`text-2xl font-bold ${c<0?"text-red-400":c>0?"text-green-400":"text-yellow-400"}`,children:d(Math.abs(c))}),c<0&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Customer owes"}),c>0&&t.jsx("p",{className:"text-xs text-green-400 mt-1",children:"Customer has credit"})]}),t.jsx(gs,{className:c<0?"text-red-400":c>0?"text-green-400":"text-yellow-400",size:24})]})})]})},zb=({searchTerm:l,setSearchTerm:r,transactionFilter:c,setTransactionFilter:o,dateFrom:d,setDateFrom:m,dateTo:p,setDateTo:g})=>t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search transactions...",value:l,onChange:x=>r(x.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:c,onChange:x=>o(x.target.value),children:[t.jsx("option",{value:"all",children:"All Transactions"}),t.jsx("option",{value:"payment",children:"Payments"}),t.jsx("option",{value:"sale",children:"Sales"}),t.jsx("option",{value:"credit_note",children:"Credit Notes"}),t.jsx("option",{value:"opening_balance",children:"Opening Balance"}),t.jsx("option",{value:"adjustment",children:"Adjustments"})]}),t.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[t.jsxs("div",{className:"relative flex-1 lg:flex-initial",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:18}),t.jsx("input",{type:"date",value:d,onChange:x=>m(x.target.value),className:"w-full pl-10 pr-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"From Date"})]}),t.jsxs("div",{className:"relative flex-1 lg:flex-initial",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:18}),t.jsx("input",{type:"date",value:p,onChange:x=>g(x.target.value),className:"w-full pl-10 pr-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"To Date"})]})]})]}),Hh=({entry:l,sales:r,customerId:c,isDeletingId:o,onEdit:d,onDelete:m,isMobile:p=!1})=>{const g=v=>`₦${Math.abs(v).toLocaleString()}`,x=v=>v.split("_").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" "),f=()=>{if(l.transactionType==="sale"){const v=l.description.match(/#?(ORD-\d+-\d+)/i),S=v?v[1]:null,k=S?r.find(w=>w.orderId===S):null;if(k&&k.items&&k.items.length>0&&S){const w=l.description.split(S);return t.jsxs("div",{className:p?"text-sm mb-3":"",children:[w[0],t.jsx(zn,{content:t.jsx(Mn,{items:k.items.map(N=>({productName:N.productName,quantity:N.quantity,price:N.price,total:N.total}))}),placement:"top",children:t.jsx("span",{className:"cursor-help underline decoration-dotted decoration-gray-400",children:S})}),w[1]]})}return t.jsx("div",{className:p?"text-sm mb-3":"",children:l.description})}return t.jsx("div",{className:p?"text-sm mb-3":"",children:l.description})},y=()=>c?l.transactionType==="sale"?p?t.jsx("div",{className:"flex gap-2 justify-end border-t border-white/5 pt-3",children:t.jsx("p",{className:"text-xs text-muted italic",children:"Sales can only be edited from the Sales page"})}):t.jsx("div",{className:"text-center",children:t.jsx("span",{className:"text-xs text-muted italic",children:"Via Sales"})}):t.jsxs("div",{className:p?"flex gap-2 justify-end border-t border-white/5 pt-3":"flex justify-center gap-1",children:[l.transactionType!=="payment"&&t.jsx("button",{onClick:()=>d(l),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Entry",children:t.jsx(Bt,{size:p?16:14})}),t.jsx("button",{onClick:()=>m(l),disabled:o===l.id,className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200 disabled:opacity-50",title:"Delete Entry",children:o===l.id?t.jsx(Fe,{size:p?16:14,className:"animate-spin"}):t.jsx(Nt,{size:p?16:14,className:"text-red-400"})})]}):null;return p?t.jsxs("div",{className:`glass rounded-lg p-4 ${l.runningBalance>0?"bg-green-500/5":l.runningBalance<0?"bg-red-500/5":""}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:!c&&l.customerName}),t.jsx("p",{className:"text-sm text-muted",children:Je(l.date)})]}),t.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${l.transactionType==="payment"?"bg-green-500/20 text-green-400":l.transactionType==="sale"?"bg-red-500/20 text-red-400":l.transactionType==="credit_note"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:x(l.transactionType)})]}),f(),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm mb-3",children:[l.debit>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Debit"}),t.jsx("p",{className:"font-medium text-red-400",children:g(l.debit)})]}),l.credit>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Credit"}),t.jsx("p",{className:"font-medium text-green-400",children:g(l.credit)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Balance"}),t.jsx("p",{className:`font-bold ${l.runningBalance>0?"text-green-400":l.runningBalance<0?"text-red-400":"text-yellow-400"}`,children:g(l.runningBalance)})]})]}),y()]}):t.jsxs("tr",{className:`border-b border-gray-800/30 hover:bg-glass transition-colors ${l.runningBalance>0?"bg-green-500/5":l.runningBalance<0?"bg-red-500/5":""}`,children:[t.jsx("td",{className:"py-3 px-4",children:Je(l.date)}),!c&&t.jsx("td",{className:"py-3 px-4 font-medium",children:l.customerName}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[f(),l.notes&&t.jsx("div",{className:"text-xs text-muted",children:l.notes})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${l.transactionType==="payment"?"bg-green-500/20 text-green-400":l.transactionType==="sale"?"bg-red-500/20 text-red-400":l.transactionType==="credit_note"?"bg-blue-500/20 text-blue-400":l.transactionType==="opening_balance"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:x(l.transactionType)})}),t.jsx("td",{className:"py-3 px-4 text-right font-medium text-red-400",children:l.debit>0?g(l.debit):"-"}),t.jsx("td",{className:"py-3 px-4 text-right font-medium text-green-400",children:l.credit>0?g(l.credit):"-"}),t.jsxs("td",{className:`py-3 px-4 text-right font-bold ${l.runningBalance<0?"text-red-400":l.runningBalance>0?"text-green-400":"text-yellow-400"}`,children:[g(Math.abs(l.runningBalance)),l.runningBalance<0&&t.jsx("span",{className:"text-xs block text-red-400",children:"Owes"}),l.runningBalance>0&&t.jsx("span",{className:"text-xs block text-green-400",children:"Credit"})]}),c&&t.jsx("td",{className:"py-3 px-4",children:y()})]})},Mb=({entries:l,sales:r,customerId:c,isDeletingId:o,onEdit:d,onDelete:m,pageTotalDebit:p,pageTotalCredit:g,totalDebit:x,totalCredit:f,balance:y,loading:v,searchTerm:S,transactionFilter:k,dateFrom:w,dateTo:N})=>{const z=A=>`₦${Math.abs(A).toLocaleString()}`;return v?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading ledger..."})]})}):l.length===0?t.jsx("div",{className:"text-center py-20 text-muted",children:S||k!=="all"||w||N?"No transactions found matching your filters":c?"No transactions for this customer yet":"No transactions recorded yet"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"sm:hidden space-y-3",children:l.map(A=>t.jsx(Hh,{entry:A,sales:r,customerId:c,isDeletingId:o,onEdit:d,onDelete:m,isMobile:!0},A.id))}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-800/50",children:[t.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),!c&&t.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Description"}),t.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),t.jsx("th",{className:"text-right py-3 px-4",children:"Debit (₦)"}),t.jsx("th",{className:"text-right py-3 px-4",children:"Credit (₦)"}),t.jsx("th",{className:"text-right py-3 px-4",children:"Balance (₦)"}),c&&t.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),t.jsx("tbody",{children:l.map(A=>t.jsx(Hh,{entry:A,sales:r,customerId:c,isDeletingId:o,onEdit:d,onDelete:m,isMobile:!1},A.id))}),t.jsxs("tfoot",{children:[t.jsxs("tr",{className:"border-t border-gray-800/30",children:[t.jsx("td",{colSpan:c?3:4,className:"py-3 px-4 text-sm text-muted",children:"Page Total"}),t.jsx("td",{className:"py-3 px-4 text-right text-sm text-red-400",children:z(p)}),t.jsx("td",{className:"py-3 px-4 text-right text-sm text-green-400",children:z(g)}),t.jsx("td",{}),c&&t.jsx("td",{})]}),t.jsxs("tr",{className:"border-t-2 border-gray-800/50 font-bold",children:[t.jsx("td",{colSpan:c?3:4,className:"py-3 px-4",children:"Overall Total"}),t.jsx("td",{className:"py-3 px-4 text-right text-red-400",children:z(x)}),t.jsx("td",{className:"py-3 px-4 text-right text-green-400",children:z(f)}),t.jsx("td",{className:`py-3 px-4 text-right ${y>0?"text-green-400":y<0?"text-red-400":"text-yellow-400"}`,children:z(y)}),c&&t.jsx("td",{})]})]})]})})]})},$h=()=>{const{customerId:l}=E0(),r=lu(),[c,o]=h.useState(""),[d,m]=h.useState("all"),[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState(!1),[S,k]=h.useState(!1),[w,N]=h.useState(null),[z,A]=h.useState(null),[T,O]=h.useState(null),[L,M]=h.useState(!1),[I,X]=h.useState(1),P=15,{sales:B}=Nx(),{customersHook:q}=xu(),{ledgerEntries:_,customers:Y,loading:Q,syncInProgress:H,pendingChanges:V,addLedgerEntry:b,deleteLedgerEntry:E,forceSync:U}=q,{toasts:K,showSuccess:C,showError:$,removeToast:W}=ga(),{currentCustomer:F,filteredEntries:ie,paginatedEntries:re,totals:ne,totalPages:le}=Db({customerId:l,ledgerEntries:_,customers:Y,searchTerm:c,transactionFilter:d,dateFrom:p,dateTo:x,currentPage:I,itemsPerPage:P});h.useEffect(()=>{const be=()=>M(!1);return L&&document.addEventListener("click",be),()=>document.removeEventListener("click",be)},[L]),h.useMemo(()=>{X(1)},[c,d,p,x,l]);const te=async(be,Ce,Re,je,ue)=>{if(!l||!F)return $("Please select a customer to add payment"),{success:!1};const xe=await b(l,"payment",`Payment received via ${Ce}`,0,be,void 0,Re,ue,je);return xe.success?(C("Payment recorded successfully"),v(!1)):$(xe.error||"Failed to record payment"),xe},pe=async(be,Ce,Re,je,ue,xe)=>{if(!l||!F)return $("Please select a customer to add entry"),{success:!1};const Se=await b(l,be,je,Ce,Re,void 0,void 0,xe,ue);return Se.success?(C("Entry added successfully"),k(!1)):$(Se.error||"Failed to add entry"),Se},oe=(be,Ce)=>{const Re={success:!1,error:"Entry updates are not supported. Please delete and recreate."};return Re.success?(C("Entry updated successfully"),N(null),k(!1),v(!1)):$(Re.error||"Failed to update entry"),Re},ye=async be=>{O(be.id);const Ce=await E(be.id);Ce.success?(C("Entry deleted successfully"),A(null)):$(Ce.error||"Failed to delete entry"),O(null)},ge=be=>{N(be),k(!0)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 relative",children:[t.jsx("div",{className:"flex-1 w-full sm:w-auto",children:l?t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("button",{onClick:()=>r("/customers/ledger"),className:"sm:hidden flex items-center gap-2 text-sm text-muted hover:text-white transition-colors mb-2",children:[t.jsx(kh,{size:16}),"All Customers"]}),t.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>r("/customers/ledger"),children:[t.jsx(kh,{size:20}),"All Customers"]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[F?.name,"'s Ledger"]}),t.jsx("p",{className:"text-muted",children:"Track transactions and balance for this customer"})]})]}),t.jsxs("div",{className:"sm:hidden",children:[t.jsx("h1",{className:"text-2xl font-bold mb-1",children:F?.name}),t.jsx("p",{className:"text-sm text-muted",children:"Track transactions and balance"})]})]}):t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Customer Ledger"}),t.jsx("p",{className:"text-muted",children:"Overview of all customer transactions and balances"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[H&&t.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),V>0&&!H&&t.jsxs(fe,{variant:"ghost",onClick:U,size:"sm",className:"hidden sm:flex",children:[t.jsx(Fe,{size:16}),"Sync (",V,")"]}),l&&t.jsxs(t.Fragment,{children:[t.jsxs(fe,{variant:"secondary",onClick:()=>k(!0),className:"hidden sm:flex",children:[t.jsx(Lt,{size:20}),"Manual Entry"]}),t.jsxs(fe,{variant:"primary",onClick:()=>v(!0),className:"hidden sm:flex",children:[t.jsx(Lt,{size:20}),"Add Payment"]})]}),t.jsxs(fe,{variant:"ghost",className:"hidden sm:flex",children:[t.jsx(Dt,{size:20}),"Export"]}),t.jsxs("div",{className:"sm:hidden absolute top-0 right-0 flex items-center gap-2",children:[l&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:be=>{be.stopPropagation(),M(!L)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),L&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[H&&t.jsxs("div",{className:"px-3 py-2 text-sm text-muted flex items-center gap-2",children:[t.jsx(Fe,{className:"animate-spin",size:14}),"Syncing..."]}),V>0&&!H&&t.jsxs("button",{onClick:be=>{be.stopPropagation(),U(),M(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",V,")"]}),t.jsxs("button",{onClick:be=>{be.stopPropagation(),k(!0),M(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Manual Entry"]}),t.jsxs("button",{onClick:be=>{be.stopPropagation(),M(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Dt,{size:16}),"Export"]})]})]}),t.jsx("button",{onClick:()=>v(!0),className:"w-10 h-10 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center",title:"Add Payment",children:t.jsx(Lt,{size:18})})]}),!l&&t.jsx("button",{onClick:()=>{},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export",children:t.jsx(Dt,{size:20})})]})]})]}),t.jsx(Eb,{totalDebit:ne.totalDebit,totalCredit:ne.totalCredit,balance:ne.balance,customerId:l}),t.jsxs(Te,{children:[t.jsx(zb,{searchTerm:c,setSearchTerm:o,transactionFilter:d,setTransactionFilter:m,dateFrom:p,setDateFrom:g,dateTo:x,setDateTo:f}),t.jsx(Mb,{entries:re,sales:B,customerId:l,isDeletingId:T,onEdit:ge,onDelete:A,pageTotalDebit:ne.pageTotalDebit,pageTotalCredit:ne.pageTotalCredit,totalDebit:ne.totalDebit,totalCredit:ne.totalCredit,balance:ne.balance,loading:Q,searchTerm:c,transactionFilter:d,dateFrom:p,dateTo:x}),t.jsx(wx,{currentPage:I,totalPages:le,itemsPerPage:P,totalItems:ie.length,onPageChange:X})]}),y&&l&&t.jsx(Ab,{isOpen:y,customerName:F?.name||"",onClose:()=>{v(!1)},onAdd:te}),S&&l&&t.jsx(Tb,{isOpen:S,customerName:F?.name||"",onClose:()=>{k(!1),N(null)},onAdd:pe,editingEntry:w,onUpdate:w?oe:void 0}),z&&t.jsx(Xt,{isOpen:!!z,onClose:()=>A(null),onConfirm:()=>ye(z),title:"Delete Ledger Entry",message:t.jsxs("div",{children:["Are you sure you want to delete this entry?",t.jsxs("div",{className:"mt-2 p-2 rounded bg-gray-800/50",children:[t.jsx("p",{className:"text-sm",children:z.description}),t.jsxs("p",{className:"text-xs text-muted mt-1",children:["Date: ",Je(z.date)]})]}),t.jsx("p",{className:"text-sm text-yellow-400 mt-2",children:"This will recalculate all subsequent balances."})]}),confirmText:"Delete",type:"danger"}),t.jsx(pa,{toasts:K,onClose:W})]})},Dr=()=>(console.log("[Suppliers] Using GitHub-direct mode (no localStorage)"),jx()),Ob=({stats:l,loading:r})=>{const c=[{title:"Total Suppliers",value:l.totalSuppliers,icon:js,color:"text-blue-400",bgColor:"bg-blue-500/10",format:o=>o.toString()},{title:"Unique Agents",value:l.uniqueAgents,icon:Ln,color:"text-green-400",bgColor:"bg-green-500/10",format:o=>o.toString()},{title:"Top Agent",value:l.topAgent||"N/A",subtitle:l.topAgent?`${l.topAgentCount} suppliers`:void 0,icon:is,color:"text-purple-400",bgColor:"bg-purple-500/10",format:o=>typeof o=="string"?o:o.toString()}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((o,d)=>t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-muted mb-1",children:o.title}),r?t.jsx(Dn,{className:"h-8 w-24"}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:`text-2xl font-bold ${o.color}`,children:o.format(o.value)}),o.subtitle&&t.jsx("p",{className:"text-xs text-muted mt-1",children:o.subtitle})]})]}),t.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:t.jsx(o.icon,{className:o.color,size:20})})]})},d))})},Lb=({searchTerm:l,agentFilter:r,onSearchChange:c,onAgentChange:o,agents:d=[]})=>t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search suppliers by name or phone...",value:l,onChange:m=>c(m.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("div",{className:"relative sm:w-48",children:[t.jsx(Ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsxs("select",{className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none cursor-pointer",value:r,onChange:m=>o(m.target.value),children:[t.jsx("option",{value:"all",children:"All Agents"}),d.map(m=>t.jsx("option",{value:m,children:m},m))]})]})]}),Il=l=>{const r=l.replace(/\D/g,"");if(r.startsWith("234")){const c=r.match(/^(234)(\d{3})(\d{3})(\d{4})$/);if(c)return`+234 ${c[2]} ${c[3]} ${c[4]}`}else if(r.startsWith("0")){const c=r.match(/^(0)(\d{3})(\d{3})(\d{4})$/);if(c)return`${c[1]}${c[2]} ${c[3]} ${c[4]}`}else if(r.length===10){const c=r.match(/^(\d{3})(\d{3})(\d{4})$/);if(c)return`0${c[1]} ${c[2]} ${c[3]}`}return l},Tn=l=>{const r=l.replace(/\D/g,"");return!!(r.startsWith("234")&&r.length===13||r.startsWith("0")&&r.length===11||!r.startsWith("234")&&!r.startsWith("0")&&r.length===10)},qb=l=>{const r=JSON.stringify(l,null,2),c="data:application/json;charset=utf-8,"+encodeURIComponent(r),o=`suppliers_${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",o),d.click()},Bb=l=>{const r=["ID","Name","Phone","Agent","Notes","Created At","Updated At"],c=l.map(g=>[g.id,g.name,g.phone,g.agent,g.notes||"",Je(g.createdAt),Je(g.updatedAt)]),o=[r.join(","),...c.map(g=>g.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([o],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),p=URL.createObjectURL(d);m.setAttribute("href",p),m.setAttribute("download",`suppliers_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},_b=async l=>new Promise((r,c)=>{const o=new FileReader;o.onload=d=>{try{const m=d.target?.result,p=JSON.parse(m);if(!Array.isArray(p))throw new Error("Invalid file format: Expected an array of suppliers");const g=p.map((x,f)=>{if(!x.name||!x.phone||!x.agent)throw new Error(`Invalid supplier at position ${f+1}: Missing required fields`);return{...x,notes:x.notes||"",createdAt:x.createdAt?new Date(x.createdAt):new Date,updatedAt:x.updatedAt?new Date(x.updatedAt):new Date}});r(g)}catch(m){c(m)}},o.onerror=()=>{c(new Error("Failed to read file"))},o.readAsText(l)}),Rb=(l,r,c)=>{const o=[...l];return o.sort((d,m)=>{let p=d[r],g=m[r];return typeof p=="string"&&(p=p.toLowerCase(),g=g?.toLowerCase()||""),c==="asc"?p>g?1:-1:p<g?1:-1}),o},Ub=(l,r,c)=>{let o=[...l];if(r){const d=r.toLowerCase();o=o.filter(m=>m.name.toLowerCase().includes(d)||m.phone.includes(d))}return c&&c!=="all"&&(o=o.filter(d=>d.agent===c)),o},Hb=({suppliers:l,searchTerm:r,agentFilter:c,loading:o,onEditSupplier:d,onDeleteSupplier:m,onNotesSupplier:p,refreshData:g})=>{const[x,f]=h.useState("name"),[y,v]=h.useState("asc"),[S,k]=h.useState(new Set),[w,N]=h.useState({show:!1,supplier:null}),[z,A]=h.useState(!1),T=q=>{q===x?v(y==="asc"?"desc":"asc"):(f(q),v("asc"))},O=q=>{N({show:!0,supplier:q})},L=()=>{w.supplier&&(m(w.supplier.id),N({show:!1,supplier:null}))},M=()=>{S.forEach(q=>{m(q)}),k(new Set),A(!1)},I=h.useMemo(()=>{const q=Ub(l,r,c);return Rb(q,x,y)},[l,r,c,x,y]),X=()=>{S.size===I.length?k(new Set):k(new Set(I.map(q=>q.id)))},P=q=>{const _=new Set(S);_.has(q)?_.delete(q):_.add(q),k(_)},B=({field:q})=>x!==q?null:y==="asc"?t.jsx(Zl,{size:14}):t.jsx(Ra,{size:14});return o?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading suppliers..."})]})}):t.jsxs(t.Fragment,{children:[S.size>0&&t.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[t.jsxs("span",{className:"text-sm",children:[S.size," supplier",S.size!==1?"s":""," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>k(new Set),children:"Clear"}),t.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>A(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),t.jsx("div",{className:"sm:hidden",children:I.length===0?t.jsx("div",{className:"p-8 text-center text-muted",children:r||c!=="all"?"No suppliers found matching your filters":"No suppliers yet"}):t.jsx("div",{className:"space-y-3",children:I.map(q=>t.jsxs("div",{className:`glass rounded-lg p-4 ${S.has(q.id)?"ring-2 ring-white/20":""}`,children:[t.jsx("div",{className:"flex items-start justify-between mb-3",children:t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("button",{onClick:()=>P(q.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:S.has(q.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"font-medium text-base",children:q.name})})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Phone:"}),t.jsx("p",{children:Il(q.phone)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Agent:"}),t.jsx("p",{children:q.agent})]})]}),t.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[t.jsx("button",{onClick:()=>p(q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Notes",children:t.jsx(su,{size:16,className:q.notes?"text-blue-400":""})}),t.jsx("button",{onClick:()=>d(q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Supplier",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>O(q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Supplier",children:t.jsx(Nt,{size:16,className:"text-red-400"})})]})]},q.id))})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/5",children:[t.jsx("th",{className:"text-left py-3 px-3",children:t.jsx("button",{onClick:X,className:"p-1 rounded hover:bg-glass transition-colors",children:S.size===I.length&&I.length>0?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("th",{className:"text-left py-3 px-3 font-medium text-sm",children:t.jsxs("button",{onClick:()=>T("name"),className:"flex items-center gap-1 hover:text-white transition-colors",children:["Name",t.jsx(B,{field:"name"})]})}),t.jsx("th",{className:"text-left py-3 px-3 font-medium text-sm",children:"Phone"}),t.jsx("th",{className:"text-left py-3 px-3 font-medium text-sm",children:t.jsxs("button",{onClick:()=>T("agent"),className:"flex items-center gap-1 hover:text-white transition-colors",children:["Agent",t.jsx(B,{field:"agent"})]})}),t.jsx("th",{className:"text-center py-3 px-3 font-medium text-sm",children:"Actions"})]})}),t.jsx("tbody",{children:I.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-8 text-center text-muted",children:r||c!=="all"?"No suppliers found matching your filters":"No suppliers yet"})}):I.map(q=>t.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${S.has(q.id)?"bg-white/5":""}`,children:[t.jsx("td",{className:"py-3 px-3",children:t.jsx("button",{onClick:()=>P(q.id),className:"p-1 rounded hover:bg-glass transition-colors",children:S.has(q.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 glass rounded-lg",children:t.jsx(_t,{size:20})}),t.jsx("div",{children:t.jsx("p",{className:"font-medium",children:q.name})})]})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:Il(q.phone)})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:q.agent})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1",children:[t.jsxs("button",{onClick:()=>p(q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200 relative",title:"View Notes",children:[t.jsx(su,{size:14,className:`sm:w-4 sm:h-4 ${q.notes?"text-blue-400":""}`}),q.notes&&t.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-400 rounded-full"})]}),t.jsx("button",{onClick:()=>d(q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Supplier",children:t.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>O(q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Supplier",children:t.jsx(Nt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})})]})})]},q.id))})]})}),!o&&l.length>0&&t.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Total: ",l.length," suppliers"]})]}),g&&t.jsxs(fe,{variant:"ghost",size:"sm",onClick:g,children:[t.jsx(Fe,{size:14}),"Refresh"]})]}),w.show&&w.supplier&&t.jsx(Xt,{isOpen:w.show,onClose:()=>N({show:!1,supplier:null}),onConfirm:L,title:"Delete Supplier",message:t.jsxs("div",{children:["Are you sure you want to delete ",t.jsx("strong",{children:w.supplier.name}),"?",t.jsx("div",{className:"mt-2 p-2 rounded bg-amber-500/10",children:t.jsx("p",{className:"text-sm text-amber-400",children:"This action cannot be undone. All supplier information will be permanently removed."})}),t.jsxs("div",{className:"mt-2 space-y-1 text-sm text-muted",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Phone:"})," ",Il(w.supplier.phone)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Agent:"})," ",w.supplier.agent]})]})]}),confirmText:"Delete",type:"danger"}),z&&t.jsx(Xt,{isOpen:z,onClose:()=>A(!1),onConfirm:M,title:"Delete Multiple Suppliers",message:t.jsxs("div",{children:["Are you sure you want to delete ",t.jsxs("strong",{children:[S.size," suppliers"]}),"?",t.jsx("div",{className:"mt-2 p-2 rounded bg-amber-500/10",children:t.jsx("p",{className:"text-sm text-amber-400",children:"This action cannot be undone. All selected suppliers will be permanently removed."})})]}),confirmText:`Delete ${S.size} Suppliers`,type:"danger"})]})},$b=({isOpen:l,onClose:r,onAdd:c})=>{const[o,d]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(""),[f,y]=h.useState([]),[v,S]=h.useState(!1),k=async z=>{z.preventDefault(),y([]),S(!0);const A=[];if(o.trim()||A.push("Supplier name is required"),m.trim()?Tn(m)||A.push("Please enter a valid Nigerian phone number"):A.push("Phone number is required"),g.trim()||A.push("Agent name is required"),A.length>0){y(A),S(!1);return}const T=await c(o.trim(),m.trim(),g.trim());T.success?w():y(T.errors||["Failed to add supplier"]),S(!1)},w=()=>{d(""),p(""),x(""),y([]),r()},N=z=>{const A=z.replace(/[^\d\s+]/g,"");p(A)};return t.jsx(at,{isOpen:l,onClose:w,title:"Add New Supplier",size:"md",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:w,disabled:v,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:k,disabled:v,loading:v,loadingText:"Adding Supplier...",children:"Add Supplier"})]}),children:t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[f.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:f.map((z,A)=>t.jsx("p",{className:"text-sm text-red-400",children:z},A))})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Supplier Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:o,onChange:z=>d(z.target.value),placeholder:"Enter supplier name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0,autoFocus:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"tel",value:m,onChange:z=>N(z.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),m&&!Tn(m)&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),m&&Tn(m)&&t.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",Il(m)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Agent ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:g,onChange:z=>x(z.target.value),placeholder:"Enter agent name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]})]})})},Qb=({isOpen:l,supplier:r,onClose:c,onUpdate:o})=>{const[d,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState([]),[S,k]=h.useState(!1);h.useEffect(()=>{r&&(m(r.name),g(r.phone),f(r.agent))},[r]);const w=async A=>{if(A.preventDefault(),!r)return;v([]),k(!0);const T=[];if(d.trim()||T.push("Supplier name is required"),p.trim()?Tn(p)||T.push("Please enter a valid Nigerian phone number"):T.push("Phone number is required"),x.trim()||T.push("Agent name is required"),T.length>0){v(T),k(!1);return}const O=await o(r.id,{name:d.trim(),phone:p.trim(),agent:x.trim()});O.success?N():v(O.errors||["Failed to update supplier"]),k(!1)},N=()=>{m(""),g(""),f(""),v([]),c()},z=A=>{const T=A.replace(/[^\d\s+]/g,"");g(T)};return r?t.jsx(at,{isOpen:l,onClose:N,title:"Edit Supplier",size:"md",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:N,disabled:S,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:w,disabled:S,loading:S,loadingText:"Updating Supplier...",children:"Update Supplier"})]}),children:t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[y.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:y.map((A,T)=>t.jsx("p",{className:"text-sm text-red-400",children:A},T))})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Supplier Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:d,onChange:A=>m(A.target.value),placeholder:"Enter supplier name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"tel",value:p,onChange:A=>z(A.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),p&&!Tn(p)&&t.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),p&&Tn(p)&&t.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",Il(p)]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Agent ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:x,onChange:A=>f(A.target.value),placeholder:"Enter agent name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]})]})}):null},Vb=({isOpen:l,supplier:r,onClose:c,onUpdate:o})=>{const[d,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState([]),[y,v]=h.useState(!1),[S,k]=h.useState(!1);h.useEffect(()=>{r&&(m(r.notes||""),g(r.notes||""),k(!1))},[r]),h.useEffect(()=>{k(d!==p)},[d,p]);const w=async L=>{if(L.preventDefault(),!r)return;f([]),v(!0);const M=await o(r.id,{notes:d.trim()});M.success?(g(d),k(!1),m(""),g(""),f([]),c()):f(M.errors||["Failed to update notes"]),v(!1)},N=()=>{S&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||(m(""),g(""),f([]),k(!1),c())},z=()=>{m(p),k(!1)};if(!r)return null;const A=d.length,T=2e3,O=T-A;return t.jsx(at,{isOpen:l,onClose:N,title:`Notes for ${r.name}`,size:"lg",footer:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center gap-2 mr-auto",children:S&&t.jsx("span",{className:"text-xs text-yellow-400",children:"Unsaved changes"})}),t.jsx(fe,{variant:"ghost",onClick:z,disabled:!S||y,children:"Reset"}),t.jsx(fe,{variant:"ghost",onClick:N,disabled:y,children:"Cancel"}),t.jsxs(fe,{variant:"primary",onClick:w,disabled:y||!S,loading:y,loadingText:"Saving Notes...",children:[t.jsx(dx,{size:16}),"Save Notes"]})]}),children:t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[x.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:x.map((L,M)=>t.jsx("p",{className:"text-sm text-red-400",children:L},M))})]})}),t.jsx("div",{className:"glass rounded-lg p-4 space-y-2",children:t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_t,{size:14,className:"text-muted-text"}),t.jsx("span",{className:"text-muted-text",children:"Supplier:"}),t.jsx("span",{className:"font-medium",children:r.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bt,{size:14,className:"text-muted-text"}),t.jsx("span",{className:"text-muted-text",children:"Last Updated:"}),t.jsx("span",{children:Je(r.updatedAt)})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(su,{size:16}),"Notes"]})}),t.jsx("textarea",{value:d,onChange:L=>m(L.target.value),placeholder:"Add any notes, reminders, or important information about this supplier...",className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 resize-y",rows:10,maxLength:T}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsx("p",{className:"text-xs text-muted",children:"Use this space to record important details, agreements, or any other relevant information."}),t.jsxs("p",{className:`text-xs ${O<100?"text-yellow-400":"text-muted"}`,children:[O," characters remaining"]})]})]})]})})},Ib=()=>{const[l,r]=h.useState(""),[c,o]=h.useState("all"),[d,m]=h.useState(!1),[p,g]=h.useState(null),[x,f]=h.useState(null),[y,v]=h.useState(!1),[S,k]=h.useState(!1),{suppliers:w,loading:N,syncInProgress:z,pendingChanges:A,addSupplier:T,updateSupplier:O,deleteSupplier:L,getStatistics:M,forceSync:I,refreshData:X}=Dr(),{toasts:P,showSuccess:B,showError:q,removeToast:_}=ga(),Y=M(),Q=Array.from(new Set(w.map(C=>C.agent))).sort(),H=async(C,$,W,F)=>{const ie=await T(C,$,W,F);return ie.success&&(B(`Supplier "${C}" added successfully`),m(!1)),ie},V=async(C,$)=>{const W=await O(C,$);return W.success&&(B("Supplier updated successfully"),g(null)),W},b=async C=>{const $=w.find(F=>F.id===C),W=await L(C);W.success?W.error?q(W.error):B(`Supplier "${$?.name}" deleted`):q("Failed to delete supplier")},E=()=>{qb(w),B("Suppliers exported to JSON"),v(!1)},U=()=>{Bb(w),B("Suppliers exported to CSV"),v(!1)},K=async C=>{const $=C.target.files?.[0];if($){try{const W=await _b($);let F=0,ie=0;for(const re of W)(await T(re.name,re.phone,re.agent,re.notes)).success?F++:ie++;F>0&&B(`Imported ${F} suppliers successfully`),ie>0&&q(`${ie} suppliers were duplicates and were skipped`)}catch(W){q(W.message||"Failed to import suppliers")}C.target.value="",v(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Suppliers"}),t.jsx("p",{className:"text-muted",children:"Manage your supplier information and relationships"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:C=>{C.stopPropagation(),k(!S)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),S&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[A>0&&!z&&t.jsxs("button",{onClick:C=>{C.stopPropagation(),I(),k(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",A,")"]}),t.jsxs("button",{onClick:C=>{C.stopPropagation(),E(),k(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:C=>{C.stopPropagation(),U(),k(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),t.jsx("span",{className:"text-sm",children:"Import from JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:C=>{K(C),k(!1)},className:"hidden"})]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[z&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),A>0&&!z&&t.jsxs(fe,{variant:"ghost",onClick:I,children:[t.jsx(Fe,{size:16}),"Sync (",A,")"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>v(!y),children:[t.jsx(Dt,{size:20}),"Import/Export"]}),y&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[t.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:U,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),"Import from JSON",t.jsx("input",{type:"file",accept:".json",onChange:K,className:"hidden"})]})]})]})]}),t.jsxs("button",{onClick:()=>m(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Supplier",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Add Supplier"})]})]})]}),N?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading suppliers..."})]})})}):t.jsx(Ob,{stats:Y,loading:N}),t.jsxs(Te,{children:[t.jsx("div",{className:"mb-4",children:t.jsx(Lb,{searchTerm:l,agentFilter:c,onSearchChange:r,onAgentChange:o,agents:Q})}),N?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsx(Hb,{suppliers:w,searchTerm:l,agentFilter:c,loading:!1,onEditSupplier:g,onDeleteSupplier:b,onNotesSupplier:f,refreshData:X})]}),t.jsx($b,{isOpen:d,onClose:()=>m(!1),onAdd:H}),t.jsx(Qb,{isOpen:!!p,supplier:p,onClose:()=>g(null),onUpdate:V}),t.jsx(Vb,{isOpen:!!x,supplier:x,onClose:()=>f(null),onUpdate:V}),t.jsx(pa,{toasts:P,onClose:_}),(y||S)&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{v(!1),k(!1)}})]})},Gb=()=>(console.log("[PaddyTrucks] Using GitHub-direct mode (no localStorage)"),vx()),Pb=l=>{const r=JSON.stringify(l,null,2),c="data:application/json;charset=utf-8,"+encodeURIComponent(r),o=`paddy-trucks-${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",o),d.click()},Yb=l=>{const r=["Date","Truck Plate","Supplier","Agent","Waybill Number","Bags","Net Weight (kg)","Deduction (kg)","Weight After Deduction (kg)","Moisture Level (%)","Price per Kg","Total Amount"],c=l.map(g=>[Je(g.date),g.truckPlate,g.supplierName,g.agent||"",g.waybillNumber||"",g.bags?.toString()||"",g.netWeight?.toString()||"",g.deduction?.toString()||"",g.weightAfterDeduction.toString(),g.moistureLevel.toString(),g.pricePerKg.toString(),g.totalAmount.toString()]),o=[r.join(","),...c.map(g=>g.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([o],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),p=URL.createObjectURL(d);m.setAttribute("href",p),m.setAttribute("download",`paddy-trucks-${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Xb=l=>new Promise((r,c)=>{const o=new FileReader;o.onload=d=>{try{const m=d.target?.result,p=JSON.parse(m);if(!Array.isArray(p))throw new Error("Invalid file format. Expected an array of paddy trucks.");const g=p.map(x=>{if(!x.truckPlate||!x.supplierName)throw new Error("Invalid truck data. Missing required fields.");return{...x,date:new Date(x.date),createdAt:new Date(x.createdAt||Date.now()),updatedAt:new Date(x.updatedAt||Date.now())}});r(g)}catch{c(new Error("Failed to parse JSON file. Please ensure it contains valid paddy truck data."))}},o.onerror=()=>{c(new Error("Failed to read file"))},o.readAsText(l)}),Ba=l=>l==null?"-":`${Math.round(l).toLocaleString()} kg`,Zo=l=>`${l.toFixed(1)}%`,_s=l=>`₦${l.toLocaleString()}`,Sx=(l,r)=>Math.round((l||0)-(r||0)),Fb=l=>{const r=[],c=d=>d.toLocaleString();r.push(`₦${c(l.pricePerKg)}/kg - ${c(Math.round(l.weightAfterDeduction))} Kgs`);const o=l.bags?`${l.bags} Bags`:"";return r.push(`${l.supplierName} ${o} (${l.moistureLevel}%)`),r.push(`*${l.truckPlate}*`),l.deduction&&l.deduction>0&&r.push(`Deduction: ${c(Math.round(l.deduction))} Kgs`),r.join(`
`)},Zb=(l,r,c,o,d)=>{let m=[...l];if(r){const p=r.toLowerCase();m=m.filter(g=>g.truckPlate.toLowerCase().includes(p)||g.supplierName.toLowerCase().includes(p)||g.agent?.toLowerCase().includes(p)||g.waybillNumber?.toLowerCase().includes(p))}return c&&c!=="all"&&(m=m.filter(p=>p.supplierId===c)),o&&(m=m.filter(p=>new Date(p.date)>=o)),d&&(m=m.filter(p=>new Date(p.date)<=d)),m},Kb=(l,r,c)=>{const o=[...l];return o.sort((d,m)=>{let p=0;switch(r){case"date":return p=new Date(d.date).getTime()-new Date(m.date).getTime(),p===0?new Date(m.createdAt).getTime()-new Date(d.createdAt).getTime():c==="asc"?p:-p;case"truckPlate":p=d.truckPlate.localeCompare(m.truckPlate);break;case"supplier":p=d.supplierName.localeCompare(m.supplierName);break;case"weight":p=d.weightAfterDeduction-m.weightAfterDeduction;break;case"amount":p=d.totalAmount-m.totalAmount;break;default:p=new Date(m.createdAt).getTime()-new Date(d.createdAt).getTime()}return c==="asc"?p:-p}),o},Jb=({paddyTrucks:l,searchTerm:r,supplierFilter:c,dateFrom:o,dateTo:d,loading:m,onEditTruck:p,onDeleteTruck:g})=>{const[x,f]=h.useState("date"),[y,v]=h.useState("desc"),[S,k]=h.useState(new Set),[w,N]=h.useState({show:!1,truck:null}),[z,A]=h.useState(!1),[T,O]=h.useState(null),L=Q=>{x===Q?v(y==="asc"?"desc":"asc"):(f(Q),v("asc"))},M=h.useMemo(()=>{const Q=Zb(l,r,c,o,d);return Kb(Q,x,y)},[l,r,c,o,d,x,y]),I=()=>{S.size===M.length?k(new Set):k(new Set(M.map(Q=>Q.id)))},X=Q=>{const H=new Set(S);H.has(Q)?H.delete(Q):H.add(Q),k(H)},P=Q=>{N({show:!0,truck:Q})},B=()=>{w.truck&&(g(w.truck.id),N({show:!1,truck:null}))},q=async Q=>{const H=Fb(Q);try{await navigator.clipboard.writeText(H),O(Q.id),setTimeout(()=>{O(null)},2e3)}catch(V){console.error("Failed to copy text:",V)}},_=()=>{S.forEach(Q=>{g(Q)}),k(new Set),A(!1)},Y=({field:Q})=>x!==Q?null:y==="asc"?t.jsx(Zl,{size:14}):t.jsx(Ra,{size:14});return t.jsxs(t.Fragment,{children:[S.size>0&&t.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[t.jsxs("span",{className:"text-sm",children:[S.size," truck",S.size!==1?"s":""," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>k(new Set),children:"Clear"}),t.jsx(fe,{variant:"secondary",size:"sm",onClick:()=>A(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),t.jsx("div",{className:"sm:hidden",children:M.length===0?t.jsx("div",{className:"p-8 text-center text-muted",children:r||c!=="all"?"No trucks found matching your filters":"No paddy trucks yet"}):t.jsx("div",{className:"space-y-3",children:M.map(Q=>t.jsxs("div",{className:`glass rounded-lg p-4 ${S.has(Q.id)?"ring-2 ring-white/20":""}`,children:[t.jsx("div",{className:"flex items-start justify-between mb-3",children:t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("button",{onClick:()=>X(Q.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:S.has(Q.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-base",children:Q.truckPlate}),t.jsx("p",{className:"text-sm text-muted",children:Q.supplierName})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Date:"}),t.jsx("p",{children:Je(Q.date)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Agent:"}),t.jsx("p",{children:Q.agent||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Bags:"}),t.jsx("p",{children:Q.bags||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Weight:"}),t.jsx("p",{children:Ba(Q.weightAfterDeduction)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Moisture:"}),t.jsx("p",{children:Zo(Q.moistureLevel)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Price/kg:"}),t.jsx("p",{children:_s(Q.pricePerKg)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted text-xs",children:"Total:"}),t.jsx("p",{className:"font-bold text-green-400",children:_s(Q.totalAmount)})]})]}),Q.waybillNumber&&t.jsxs("div",{className:"text-sm mb-3",children:[t.jsx("span",{className:"text-muted text-xs",children:"Waybill:"}),t.jsx("p",{children:Q.waybillNumber})]}),t.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[t.jsx("button",{onClick:()=>q(Q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200 relative",title:"Copy Details",children:t.jsxs("div",{className:"relative w-4 h-4",children:[t.jsx(Dh,{size:16,className:`absolute inset-0 transition-all duration-300 ${T===Q.id?"opacity-0 scale-50":"opacity-100 scale-100"}`}),t.jsx(Wo,{size:16,className:`absolute inset-0 text-green-400 transition-all duration-300 ${T===Q.id?"opacity-100 scale-100":"opacity-0 scale-50"}`})]})}),t.jsx("button",{onClick:()=>p(Q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Truck",children:t.jsx(Bt,{size:16})}),t.jsx("button",{onClick:()=>P(Q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Truck",children:t.jsx(Nt,{size:16,className:"text-red-400"})})]})]},Q.id))})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-white/5",children:[t.jsx("th",{className:"text-left py-3 px-1",children:t.jsx("button",{onClick:I,className:"p-1 rounded hover:bg-glass transition-colors",children:S.size===M.length&&M.length>0?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>L("date"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Date",t.jsx(Y,{field:"date"})]})}),t.jsx("th",{className:"text-left py-3 px-3 whitespace-nowrap",children:t.jsxs("button",{onClick:()=>L("truckPlate"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Truck Plate",t.jsx(Y,{field:"truckPlate"})]})}),t.jsx("th",{className:"text-left py-3 px-3",children:t.jsxs("button",{onClick:()=>L("supplier"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Supplier",t.jsx(Y,{field:"supplier"})]})}),t.jsx("th",{className:"text-left py-3 px-3",children:"Waybill"}),t.jsx("th",{className:"text-center py-3 px-3",children:"Bags"}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>L("weight"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Weight (kg)",t.jsx(Y,{field:"weight"})]})}),t.jsx("th",{className:"text-center py-3 px-3",children:"Moisture"}),t.jsx("th",{className:"text-right py-3 px-3",children:"Price/kg"}),t.jsx("th",{className:"text-right py-3 px-3",children:t.jsxs("button",{onClick:()=>L("amount"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Total",t.jsx(Y,{field:"amount"})]})}),t.jsx("th",{className:"text-left py-3 px-3",children:"Agent"}),t.jsx("th",{className:"text-center py-3 px-3",children:"Actions"})]})}),t.jsx("tbody",{children:M.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:12,className:"p-8 text-center text-muted",children:r||c!=="all"?"No trucks found matching your filters":"No paddy trucks yet"})}):M.map(Q=>t.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${S.has(Q.id)?"bg-glass/50":""}`,children:[t.jsx("td",{className:"py-3 px-1",children:t.jsx("button",{onClick:()=>X(Q.id),className:"p-1 rounded hover:bg-glass transition-colors",children:S.has(Q.id)?t.jsx(ns,{size:18}):t.jsx(ls,{size:18})})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:Je(Q.date)})}),t.jsx("td",{className:"py-3 px-3 whitespace-nowrap",children:t.jsx("span",{className:"font-medium text-sm",children:Q.truckPlate})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:Q.supplierName})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm text-muted",children:Q.waybillNumber||"-"})}),t.jsx("td",{className:"py-3 px-3 text-center",children:t.jsx("span",{className:"text-sm",children:Q.bags||"-"})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("div",{className:"text-sm",children:Q.netWeight&&Q.deduction?t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:Ba(Q.weightAfterDeduction)}),t.jsxs("div",{className:"text-xs text-muted",children:["(",Ba(Q.netWeight)," - ",Ba(Q.deduction),")"]})]}):t.jsx("span",{className:"font-medium",children:Ba(Q.weightAfterDeduction)})})}),t.jsx("td",{className:"py-3 px-3 text-center",children:t.jsx("span",{className:"text-sm",children:Zo(Q.moistureLevel)})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:"text-sm",children:_s(Q.pricePerKg)})}),t.jsx("td",{className:"py-3 px-3 text-right",children:t.jsx("span",{className:"font-medium text-green-400 text-sm",children:_s(Q.totalAmount)})}),t.jsx("td",{className:"py-3 px-3",children:t.jsx("span",{className:"text-sm",children:Q.agent||"-"})}),t.jsx("td",{className:"py-3 px-3",children:t.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1",children:[t.jsx("button",{onClick:()=>q(Q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200 relative",title:"Copy Details",children:t.jsxs("div",{className:"relative w-3.5 h-3.5 sm:w-4 sm:h-4",children:[t.jsx(Dh,{size:14,className:`absolute inset-0 sm:w-4 sm:h-4 transition-all duration-300 ${T===Q.id?"opacity-0 scale-50":"opacity-100 scale-100"}`}),t.jsx(Wo,{size:14,className:`absolute inset-0 sm:w-4 sm:h-4 text-green-400 transition-all duration-300 ${T===Q.id?"opacity-100 scale-100":"opacity-0 scale-50"}`})]})}),t.jsx("button",{onClick:()=>p(Q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Truck",children:t.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),t.jsx("button",{onClick:()=>P(Q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Truck",children:t.jsx(Nt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})})]})})]},Q.id))})]})}),M.length>0&&t.jsxs("div",{className:"mt-4 text-sm text-muted",children:["Showing ",M.length," of ",l.length," trucks"]}),!m&&M.length>0&&t.jsx("div",{className:"mt-4 text-sm",children:t.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap items-center gap-3 sm:gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Total: ",M.length," trucks"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ma,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Total Weight: ",Ba(M.reduce((Q,H)=>Q+H.weightAfterDeduction,0))]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gs,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Avg Price: ",(()=>{const Q=M.reduce((V,b)=>V+b.weightAfterDeduction,0),H=M.reduce((V,b)=>V+b.totalAmount,0);return Q>0?_s(H/Q):_s(0)})(),"/kg"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mu,{size:16,className:"text-muted-text"}),t.jsxs("span",{children:["Avg Moisture: ",(()=>{const Q=M.reduce((V,b)=>V+b.weightAfterDeduction,0),H=M.reduce((V,b)=>V+b.moistureLevel*b.weightAfterDeduction,0);return Q>0?Zo(H/Q):"0%"})()]})]})]})}),w.show&&w.truck&&t.jsx(Xt,{isOpen:w.show,onClose:()=>N({show:!1,truck:null}),onConfirm:B,title:"Delete Paddy Truck",message:t.jsxs("div",{children:["Are you sure you want to delete this truck record?",t.jsxs("div",{className:"mt-2 p-2 rounded bg-gray-800/50",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Truck:"})," ",w.truck.truckPlate]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Supplier:"})," ",w.truck.supplierName]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Date:"})," ",Je(w.truck.date)]})]})]}),confirmText:"Delete",type:"danger"}),z&&t.jsx(Xt,{isOpen:z,onClose:()=>A(!1),onConfirm:_,title:"Delete Multiple Trucks",message:`Are you sure you want to delete ${S.size} selected truck${S.size>1?"s":""}? This action cannot be undone.`,confirmText:"Delete All",type:"danger"})]})},Wb=({isOpen:l,onClose:r,onAdd:c})=>{const{suppliers:o}=Dr(),d=[...o].sort((b,E)=>b.name.localeCompare(E.name)),[m,p]=h.useState(new Date().toISOString().split("T")[0]),[g,x]=h.useState(""),[f,y]=h.useState(""),[v,S]=h.useState(""),[k,w]=h.useState(""),[N,z]=h.useState(""),[A,T]=h.useState(""),[O,L]=h.useState(""),[M,I]=h.useState(""),[X,P]=h.useState(""),[B,q]=h.useState([]),[_,Y]=h.useState(!1),Q=Sx(N?parseFloat(N):void 0,A?parseFloat(A):void 0),H=async b=>{b.preventDefault(),q([]),Y(!0);const E=[];if(m||E.push("Date is required"),g||E.push("Supplier is required"),v.trim()||E.push("Truck plate number is required"),(!O||parseFloat(O)<0||parseFloat(O)>100)&&E.push("Moisture level must be between 0 and 100%"),(!M||parseFloat(M)<=0)&&E.push("Price per kg must be greater than 0"),N&&parseFloat(N)<0&&E.push("Net weight cannot be negative"),A&&parseFloat(A)<0&&E.push("Deduction cannot be negative"),A&&N&&parseFloat(A)>parseFloat(N)&&E.push("Deduction cannot be greater than net weight"),k&&parseFloat(k)<0&&E.push("Number of bags cannot be negative"),E.length>0){q(E),Y(!1);return}const U=d.find(C=>C.id===g);if(!U){q(["Selected supplier not found"]),Y(!1);return}const K=await c(new Date(m),g,U.name,v.trim(),parseFloat(M),X.trim(),parseFloat(O),f.trim()||void 0,N?Math.round(parseFloat(N)):void 0,A?Math.round(parseFloat(A)):void 0,k?parseFloat(k):void 0);K.success?V():q(K.errors||["Failed to add paddy truck"]),Y(!1)},V=()=>{p(new Date().toISOString().split("T")[0]),x(""),y(""),S(""),w(""),z(""),T(""),L(""),I(""),P(""),q([]),r()};return t.jsx(at,{isOpen:l,onClose:V,title:"Add New Paddy Truck",size:"lg",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:V,disabled:_,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:H,disabled:_,loading:_,loadingText:"Adding Truck...",children:"Add Truck"})]}),children:t.jsxs("form",{onSubmit:H,className:"space-y-4",children:[B.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:B.map((b,E)=>t.jsx("p",{className:"text-sm text-red-400",children:b},E))})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"date",value:m,onChange:b=>p(b.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Supplier ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsxs("select",{value:g,onChange:b=>x(b.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,autoFocus:!0,children:[t.jsx("option",{value:"",children:"Select a supplier"}),d.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Truck Plate ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:v,onChange:b=>S(b.target.value),placeholder:"e.g., DDM 250 XA",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Waybill Number"}),t.jsxs("div",{className:"relative",children:[t.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:f,onChange:b=>y(b.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Number of Bags"}),t.jsxs("div",{className:"relative",children:[t.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:k,onChange:b=>w(b.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",step:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Net Weight (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:N,onChange:b=>z(b.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"1",min:"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deduction (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:A,onChange:b=>T(b.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"1",min:"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight After Deduction (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:Math.round(Q).toString(),readOnly:!0,className:"w-full pl-10 pr-4 py-2 glass rounded-lg bg-white/5 cursor-not-allowed"})]}),t.jsx("p",{className:"text-xs text-muted mt-1",children:"Auto-calculated"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Moisture Level (%) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(mu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:O,onChange:b=>L(b.target.value),placeholder:"e.g., 12.5",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.1",min:"0",max:"100",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Price per Kg (₦) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:M,onChange:b=>I(b.target.value),placeholder:"e.g., 250",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.01",min:"0",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Agent"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:X,onChange:b=>P(b.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]})]}),Q>0&&M&&t.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-300",children:["Total Amount: ",t.jsxs("span",{className:"font-bold text-lg",children:["₦",(Q*parseFloat(M)).toLocaleString()]})]})})]})})},e1=({isOpen:l,truck:r,onClose:c,onUpdate:o})=>{const{suppliers:d}=Dr(),m=[...d].sort((E,U)=>E.name.localeCompare(U.name)),[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState(""),[S,k]=h.useState(""),[w,N]=h.useState(""),[z,A]=h.useState(""),[T,O]=h.useState(""),[L,M]=h.useState(""),[I,X]=h.useState(""),[P,B]=h.useState(""),[q,_]=h.useState([]),[Y,Q]=h.useState(!1);h.useEffect(()=>{r&&(g(new Date(r.date).toISOString().split("T")[0]),f(r.supplierId),v(r.waybillNumber||""),k(r.truckPlate),N(r.bags?.toString()||""),A(r.netWeight?.toString()||""),O(r.deduction?.toString()||""),M(r.moistureLevel.toString()),X(r.pricePerKg.toString()),B(r.agent||""))},[r]);const H=Sx(z?parseFloat(z):void 0,T?parseFloat(T):void 0),V=async E=>{if(E.preventDefault(),!r)return;_([]),Q(!0);const U=[];if(p||U.push("Date is required"),x||U.push("Supplier is required"),S.trim()||U.push("Truck plate number is required"),(!L||parseFloat(L)<0||parseFloat(L)>100)&&U.push("Moisture level must be between 0 and 100%"),(!I||parseFloat(I)<=0)&&U.push("Price per kg must be greater than 0"),z&&parseFloat(z)<0&&U.push("Net weight cannot be negative"),T&&parseFloat(T)<0&&U.push("Deduction cannot be negative"),T&&z&&parseFloat(T)>parseFloat(z)&&U.push("Deduction cannot be greater than net weight"),w&&parseFloat(w)<0&&U.push("Number of bags cannot be negative"),U.length>0){_(U),Q(!1);return}const K=m.find(re=>re.id===x);if(!K){_(["Selected supplier not found"]),Q(!1);return}const C=z?Math.round(parseFloat(z)):void 0,$=T?Math.round(parseFloat(T)):void 0,W=Math.round((C||0)-($||0)),F=W*parseFloat(I),ie=await o(r.id,{date:new Date(p),supplierId:x,supplierName:K.name,truckPlate:S.trim(),pricePerKg:parseFloat(I),agent:P.trim(),moistureLevel:parseFloat(L),waybillNumber:y.trim()||void 0,bags:w?parseFloat(w):void 0,netWeight:C,deduction:$,weightAfterDeduction:W,totalAmount:F});ie.success?b():_(ie.errors||["Failed to update paddy truck"]),Q(!1)},b=()=>{_([]),c()};return r?t.jsx(at,{isOpen:l,onClose:b,title:"Edit Paddy Truck",size:"lg",footer:t.jsxs(t.Fragment,{children:[t.jsx(fe,{variant:"ghost",onClick:b,disabled:Y,children:"Cancel"}),t.jsx(fe,{variant:"primary",onClick:V,disabled:Y,loading:Y,loadingText:"Saving Changes...",children:"Save Changes"})]}),children:t.jsxs("form",{onSubmit:V,className:"space-y-4",children:[q.length>0&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("div",{className:"space-y-1",children:q.map((E,U)=>t.jsx("p",{className:"text-sm text-red-400",children:E},U))})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"date",value:p,onChange:E=>g(E.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Supplier ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsxs("select",{value:x,onChange:E=>f(E.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[t.jsx("option",{value:"",children:"Select a supplier"}),m.map(E=>t.jsx("option",{value:E.id,children:E.name},E.id))]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Truck Plate ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:S,onChange:E=>k(E.target.value),placeholder:"e.g., DDM 250 XA",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Waybill Number"}),t.jsxs("div",{className:"relative",children:[t.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:y,onChange:E=>v(E.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Number of Bags"}),t.jsxs("div",{className:"relative",children:[t.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:w,onChange:E=>N(E.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",step:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Net Weight (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:z,onChange:E=>A(E.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"1",min:"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deduction (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:T,onChange:E=>O(E.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"1",min:"0"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight After Deduction (kg)"}),t.jsxs("div",{className:"relative",children:[t.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:Math.round(H).toString(),readOnly:!0,className:"w-full pl-10 pr-4 py-2 glass rounded-lg bg-white/5 cursor-not-allowed"})]}),t.jsx("p",{className:"text-xs text-muted mt-1",children:"Auto-calculated"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Moisture Level (%) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(mu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:L,onChange:E=>M(E.target.value),placeholder:"e.g., 12.5",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.1",min:"0",max:"100",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Price per Kg (₦) ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"number",value:I,onChange:E=>X(E.target.value),placeholder:"e.g., 250",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.01",min:"0",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Agent"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),t.jsx("input",{type:"text",value:P,onChange:E=>B(E.target.value),placeholder:"Optional",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]})]}),H>0&&I&&t.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-300",children:["Total Amount: ",t.jsxs("span",{className:"font-bold text-lg",children:["₦",(H*parseFloat(I)).toLocaleString()]})]})})]})}):null},t1=()=>{const[l,r]=h.useState(""),[c,o]=h.useState("all"),[d,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState(!1),[y,v]=h.useState(null),[S,k]=h.useState(!1),[w,N]=h.useState(!1),[z,A]=h.useState(1),T=15,{paddyTrucks:O,loading:L,syncInProgress:M,pendingChanges:I,addPaddyTruck:X,updatePaddyTruck:P,deletePaddyTruck:B,getStatistics:q,forceSync:_,refreshData:Y}=Gb(),{suppliers:Q}=Dr(),{toasts:H,showSuccess:V,showError:b,removeToast:E}=ga(),U=q(),K=h.useMemo(()=>{let te=[...O];const pe=d?new Date(d):void 0,oe=p?new Date(p):void 0;return pe&&(te=te.filter(ye=>new Date(ye.date)>=pe)),oe&&(oe.setHours(23,59,59,999),te=te.filter(ye=>new Date(ye.date)<=oe)),te.sort((ye,ge)=>new Date(ge.date).getTime()-new Date(ye.date).getTime()),te},[O,d,p]),C=Math.ceil(K.length/T),$=h.useMemo(()=>{const te=(z-1)*T;return K.slice(te,te+T)},[K,z]);h.useMemo(()=>{A(1)},[l,c,d,p]);const W=async(te,pe,oe,ye,ge,be,Ce,Re,je,ue,xe)=>{const Se=await X(te,pe,oe,ye,ge,be,Ce,Re,je,ue,xe);return Se.success&&(V(`Paddy truck "${ye}" added successfully`),f(!1)),Se},F=async(te,pe)=>{const oe=await P(te,pe);return oe.success&&(V("Paddy truck updated successfully"),v(null)),oe},ie=async te=>{const pe=O.find(ye=>ye.id===te),oe=await B(te);oe.success?V(`Paddy truck "${pe?.truckPlate}" deleted`):b(oe.error||"Failed to delete paddy truck")},re=()=>{Pb(O),V("Paddy trucks exported to JSON"),k(!1)},ne=()=>{Yb(O),V("Paddy trucks exported to CSV"),k(!1)},le=async te=>{const pe=te.target.files?.[0];if(pe){try{const oe=await Xb(pe);let ye=0,ge=0;for(const be of oe)(await X(be.date,be.supplierId,be.supplierName,be.truckPlate,be.pricePerKg,be.agent||"",be.moistureLevel,be.waybillNumber,be.netWeight,be.deduction,be.bags)).success?ye++:ge++;ye>0&&V(`Imported ${ye} trucks successfully`),ge>0&&b(`${ge} trucks were duplicates and were skipped`)}catch(oe){b(oe.message||"Failed to import trucks")}te.target.value="",k(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Paddy Trucks"}),t.jsx("p",{className:"text-muted",children:"Track and manage incoming paddy trucks"})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[t.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[t.jsx("button",{onClick:te=>{te.stopPropagation(),N(!w)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:t.jsx(ha,{size:20})}),w&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[I>0&&!M&&t.jsxs("button",{onClick:te=>{te.stopPropagation(),_(),N(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Fe,{size:16}),"Sync (",I,")"]}),t.jsxs("button",{onClick:te=>{te.stopPropagation(),re(),N(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:te=>{te.stopPropagation(),ne(),N(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),t.jsx("span",{className:"text-sm",children:"Import from JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:te=>{le(te),N(!1)},className:"hidden"})]})]})]}),t.jsxs("div",{className:"hidden sm:flex gap-2",children:[M&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[t.jsx(Fe,{className:"animate-spin",size:16}),t.jsx("span",{className:"text-sm",children:"Syncing..."})]}),I>0&&!M&&t.jsxs(fe,{variant:"ghost",onClick:_,children:[t.jsx(Fe,{size:16}),"Sync (",I,")"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(fe,{variant:"ghost",onClick:()=>k(!S),children:[t.jsx(Dt,{size:20}),"Import/Export"]}),S&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[t.jsxs("button",{onClick:re,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(Ot,{size:16}),"Export as JSON"]}),t.jsxs("button",{onClick:ne,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[t.jsx(st,{size:16}),"Export as CSV"]}),t.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[t.jsx(vs,{size:16}),"Import from JSON",t.jsx("input",{type:"file",accept:".json",onChange:le,className:"hidden"})]})]})]})]}),t.jsxs("button",{onClick:()=>f(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Truck",children:[t.jsx(Lt,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Add Truck"})]})]})]}),L?t.jsx("div",{className:"glass rounded-xl p-6",children:t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading trucks..."})]})})}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Trucks"}),t.jsx("p",{className:"text-2xl font-bold",children:U.totalTrucks}),t.jsxs("p",{className:"text-xs text-muted mt-1",children:[U.todayTrucks," today"]})]}),t.jsx(qt,{className:"text-blue-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Weight"}),t.jsx("p",{className:"text-2xl font-bold",children:Ba(U.totalWeight)})]}),t.jsx(ma,{className:"text-green-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Total Value"}),t.jsx("p",{className:"text-2xl font-bold",children:_s(U.totalValue)})]}),t.jsx(gs,{className:"text-purple-400",size:24})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted",children:"Avg Price/Kg"}),t.jsx("p",{className:"text-2xl font-bold",children:U.totalWeight>0?_s(U.totalValue/U.totalWeight):_s(0)}),t.jsx("p",{className:"text-xs text-muted mt-1",children:"Weighted average"})]}),t.jsx(gs,{className:"text-orange-400",size:24})]})})]}),t.jsxs(Te,{children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),t.jsx("input",{type:"text",placeholder:"Search by truck, supplier, waybill...",value:l,onChange:te=>r(te.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),t.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:c,onChange:te=>o(te.target.value),children:[t.jsx("option",{value:"all",children:"All Suppliers"}),[...Q].sort((te,pe)=>te.name.localeCompare(pe.name)).map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto",children:[t.jsx("input",{type:"date",value:d,onChange:te=>m(te.target.value),className:"w-full sm:w-auto px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"From Date"}),t.jsx("input",{type:"date",value:p,onChange:te=>g(te.target.value),className:"w-full sm:w-auto px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"To Date"})]})]}),L?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),t.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):t.jsxs(t.Fragment,{children:[t.jsx(Jb,{paddyTrucks:$,searchTerm:l,supplierFilter:c,dateFrom:d?new Date(d):void 0,dateTo:p?new Date(p):void 0,loading:!1,onEditTruck:v,onDeleteTruck:ie,refreshData:Y}),C>1&&t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[t.jsxs("div",{className:"text-sm text-muted",children:["Showing ",(z-1)*T+1," to"," ",Math.min(z*T,K.length)," of"," ",K.length," entries"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>A(te=>Math.max(1,te-1)),disabled:z===1,children:[t.jsx(du,{size:16}),"Previous"]}),t.jsx("div",{className:"flex items-center gap-1",children:(()=>{const te=[];let oe=Math.max(1,z-Math.floor(2.5)),ye=Math.min(C,oe+5-1);ye-oe<4&&(oe=Math.max(1,ye-5+1)),oe>1&&(te.push(t.jsx("button",{onClick:()=>A(1),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:"1"},1)),oe>2&&te.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"start-ellipsis")));for(let ge=oe;ge<=ye;ge++)te.push(t.jsx("button",{onClick:()=>A(ge),className:`px-3 py-1 rounded-lg text-sm ${ge===z?"bg-white/20 text-white font-medium":"hover:bg-glass"}`,children:ge},ge));return ye<C&&(ye<C-1&&te.push(t.jsx("span",{className:"px-2 text-muted",children:"..."},"end-ellipsis")),te.push(t.jsx("button",{onClick:()=>A(C),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:C},C))),te})()}),t.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>A(te=>Math.min(C,te+1)),disabled:z===C,children:["Next",t.jsx(Pl,{size:16})]})]})]})]})]}),t.jsx(Wb,{isOpen:x,onClose:()=>f(!1),onAdd:W}),t.jsx(e1,{isOpen:!!y,truck:y,onClose:()=>v(null),onUpdate:F}),t.jsx(pa,{toasts:H,onClose:E}),(S||w)&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{k(!1),N(!1)}})]})},s1=[{id:1,title:"Sales Report",description:"Detailed sales analysis with customer breakdown",icon:t.jsx(is,{size:24}),lastGenerated:"2024-01-14",frequency:"Daily"},{id:2,title:"Inventory Report",description:"Stock levels and movement analysis",icon:t.jsx(rx,{size:24}),lastGenerated:"2024-01-13",frequency:"Weekly"},{id:3,title:"Financial Summary",description:"Revenue, expenses, and profit analysis",icon:t.jsx(cx,{size:24}),lastGenerated:"2024-01-01",frequency:"Monthly"},{id:4,title:"Customer Analysis",description:"Customer behavior and purchase patterns",icon:t.jsx(st,{size:24}),lastGenerated:"2024-01-10",frequency:"Monthly"}],a1=[{label:"Total Revenue (MTD)",value:"₦45,67,000",change:"+12.3%",positive:!0},{label:"Total Orders (MTD)",value:"342",change:"+8.5%",positive:!0},{label:"Avg Order Value",value:"₦13,350",change:"-2.1%",positive:!1},{label:"Customer Retention",value:"87%",change:"+3.2%",positive:!0}],n1=()=>{const[l,r]=h.useState("month");return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Reports"}),t.jsx("p",{className:"text-muted",children:"Generate and view business reports and analytics"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(fe,{variant:"secondary",children:[t.jsx(fu,{size:20}),"Filters"]}),t.jsxs(fe,{variant:"primary",children:[t.jsx(Dt,{size:20}),"Export All"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:a1.map((c,o)=>t.jsx(Te,{children:t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted mb-1",children:c.label}),t.jsx("p",{className:"text-2xl font-bold mb-1",children:c.value}),t.jsxs("p",{className:`text-sm ${c.positive?"text-green-400":"text-red-400"}`,children:[c.change," from last period"]})]})},o))}),t.jsxs(Te,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Available Reports"}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:l,onChange:c=>r(c.target.value),children:[t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"}),t.jsx("option",{value:"quarter",children:"This Quarter"}),t.jsx("option",{value:"year",children:"This Year"})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s1.map(c=>t.jsxs("div",{className:"glass rounded-lg p-4 glass-hover cursor-pointer",onClick:()=>console.log("Report clicked:",c.title),children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("div",{className:"p-3 glass rounded-lg",children:c.icon}),t.jsx("span",{className:"text-xs text-muted",children:c.frequency})]}),t.jsx("h3",{className:"font-semibold text-lg mb-2",children:c.title}),t.jsx("p",{className:"text-sm text-muted mb-4",children:c.description}),t.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-800/50",children:[t.jsxs("p",{className:"text-xs text-muted",children:["Last generated: ",c.lastGenerated]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(fe,{variant:"ghost",size:"sm",children:t.jsx(Bv,{size:16})}),t.jsx(fe,{variant:"ghost",size:"sm",children:t.jsx(Dt,{size:16})})]})]})]},c.id))})]}),t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(rx,{size:20}),"Revenue Trend (Last 7 Days)"]}),t.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[65,80,45,90,75,60,85].map((c,o)=>t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500/50 to-blue-400/50 rounded-t-lg transition-all duration-300 hover:from-blue-500/70 hover:to-blue-400/70",style:{height:`${c}%`}}),t.jsx("span",{className:"text-xs text-muted",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][o]})]},o))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(cx,{size:20}),"Product Category Distribution"]}),t.jsx("div",{className:"space-y-3",children:[{name:"Rice Products",percentage:45,color:"bg-blue-500"},{name:"Wheat & Flour",percentage:25,color:"bg-green-500"},{name:"Pulses & Lentils",percentage:15,color:"bg-purple-500"},{name:"Oil & Ghee",percentage:10,color:"bg-yellow-500"},{name:"Others",percentage:5,color:"bg-red-500"}].map((c,o)=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"text-sm",children:c.name}),t.jsxs("span",{className:"text-sm font-semibold",children:[c.percentage,"%"]})]}),t.jsx("div",{className:"w-full h-2 bg-dark-surface rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${c.color} transition-all duration-500`,style:{width:`${c.percentage}%`}})})]},o))})]}),t.jsxs(Te,{children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(bt,{className:"text-white",size:20}),"Recent Activities"]}),t.jsx("div",{className:"space-y-3",children:[{time:"2 hours ago",action:"Sales report generated",user:"Admin"},{time:"5 hours ago",action:"Inventory report exported",user:"Manager"},{time:"1 day ago",action:"Financial summary created",user:"Accountant"},{time:"2 days ago",action:"Customer analysis completed",user:"Admin"},{time:"3 days ago",action:"Monthly report scheduled",user:"System"}].map((c,o)=>t.jsxs("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:c.action}),t.jsxs("p",{className:"text-xs text-muted",children:["by ",c.user]})]}),t.jsx("span",{className:"text-xs text-muted",children:c.time})]},o))})]})]})]})},l1=l=>{const c=["products","categories","movements","productionEntries","customers","sales","ledgerEntries","bookedStock","loadings","suppliers","paddyTrucks"],o={metadata:{exportedAt:new Date().toISOString(),version:"2.0",totalRecords:0,dataTypes:c}};return c.forEach(d=>{const m=he.getData(d);m&&m.length>0&&(o[d]=m,o.metadata.totalRecords+=m.length)}),o},i1=(l,r)=>{const c=JSON.stringify(l,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(c),d=`supreme_backup_${new Date().toISOString().split("T")[0]}.json`,m=document.createElement("a");m.setAttribute("href",o),m.setAttribute("download",d),m.click()},Cx=l=>{const r=[];if(!l||typeof l!="object")return r.push("Invalid backup format: not an object"),{valid:!1,errors:r};l.metadata?(l.metadata.version||r.push("Missing version in metadata"),l.metadata.exportedAt||r.push("Missing export date in metadata")):r.push("Missing metadata");const c=["products","categories","movements","productionEntries","customers","sales","ledgerEntries","bookedStock","loadings","suppliers","paddyTrucks"];if(Object.keys(l).forEach(o=>{o!=="metadata"&&!c.includes(o)&&r.push(`Unknown data type: ${o}`)}),c.forEach(o=>{l[o]!==void 0&&!Array.isArray(l[o])&&r.push(`${o} must be an array`)}),l.sales&&l.customers){const o=new Set(l.customers.map(d=>d.id));l.sales.forEach((d,m)=>{d.customerId&&!o.has(d.customerId)&&r.push(`Sale ${m} references non-existent customer ${d.customerId}`)})}if(l.ledgerEntries&&l.customers){const o=new Set(l.customers.map(d=>d.id));l.ledgerEntries.forEach((d,m)=>{d.customerId&&!o.has(d.customerId)&&r.push(`Ledger entry ${m} references non-existent customer ${d.customerId}`)})}if(l.bookedStock&&l.customers){const o=new Set(l.customers.map(d=>d.id));l.bookedStock.forEach((d,m)=>{d.customerId&&!o.has(d.customerId)&&r.push(`Booked stock ${m} references non-existent customer ${d.customerId}`)})}return{valid:r.length===0,errors:r}},r1=async(l,r={mode:"replace",preserveRelationships:!0,validateIntegrity:!0})=>{const c={success:!1,restoredTypes:[],recordCounts:{},errors:[],warnings:[]};try{if(r.validateIntegrity){const d=Cx(l);if(!d.valid)return c.errors=d.errors,c}const o=r.selectedTypes||l.metadata.dataTypes;he.startBatchUpdate();for(const d of o){const m=l[d];if(!(!m||!Array.isArray(m)))try{if(r.mode==="replace")await he.updateData(d,m,!0),c.recordCounts[d]=m.length;else if(r.mode==="merge"){const p=he.getData(d),g=new Set(p.map(v=>v.id)),x=[...p];let f=0,y=0;m.forEach(v=>{if(g.has(v.id)){const S=x.findIndex(k=>k.id===v.id);S!==-1&&(x[S]=v,y++)}else x.push(v),f++}),await he.updateData(d,x,!0),c.recordCounts[d]=f+y,y>0&&c.warnings.push(`${d}: Updated ${y} existing records`)}else if(r.mode==="append"){const p=he.getData(d),g=new Set(p.map(v=>v.id)),x=m.filter(v=>!g.has(v.id)),f=[...p,...x];await he.updateData(d,f,!0),c.recordCounts[d]=x.length;const y=m.length-x.length;y>0&&c.warnings.push(`${d}: Skipped ${y} existing records`)}c.restoredTypes.push(d)}catch(p){c.errors.push(`Failed to restore ${d}: ${p instanceof Error?p.message:"Unknown error"}`)}}await he.endBatchUpdate(),c.success=c.errors.length===0}catch(o){c.errors.push(`Restore failed: ${o instanceof Error?o.message:"Unknown error"}`)}return c},c1=l=>new Promise((r,c)=>{const o=new FileReader;o.onload=d=>{try{const m=d.target?.result,p=JSON.parse(m);r(p)}catch{c(new Error("Invalid backup file format"))}},o.onerror=()=>{c(new Error("Failed to read backup file"))},o.readAsText(l)}),o1=l=>{const r=[];return r.push(`Backup created: ${new Date(l.metadata.exportedAt).toLocaleString()}`),r.push(`Version: ${l.metadata.version}`),r.push(`Total records: ${l.metadata.totalRecords}`),r.push(""),r.push("Data types:"),["products","categories","movements","productionEntries","customers","sales","ledgerEntries","bookedStock","loadings","suppliers","paddyTrucks"].forEach(o=>{const d=l[o];d&&Array.isArray(d)&&r.push(`• ${o}: ${d.length} records`)}),r.join(`
`)},u1=()=>{const[l,r]=h.useState(!1),[c,o]=h.useState(!1),[d,m]=h.useState(!1),[p,g]=h.useState(!1),[x,f]=h.useState(null),[y,v]=h.useState(""),[S,k]=h.useState("replace"),w=h.useRef(null),{isAuthenticated:N}=h.useContext(vu),{toasts:z,showSuccess:A,showError:T,showWarning:O,removeToast:L}=ga(),M=async()=>{m(!0);try{N?(O("Clearing all data..."),await he.clearAllData(),A("All data has been reset successfully")):T("You must be authenticated to reset data")}catch(B){console.error("Error resetting data:",B),T("Failed to reset data")}finally{m(!1),r(!1)}},I=async B=>{const q=B.target.files?.[0];if(q){if(!q.name.endsWith(".json")){T("Please select a JSON file");return}g(!0);try{const _=await c1(q),Y=Cx(_);if(!Y.valid){T(`Invalid backup format: ${Y.errors[0]}`),Y.errors.length>1&&console.error("All validation errors:",Y.errors),g(!1);return}const Q=o1(_);f(_),v(Q),o(!0)}catch(_){console.error("Error reading file:",_),T("Failed to read file. Please ensure it is a valid backup file.")}finally{g(!1),w.current&&(w.current.value="")}}},X=async()=>{if(x){g(!0);try{if(!N){T("You must be authenticated to import data"),g(!1),o(!1);return}O("Restoring backup...");const q=await r1(x,{mode:S,preserveRelationships:!0,validateIntegrity:!0});if(q.success){const _=Object.values(q.recordCounts).reduce((Y,Q)=>Y+Q,0);A(`Backup restored successfully! ${_} records imported.`),q.warnings.forEach(Y=>O(Y))}else T("Failed to restore backup"),q.errors.forEach(_=>console.error(_));f(null),v("")}catch(B){console.error("Error importing data:",B),T("Failed to import data")}finally{g(!1),o(!1)}}},P=async()=>{try{const B=l1();i1(B),A(`Complete backup exported (${B.metadata.totalRecords} total records)`)}catch(B){console.error("Error exporting data:",B),T("Failed to export data")}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),t.jsx("p",{className:"text-muted",children:"Manage your application settings and data"})]}),t.jsx(Te,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(Ah,{className:"text-blue-400",size:24}),t.jsx("h2",{className:"text-xl font-semibold",children:"Data Management"})]}),t.jsx("div",{className:"p-4 glass rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Dt,{className:"text-green-400 mt-1",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium mb-1",children:"Backup Data"}),t.jsx("p",{className:"text-sm text-muted mb-3",children:"Export all your data to a JSON file for backup purposes"}),t.jsxs(fe,{variant:"secondary",onClick:()=>P(),children:[t.jsx(Dt,{size:16}),"Export All Data"]})]})]})}),t.jsx("div",{className:"p-4 glass rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(vs,{className:"text-blue-400 mt-1",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium mb-1",children:"Import Data"}),t.jsx("p",{className:"text-sm text-muted mb-3",children:"Import data from a previously exported JSON file. This will replace all existing data."}),t.jsx("input",{ref:w,type:"file",accept:".json",onChange:I,className:"hidden",id:"import-file-input"}),t.jsxs(fe,{variant:"primary",onClick:()=>w.current?.click(),disabled:p,loading:p,children:[t.jsx(Ot,{size:16}),"Import Data from JSON"]})]})]})}),t.jsx("div",{className:"p-4 glass rounded-lg border border-red-500/20",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(ys,{className:"text-red-400 mt-1",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium mb-1 text-red-400",children:"Reset All Data"}),t.jsxs("p",{className:"text-sm text-muted mb-3",children:["This will permanently delete all your local data including products, customers, sales, inventory movements, booked stock, and loadings.",N&&" GitHub data will remain unchanged until next sync."]}),t.jsxs(fe,{variant:"danger",onClick:()=>r(!0),disabled:d,loading:d,children:[t.jsx(Nt,{size:16}),"Reset All Data"]})]})]})})]})}),t.jsx(Te,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(Ah,{className:"text-green-400",size:24}),t.jsx("h2",{className:"text-xl font-semibold",children:"Data Storage Mode"}),t.jsx("span",{className:"px-2 py-1 text-xs bg-green-500/20 text-green-400 rounded-full",children:"GitHub Direct"})]}),t.jsx("div",{className:"p-4 glass rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(fx,{className:"text-blue-400 mt-1",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium mb-1",children:"GitHub Direct Mode"}),t.jsx("p",{className:"text-sm text-muted mb-3",children:"Your app now uses GitHub as the primary data store. This eliminates multi-device sync issues and ensures all your devices always have the same data."}),t.jsx("div",{className:"mt-3 p-2 bg-green-500/10 rounded text-xs text-green-400",children:"✓ GitHub Direct mode is permanently active. All data operations go directly to GitHub."}),t.jsx("div",{className:"mt-3 p-2 bg-blue-500/10 rounded text-xs text-blue-400",children:"ℹ️ Requires internet connection for write operations. Data is cached for fast reads."})]})]})})]})}),t.jsx(Xt,{isOpen:l,onClose:()=>r(!1),onConfirm:M,title:"Reset All Data",message:"Are you absolutely sure you want to delete all your local data? This action cannot be undone. Please make sure you have exported a backup if needed.",confirmText:"Yes, Reset Everything"}),t.jsx(Xt,{isOpen:c,onClose:()=>{o(!1),f(null),v(""),k("replace")},onConfirm:X,title:"Restore Backup",message:t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"mb-3",children:"Choose how to restore your backup:"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"restoreMode",value:"replace",checked:S==="replace",onChange:()=>k("replace"),className:"mt-1"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Replace All"}),t.jsx("div",{className:"text-xs text-muted",children:"Delete existing data and replace with backup"})]})]}),t.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"restoreMode",value:"merge",checked:S==="merge",onChange:()=>k("merge"),className:"mt-1"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Merge"}),t.jsx("div",{className:"text-xs text-muted",children:"Update existing records and add new ones"})]})]}),t.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"restoreMode",value:"append",checked:S==="append",onChange:()=>k("append"),className:"mt-1"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Append Only"}),t.jsx("div",{className:"text-xs text-muted",children:"Add only new records, skip existing ones"})]})]})]})]}),t.jsxs("div",{className:"p-3 bg-black/30 rounded-lg text-sm font-mono",children:[t.jsx("p",{className:"font-semibold mb-2",children:"Backup Summary:"}),t.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:y})]})]}),confirmText:"Restore Backup"}),t.jsx(pa,{toasts:z,onClose:L})]})};class d1{owner="wissamyah";repo="suprememanagement-data";path="data/data.json";branch="main";token=null;apiBase="https://api.github.com";saveQueue=null;lastSaveTime=0;minSaveInterval=2e3;constructor(){}encodeBase64(r){const c=new TextEncoder().encode(r),o=Array.from(c).map(d=>String.fromCharCode(d)).join("");return btoa(o)}decodeBase64(r){const c=atob(r),o=new Uint8Array(Array.from(c).map(d=>d.charCodeAt(0)));return new TextDecoder().decode(o)}async initialize(r){this.token=r;const c=await this.encryptToken(r);if(sessionStorage.setItem("gh_token",c),!await this.verifyToken())throw new Error("Invalid GitHub token");return!0}async encryptToken(r){try{const c=crypto.getRandomValues(new Uint8Array(16)),o=new TextEncoder,d=o.encode(r),m=await crypto.subtle.importKey("raw",o.encode("supreme-mgmt-2024-secure-key-v2"),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),p=await crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:1e5,hash:"SHA-256"},m,{name:"AES-GCM",length:256},!1,["encrypt"]),g=crypto.getRandomValues(new Uint8Array(12)),x=await crypto.subtle.encrypt({name:"AES-GCM",iv:g},p,d),f=new Uint8Array(c.length+g.length+x.byteLength);return f.set(c,0),f.set(g,c.length),f.set(new Uint8Array(x),c.length+g.length),btoa(String.fromCharCode(...f))}catch(c){return console.error("Encryption failed, falling back to basic encoding:",c),btoa(r)}}async decryptToken(r){try{const c=Uint8Array.from(atob(r),v=>v.charCodeAt(0)),o=c.slice(0,16),d=c.slice(16,28),m=c.slice(28),p=new TextEncoder,g=await crypto.subtle.importKey("raw",p.encode("supreme-mgmt-2024-secure-key-v2"),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),x=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},g,{name:"AES-GCM",length:256},!1,["decrypt"]),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:d},x,m);return new TextDecoder().decode(f)}catch{try{return atob(r)}catch{return null}}}isAuthenticated(){return this.token!==null&&sessionStorage.getItem("gh_token")!==null}async checkAuthentication(){const r=sessionStorage.getItem("gh_token");return r?(this.token=await this.decryptToken(r),await this.verifyToken()):!1}async verifyToken(){if(!this.token)return!1;try{return(await fetch(`${this.apiBase}/user`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(r){return console.error("Token verification failed:",r),!1}}async getFileContent(){try{const r=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}?ref=${this.branch}&t=${Date.now()}`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(r.status===404)return{content:null,sha:null,data:this.getDefaultData()};if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);const c=await r.json(),o=this.decodeBase64(c.content);return{content:o,sha:c.sha,data:JSON.parse(o)}}catch(r){throw console.error("Error fetching file from GitHub:",r),r}}async saveFileContent(r,c="Update data"){try{let o=null;try{console.log("Fetching current file SHA..."),o=(await this.getFileContent()).sha,console.log("Current SHA:",o)}catch{console.log("Creating new file on GitHub")}const d=this.encodeBase64(JSON.stringify(r,null,2)),m={message:`${c} - ${new Date().toISOString()}`,content:d,branch:this.branch};o&&(m.sha=o),console.log("Sending PUT request to GitHub API...",{url:`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,branch:this.branch,hasSha:!!o});const p=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,{method:"PUT",headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(m)});if(!p.ok){const g=await p.json();if(console.error("GitHub API error response:",g),p.status===409){console.log("Conflict detected (likely SHA mismatch), fetching fresh SHA..."),await new Promise(S=>setTimeout(S,500));const f=(await this.getFileContent()).sha;console.log("Retrying with fresh SHA:",f),m.sha=f;const y=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,{method:"PUT",headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(m)});if(y.ok)return console.log("Retry with fresh SHA successful!"),await y.json();const v=await y.json();throw console.error("Retry failed:",v),y.status===409?new Error("File was modified externally. Please refresh and try again."):new Error(`GitHub API error after retry: ${v.message||y.status}`)}throw new Error(`GitHub API error: ${g.message||p.status}`)}return await p.json()}catch(o){throw console.error("Error saving file to GitHub:",o),o}}getDefaultData(){return{products:[],categories:[],movements:[],productionEntries:[],customers:[],suppliers:[],sales:[],loadings:[],ledgerEntries:[],metadata:{lastUpdated:new Date().toISOString(),version:"2.0.0"}}}async loadAllData(){try{return(await this.getFileContent()).data||this.getDefaultData()}catch(r){return console.error("Error loading data from GitHub:",r),this.getDefaultData()}}async clearAllData(){if(!this.isAuthenticated())return console.log("Not authenticated, skipping GitHub clear"),!1;try{const r={products:[],product_categories:[],inventory_movements:[],production_entries:[],customers:[],sales:[]};console.log("Clearing all data in GitHub...");const c=await this.saveAllData(r);return c?console.log("Successfully cleared all data in GitHub"):console.error("Failed to clear data in GitHub"),c}catch(r){return console.error("Error clearing GitHub data:",r),!1}}async saveAllData(r){const o=Date.now()-this.lastSaveTime;if(o<this.minSaveInterval){const d=this.minSaveInterval-o;console.log(`Rate limiting: waiting ${d}ms before save`),await new Promise(m=>setTimeout(m,d))}if(this.saveQueue){console.log("Save already in progress, waiting for it to complete...");try{await this.saveQueue}catch{console.log("Previous save failed, continuing with new save")}}this.saveQueue=this._doSaveWithRetry(r);try{const d=await this.saveQueue;return this.lastSaveTime=Date.now(),d}finally{this.saveQueue=null}}async _doSaveWithRetry(r,c=1){const d=2e3*c;try{return await this._doSave(r)}catch(m){if(c<3)return console.log(`Save attempt ${c} failed, retrying in ${d}ms...`),await new Promise(p=>setTimeout(p,d)),this._doSaveWithRetry(r,c+1);throw console.error("Save failed after 3 attempts:",m),m}}async _doSave(r){try{console.log("Saving data to GitHub...",{products:r.products?.length||0,categories:r.categories?.length||0,movements:r.movements?.length||0,branch:this.branch,path:this.path});const c={...r,metadata:{lastUpdated:new Date().toISOString(),version:"2.0.0"}},o=await this.saveFileContent(c,"Update data");return console.log("GitHub save successful",o?.commit?.sha),!0}catch(c){throw console.error("Error saving data to GitHub:",c),c}}async loadInventory(){return(await this.loadAllData()).products||[]}async saveInventory(r){const c=await this.loadAllData();return c.products=r,this.saveAllData(c)}clearAuthentication(){this.token=null,sessionStorage.removeItem("gh_token")}async getRepoInfo(){try{const r=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);return await r.json()}catch(r){throw console.error("Error fetching repo info:",r),r}}async checkRateLimit(){try{const r=await fetch(`${this.apiBase}/rate_limit`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);return await r.json()}catch(r){throw console.error("Error checking rate limit:",r),r}}}const ua=new d1;class m1{VAULT_BRANCH="supreme-vault";VAULT_PATH="vault/auth.json";ITERATIONS=1e5;async checkVaultExists(r){try{return(await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/contents/${this.VAULT_PATH}?ref=${this.VAULT_BRANCH}`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"}})).ok}catch{return!1}}async deriveKey(r,c){const o=new TextEncoder,d=await crypto.subtle.importKey("raw",o.encode(r),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:this.ITERATIONS,hash:"SHA-256"},d,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async setupVault(r,c){console.log("[VaultAuth] Starting vault setup");const o=crypto.getRandomValues(new Uint8Array(16)),d=crypto.getRandomValues(new Uint8Array(12)),m=await this.deriveKey(c,o),p=new TextEncoder,g=await crypto.subtle.encrypt({name:"AES-GCM",iv:d},m,p.encode(r)),x={encrypted:btoa(String.fromCharCode(...new Uint8Array(g))),salt:btoa(String.fromCharCode(...o)),iv:btoa(String.fromCharCode(...d)),version:"1.0"};if(console.log("[VaultAuth] Saving vault to localStorage"),localStorage.setItem("supreme_vault_cache",JSON.stringify(x)),localStorage.setItem("supreme_vault_setup","true"),!(await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/branches/${this.VAULT_BRANCH}`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"}})).ok){const w=await fetch("https://api.github.com/repos/wissamyah/suprememanagement/git/refs/heads/main",{headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"}}).then(N=>N.json());await fetch("https://api.github.com/repos/wissamyah/suprememanagement/git/refs",{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({ref:`refs/heads/${this.VAULT_BRANCH}`,sha:w.object.sha})})}const y=await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/contents/${this.VAULT_PATH}?ref=${this.VAULT_BRANCH}`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"}});let v;y.ok&&(v=(await y.json()).sha);const S={message:"Update vault",content:btoa(JSON.stringify(x,null,2)),branch:this.VAULT_BRANCH};v&&(S.sha=v),(await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/contents/${this.VAULT_PATH}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(S)})).ok?console.log("[VaultAuth] Vault successfully saved to GitHub"):console.warn("[VaultAuth] Failed to save vault to GitHub, but local copy is saved")}async loginWithPassword(r){let c;const o=localStorage.getItem("supreme_vault_cache");if(o)console.log("[VaultAuth] Using local vault cache"),c=JSON.parse(o);else{console.log("[VaultAuth] No local vault, trying to fetch from GitHub");try{const x=await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/contents/${this.VAULT_PATH}?ref=${this.VAULT_BRANCH}`);if(x.ok){const f=await x.json();c=JSON.parse(atob(f.content)),localStorage.setItem("supreme_vault_cache",JSON.stringify(c)),localStorage.setItem("supreme_vault_setup","true"),console.log("[VaultAuth] Vault synced from GitHub successfully")}else throw new Error('Cannot access vault. For private repos, use "Skip and use token directly" first to sync, then setup password.')}catch{throw new Error('Cannot access vault. For private repos, use "Skip and use token directly" first to sync, then setup password.')}}const d=new Uint8Array(atob(c.salt).split("").map(x=>x.charCodeAt(0))),m=new Uint8Array(atob(c.iv).split("").map(x=>x.charCodeAt(0))),p=new Uint8Array(atob(c.encrypted).split("").map(x=>x.charCodeAt(0))),g=await this.deriveKey(r,d);try{const x=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},g,p),f=new TextDecoder().decode(x);if(!(await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${f}`,Accept:"application/vnd.github.v3+json"}})).ok)throw new Error("Decrypted token is invalid");return f}catch{throw new Error("Invalid password")}}isVaultSetup(){return localStorage.getItem("supreme_vault_setup")==="true"}async initializeVaultForPrivateRepo(r,c){console.log("[VaultAuth] Initializing vault for private repo"),await this.setupVault(r,c),console.log("[VaultAuth] Vault initialization complete")}clearVaultSetup(){localStorage.removeItem("supreme_vault_setup"),localStorage.removeItem("supreme_vault_cache")}async syncVault(r){try{const c=await fetch(`https://api.github.com/repos/wissamyah/suprememanagement/contents/${this.VAULT_PATH}?ref=${this.VAULT_BRANCH}`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"}});if(c.ok){const o=await c.json(),d=JSON.parse(atob(o.content));localStorage.setItem("supreme_vault_cache",JSON.stringify(d))}}catch(c){console.error("Failed to sync vault:",c)}}}const Rl=new m1,f1=({isOpen:l,onSuccess:r})=>{const[c,o]=h.useState(""),[d,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState(""),[y,v]=h.useState(!1),[S,k]=h.useState(""),[w,N]=h.useState("password"),[z,A]=h.useState(!1);h.useEffect(()=>{const M=Rl.isVaultSetup();A(M),N(M?"password":"setup")},[l]);const T=async M=>{if(M.preventDefault(),!d.trim()){k("Please enter your password");return}v(!0),k("");try{const I=await Rl.loginWithPassword(d);await ua.initialize(I),await he.initialize(I),console.log("[Auth] Logged in with password"),r()}catch(I){k(I.message||"Invalid password. Please try again."),console.error("Password login error:",I)}finally{v(!1)}},O=async M=>{if(M.preventDefault(),!c.trim()){k("Please enter your GitHub token");return}v(!0),k("");try{await ua.initialize(c),await he.initialize(c),console.log("[Auth] Initialized with token"),r()}catch(I){k("Invalid token. Please check and try again."),console.error("Token authentication error:",I)}finally{v(!1)}},L=async M=>{if(M.preventDefault(),!c.trim()){k("Please enter your GitHub token");return}if(!p.trim()||p.length<8){k("Password must be at least 8 characters");return}if(p!==x){k("Passwords do not match");return}v(!0),k("");try{await Rl.initializeVaultForPrivateRepo(c,p),await ua.initialize(c),await he.initialize(c),console.log("[Auth] Vault setup complete"),r()}catch(I){k(I.message||"Failed to setup secure vault"),console.error("Vault setup error:",I)}finally{v(!1)}};return l?t.jsx("div",{className:"fixed inset-0 bg-gray-950 flex items-center justify-center z-50",children:t.jsxs("div",{className:"glass p-8 rounded-xl w-full max-w-md",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(fx,{className:"text-blue-400",size:24}),t.jsx("h2",{className:"text-xl font-semibold text-white",children:w==="setup"?"Setup Secure Access":w==="password"?"Welcome Back":"Direct Token Access"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:w==="setup"?"Create a password to secure your GitHub token":w==="password"?"Enter your password to access Supreme Management":"Enter your GitHub token directly"})]}),w==="password"&&t.jsxs("form",{onSubmit:T,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[t.jsx(Xo,{className:"inline w-4 h-4 mr-1"}),"Password"]}),t.jsx("input",{type:"password",value:d,onChange:M=>m(M.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"Enter your password",disabled:y,autoFocus:!0})]}),S&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-500/10 rounded-lg",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("p",{className:"text-sm text-red-400",children:S})]}),t.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium disabled:opacity-50",disabled:y,children:y?"Unlocking...":"Unlock Dashboard"}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("button",{type:"button",onClick:()=>N("token"),className:"text-sm text-blue-400 hover:text-blue-300 block w-full",children:"Use GitHub token instead"}),t.jsx("button",{type:"button",onClick:()=>{Rl.clearVaultSetup(),A(!1),N("setup"),m(""),k("")},className:"text-sm text-orange-400 hover:text-orange-300 block w-full",children:"Forgot password? Reset access"})]})]}),w==="setup"&&t.jsxs("form",{onSubmit:L,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[t.jsx(Th,{className:"inline w-4 h-4 mr-1"}),"GitHub Token"]}),t.jsx("input",{type:"password",value:c,onChange:M=>o(M.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",disabled:y,autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[t.jsx(Xo,{className:"inline w-4 h-4 mr-1"}),"Create Password"]}),t.jsx("input",{type:"password",value:p,onChange:M=>g(M.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"Minimum 8 characters",disabled:y})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[t.jsx(Xo,{className:"inline w-4 h-4 mr-1"}),"Confirm Password"]}),t.jsx("input",{type:"password",value:x,onChange:M=>f(M.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"Confirm your password",disabled:y})]}),S&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-500/10 rounded-lg",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("p",{className:"text-sm text-red-400",children:S})]}),t.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:t.jsx("p",{className:"text-xs text-blue-400",children:"Your token will be encrypted with your password and stored securely in your GitHub repository."})}),t.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium disabled:opacity-50",disabled:y,children:y?"Setting up...":"Setup Secure Access"}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("button",{type:"button",onClick:()=>N("token"),className:"text-sm text-blue-400 hover:text-blue-300 block w-full",children:"Skip and use token directly"}),t.jsx("button",{type:"button",onClick:()=>{N("password"),A(!0)},className:"text-sm text-green-400 hover:text-green-300 block w-full",children:"I already have a password (different device)"})]})]}),w==="token"&&t.jsxs("form",{onSubmit:O,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[t.jsx(Th,{className:"inline w-4 h-4 mr-1"}),"GitHub Token"]}),t.jsx("input",{type:"password",value:c,onChange:M=>o(M.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",disabled:y,autoFocus:!0})]}),S&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-500/10 rounded-lg",children:[t.jsx(it,{className:"text-red-400 mt-0.5",size:16}),t.jsx("p",{className:"text-sm text-red-400",children:S})]}),t.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium disabled:opacity-50",disabled:y,children:y?"Authenticating...":"Connect to GitHub"}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("button",{type:"button",onClick:()=>N(z?"password":"setup"),className:"text-sm text-blue-400 hover:text-blue-300 block w-full",children:z?"Use password instead":"Setup secure access"}),!z&&t.jsx("button",{type:"button",onClick:()=>{Rl.clearVaultSetup(),N("setup")},className:"text-sm text-orange-400 hover:text-orange-300 block w-full",children:"Reset and setup password access"})]})]})]})}):null},vu=Pg.createContext({isAuthenticated:!1,isLoading:!0,syncStatus:"idle",lastSync:null,syncData:async()=>{},logout:()=>{}});function h1(){const[l,r]=h.useState(!1),[c,o]=h.useState(!1),[d,m]=h.useState(!0),[p,g]=h.useState("idle"),[x,f]=h.useState(null),y=h.useRef(!0);h.useEffect(()=>(y.current=!0,()=>{y.current=!1}),[]),h.useEffect(()=>(v(),()=>{he.destroy()}),[]);const v=async()=>{if(y.current){m(!0);try{const A=await ua.checkAuthentication();if(y.current){if(o(A),A){const T=sessionStorage.getItem("gh_token");if(T){const O=await ua.decryptToken(T);O&&await he.initialize(O)}}A||r(!0),m(!1)}}catch(A){console.error("Auth check failed:",A),y.current&&(r(!0),m(!1))}}},S=async()=>{if(y.current)try{g("syncing"),await ua.loadAllData(),y.current&&(f(new Date().toISOString()),g("success"),setTimeout(()=>{y.current&&g("idle")},3e3))}catch(A){console.error("Failed to load data from GitHub:",A),y.current&&(g("error"),setTimeout(()=>{y.current&&g("idle")},5e3))}},k=async()=>{if(!c||!y.current){y.current&&r(!0);return}try{g("syncing"),await ua.loadAllData(),y.current&&(f(new Date().toISOString()),g("success"),setTimeout(()=>{y.current&&g("idle")},3e3))}catch(A){console.error("Sync failed:",A),y.current&&(g("error"),setTimeout(()=>{y.current&&g("idle")},5e3))}},w=async()=>{y.current&&(o(!0),r(!1),await S())},z={isAuthenticated:c,isLoading:d,syncStatus:p,lastSync:x,syncData:k,logout:()=>{ua.clearAuthentication(),y.current&&(o(!1),f(null),g("idle"),r(!0))}};return d?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing..."})]})}):t.jsx(vu.Provider,{value:z,children:t.jsx(vj,{children:t.jsxs(xy,{children:[t.jsx(P0,{children:t.jsxs(Yt,{path:"/",element:t.jsx(dj,{}),children:[t.jsx(Yt,{index:!0,element:t.jsx(Ij,{})}),t.jsx(Yt,{path:"inventory",element:t.jsx(lb,{})}),t.jsx(Yt,{path:"customers",element:t.jsx(mb,{})}),t.jsx(Yt,{path:"customers/sales",element:t.jsx(gb,{})}),t.jsx(Yt,{path:"customers/loadings",element:t.jsx(kb,{})}),t.jsx(Yt,{path:"customers/ledger",element:t.jsx($h,{})}),t.jsx(Yt,{path:"customers/ledger/:customerId",element:t.jsx($h,{})}),t.jsx(Yt,{path:"suppliers",element:t.jsx(Ib,{})}),t.jsx(Yt,{path:"suppliers/paddy-trucks",element:t.jsx(t1,{})}),t.jsx(Yt,{path:"reports",element:t.jsx(n1,{})}),t.jsx(Yt,{path:"settings",element:t.jsx(u1,{})})]})}),t.jsx(f1,{isOpen:l,onSuccess:w,onClose:()=>r(!1)})]})})})}Jg.createRoot(document.getElementById("root")).render(t.jsx(h.StrictMode,{children:t.jsx(h1,{})}));
