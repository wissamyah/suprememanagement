(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&u(y)}).observe(document,{childList:!0,subtree:!0});function o(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(d){if(d.ep)return;d.ep=!0;const h=o(d);fetch(d.href,h)}})();function Tp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zo={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function zp(){if(xh)return Cl;xh=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(u,d,h){var y=null;if(h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),"key"in d){h={};for(var p in d)p!=="key"&&(h[p]=d[p])}else h=d;return d=h.ref,{$$typeof:i,type:u,key:y,ref:d!==void 0?d:null,props:h}}return Cl.Fragment=c,Cl.jsx=o,Cl.jsxs=o,Cl}var gh;function Mp(){return gh||(gh=1,Zo.exports=zp()),Zo.exports}var a=Mp(),Ko={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function _p(){if(ph)return Me;ph=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),y=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function B(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function C(N,E,U){this.props=N,this.context=E,this.refs=D,this.updater=U||b}C.prototype.isReactComponent={},C.prototype.setState=function(N,E){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,E,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function L(){}L.prototype=C.prototype;function A(N,E,U){this.props=N,this.context=E,this.refs=D,this.updater=U||b}var z=A.prototype=new L;z.constructor=A,S(z,C.prototype),z.isPureReactComponent=!0;var ee=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function T(N,E,U,P,O,V){return U=V.ref,{$$typeof:i,type:N,key:E,ref:U!==void 0?U:null,props:V}}function q(N,E){return T(N.type,E,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function _(N){var E={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(U){return E[U]})}var Q=/\/+/g;function H(N,E){return typeof N=="object"&&N!==null&&N.key!=null?_(""+N.key):E.toString(36)}function Z(){}function te(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Z,Z):(N.status="pending",N.then(function(E){N.status==="pending"&&(N.status="fulfilled",N.value=E)},function(E){N.status==="pending"&&(N.status="rejected",N.reason=E)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function de(N,E,U,P,O){var V=typeof N;(V==="undefined"||V==="boolean")&&(N=null);var se=!1;if(N===null)se=!0;else switch(V){case"bigint":case"string":case"number":se=!0;break;case"object":switch(N.$$typeof){case i:case c:se=!0;break;case v:return se=N._init,de(se(N._payload),E,U,P,O)}}if(se)return O=O(N),se=P===""?"."+H(N,0):P,ee(O)?(U="",se!=null&&(U=se.replace(Q,"$&/")+"/"),de(O,E,U,"",function(fe){return fe})):O!=null&&(R(O)&&(O=q(O,U+(O.key==null||N&&N.key===O.key?"":(""+O.key).replace(Q,"$&/")+"/")+se)),E.push(O)),1;se=0;var ue=P===""?".":P+":";if(ee(N))for(var le=0;le<N.length;le++)P=N[le],V=ue+H(P,le),se+=de(P,E,U,V,O);else if(le=B(N),typeof le=="function")for(N=le.call(N),le=0;!(P=N.next()).done;)P=P.value,V=ue+H(P,le++),se+=de(P,E,U,V,O);else if(V==="object"){if(typeof N.then=="function")return de(te(N),E,U,P,O);throw E=String(N),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return se}function G(N,E,U){if(N==null)return N;var P=[],O=0;return de(N,P,"","",function(V){return E.call(U,V,O++)}),P}function Y(N){if(N._status===-1){var E=N._result;E=E(),E.then(function(U){(N._status===0||N._status===-1)&&(N._status=1,N._result=U)},function(U){(N._status===0||N._status===-1)&&(N._status=2,N._result=U)}),N._status===-1&&(N._status=0,N._result=E)}if(N._status===1)return N._result.default;throw N._result}var ie=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function ne(){}return Me.Children={map:G,forEach:function(N,E,U){G(N,function(){E.apply(this,arguments)},U)},count:function(N){var E=0;return G(N,function(){E++}),E},toArray:function(N){return G(N,function(E){return E})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Me.Component=C,Me.Fragment=o,Me.Profiler=d,Me.PureComponent=A,Me.StrictMode=u,Me.Suspense=x,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return k.H.useMemoCache(N)}},Me.cache=function(N){return function(){return N.apply(null,arguments)}},Me.cloneElement=function(N,E,U){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var P=S({},N.props),O=N.key,V=void 0;if(E!=null)for(se in E.ref!==void 0&&(V=void 0),E.key!==void 0&&(O=""+E.key),E)!J.call(E,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&E.ref===void 0||(P[se]=E[se]);var se=arguments.length-2;if(se===1)P.children=U;else if(1<se){for(var ue=Array(se),le=0;le<se;le++)ue[le]=arguments[le+2];P.children=ue}return T(N.type,O,void 0,void 0,V,P)},Me.createContext=function(N){return N={$$typeof:y,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:h,_context:N},N},Me.createElement=function(N,E,U){var P,O={},V=null;if(E!=null)for(P in E.key!==void 0&&(V=""+E.key),E)J.call(E,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(O[P]=E[P]);var se=arguments.length-2;if(se===1)O.children=U;else if(1<se){for(var ue=Array(se),le=0;le<se;le++)ue[le]=arguments[le+2];O.children=ue}if(N&&N.defaultProps)for(P in se=N.defaultProps,se)O[P]===void 0&&(O[P]=se[P]);return T(N,V,void 0,void 0,null,O)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(N){return{$$typeof:p,render:N}},Me.isValidElement=R,Me.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:Y}},Me.memo=function(N,E){return{$$typeof:f,type:N,compare:E===void 0?null:E}},Me.startTransition=function(N){var E=k.T,U={};k.T=U;try{var P=N(),O=k.S;O!==null&&O(U,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ne,ie)}catch(V){ie(V)}finally{k.T=E}},Me.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Me.use=function(N){return k.H.use(N)},Me.useActionState=function(N,E,U){return k.H.useActionState(N,E,U)},Me.useCallback=function(N,E){return k.H.useCallback(N,E)},Me.useContext=function(N){return k.H.useContext(N)},Me.useDebugValue=function(){},Me.useDeferredValue=function(N,E){return k.H.useDeferredValue(N,E)},Me.useEffect=function(N,E,U){var P=k.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(N,E)},Me.useId=function(){return k.H.useId()},Me.useImperativeHandle=function(N,E,U){return k.H.useImperativeHandle(N,E,U)},Me.useInsertionEffect=function(N,E){return k.H.useInsertionEffect(N,E)},Me.useLayoutEffect=function(N,E){return k.H.useLayoutEffect(N,E)},Me.useMemo=function(N,E){return k.H.useMemo(N,E)},Me.useOptimistic=function(N,E){return k.H.useOptimistic(N,E)},Me.useReducer=function(N,E,U){return k.H.useReducer(N,E,U)},Me.useRef=function(N){return k.H.useRef(N)},Me.useState=function(N){return k.H.useState(N)},Me.useSyncExternalStore=function(N,E,U){return k.H.useSyncExternalStore(N,E,U)},Me.useTransition=function(){return k.H.useTransition()},Me.version="19.1.1",Me}var yh;function uu(){return yh||(yh=1,Ko.exports=_p()),Ko.exports}var m=uu();const Op=Tp(m);var Fo={exports:{}},kl={},Wo={exports:{}},eu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh;function qp(){return vh||(vh=1,(function(i){function c(G,Y){var ie=G.length;G.push(Y);e:for(;0<ie;){var ne=ie-1>>>1,N=G[ne];if(0<d(N,Y))G[ne]=Y,G[ie]=N,ie=ne;else break e}}function o(G){return G.length===0?null:G[0]}function u(G){if(G.length===0)return null;var Y=G[0],ie=G.pop();if(ie!==Y){G[0]=ie;e:for(var ne=0,N=G.length,E=N>>>1;ne<E;){var U=2*(ne+1)-1,P=G[U],O=U+1,V=G[O];if(0>d(P,ie))O<N&&0>d(V,P)?(G[ne]=V,G[O]=ie,ne=O):(G[ne]=P,G[U]=ie,ne=U);else if(O<N&&0>d(V,ie))G[ne]=V,G[O]=ie,ne=O;else break e}}return Y}function d(G,Y){var ie=G.sortIndex-Y.sortIndex;return ie!==0?ie:G.id-Y.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var y=Date,p=y.now();i.unstable_now=function(){return y.now()-p}}var x=[],f=[],v=1,w=null,B=3,b=!1,S=!1,D=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ee(G){for(var Y=o(f);Y!==null;){if(Y.callback===null)u(f);else if(Y.startTime<=G)u(f),Y.sortIndex=Y.expirationTime,c(x,Y);else break;Y=o(f)}}function k(G){if(D=!1,ee(G),!S)if(o(x)!==null)S=!0,J||(J=!0,H());else{var Y=o(f);Y!==null&&de(k,Y.startTime-G)}}var J=!1,T=-1,q=5,R=-1;function _(){return C?!0:!(i.unstable_now()-R<q)}function Q(){if(C=!1,J){var G=i.unstable_now();R=G;var Y=!0;try{e:{S=!1,D&&(D=!1,A(T),T=-1),b=!0;var ie=B;try{t:{for(ee(G),w=o(x);w!==null&&!(w.expirationTime>G&&_());){var ne=w.callback;if(typeof ne=="function"){w.callback=null,B=w.priorityLevel;var N=ne(w.expirationTime<=G);if(G=i.unstable_now(),typeof N=="function"){w.callback=N,ee(G),Y=!0;break t}w===o(x)&&u(x),ee(G)}else u(x);w=o(x)}if(w!==null)Y=!0;else{var E=o(f);E!==null&&de(k,E.startTime-G),Y=!1}}break e}finally{w=null,B=ie,b=!1}Y=void 0}}finally{Y?H():J=!1}}}var H;if(typeof z=="function")H=function(){z(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,te=Z.port2;Z.port1.onmessage=Q,H=function(){te.postMessage(null)}}else H=function(){L(Q,0)};function de(G,Y){T=L(function(){G(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return B},i.unstable_next=function(G){switch(B){case 1:case 2:case 3:var Y=3;break;default:Y=B}var ie=B;B=Y;try{return G()}finally{B=ie}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=B;B=G;try{return Y()}finally{B=ie}},i.unstable_scheduleCallback=function(G,Y,ie){var ne=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,G){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ie+N,G={id:v++,callback:Y,priorityLevel:G,startTime:ie,expirationTime:N,sortIndex:-1},ie>ne?(G.sortIndex=ie,c(f,G),o(x)===null&&G===o(f)&&(D?(A(T),T=-1):D=!0,de(k,ie-ne))):(G.sortIndex=N,c(x,G),S||b||(S=!0,J||(J=!0,H()))),G},i.unstable_shouldYield=_,i.unstable_wrapCallback=function(G){var Y=B;return function(){var ie=B;B=Y;try{return G.apply(this,arguments)}finally{B=ie}}}})(eu)),eu}var jh;function Rp(){return jh||(jh=1,Wo.exports=qp()),Wo.exports}var tu={exports:{}},Nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function Lp(){if(bh)return Nt;bh=1;var i=uu();function c(x){var f="https://react.dev/errors/"+x;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+x+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var u={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(x,f,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:x,containerInfo:f,implementation:v}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,f){if(x==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Nt.createPortal=function(x,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(c(299));return h(x,f,null,v)},Nt.flushSync=function(x){var f=y.T,v=u.p;try{if(y.T=null,u.p=2,x)return x()}finally{y.T=f,u.p=v,u.d.f()}},Nt.preconnect=function(x,f){typeof x=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,u.d.C(x,f))},Nt.prefetchDNS=function(x){typeof x=="string"&&u.d.D(x)},Nt.preinit=function(x,f){if(typeof x=="string"&&f&&typeof f.as=="string"){var v=f.as,w=p(v,f.crossOrigin),B=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?u.d.S(x,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:w,integrity:B,fetchPriority:b}):v==="script"&&u.d.X(x,{crossOrigin:w,integrity:B,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Nt.preinitModule=function(x,f){if(typeof x=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=p(f.as,f.crossOrigin);u.d.M(x,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&u.d.M(x)},Nt.preload=function(x,f){if(typeof x=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,w=p(v,f.crossOrigin);u.d.L(x,v,{crossOrigin:w,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Nt.preloadModule=function(x,f){if(typeof x=="string")if(f){var v=p(f.as,f.crossOrigin);u.d.m(x,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else u.d.m(x)},Nt.requestFormReset=function(x){u.d.r(x)},Nt.unstable_batchedUpdates=function(x,f){return x(f)},Nt.useFormState=function(x,f,v){return y.H.useFormState(x,f,v)},Nt.useFormStatus=function(){return y.H.useHostTransitionStatus()},Nt.version="19.1.1",Nt}var Nh;function Gh(){if(Nh)return tu.exports;Nh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),tu.exports=Lp(),tu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh;function Bp(){if(Sh)return kl;Sh=1;var i=Rp(),c=uu(),o=Gh();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function y(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(u(188))}function x(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(u(188));return t!==e?null:e}for(var s=e,n=t;;){var l=s.return;if(l===null)break;var r=l.alternate;if(r===null){if(n=l.return,n!==null){s=n;continue}break}if(l.child===r.child){for(r=l.child;r;){if(r===s)return p(l),e;if(r===n)return p(l),t;r=r.sibling}throw Error(u(188))}if(s.return!==n.return)s=l,n=r;else{for(var g=!1,j=l.child;j;){if(j===s){g=!0,s=l,n=r;break}if(j===n){g=!0,n=l,s=r;break}j=j.sibling}if(!g){for(j=r.child;j;){if(j===s){g=!0,s=r,n=l;break}if(j===n){g=!0,n=r,s=l;break}j=j.sibling}if(!g)throw Error(u(189))}}if(s.alternate!==n)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?e:t}function f(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=f(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),_=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Symbol.for("react.client.reference");function te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Z?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case k:return"Suspense";case J:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case z:return(e.displayName||"Context")+".Provider";case A:return(e._context.displayName||"Context")+".Consumer";case ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:te(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}var de=Array.isArray,G=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ne=[],N=-1;function E(e){return{current:e}}function U(e){0>N||(e.current=ne[N],ne[N]=null,N--)}function P(e,t){N++,ne[N]=e.current,e.current=t}var O=E(null),V=E(null),se=E(null),ue=E(null);function le(e,t){switch(P(se,t),P(V,e),P(O,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gf(t),e=Vf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(O),P(O,e)}function fe(){U(O),U(V),U(se)}function je(e){e.memoizedState!==null&&P(ue,e);var t=O.current,s=Vf(t,e.type);t!==s&&(P(V,e),P(O,s))}function ge(e){V.current===e&&(U(O),U(V)),ue.current===e&&(U(ue),jl._currentValue=ie)}var I=Object.prototype.hasOwnProperty,xe=i.unstable_scheduleCallback,Ne=i.unstable_cancelCallback,Ce=i.unstable_shouldYield,me=i.unstable_requestPaint,he=i.unstable_now,Te=i.unstable_getCurrentPriorityLevel,we=i.unstable_ImmediatePriority,De=i.unstable_UserBlockingPriority,Oe=i.unstable_NormalPriority,vt=i.unstable_LowPriority,Ts=i.unstable_IdlePriority,mx=i.log,fx=i.unstable_setDisableYieldValue,An=null,Lt=null;function Ra(e){if(typeof mx=="function"&&fx(e),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(An,e)}catch{}}var Bt=Math.clz32?Math.clz32:gx,hx=Math.log,xx=Math.LN2;function gx(e){return e>>>=0,e===0?32:31-(hx(e)/xx|0)|0}var ei=256,ti=4194304;function os(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ai(e,t,s){var n=e.pendingLanes;if(n===0)return 0;var l=0,r=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var j=n&134217727;return j!==0?(n=j&~r,n!==0?l=os(n):(g&=j,g!==0?l=os(g):s||(s=j&~e,s!==0&&(l=os(s))))):(j=n&~r,j!==0?l=os(j):g!==0?l=os(g):s||(s=n&~e,s!==0&&(l=os(s)))),l===0?0:t!==0&&t!==l&&(t&r)===0&&(r=l&-l,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:l}function Dn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function px(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cu(){var e=ei;return ei<<=1,(ei&4194048)===0&&(ei=256),e}function ku(){var e=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),e}function Br(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Tn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yx(e,t,s,n,l,r){var g=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var j=e.entanglements,M=e.expirationTimes,F=e.hiddenUpdates;for(s=g&~s;0<s;){var re=31-Bt(s),oe=1<<re;j[re]=0,M[re]=-1;var W=F[re];if(W!==null)for(F[re]=null,re=0;re<W.length;re++){var ae=W[re];ae!==null&&(ae.lane&=-536870913)}s&=~oe}n!==0&&Eu(e,n,0),r!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=r&~(g&~t))}function Eu(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Bt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|s&4194090}function Au(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Bt(s),l=1<<n;l&t|e[n]&t&&(e[n]|=t),s&=~l}}function Hr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ur(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Du(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:oh(e.type))}function vx(e,t){var s=Y.p;try{return Y.p=e,t()}finally{Y.p=s}}var La=Math.random().toString(36).slice(2),jt="__reactFiber$"+La,kt="__reactProps$"+La,zs="__reactContainer$"+La,Qr="__reactEvents$"+La,jx="__reactListeners$"+La,bx="__reactHandles$"+La,Tu="__reactResources$"+La,zn="__reactMarker$"+La;function $r(e){delete e[jt],delete e[kt],delete e[Qr],delete e[jx],delete e[bx]}function Ms(e){var t=e[jt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[zs]||s[jt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Xf(e);e!==null;){if(s=e[jt])return s;e=Xf(e)}return t}e=s,s=e.parentNode}return null}function _s(e){if(e=e[jt]||e[zs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Mn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Os(e){var t=e[Tu];return t||(t=e[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ut(e){e[zn]=!0}var zu=new Set,Mu={};function us(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(Mu[e]=t,e=0;e<t.length;e++)zu.add(t[e])}var Nx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_u={},Ou={};function Sx(e){return I.call(Ou,e)?!0:I.call(_u,e)?!1:Nx.test(e)?Ou[e]=!0:(_u[e]=!0,!1)}function si(e,t,s){if(Sx(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function ni(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function pa(e,t,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+n)}}var Gr,qu;function Rs(e){if(Gr===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Gr=t&&t[1]||"",qu=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gr+e+qu}var Vr=!1;function Yr(e,t){if(!e||Vr)return"";Vr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ae){var W=ae}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(ae){W=ae}e.call(oe.prototype)}}else{try{throw Error()}catch(ae){W=ae}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ae){if(ae&&W&&typeof ae.stack=="string")return[ae.stack,W.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),g=r[0],j=r[1];if(g&&j){var M=g.split(`
`),F=j.split(`
`);for(l=n=0;n<M.length&&!M[n].includes("DetermineComponentFrameRoot");)n++;for(;l<F.length&&!F[l].includes("DetermineComponentFrameRoot");)l++;if(n===M.length||l===F.length)for(n=M.length-1,l=F.length-1;1<=n&&0<=l&&M[n]!==F[l];)l--;for(;1<=n&&0<=l;n--,l--)if(M[n]!==F[l]){if(n!==1||l!==1)do if(n--,l--,0>l||M[n]!==F[l]){var re=`
`+M[n].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=n&&0<=l);break}}}finally{Vr=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Rs(s):""}function wx(e){switch(e.tag){case 26:case 27:case 5:return Rs(e.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 15:return Yr(e.type,!1);case 11:return Yr(e.type.render,!1);case 1:return Yr(e.type,!0);case 31:return Rs("Activity");default:return""}}function Ru(e){try{var t="";do t+=wx(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cx(e){var t=Lu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(g){n=""+g,r.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(g){n=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function li(e){e._valueTracker||(e._valueTracker=Cx(e))}function Bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Lu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kx=/[\n"\\]/g;function Pt(e){return e.replace(kx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ir(e,t,s,n,l,r,g,j){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+It(t)):e.value!==""+It(t)&&(e.value=""+It(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Pr(e,g,It(t)):s!=null?Pr(e,g,It(s)):n!=null&&e.removeAttribute("value"),l==null&&r!=null&&(e.defaultChecked=!!r),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+It(j):e.removeAttribute("name")}function Hu(e,t,s,n,l,r,g,j){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;s=s!=null?""+It(s):"",t=t!=null?""+It(t):s,j||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=j?e.checked:!!n,e.defaultChecked=!!n,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function Pr(e,t,s){t==="number"&&ii(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ls(e,t,s,n){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&n&&(e[s].defaultSelected=!0)}else{for(s=""+It(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Uu(e,t,s){if(t!=null&&(t=""+It(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+It(s):""}function Qu(e,t,s,n){if(t==null){if(n!=null){if(s!=null)throw Error(u(92));if(de(n)){if(1<n.length)throw Error(u(93));n=n[0]}s=n}s==null&&(s=""),t=s}s=It(t),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n)}function Bs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Ex=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(e,t,s){var n=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,s):typeof s!="number"||s===0||Ex.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Gu(e,t,s){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&s[l]!==n&&$u(e,l,n)}else for(var r in t)t.hasOwnProperty(r)&&$u(e,r,t[r])}function Xr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ax=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(e){return Dx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Jr=null;function Zr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hs=null,Us=null;function Vu(e){var t=_s(e);if(t&&(e=t.stateNode)){var s=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ir(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Pt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var l=n[kt]||null;if(!l)throw Error(u(90));Ir(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<s.length;t++)n=s[t],n.form===e.form&&Bu(n)}break e;case"textarea":Uu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ls(e,!!s.multiple,t,!1)}}}var Kr=!1;function Yu(e,t,s){if(Kr)return e(t,s);Kr=!0;try{var n=e(t);return n}finally{if(Kr=!1,(Hs!==null||Us!==null)&&(Ii(),Hs&&(t=Hs,e=Us,Us=Hs=null,Vu(t),e)))for(t=0;t<e.length;t++)Vu(e[t])}}function _n(e,t){var s=e.stateNode;if(s===null)return null;var n=s[kt]||null;if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(u(231,t,typeof s));return s}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fr=!1;if(ya)try{var On={};Object.defineProperty(On,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Fr=!1}var Ba=null,Wr=null,ci=null;function Iu(){if(ci)return ci;var e,t=Wr,s=t.length,n,l="value"in Ba?Ba.value:Ba.textContent,r=l.length;for(e=0;e<s&&t[e]===l[e];e++);var g=s-e;for(n=1;n<=g&&t[s-n]===l[r-n];n++);return ci=l.slice(e,1<n?1-n:void 0)}function oi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ui(){return!0}function Pu(){return!1}function Et(e){function t(s,n,l,r,g){this._reactName=s,this._targetInst=l,this.type=n,this.nativeEvent=r,this.target=g,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(s=e[j],this[j]=s?s(r):r[j]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ui:Pu,this.isPropagationStopped=Pu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),t}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=Et(ds),qn=v({},ds,{view:0,detail:0}),Tx=Et(qn),ec,tc,Rn,mi=v({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(ec=e.screenX-Rn.screenX,tc=e.screenY-Rn.screenY):tc=ec=0,Rn=e),ec)},movementY:function(e){return"movementY"in e?e.movementY:tc}}),Xu=Et(mi),zx=v({},mi,{dataTransfer:0}),Mx=Et(zx),_x=v({},qn,{relatedTarget:0}),ac=Et(_x),Ox=v({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),qx=Et(Ox),Rx=v({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lx=Et(Rx),Bx=v({},ds,{data:0}),Ju=Et(Bx),Hx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ux={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $x(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qx[e])?!!t[e]:!1}function sc(){return $x}var Gx=v({},qn,{key:function(e){if(e.key){var t=Hx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ux[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(e){return e.type==="keypress"?oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vx=Et(Gx),Yx=v({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zu=Et(Yx),Ix=v({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Px=Et(Ix),Xx=v({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jx=Et(Xx),Zx=v({},mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kx=Et(Zx),Fx=v({},ds,{newState:0,oldState:0}),Wx=Et(Fx),eg=[9,13,27,32],nc=ya&&"CompositionEvent"in window,Ln=null;ya&&"documentMode"in document&&(Ln=document.documentMode);var tg=ya&&"TextEvent"in window&&!Ln,Ku=ya&&(!nc||Ln&&8<Ln&&11>=Ln),Fu=" ",Wu=!1;function ed(e,t){switch(e){case"keyup":return eg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function ag(e,t){switch(e){case"compositionend":return td(t);case"keypress":return t.which!==32?null:(Wu=!0,Fu);case"textInput":return e=t.data,e===Fu&&Wu?null:e;default:return null}}function sg(e,t){if(Qs)return e==="compositionend"||!nc&&ed(e,t)?(e=Iu(),ci=Wr=Ba=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ku&&t.locale!=="ko"?null:t.data;default:return null}}var ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ng[e.type]:t==="textarea"}function sd(e,t,s,n){Hs?Us?Us.push(n):Us=[n]:Hs=n,t=Fi(t,"onChange"),0<t.length&&(s=new di("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Bn=null,Hn=null;function lg(e){Bf(e,0)}function fi(e){var t=Mn(e);if(Bu(t))return e}function nd(e,t){if(e==="change")return t}var ld=!1;if(ya){var lc;if(ya){var ic="oninput"in document;if(!ic){var id=document.createElement("div");id.setAttribute("oninput","return;"),ic=typeof id.oninput=="function"}lc=ic}else lc=!1;ld=lc&&(!document.documentMode||9<document.documentMode)}function rd(){Bn&&(Bn.detachEvent("onpropertychange",cd),Hn=Bn=null)}function cd(e){if(e.propertyName==="value"&&fi(Hn)){var t=[];sd(t,Hn,e,Zr(e)),Yu(lg,t)}}function ig(e,t,s){e==="focusin"?(rd(),Bn=t,Hn=s,Bn.attachEvent("onpropertychange",cd)):e==="focusout"&&rd()}function rg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fi(Hn)}function cg(e,t){if(e==="click")return fi(t)}function og(e,t){if(e==="input"||e==="change")return fi(t)}function ug(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:ug;function Un(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var l=s[n];if(!I.call(t,l)||!Ht(e[l],t[l]))return!1}return!0}function od(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ud(e,t){var s=od(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=od(s)}}function dd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function md(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ii(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ii(e.document)}return t}function rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var dg=ya&&"documentMode"in document&&11>=document.documentMode,$s=null,cc=null,Qn=null,oc=!1;function fd(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;oc||$s==null||$s!==ii(n)||(n=$s,"selectionStart"in n&&rc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qn&&Un(Qn,n)||(Qn=n,n=Fi(cc,"onSelect"),0<n.length&&(t=new di("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=$s)))}function ms(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Gs={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},uc={},hd={};ya&&(hd=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function fs(e){if(uc[e])return uc[e];if(!Gs[e])return e;var t=Gs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in hd)return uc[e]=t[s];return e}var xd=fs("animationend"),gd=fs("animationiteration"),pd=fs("animationstart"),mg=fs("transitionrun"),fg=fs("transitionstart"),hg=fs("transitioncancel"),yd=fs("transitionend"),vd=new Map,dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dc.push("scrollEnd");function aa(e,t){vd.set(e,t),us(t,[e])}var jd=new WeakMap;function Xt(e,t){if(typeof e=="object"&&e!==null){var s=jd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Ru(t)},jd.set(e,t),t)}return{value:e,source:t,stack:Ru(t)}}var Jt=[],Vs=0,mc=0;function hi(){for(var e=Vs,t=mc=Vs=0;t<e;){var s=Jt[t];Jt[t++]=null;var n=Jt[t];Jt[t++]=null;var l=Jt[t];Jt[t++]=null;var r=Jt[t];if(Jt[t++]=null,n!==null&&l!==null){var g=n.pending;g===null?l.next=l:(l.next=g.next,g.next=l),n.pending=l}r!==0&&bd(s,l,r)}}function xi(e,t,s,n){Jt[Vs++]=e,Jt[Vs++]=t,Jt[Vs++]=s,Jt[Vs++]=n,mc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function fc(e,t,s,n){return xi(e,t,s,n),gi(e)}function Ys(e,t){return xi(e,null,null,t),gi(e)}function bd(e,t,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var l=!1,r=e.return;r!==null;)r.childLanes|=s,n=r.alternate,n!==null&&(n.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(l=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,l&&t!==null&&(l=31-Bt(s),e=r.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=s|536870912),r):null}function gi(e){if(50<ml)throw ml=0,jo=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Is={};function xg(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,s,n){return new xg(e,t,s,n)}function hc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function va(e,t){var s=e.alternate;return s===null?(s=Ut(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Nd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pi(e,t,s,n,l,r){var g=0;if(n=e,typeof e=="function")hc(e)&&(g=1);else if(typeof e=="string")g=pp(e,s,O.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case R:return e=Ut(31,s,t,l),e.elementType=R,e.lanes=r,e;case S:return hs(s.children,l,r,t);case D:g=8,l|=24;break;case C:return e=Ut(12,s,t,l|2),e.elementType=C,e.lanes=r,e;case k:return e=Ut(13,s,t,l),e.elementType=k,e.lanes=r,e;case J:return e=Ut(19,s,t,l),e.elementType=J,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case z:g=10;break e;case A:g=9;break e;case ee:g=11;break e;case T:g=14;break e;case q:g=16,n=null;break e}g=29,s=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=Ut(g,s,t,l),t.elementType=e,t.type=n,t.lanes=r,t}function hs(e,t,s,n){return e=Ut(7,e,n,t),e.lanes=s,e}function xc(e,t,s){return e=Ut(6,e,null,t),e.lanes=s,e}function gc(e,t,s){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ps=[],Xs=0,yi=null,vi=0,Zt=[],Kt=0,xs=null,ja=1,ba="";function gs(e,t){Ps[Xs++]=vi,Ps[Xs++]=yi,yi=e,vi=t}function Sd(e,t,s){Zt[Kt++]=ja,Zt[Kt++]=ba,Zt[Kt++]=xs,xs=e;var n=ja;e=ba;var l=32-Bt(n)-1;n&=~(1<<l),s+=1;var r=32-Bt(t)+l;if(30<r){var g=l-l%5;r=(n&(1<<g)-1).toString(32),n>>=g,l-=g,ja=1<<32-Bt(t)+l|s<<l|n,ba=r+e}else ja=1<<r|s<<l|n,ba=e}function pc(e){e.return!==null&&(gs(e,1),Sd(e,1,0))}function yc(e){for(;e===yi;)yi=Ps[--Xs],Ps[Xs]=null,vi=Ps[--Xs],Ps[Xs]=null;for(;e===xs;)xs=Zt[--Kt],Zt[Kt]=null,ba=Zt[--Kt],Zt[Kt]=null,ja=Zt[--Kt],Zt[Kt]=null}var Ct=null,et=null,Ue=!1,ps=null,ua=!1,vc=Error(u(519));function ys(e){var t=Error(u(418,""));throw Vn(Xt(t,e)),vc}function wd(e){var t=e.stateNode,s=e.type,n=e.memoizedProps;switch(t[jt]=e,t[kt]=n,s){case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":case"embed":Le("load",t);break;case"video":case"audio":for(s=0;s<hl.length;s++)Le(hl[s],t);break;case"source":Le("error",t);break;case"img":case"image":case"link":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"input":Le("invalid",t),Hu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),li(t);break;case"select":Le("invalid",t);break;case"textarea":Le("invalid",t),Qu(t,n.value,n.defaultValue,n.children),li(t)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||n.suppressHydrationWarning===!0||$f(t.textContent,s)?(n.popover!=null&&(Le("beforetoggle",t),Le("toggle",t)),n.onScroll!=null&&Le("scroll",t),n.onScrollEnd!=null&&Le("scrollend",t),n.onClick!=null&&(t.onclick=Wi),t=!0):t=!1,t||ys(e)}function Cd(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Ct=Ct.return}}function $n(e){if(e!==Ct)return!1;if(!Ue)return Cd(e),Ue=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Ro(e.type,e.memoizedProps)),s=!s),s&&et&&ys(e),Cd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){et=na(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}et=null}}else t===27?(t=et,es(e.type)?(e=Uo,Uo=null,et=e):et=t):et=Ct?na(e.stateNode.nextSibling):null;return!0}function Gn(){et=Ct=null,Ue=!1}function kd(){var e=ps;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),ps=null),e}function Vn(e){ps===null?ps=[e]:ps.push(e)}var jc=E(null),vs=null,Na=null;function Ha(e,t,s){P(jc,t._currentValue),t._currentValue=s}function Sa(e){e._currentValue=jc.current,U(jc)}function bc(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Nc(e,t,s,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var r=l.dependencies;if(r!==null){var g=l.child;r=r.firstContext;e:for(;r!==null;){var j=r;r=l;for(var M=0;M<t.length;M++)if(j.context===t[M]){r.lanes|=s,j=r.alternate,j!==null&&(j.lanes|=s),bc(r.return,s,e),n||(g=null);break e}r=j.next}}else if(l.tag===18){if(g=l.return,g===null)throw Error(u(341));g.lanes|=s,r=g.alternate,r!==null&&(r.lanes|=s),bc(g,s,e),g=null}else g=l.child;if(g!==null)g.return=l;else for(g=l;g!==null;){if(g===e){g=null;break}if(l=g.sibling,l!==null){l.return=g.return,g=l;break}g=g.return}l=g}}function Yn(e,t,s,n){e=null;for(var l=t,r=!1;l!==null;){if(!r){if((l.flags&524288)!==0)r=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var g=l.alternate;if(g===null)throw Error(u(387));if(g=g.memoizedProps,g!==null){var j=l.type;Ht(l.pendingProps.value,g.value)||(e!==null?e.push(j):e=[j])}}else if(l===ue.current){if(g=l.alternate,g===null)throw Error(u(387));g.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(jl):e=[jl])}l=l.return}e!==null&&Nc(t,e,s,n),t.flags|=262144}function ji(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function js(e){vs=e,Na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return Ed(vs,e)}function bi(e,t){return vs===null&&js(e),Ed(e,t)}function Ed(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Na===null){if(e===null)throw Error(u(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return s}var gg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},pg=i.unstable_scheduleCallback,yg=i.unstable_NormalPriority,ct={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sc(){return{controller:new gg,data:new Map,refCount:0}}function In(e){e.refCount--,e.refCount===0&&pg(yg,function(){e.controller.abort()})}var Pn=null,wc=0,Js=0,Zs=null;function vg(e,t){if(Pn===null){var s=Pn=[];wc=0,Js=Eo(),Zs={status:"pending",value:void 0,then:function(n){s.push(n)}}}return wc++,t.then(Ad,Ad),t}function Ad(){if(--wc===0&&Pn!==null){Zs!==null&&(Zs.status="fulfilled");var e=Pn;Pn=null,Js=0,Zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jg(e,t){var s=[],n={status:"pending",value:null,reason:null,then:function(l){s.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<s.length;l++)(0,s[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<s.length;l++)(0,s[l])(void 0)}),n}var Dd=G.S;G.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&vg(e,t),Dd!==null&&Dd(e,t)};var bs=E(null);function Cc(){var e=bs.current;return e!==null?e:Ze.pooledCache}function Ni(e,t){t===null?P(bs,bs.current):P(bs,t.pool)}function Td(){var e=Cc();return e===null?null:{parent:ct._currentValue,pool:e}}var Xn=Error(u(460)),zd=Error(u(474)),Si=Error(u(542)),kc={then:function(){}};function Md(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wi(){}function _d(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(wi,wi),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qd(e),e;default:if(typeof t.status=="string")t.then(wi,wi);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qd(e),e}throw Jn=t,Xn}}var Jn=null;function Od(){if(Jn===null)throw Error(u(459));var e=Jn;return Jn=null,e}function qd(e){if(e===Xn||e===Si)throw Error(u(483))}var Ua=!1;function Ec(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ac(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $a(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ve&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=gi(e),bd(e,null,s),t}return xi(e,n,t,s),gi(e)}function Zn(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Au(e,s)}}function Dc(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var l=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?l=r=g:r=r.next=g,s=s.next}while(s!==null);r===null?l=r=t:r=r.next=t}else l=r=t;s={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Tc=!1;function Kn(){if(Tc){var e=Zs;if(e!==null)throw e}}function Fn(e,t,s,n){Tc=!1;var l=e.updateQueue;Ua=!1;var r=l.firstBaseUpdate,g=l.lastBaseUpdate,j=l.shared.pending;if(j!==null){l.shared.pending=null;var M=j,F=M.next;M.next=null,g===null?r=F:g.next=F,g=M;var re=e.alternate;re!==null&&(re=re.updateQueue,j=re.lastBaseUpdate,j!==g&&(j===null?re.firstBaseUpdate=F:j.next=F,re.lastBaseUpdate=M))}if(r!==null){var oe=l.baseState;g=0,re=F=M=null,j=r;do{var W=j.lane&-536870913,ae=W!==j.lane;if(ae?(Be&W)===W:(n&W)===W){W!==0&&W===Js&&(Tc=!0),re!==null&&(re=re.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ae=e,ke=j;W=t;var Xe=s;switch(ke.tag){case 1:if(Ae=ke.payload,typeof Ae=="function"){oe=Ae.call(Xe,oe,W);break e}oe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ke.payload,W=typeof Ae=="function"?Ae.call(Xe,oe,W):Ae,W==null)break e;oe=v({},oe,W);break e;case 2:Ua=!0}}W=j.callback,W!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=l.callbacks,ae===null?l.callbacks=[W]:ae.push(W))}else ae={lane:W,tag:j.tag,payload:j.payload,callback:j.callback,next:null},re===null?(F=re=ae,M=oe):re=re.next=ae,g|=W;if(j=j.next,j===null){if(j=l.shared.pending,j===null)break;ae=j,j=ae.next,ae.next=null,l.lastBaseUpdate=ae,l.shared.pending=null}}while(!0);re===null&&(M=oe),l.baseState=M,l.firstBaseUpdate=F,l.lastBaseUpdate=re,r===null&&(l.shared.lanes=0),Za|=g,e.lanes=g,e.memoizedState=oe}}function Rd(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Ld(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Rd(s[e],t)}var Ks=E(null),Ci=E(0);function Bd(e,t){e=Ta,P(Ci,e),P(Ks,t),Ta=e|t.baseLanes}function zc(){P(Ci,Ta),P(Ks,Ks.current)}function Mc(){Ta=Ci.current,U(Ks),U(Ci)}var Ga=0,_e=null,Ie=null,nt=null,ki=!1,Fs=!1,Ns=!1,Ei=0,Wn=0,Ws=null,bg=0;function at(){throw Error(u(321))}function _c(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ht(e[s],t[s]))return!1;return!0}function Oc(e,t,s,n,l,r){return Ga=r,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?bm:Nm,Ns=!1,r=s(n,l),Ns=!1,Fs&&(r=Ud(t,s,n,l)),Hd(e),r}function Hd(e){G.H=_i;var t=Ie!==null&&Ie.next!==null;if(Ga=0,nt=Ie=_e=null,ki=!1,Wn=0,Ws=null,t)throw Error(u(300));e===null||dt||(e=e.dependencies,e!==null&&ji(e)&&(dt=!0))}function Ud(e,t,s,n){_e=e;var l=0;do{if(Fs&&(Ws=null),Wn=0,Fs=!1,25<=l)throw Error(u(301));if(l+=1,nt=Ie=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}G.H=Ag,r=t(s,n)}while(Fs);return r}function Ng(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?el(t):t,e=e.useState()[0],(Ie!==null?Ie.memoizedState:null)!==e&&(_e.flags|=1024),t}function qc(){var e=Ei!==0;return Ei=0,e}function Rc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Lc(e){if(ki){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ki=!1}Ga=0,nt=Ie=_e=null,Fs=!1,Wn=Ei=0,Ws=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?_e.memoizedState=nt=e:nt=nt.next=e,nt}function lt(){if(Ie===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=nt===null?_e.memoizedState:nt.next;if(t!==null)nt=t,Ie=e;else{if(e===null)throw _e.alternate===null?Error(u(467)):Error(u(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},nt===null?_e.memoizedState=nt=e:nt=nt.next=e}return nt}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(e){var t=Wn;return Wn+=1,Ws===null&&(Ws=[]),e=_d(Ws,e,t),t=_e,(nt===null?t.memoizedState:nt.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?bm:Nm),e}function Ai(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return el(e);if(e.$$typeof===z)return bt(e)}throw Error(u(438,String(e)))}function Hc(e){var t=null,s=_e.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var n=_e.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Bc(),_e.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),n=0;n<e;n++)s[n]=_;return t.index++,s}function wa(e,t){return typeof t=="function"?t(e):t}function Di(e){var t=lt();return Uc(t,Ie,e)}function Uc(e,t,s){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=s;var l=e.baseQueue,r=n.pending;if(r!==null){if(l!==null){var g=l.next;l.next=r.next,r.next=g}t.baseQueue=l=r,n.pending=null}if(r=e.baseState,l===null)e.memoizedState=r;else{t=l.next;var j=g=null,M=null,F=t,re=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(Be&oe)===oe:(Ga&oe)===oe){var W=F.revertLane;if(W===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===Js&&(re=!0);else if((Ga&W)===W){F=F.next,W===Js&&(re=!0);continue}else oe={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(j=M=oe,g=r):M=M.next=oe,_e.lanes|=W,Za|=W;oe=F.action,Ns&&s(r,oe),r=F.hasEagerState?F.eagerState:s(r,oe)}else W={lane:oe,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(j=M=W,g=r):M=M.next=W,_e.lanes|=oe,Za|=oe;F=F.next}while(F!==null&&F!==t);if(M===null?g=r:M.next=j,!Ht(r,e.memoizedState)&&(dt=!0,re&&(s=Zs,s!==null)))throw s;e.memoizedState=r,e.baseState=g,e.baseQueue=M,n.lastRenderedState=r}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Qc(e){var t=lt(),s=t.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=e;var n=s.dispatch,l=s.pending,r=t.memoizedState;if(l!==null){s.pending=null;var g=l=l.next;do r=e(r,g.action),g=g.next;while(g!==l);Ht(r,t.memoizedState)||(dt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,n]}function Qd(e,t,s){var n=_e,l=lt(),r=Ue;if(r){if(s===void 0)throw Error(u(407));s=s()}else s=t();var g=!Ht((Ie||l).memoizedState,s);g&&(l.memoizedState=s,dt=!0),l=l.queue;var j=Vd.bind(null,n,l,e);if(tl(2048,8,j,[e]),l.getSnapshot!==t||g||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,en(9,Ti(),Gd.bind(null,n,l,s,t),null),Ze===null)throw Error(u(349));r||(Ga&124)!==0||$d(n,t,s)}return s}function $d(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=_e.updateQueue,t===null?(t=Bc(),_e.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Gd(e,t,s,n){t.value=s,t.getSnapshot=n,Yd(t)&&Id(e)}function Vd(e,t,s){return s(function(){Yd(t)&&Id(e)})}function Yd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ht(e,s)}catch{return!0}}function Id(e){var t=Ys(e,2);t!==null&&Yt(t,e,2)}function $c(e){var t=At();if(typeof e=="function"){var s=e;if(e=s(),Ns){Ra(!0);try{s()}finally{Ra(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t}function Pd(e,t,s,n){return e.baseState=s,Uc(e,Ie,typeof n=="function"?n:wa)}function Sg(e,t,s,n,l){if(Mi(e))throw Error(u(485));if(e=t.action,e!==null){var r={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){r.listeners.push(g)}};G.T!==null?s(!0):r.isTransition=!1,n(r),s=t.pending,s===null?(r.next=t.pending=r,Xd(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Xd(e,t){var s=t.action,n=t.payload,l=e.state;if(t.isTransition){var r=G.T,g={};G.T=g;try{var j=s(l,n),M=G.S;M!==null&&M(g,j),Jd(e,t,j)}catch(F){Gc(e,t,F)}finally{G.T=r}}else try{r=s(l,n),Jd(e,t,r)}catch(F){Gc(e,t,F)}}function Jd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){Zd(e,t,n)},function(n){return Gc(e,t,n)}):Zd(e,t,s)}function Zd(e,t,s){t.status="fulfilled",t.value=s,Kd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Xd(e,s)))}function Gc(e,t,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=s,Kd(t),t=t.next;while(t!==n)}e.action=null}function Kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fd(e,t){return t}function Wd(e,t){if(Ue){var s=Ze.formState;if(s!==null){e:{var n=_e;if(Ue){if(et){t:{for(var l=et,r=ua;l.nodeType!==8;){if(!r){l=null;break t}if(l=na(l.nextSibling),l===null){l=null;break t}}r=l.data,l=r==="F!"||r==="F"?l:null}if(l){et=na(l.nextSibling),n=l.data==="F!";break e}}ys(n)}n=!1}n&&(t=s[0])}}return s=At(),s.memoizedState=s.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},s.queue=n,s=ym.bind(null,_e,n),n.dispatch=s,n=$c(!1),r=Xc.bind(null,_e,!1,n.queue),n=At(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,s=Sg.bind(null,_e,l,r,s),l.dispatch=s,n.memoizedState=e,[t,s,!1]}function em(e){var t=lt();return tm(t,Ie,e)}function tm(e,t,s){if(t=Uc(e,t,Fd)[0],e=Di(wa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=el(t)}catch(g){throw g===Xn?Si:g}else n=t;t=lt();var l=t.queue,r=l.dispatch;return s!==t.memoizedState&&(_e.flags|=2048,en(9,Ti(),wg.bind(null,l,s),null)),[n,r,e]}function wg(e,t){e.action=t}function am(e){var t=lt(),s=Ie;if(s!==null)return tm(t,s,e);lt(),t=t.memoizedState,s=lt();var n=s.queue.dispatch;return s.memoizedState=e,[t,n,!1]}function en(e,t,s,n){return e={tag:e,create:s,deps:n,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Bc(),_e.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function Ti(){return{destroy:void 0,resource:void 0}}function sm(){return lt().memoizedState}function zi(e,t,s,n){var l=At();n=n===void 0?null:n,_e.flags|=e,l.memoizedState=en(1|t,Ti(),s,n)}function tl(e,t,s,n){var l=lt();n=n===void 0?null:n;var r=l.memoizedState.inst;Ie!==null&&n!==null&&_c(n,Ie.memoizedState.deps)?l.memoizedState=en(t,r,s,n):(_e.flags|=e,l.memoizedState=en(1|t,r,s,n))}function nm(e,t){zi(8390656,8,e,t)}function lm(e,t){tl(2048,8,e,t)}function im(e,t){return tl(4,2,e,t)}function rm(e,t){return tl(4,4,e,t)}function cm(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function om(e,t,s){s=s!=null?s.concat([e]):null,tl(4,4,cm.bind(null,t,e),s)}function Vc(){}function um(e,t){var s=lt();t=t===void 0?null:t;var n=s.memoizedState;return t!==null&&_c(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function dm(e,t){var s=lt();t=t===void 0?null:t;var n=s.memoizedState;if(t!==null&&_c(t,n[1]))return n[0];if(n=e(),Ns){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[n,t],n}function Yc(e,t,s){return s===void 0||(Ga&1073741824)!==0?e.memoizedState=t:(e.memoizedState=s,e=xf(),_e.lanes|=e,Za|=e,s)}function mm(e,t,s,n){return Ht(s,t)?s:Ks.current!==null?(e=Yc(e,s,n),Ht(e,t)||(dt=!0),e):(Ga&42)===0?(dt=!0,e.memoizedState=s):(e=xf(),_e.lanes|=e,Za|=e,t)}function fm(e,t,s,n,l){var r=Y.p;Y.p=r!==0&&8>r?r:8;var g=G.T,j={};G.T=j,Xc(e,!1,t,s);try{var M=l(),F=G.S;if(F!==null&&F(j,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var re=jg(M,n);al(e,t,re,Vt(e))}else al(e,t,n,Vt(e))}catch(oe){al(e,t,{then:function(){},status:"rejected",reason:oe},Vt())}finally{Y.p=r,G.T=g}}function Cg(){}function Ic(e,t,s,n){if(e.tag!==5)throw Error(u(476));var l=hm(e).queue;fm(e,l,t,ie,s===null?Cg:function(){return xm(e),s(n)})}function hm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:ie},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xm(e){var t=hm(e).next.queue;al(e,t,{},Vt())}function Pc(){return bt(jl)}function gm(){return lt().memoizedState}function pm(){return lt().memoizedState}function kg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Vt();e=Qa(s);var n=$a(t,e,s);n!==null&&(Yt(n,t,s),Zn(n,t,s)),t={cache:Sc()},e.payload=t;return}t=t.return}}function Eg(e,t,s){var n=Vt();s={lane:n,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Mi(e)?vm(t,s):(s=fc(e,t,s,n),s!==null&&(Yt(s,e,n),jm(s,t,n)))}function ym(e,t,s){var n=Vt();al(e,t,s,n)}function al(e,t,s,n){var l={lane:n,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mi(e))vm(t,l);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var g=t.lastRenderedState,j=r(g,s);if(l.hasEagerState=!0,l.eagerState=j,Ht(j,g))return xi(e,t,l,0),Ze===null&&hi(),!1}catch{}finally{}if(s=fc(e,t,l,n),s!==null)return Yt(s,e,n),jm(s,t,n),!0}return!1}function Xc(e,t,s,n){if(n={lane:2,revertLane:Eo(),action:n,hasEagerState:!1,eagerState:null,next:null},Mi(e)){if(t)throw Error(u(479))}else t=fc(e,s,n,2),t!==null&&Yt(t,e,2)}function Mi(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function vm(e,t){Fs=ki=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function jm(e,t,s){if((s&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Au(e,s)}}var _i={readContext:bt,use:Ai,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at},bm={readContext:bt,use:Ai,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:nm,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,zi(4194308,4,cm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return zi(4194308,4,e,t)},useInsertionEffect:function(e,t){zi(4,2,e,t)},useMemo:function(e,t){var s=At();t=t===void 0?null:t;var n=e();if(Ns){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[n,t],n},useReducer:function(e,t,s){var n=At();if(s!==void 0){var l=s(t);if(Ns){Ra(!0);try{s(t)}finally{Ra(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=Eg.bind(null,_e,e),[n.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:function(e){e=$c(e);var t=e.queue,s=ym.bind(null,_e,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Vc,useDeferredValue:function(e,t){var s=At();return Yc(s,e,t)},useTransition:function(){var e=$c(!1);return e=fm.bind(null,_e,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var n=_e,l=At();if(Ue){if(s===void 0)throw Error(u(407));s=s()}else{if(s=t(),Ze===null)throw Error(u(349));(Be&124)!==0||$d(n,t,s)}l.memoizedState=s;var r={value:s,getSnapshot:t};return l.queue=r,nm(Vd.bind(null,n,r,e),[e]),n.flags|=2048,en(9,Ti(),Gd.bind(null,n,r,s,t),null),s},useId:function(){var e=At(),t=Ze.identifierPrefix;if(Ue){var s=ba,n=ja;s=(n&~(1<<32-Bt(n)-1)).toString(32)+s,t="«"+t+"R"+s,s=Ei++,0<s&&(t+="H"+s.toString(32)),t+="»"}else s=bg++,t="«"+t+"r"+s.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Pc,useFormState:Wd,useActionState:Wd,useOptimistic:function(e){var t=At();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Xc.bind(null,_e,!0,s),s.dispatch=t,[e,t]},useMemoCache:Hc,useCacheRefresh:function(){return At().memoizedState=kg.bind(null,_e)}},Nm={readContext:bt,use:Ai,useCallback:um,useContext:bt,useEffect:lm,useImperativeHandle:om,useInsertionEffect:im,useLayoutEffect:rm,useMemo:dm,useReducer:Di,useRef:sm,useState:function(){return Di(wa)},useDebugValue:Vc,useDeferredValue:function(e,t){var s=lt();return mm(s,Ie.memoizedState,e,t)},useTransition:function(){var e=Di(wa)[0],t=lt().memoizedState;return[typeof e=="boolean"?e:el(e),t]},useSyncExternalStore:Qd,useId:gm,useHostTransitionStatus:Pc,useFormState:em,useActionState:em,useOptimistic:function(e,t){var s=lt();return Pd(s,Ie,e,t)},useMemoCache:Hc,useCacheRefresh:pm},Ag={readContext:bt,use:Ai,useCallback:um,useContext:bt,useEffect:lm,useImperativeHandle:om,useInsertionEffect:im,useLayoutEffect:rm,useMemo:dm,useReducer:Qc,useRef:sm,useState:function(){return Qc(wa)},useDebugValue:Vc,useDeferredValue:function(e,t){var s=lt();return Ie===null?Yc(s,e,t):mm(s,Ie.memoizedState,e,t)},useTransition:function(){var e=Qc(wa)[0],t=lt().memoizedState;return[typeof e=="boolean"?e:el(e),t]},useSyncExternalStore:Qd,useId:gm,useHostTransitionStatus:Pc,useFormState:am,useActionState:am,useOptimistic:function(e,t){var s=lt();return Ie!==null?Pd(s,Ie,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Hc,useCacheRefresh:pm},tn=null,sl=0;function Oi(e){var t=sl;return sl+=1,tn===null&&(tn=[]),_d(tn,e,t)}function nl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qi(e,t){throw t.$$typeof===w?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Sm(e){var t=e._init;return t(e._payload)}function wm(e){function t(X,$){if(e){var K=X.deletions;K===null?(X.deletions=[$],X.flags|=16):K.push($)}}function s(X,$){if(!e)return null;for(;$!==null;)t(X,$),$=$.sibling;return null}function n(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function l(X,$){return X=va(X,$),X.index=0,X.sibling=null,X}function r(X,$,K){return X.index=K,e?(K=X.alternate,K!==null?(K=K.index,K<$?(X.flags|=67108866,$):K):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function g(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function j(X,$,K,ce){return $===null||$.tag!==6?($=xc(K,X.mode,ce),$.return=X,$):($=l($,K),$.return=X,$)}function M(X,$,K,ce){var ve=K.type;return ve===S?re(X,$,K.props.children,ce,K.key):$!==null&&($.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===q&&Sm(ve)===$.type)?($=l($,K.props),nl($,K),$.return=X,$):($=pi(K.type,K.key,K.props,null,X.mode,ce),nl($,K),$.return=X,$)}function F(X,$,K,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=gc(K,X.mode,ce),$.return=X,$):($=l($,K.children||[]),$.return=X,$)}function re(X,$,K,ce,ve){return $===null||$.tag!==7?($=hs(K,X.mode,ce,ve),$.return=X,$):($=l($,K),$.return=X,$)}function oe(X,$,K){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=xc(""+$,X.mode,K),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case B:return K=pi($.type,$.key,$.props,null,X.mode,K),nl(K,$),K.return=X,K;case b:return $=gc($,X.mode,K),$.return=X,$;case q:var ce=$._init;return $=ce($._payload),oe(X,$,K)}if(de($)||H($))return $=hs($,X.mode,K,null),$.return=X,$;if(typeof $.then=="function")return oe(X,Oi($),K);if($.$$typeof===z)return oe(X,bi(X,$),K);qi(X,$)}return null}function W(X,$,K,ce){var ve=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ve!==null?null:j(X,$,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case B:return K.key===ve?M(X,$,K,ce):null;case b:return K.key===ve?F(X,$,K,ce):null;case q:return ve=K._init,K=ve(K._payload),W(X,$,K,ce)}if(de(K)||H(K))return ve!==null?null:re(X,$,K,ce,null);if(typeof K.then=="function")return W(X,$,Oi(K),ce);if(K.$$typeof===z)return W(X,$,bi(X,K),ce);qi(X,K)}return null}function ae(X,$,K,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return X=X.get(K)||null,j($,X,""+ce,ve);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case B:return X=X.get(ce.key===null?K:ce.key)||null,M($,X,ce,ve);case b:return X=X.get(ce.key===null?K:ce.key)||null,F($,X,ce,ve);case q:var qe=ce._init;return ce=qe(ce._payload),ae(X,$,K,ce,ve)}if(de(ce)||H(ce))return X=X.get(K)||null,re($,X,ce,ve,null);if(typeof ce.then=="function")return ae(X,$,K,Oi(ce),ve);if(ce.$$typeof===z)return ae(X,$,K,bi($,ce),ve);qi($,ce)}return null}function Ae(X,$,K,ce){for(var ve=null,qe=null,Se=$,Ee=$=0,ft=null;Se!==null&&Ee<K.length;Ee++){Se.index>Ee?(ft=Se,Se=null):ft=Se.sibling;var He=W(X,Se,K[Ee],ce);if(He===null){Se===null&&(Se=ft);break}e&&Se&&He.alternate===null&&t(X,Se),$=r(He,$,Ee),qe===null?ve=He:qe.sibling=He,qe=He,Se=ft}if(Ee===K.length)return s(X,Se),Ue&&gs(X,Ee),ve;if(Se===null){for(;Ee<K.length;Ee++)Se=oe(X,K[Ee],ce),Se!==null&&($=r(Se,$,Ee),qe===null?ve=Se:qe.sibling=Se,qe=Se);return Ue&&gs(X,Ee),ve}for(Se=n(Se);Ee<K.length;Ee++)ft=ae(Se,X,Ee,K[Ee],ce),ft!==null&&(e&&ft.alternate!==null&&Se.delete(ft.key===null?Ee:ft.key),$=r(ft,$,Ee),qe===null?ve=ft:qe.sibling=ft,qe=ft);return e&&Se.forEach(function(ls){return t(X,ls)}),Ue&&gs(X,Ee),ve}function ke(X,$,K,ce){if(K==null)throw Error(u(151));for(var ve=null,qe=null,Se=$,Ee=$=0,ft=null,He=K.next();Se!==null&&!He.done;Ee++,He=K.next()){Se.index>Ee?(ft=Se,Se=null):ft=Se.sibling;var ls=W(X,Se,He.value,ce);if(ls===null){Se===null&&(Se=ft);break}e&&Se&&ls.alternate===null&&t(X,Se),$=r(ls,$,Ee),qe===null?ve=ls:qe.sibling=ls,qe=ls,Se=ft}if(He.done)return s(X,Se),Ue&&gs(X,Ee),ve;if(Se===null){for(;!He.done;Ee++,He=K.next())He=oe(X,He.value,ce),He!==null&&($=r(He,$,Ee),qe===null?ve=He:qe.sibling=He,qe=He);return Ue&&gs(X,Ee),ve}for(Se=n(Se);!He.done;Ee++,He=K.next())He=ae(Se,X,Ee,He.value,ce),He!==null&&(e&&He.alternate!==null&&Se.delete(He.key===null?Ee:He.key),$=r(He,$,Ee),qe===null?ve=He:qe.sibling=He,qe=He);return e&&Se.forEach(function(Dp){return t(X,Dp)}),Ue&&gs(X,Ee),ve}function Xe(X,$,K,ce){if(typeof K=="object"&&K!==null&&K.type===S&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case B:e:{for(var ve=K.key;$!==null;){if($.key===ve){if(ve=K.type,ve===S){if($.tag===7){s(X,$.sibling),ce=l($,K.props.children),ce.return=X,X=ce;break e}}else if($.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===q&&Sm(ve)===$.type){s(X,$.sibling),ce=l($,K.props),nl(ce,K),ce.return=X,X=ce;break e}s(X,$);break}else t(X,$);$=$.sibling}K.type===S?(ce=hs(K.props.children,X.mode,ce,K.key),ce.return=X,X=ce):(ce=pi(K.type,K.key,K.props,null,X.mode,ce),nl(ce,K),ce.return=X,X=ce)}return g(X);case b:e:{for(ve=K.key;$!==null;){if($.key===ve)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){s(X,$.sibling),ce=l($,K.children||[]),ce.return=X,X=ce;break e}else{s(X,$);break}else t(X,$);$=$.sibling}ce=gc(K,X.mode,ce),ce.return=X,X=ce}return g(X);case q:return ve=K._init,K=ve(K._payload),Xe(X,$,K,ce)}if(de(K))return Ae(X,$,K,ce);if(H(K)){if(ve=H(K),typeof ve!="function")throw Error(u(150));return K=ve.call(K),ke(X,$,K,ce)}if(typeof K.then=="function")return Xe(X,$,Oi(K),ce);if(K.$$typeof===z)return Xe(X,$,bi(X,K),ce);qi(X,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,$!==null&&$.tag===6?(s(X,$.sibling),ce=l($,K),ce.return=X,X=ce):(s(X,$),ce=xc(K,X.mode,ce),ce.return=X,X=ce),g(X)):s(X,$)}return function(X,$,K,ce){try{sl=0;var ve=Xe(X,$,K,ce);return tn=null,ve}catch(Se){if(Se===Xn||Se===Si)throw Se;var qe=Ut(29,Se,null,X.mode);return qe.lanes=ce,qe.return=X,qe}finally{}}}var an=wm(!0),Cm=wm(!1),Ft=E(null),da=null;function Va(e){var t=e.alternate;P(ot,ot.current&1),P(Ft,e),da===null&&(t===null||Ks.current!==null||t.memoizedState!==null)&&(da=e)}function km(e){if(e.tag===22){if(P(ot,ot.current),P(Ft,e),da===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(da=e)}}else Ya()}function Ya(){P(ot,ot.current),P(Ft,Ft.current)}function Ca(e){U(Ft),da===e&&(da=null),U(ot)}var ot=E(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Ho(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Jc(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Zc={enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Vt(),l=Qa(n);l.payload=t,s!=null&&(l.callback=s),t=$a(e,l,n),t!==null&&(Yt(t,e,n),Zn(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Vt(),l=Qa(n);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=$a(e,l,n),t!==null&&(Yt(t,e,n),Zn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Vt(),n=Qa(s);n.tag=2,t!=null&&(n.callback=t),t=$a(e,n,s),t!==null&&(Yt(t,e,s),Zn(t,e,s))}};function Em(e,t,s,n,l,r,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,g):t.prototype&&t.prototype.isPureReactComponent?!Un(s,n)||!Un(l,r):!0}function Am(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Zc.enqueueReplaceState(t,t.state,null)}function Ss(e,t){var s=t;if("ref"in t){s={};for(var n in t)n!=="ref"&&(s[n]=t[n])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var l in e)s[l]===void 0&&(s[l]=e[l])}return s}var Li=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Dm(e){Li(e)}function Tm(e){console.error(e)}function zm(e){Li(e)}function Bi(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Mm(e,t,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Kc(e,t,s){return s=Qa(s),s.tag=3,s.payload={element:null},s.callback=function(){Bi(e,t)},s}function _m(e){return e=Qa(e),e.tag=3,e}function Om(e,t,s,n){var l=s.type.getDerivedStateFromError;if(typeof l=="function"){var r=n.value;e.payload=function(){return l(r)},e.callback=function(){Mm(t,s,n)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Mm(t,s,n),typeof l!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var j=n.stack;this.componentDidCatch(n.value,{componentStack:j!==null?j:""})})}function Dg(e,t,s,n,l){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=s.alternate,t!==null&&Yn(t,s,l,!0),s=Ft.current,s!==null){switch(s.tag){case 13:return da===null?No():s.alternate===null&&tt===0&&(tt=3),s.flags&=-257,s.flags|=65536,s.lanes=l,n===kc?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([n]):t.add(n),wo(e,n,l)),!1;case 22:return s.flags|=65536,n===kc?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([n]):s.add(n)),wo(e,n,l)),!1}throw Error(u(435,s.tag))}return wo(e,n,l),No(),!1}if(Ue)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==vc&&(e=Error(u(422),{cause:n}),Vn(Xt(e,s)))):(n!==vc&&(t=Error(u(423),{cause:n}),Vn(Xt(t,s))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Xt(n,s),l=Kc(e.stateNode,n,l),Dc(e,l),tt!==4&&(tt=2)),!1;var r=Error(u(520),{cause:n});if(r=Xt(r,s),dl===null?dl=[r]:dl.push(r),tt!==4&&(tt=2),t===null)return!0;n=Xt(n,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=l&-l,s.lanes|=e,e=Kc(s.stateNode,n,e),Dc(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ka===null||!Ka.has(r))))return s.flags|=65536,l&=-l,s.lanes|=l,l=_m(l),Om(l,e,s,n),Dc(s,l),!1}s=s.return}while(s!==null);return!1}var qm=Error(u(461)),dt=!1;function ht(e,t,s,n){t.child=e===null?Cm(t,null,s,n):an(t,e.child,s,n)}function Rm(e,t,s,n,l){s=s.render;var r=t.ref;if("ref"in n){var g={};for(var j in n)j!=="ref"&&(g[j]=n[j])}else g=n;return js(t),n=Oc(e,t,s,g,r,l),j=qc(),e!==null&&!dt?(Rc(e,t,l),ka(e,t,l)):(Ue&&j&&pc(t),t.flags|=1,ht(e,t,n,l),t.child)}function Lm(e,t,s,n,l){if(e===null){var r=s.type;return typeof r=="function"&&!hc(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,Bm(e,t,r,n,l)):(e=pi(s.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!lo(e,l)){var g=r.memoizedProps;if(s=s.compare,s=s!==null?s:Un,s(g,n)&&e.ref===t.ref)return ka(e,t,l)}return t.flags|=1,e=va(r,n),e.ref=t.ref,e.return=t,t.child=e}function Bm(e,t,s,n,l){if(e!==null){var r=e.memoizedProps;if(Un(r,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=r,lo(e,l))(e.flags&131072)!==0&&(dt=!0);else return t.lanes=e.lanes,ka(e,t,l)}return Fc(e,t,s,n,l)}function Hm(e,t,s){var n=t.pendingProps,l=n.children,r=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=r!==null?r.baseLanes|s:s,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;t.childLanes=r&~n}else t.childLanes=0,t.child=null;return Um(e,t,n,s)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ni(t,r!==null?r.cachePool:null),r!==null?Bd(t,r):zc(),km(t);else return t.lanes=t.childLanes=536870912,Um(e,t,r!==null?r.baseLanes|s:s,s)}else r!==null?(Ni(t,r.cachePool),Bd(t,r),Ya(),t.memoizedState=null):(e!==null&&Ni(t,null),zc(),Ya());return ht(e,t,l,s),t.child}function Um(e,t,s,n){var l=Cc();return l=l===null?null:{parent:ct._currentValue,pool:l},t.memoizedState={baseLanes:s,cachePool:l},e!==null&&Ni(t,null),zc(),km(t),e!==null&&Yn(e,t,n,!0),null}function Hi(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(u(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Fc(e,t,s,n,l){return js(t),s=Oc(e,t,s,n,void 0,l),n=qc(),e!==null&&!dt?(Rc(e,t,l),ka(e,t,l)):(Ue&&n&&pc(t),t.flags|=1,ht(e,t,s,l),t.child)}function Qm(e,t,s,n,l,r){return js(t),t.updateQueue=null,s=Ud(t,n,s,l),Hd(e),n=qc(),e!==null&&!dt?(Rc(e,t,r),ka(e,t,r)):(Ue&&n&&pc(t),t.flags|=1,ht(e,t,s,r),t.child)}function $m(e,t,s,n,l){if(js(t),t.stateNode===null){var r=Is,g=s.contextType;typeof g=="object"&&g!==null&&(r=bt(g)),r=new s(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zc,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},Ec(t),g=s.contextType,r.context=typeof g=="object"&&g!==null?bt(g):Is,r.state=t.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Jc(t,s,g,n),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(g=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),g!==r.state&&Zc.enqueueReplaceState(r,r.state,null),Fn(t,n,r,l),Kn(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var j=t.memoizedProps,M=Ss(s,j);r.props=M;var F=r.context,re=s.contextType;g=Is,typeof re=="object"&&re!==null&&(g=bt(re));var oe=s.getDerivedStateFromProps;re=typeof oe=="function"||typeof r.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,re||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(j||F!==g)&&Am(t,r,n,g),Ua=!1;var W=t.memoizedState;r.state=W,Fn(t,n,r,l),Kn(),F=t.memoizedState,j||W!==F||Ua?(typeof oe=="function"&&(Jc(t,s,oe,n),F=t.memoizedState),(M=Ua||Em(t,s,M,n,W,F,g))?(re||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=F),r.props=n,r.state=F,r.context=g,n=M):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Ac(e,t),g=t.memoizedProps,re=Ss(s,g),r.props=re,oe=t.pendingProps,W=r.context,F=s.contextType,M=Is,typeof F=="object"&&F!==null&&(M=bt(F)),j=s.getDerivedStateFromProps,(F=typeof j=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==oe||W!==M)&&Am(t,r,n,M),Ua=!1,W=t.memoizedState,r.state=W,Fn(t,n,r,l),Kn();var ae=t.memoizedState;g!==oe||W!==ae||Ua||e!==null&&e.dependencies!==null&&ji(e.dependencies)?(typeof j=="function"&&(Jc(t,s,j,n),ae=t.memoizedState),(re=Ua||Em(t,s,re,n,W,ae,M)||e!==null&&e.dependencies!==null&&ji(e.dependencies))?(F||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,ae,M),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,ae,M)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=ae),r.props=n,r.state=ae,r.context=M,n=re):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Hi(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=an(t,e.child,null,l),t.child=an(t,null,s,l)):ht(e,t,s,l),t.memoizedState=r.state,e=t.child):e=ka(e,t,l),e}function Gm(e,t,s,n){return Gn(),t.flags|=256,ht(e,t,s,n),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eo(e){return{baseLanes:e,cachePool:Td()}}function to(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Wt),e}function Vm(e,t,s){var n=t.pendingProps,l=!1,r=(t.flags&128)!==0,g;if((g=r)||(g=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),g&&(l=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ue){if(l?Va(t):Ya(),Ue){var j=et,M;if(M=j){e:{for(M=j,j=ua;M.nodeType!==8;){if(!j){j=null;break e}if(M=na(M.nextSibling),M===null){j=null;break e}}j=M}j!==null?(t.memoizedState={dehydrated:j,treeContext:xs!==null?{id:ja,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},M=Ut(18,null,null,0),M.stateNode=j,M.return=t,t.child=M,Ct=t,et=null,M=!0):M=!1}M||ys(t)}if(j=t.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Ho(j)?t.lanes=32:t.lanes=536870912,null;Ca(t)}return j=n.children,n=n.fallback,l?(Ya(),l=t.mode,j=Ui({mode:"hidden",children:j},l),n=hs(n,l,s,null),j.return=t,n.return=t,j.sibling=n,t.child=j,l=t.child,l.memoizedState=eo(s),l.childLanes=to(e,g,s),t.memoizedState=Wc,n):(Va(t),ao(t,j))}if(M=e.memoizedState,M!==null&&(j=M.dehydrated,j!==null)){if(r)t.flags&256?(Va(t),t.flags&=-257,t=so(e,t,s)):t.memoizedState!==null?(Ya(),t.child=e.child,t.flags|=128,t=null):(Ya(),l=n.fallback,j=t.mode,n=Ui({mode:"visible",children:n.children},j),l=hs(l,j,s,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,an(t,e.child,null,s),n=t.child,n.memoizedState=eo(s),n.childLanes=to(e,g,s),t.memoizedState=Wc,t=l);else if(Va(t),Ho(j)){if(g=j.nextSibling&&j.nextSibling.dataset,g)var F=g.dgst;g=F,n=Error(u(419)),n.stack="",n.digest=g,Vn({value:n,source:null,stack:null}),t=so(e,t,s)}else if(dt||Yn(e,t,s,!1),g=(s&e.childLanes)!==0,dt||g){if(g=Ze,g!==null&&(n=s&-s,n=(n&42)!==0?1:Hr(n),n=(n&(g.suspendedLanes|s))!==0?0:n,n!==0&&n!==M.retryLane))throw M.retryLane=n,Ys(e,n),Yt(g,e,n),qm;j.data==="$?"||No(),t=so(e,t,s)}else j.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=M.treeContext,et=na(j.nextSibling),Ct=t,Ue=!0,ps=null,ua=!1,e!==null&&(Zt[Kt++]=ja,Zt[Kt++]=ba,Zt[Kt++]=xs,ja=e.id,ba=e.overflow,xs=t),t=ao(t,n.children),t.flags|=4096);return t}return l?(Ya(),l=n.fallback,j=t.mode,M=e.child,F=M.sibling,n=va(M,{mode:"hidden",children:n.children}),n.subtreeFlags=M.subtreeFlags&65011712,F!==null?l=va(F,l):(l=hs(l,j,s,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,j=e.child.memoizedState,j===null?j=eo(s):(M=j.cachePool,M!==null?(F=ct._currentValue,M=M.parent!==F?{parent:F,pool:F}:M):M=Td(),j={baseLanes:j.baseLanes|s,cachePool:M}),l.memoizedState=j,l.childLanes=to(e,g,s),t.memoizedState=Wc,n):(Va(t),s=e.child,e=s.sibling,s=va(s,{mode:"visible",children:n.children}),s.return=t,s.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=s,t.memoizedState=null,s)}function ao(e,t){return t=Ui({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ui(e,t){return e=Ut(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function so(e,t,s){return an(t,e.child,null,s),e=ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ym(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),bc(e.return,t,s)}function no(e,t,s,n,l){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:l}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=s,r.tailMode=l)}function Im(e,t,s){var n=t.pendingProps,l=n.revealOrder,r=n.tail;if(ht(e,t,n.children,s),n=ot.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ym(e,s,t);else if(e.tag===19)Ym(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(P(ot,n),l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Ri(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),no(t,!1,l,s,r);break;case"backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ri(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}no(t,!0,s,null,r);break;case"together":no(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ka(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Za|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Yn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,s=va(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=va(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function lo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ji(e)))}function Tg(e,t,s){switch(t.tag){case 3:le(t,t.stateNode.containerInfo),Ha(t,ct,e.memoizedState.cache),Gn();break;case 27:case 5:je(t);break;case 4:le(t,t.stateNode.containerInfo);break;case 10:Ha(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Va(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Vm(e,t,s):(Va(t),e=ka(e,t,s),e!==null?e.sibling:null);Va(t);break;case 19:var l=(e.flags&128)!==0;if(n=(s&t.childLanes)!==0,n||(Yn(e,t,s,!1),n=(s&t.childLanes)!==0),l){if(n)return Im(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),P(ot,ot.current),n)break;return null;case 22:case 23:return t.lanes=0,Hm(e,t,s);case 24:Ha(t,ct,e.memoizedState.cache)}return ka(e,t,s)}function Pm(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)dt=!0;else{if(!lo(e,s)&&(t.flags&128)===0)return dt=!1,Tg(e,t,s);dt=(e.flags&131072)!==0}else dt=!1,Ue&&(t.flags&1048576)!==0&&Sd(t,vi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,l=n._init;if(n=l(n._payload),t.type=n,typeof n=="function")hc(n)?(e=Ss(n,e),t.tag=1,t=$m(null,t,n,e,s)):(t.tag=0,t=Fc(null,t,n,e,s));else{if(n!=null){if(l=n.$$typeof,l===ee){t.tag=11,t=Rm(null,t,n,e,s);break e}else if(l===T){t.tag=14,t=Lm(null,t,n,e,s);break e}}throw t=te(n)||n,Error(u(306,t,""))}}return t;case 0:return Fc(e,t,t.type,t.pendingProps,s);case 1:return n=t.type,l=Ss(n,t.pendingProps),$m(e,t,n,l,s);case 3:e:{if(le(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var r=t.memoizedState;l=r.element,Ac(e,t),Fn(t,n,null,s);var g=t.memoizedState;if(n=g.cache,Ha(t,ct,n),n!==r.cache&&Nc(t,[ct],s,!0),Kn(),n=g.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Gm(e,t,n,s);break e}else if(n!==l){l=Xt(Error(u(424)),t),Vn(l),t=Gm(e,t,n,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(et=na(e.firstChild),Ct=t,Ue=!0,ps=null,ua=!0,s=Cm(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Gn(),n===l){t=ka(e,t,s);break e}ht(e,t,n,s)}t=t.child}return t;case 26:return Hi(e,t),e===null?(s=Ff(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ue||(s=t.type,e=t.pendingProps,n=er(se.current).createElement(s),n[jt]=t,n[kt]=e,gt(n,s,e),ut(n),t.stateNode=n):t.memoizedState=Ff(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return je(t),e===null&&Ue&&(n=t.stateNode=Jf(t.type,t.pendingProps,se.current),Ct=t,ua=!0,l=et,es(t.type)?(Uo=l,et=na(n.firstChild)):et=l),ht(e,t,t.pendingProps.children,s),Hi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ue&&((l=n=et)&&(n=np(n,t.type,t.pendingProps,ua),n!==null?(t.stateNode=n,Ct=t,et=na(n.firstChild),ua=!1,l=!0):l=!1),l||ys(t)),je(t),l=t.type,r=t.pendingProps,g=e!==null?e.memoizedProps:null,n=r.children,Ro(l,r)?n=null:g!==null&&Ro(l,g)&&(t.flags|=32),t.memoizedState!==null&&(l=Oc(e,t,Ng,null,null,s),jl._currentValue=l),Hi(e,t),ht(e,t,n,s),t.child;case 6:return e===null&&Ue&&((e=s=et)&&(s=lp(s,t.pendingProps,ua),s!==null?(t.stateNode=s,Ct=t,et=null,e=!0):e=!1),e||ys(t)),null;case 13:return Vm(e,t,s);case 4:return le(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=an(t,null,n,s):ht(e,t,n,s),t.child;case 11:return Rm(e,t,t.type,t.pendingProps,s);case 7:return ht(e,t,t.pendingProps,s),t.child;case 8:return ht(e,t,t.pendingProps.children,s),t.child;case 12:return ht(e,t,t.pendingProps.children,s),t.child;case 10:return n=t.pendingProps,Ha(t,t.type,n.value),ht(e,t,n.children,s),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,js(t),l=bt(l),n=n(l),t.flags|=1,ht(e,t,n,s),t.child;case 14:return Lm(e,t,t.type,t.pendingProps,s);case 15:return Bm(e,t,t.type,t.pendingProps,s);case 19:return Im(e,t,s);case 31:return n=t.pendingProps,s=t.mode,n={mode:n.mode,children:n.children},e===null?(s=Ui(n,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=va(e.child,n),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Hm(e,t,s);case 24:return js(t),n=bt(ct),e===null?(l=Cc(),l===null&&(l=Ze,r=Sc(),l.pooledCache=r,r.refCount++,r!==null&&(l.pooledCacheLanes|=s),l=r),t.memoizedState={parent:n,cache:l},Ec(t),Ha(t,ct,l)):((e.lanes&s)!==0&&(Ac(e,t),Fn(t,null,null,s),Kn()),l=e.memoizedState,r=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Ha(t,ct,n)):(n=r.cache,Ha(t,ct,n),n!==l.cache&&Nc(t,[ct],s,!0))),ht(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Ea(e){e.flags|=4}function Xm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(t=Ft.current,t!==null&&((Be&4194048)===Be?da!==null:(Be&62914560)!==Be&&(Be&536870912)===0||t!==da))throw Jn=kc,zd;e.flags|=8192}}function Qi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ku():536870912,e.lanes|=t,rn|=t)}function ll(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function zg(e,t,s){var n=t.pendingProps;switch(yc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return s=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sa(ct),fe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&($n(t)?Ea(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kd())),Fe(t),null;case 26:return s=t.memoizedState,e===null?(Ea(t),s!==null?(Fe(t),Xm(t,s)):(Fe(t),t.flags&=-16777217)):s?s!==e.memoizedState?(Ea(t),Fe(t),Xm(t,s)):(Fe(t),t.flags&=-16777217):(e.memoizedProps!==n&&Ea(t),Fe(t),t.flags&=-16777217),null;case 27:ge(t),s=se.current;var l=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ea(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Fe(t),null}e=O.current,$n(t)?wd(t):(e=Jf(l,n,s),t.stateNode=e,Ea(t))}return Fe(t),null;case 5:if(ge(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Ea(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Fe(t),null}if(e=O.current,$n(t))wd(t);else{switch(l=er(se.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?l.createElement("select",{is:n.is}):l.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?l.createElement(s,{is:n.is}):l.createElement(s)}}e[jt]=t,e[kt]=n;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=e;e:switch(gt(e,s,n),s){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ea(t)}}return Fe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Ea(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=se.current,$n(t)){if(e=t.stateNode,s=t.memoizedProps,n=null,l=Ct,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[jt]=t,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||$f(e.nodeValue,s)),e||ys(t)}else e=er(e).createTextNode(n),e[jt]=t,t.stateNode=e}return Fe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=$n(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(u(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[jt]=t}else Gn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),l=!1}else l=kd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Ca(t),t):(Ca(t),null)}if(Ca(t),(t.flags&128)!==0)return t.lanes=s,t;if(s=n!==null,e=e!==null&&e.memoizedState!==null,s){n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool);var r=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==l&&(n.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),Qi(t,t.updateQueue),Fe(t),null;case 4:return fe(),e===null&&zo(t.stateNode.containerInfo),Fe(t),null;case 10:return Sa(t.type),Fe(t),null;case 19:if(U(ot),l=t.memoizedState,l===null)return Fe(t),null;if(n=(t.flags&128)!==0,r=l.rendering,r===null)if(n)ll(l,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Ri(e),r!==null){for(t.flags|=128,ll(l,!1),e=r.updateQueue,t.updateQueue=e,Qi(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Nd(s,e),s=s.sibling;return P(ot,ot.current&1|2),t.child}e=e.sibling}l.tail!==null&&he()>Vi&&(t.flags|=128,n=!0,ll(l,!1),t.lanes=4194304)}else{if(!n)if(e=Ri(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Qi(t,e),ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Ue)return Fe(t),null}else 2*he()-l.renderingStartTime>Vi&&s!==536870912&&(t.flags|=128,n=!0,ll(l,!1),t.lanes=4194304);l.isBackwards?(r.sibling=t.child,t.child=r):(e=l.last,e!==null?e.sibling=r:t.child=r,l.last=r)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=he(),t.sibling=null,e=ot.current,P(ot,n?e&1|2:e&1),t):(Fe(t),null);case 22:case 23:return Ca(t),Mc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(s&536870912)!==0&&(t.flags&128)===0&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),s=t.updateQueue,s!==null&&Qi(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==s&&(t.flags|=2048),e!==null&&U(bs),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Sa(ct),Fe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Mg(e,t){switch(yc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sa(ct),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ge(t),null;case 13:if(Ca(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(ot),null;case 4:return fe(),null;case 10:return Sa(t.type),null;case 22:case 23:return Ca(t),Mc(),e!==null&&U(bs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Sa(ct),null;case 25:return null;default:return null}}function Jm(e,t){switch(yc(t),t.tag){case 3:Sa(ct),fe();break;case 26:case 27:case 5:ge(t);break;case 4:fe();break;case 13:Ca(t);break;case 19:U(ot);break;case 10:Sa(t.type);break;case 22:case 23:Ca(t),Mc(),e!==null&&U(bs);break;case 24:Sa(ct)}}function il(e,t){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var l=n.next;s=l;do{if((s.tag&e)===e){n=void 0;var r=s.create,g=s.inst;n=r(),g.destroy=n}s=s.next}while(s!==l)}}catch(j){Je(t,t.return,j)}}function Ia(e,t,s){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var r=l.next;n=r;do{if((n.tag&e)===e){var g=n.inst,j=g.destroy;if(j!==void 0){g.destroy=void 0,l=t;var M=s,F=j;try{F()}catch(re){Je(l,M,re)}}}n=n.next}while(n!==r)}}catch(re){Je(t,t.return,re)}}function Zm(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Ld(t,s)}catch(n){Je(e,e.return,n)}}}function Km(e,t,s){s.props=Ss(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){Je(e,t,n)}}function rl(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(l){Je(e,t,l)}}function ma(e,t){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(l){Je(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(l){Je(e,t,l)}else s.current=null}function Fm(e){var t=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(l){Je(e,e.return,l)}}function io(e,t,s){try{var n=e.stateNode;Wg(n,e.type,s,t),n[kt]=t}catch(l){Je(e,e.return,l)}}function Wm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&es(e.type)||e.tag===4}function ro(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&es(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function co(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Wi));else if(n!==4&&(n===27&&es(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(co(e,t,s),e=e.sibling;e!==null;)co(e,t,s),e=e.sibling}function $i(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(n===27&&es(e.type)&&(s=e.stateNode),e=e.child,e!==null))for($i(e,t,s),e=e.sibling;e!==null;)$i(e,t,s),e=e.sibling}function ef(e){var t=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);gt(t,n,s),t[jt]=e,t[kt]=s}catch(r){Je(e,e.return,r)}}var Aa=!1,st=!1,oo=!1,tf=typeof WeakSet=="function"?WeakSet:Set,mt=null;function _g(e,t){if(e=e.containerInfo,Oo=ir,e=md(e),rc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var l=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var g=0,j=-1,M=-1,F=0,re=0,oe=e,W=null;t:for(;;){for(var ae;oe!==s||l!==0&&oe.nodeType!==3||(j=g+l),oe!==r||n!==0&&oe.nodeType!==3||(M=g+n),oe.nodeType===3&&(g+=oe.nodeValue.length),(ae=oe.firstChild)!==null;)W=oe,oe=ae;for(;;){if(oe===e)break t;if(W===s&&++F===l&&(j=g),W===r&&++re===n&&(M=g),(ae=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ae}s=j===-1||M===-1?null:{start:j,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(qo={focusedElem:e,selectionRange:s},ir=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,l=r.memoizedProps,r=r.memoizedState,n=s.stateNode;try{var Ae=Ss(s.type,l,s.elementType===s.type);e=n.getSnapshotBeforeUpdate(Ae,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(ke){Je(s,s.return,ke)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Bo(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function af(e,t,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:Pa(e,s),n&4&&il(5,s);break;case 1:if(Pa(e,s),n&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(g){Je(s,s.return,g)}else{var l=Ss(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Je(s,s.return,g)}}n&64&&Zm(s),n&512&&rl(s,s.return);break;case 3:if(Pa(e,s),n&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Ld(e,t)}catch(g){Je(s,s.return,g)}}break;case 27:t===null&&n&4&&ef(s);case 26:case 5:Pa(e,s),t===null&&n&4&&Fm(s),n&512&&rl(s,s.return);break;case 12:Pa(e,s);break;case 13:Pa(e,s),n&4&&lf(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=$g.bind(null,s),ip(e,s))));break;case 22:if(n=s.memoizedState!==null||Aa,!n){t=t!==null&&t.memoizedState!==null||st,l=Aa;var r=st;Aa=n,(st=t)&&!r?Xa(e,s,(s.subtreeFlags&8772)!==0):Pa(e,s),Aa=l,st=r}break;case 30:break;default:Pa(e,s)}}function sf(e){var t=e.alternate;t!==null&&(e.alternate=null,sf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$r(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ke=null,Dt=!1;function Da(e,t,s){for(s=s.child;s!==null;)nf(e,t,s),s=s.sibling}function nf(e,t,s){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(An,s)}catch{}switch(s.tag){case 26:st||ma(s,t),Da(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:st||ma(s,t);var n=Ke,l=Dt;es(s.type)&&(Ke=s.stateNode,Dt=!1),Da(e,t,s),gl(s.stateNode),Ke=n,Dt=l;break;case 5:st||ma(s,t);case 6:if(n=Ke,l=Dt,Ke=null,Da(e,t,s),Ke=n,Dt=l,Ke!==null)if(Dt)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(s.stateNode)}catch(r){Je(s,t,r)}else try{Ke.removeChild(s.stateNode)}catch(r){Je(s,t,r)}break;case 18:Ke!==null&&(Dt?(e=Ke,Pf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),wl(e)):Pf(Ke,s.stateNode));break;case 4:n=Ke,l=Dt,Ke=s.stateNode.containerInfo,Dt=!0,Da(e,t,s),Ke=n,Dt=l;break;case 0:case 11:case 14:case 15:st||Ia(2,s,t),st||Ia(4,s,t),Da(e,t,s);break;case 1:st||(ma(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"&&Km(s,t,n)),Da(e,t,s);break;case 21:Da(e,t,s);break;case 22:st=(n=st)||s.memoizedState!==null,Da(e,t,s),st=n;break;default:Da(e,t,s)}}function lf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wl(e)}catch(s){Je(t,t.return,s)}}function Og(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new tf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new tf),t;default:throw Error(u(435,e.tag))}}function uo(e,t){var s=Og(e);t.forEach(function(n){var l=Gg.bind(null,e,n);s.has(n)||(s.add(n),n.then(l,l))})}function Qt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var l=s[n],r=e,g=t,j=g;e:for(;j!==null;){switch(j.tag){case 27:if(es(j.type)){Ke=j.stateNode,Dt=!1;break e}break;case 5:Ke=j.stateNode,Dt=!1;break e;case 3:case 4:Ke=j.stateNode.containerInfo,Dt=!0;break e}j=j.return}if(Ke===null)throw Error(u(160));nf(r,g,l),Ke=null,Dt=!1,r=l.alternate,r!==null&&(r.return=null),l.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)rf(t,e),t=t.sibling}var sa=null;function rf(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),$t(e),n&4&&(Ia(3,e,e.return),il(3,e),Ia(5,e,e.return));break;case 1:Qt(t,e),$t(e),n&512&&(st||s===null||ma(s,s.return)),n&64&&Aa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var l=sa;if(Qt(t,e),$t(e),n&512&&(st||s===null||ma(s,s.return)),n&4){var r=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":r=l.getElementsByTagName("title")[0],(!r||r[zn]||r[jt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=l.createElement(n),l.head.insertBefore(r,l.querySelector("head > title"))),gt(r,n,s),r[jt]=e,ut(r),n=r;break e;case"link":var g=th("link","href",l).get(n+(s.href||""));if(g){for(var j=0;j<g.length;j++)if(r=g[j],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(j,1);break t}}r=l.createElement(n),gt(r,n,s),l.head.appendChild(r);break;case"meta":if(g=th("meta","content",l).get(n+(s.content||""))){for(j=0;j<g.length;j++)if(r=g[j],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(j,1);break t}}r=l.createElement(n),gt(r,n,s),l.head.appendChild(r);break;default:throw Error(u(468,n))}r[jt]=e,ut(r),n=r}e.stateNode=n}else ah(l,e.type,e.stateNode);else e.stateNode=eh(l,n,e.memoizedProps);else r!==n?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,n===null?ah(l,e.type,e.stateNode):eh(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&io(e,e.memoizedProps,s.memoizedProps)}break;case 27:Qt(t,e),$t(e),n&512&&(st||s===null||ma(s,s.return)),s!==null&&n&4&&io(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Qt(t,e),$t(e),n&512&&(st||s===null||ma(s,s.return)),e.flags&32){l=e.stateNode;try{Bs(l,"")}catch(ae){Je(e,e.return,ae)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,io(e,l,s!==null?s.memoizedProps:l)),n&1024&&(oo=!0);break;case 6:if(Qt(t,e),$t(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(ae){Je(e,e.return,ae)}}break;case 3:if(sr=null,l=sa,sa=tr(t.containerInfo),Qt(t,e),sa=l,$t(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{wl(t.containerInfo)}catch(ae){Je(e,e.return,ae)}oo&&(oo=!1,cf(e));break;case 4:n=sa,sa=tr(e.stateNode.containerInfo),Qt(t,e),$t(e),sa=n;break;case 12:Qt(t,e),$t(e);break;case 13:Qt(t,e),$t(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(po=he()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,uo(e,n)));break;case 22:l=e.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,F=Aa,re=st;if(Aa=F||l,st=re||M,Qt(t,e),st=re,Aa=F,$t(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(s===null||M||Aa||st||ws(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){M=s=t;try{if(r=M.stateNode,l)g=r.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{j=M.stateNode;var oe=M.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;j.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ae){Je(M,M.return,ae)}}}else if(t.tag===6){if(s===null){M=t;try{M.stateNode.nodeValue=l?"":M.memoizedProps}catch(ae){Je(M,M.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,uo(e,s))));break;case 19:Qt(t,e),$t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,uo(e,n)));break;case 30:break;case 21:break;default:Qt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{for(var s,n=e.return;n!==null;){if(Wm(n)){s=n;break}n=n.return}if(s==null)throw Error(u(160));switch(s.tag){case 27:var l=s.stateNode,r=ro(e);$i(e,r,l);break;case 5:var g=s.stateNode;s.flags&32&&(Bs(g,""),s.flags&=-33);var j=ro(e);$i(e,j,g);break;case 3:case 4:var M=s.stateNode.containerInfo,F=ro(e);co(e,F,M);break;default:throw Error(u(161))}}catch(re){Je(e,e.return,re)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;cf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)af(e,t.alternate,t),t=t.sibling}function ws(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ia(4,t,t.return),ws(t);break;case 1:ma(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Km(t,t.return,s),ws(t);break;case 27:gl(t.stateNode);case 26:case 5:ma(t,t.return),ws(t);break;case 22:t.memoizedState===null&&ws(t);break;case 30:ws(t);break;default:ws(t)}e=e.sibling}}function Xa(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,r=t,g=r.flags;switch(r.tag){case 0:case 11:case 15:Xa(l,r,s),il(4,r);break;case 1:if(Xa(l,r,s),n=r,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(F){Je(n,n.return,F)}if(n=r,l=n.updateQueue,l!==null){var j=n.stateNode;try{var M=l.shared.hiddenCallbacks;if(M!==null)for(l.shared.hiddenCallbacks=null,l=0;l<M.length;l++)Rd(M[l],j)}catch(F){Je(n,n.return,F)}}s&&g&64&&Zm(r),rl(r,r.return);break;case 27:ef(r);case 26:case 5:Xa(l,r,s),s&&n===null&&g&4&&Fm(r),rl(r,r.return);break;case 12:Xa(l,r,s);break;case 13:Xa(l,r,s),s&&g&4&&lf(l,r);break;case 22:r.memoizedState===null&&Xa(l,r,s),rl(r,r.return);break;case 30:break;default:Xa(l,r,s)}t=t.sibling}}function mo(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&In(s))}function fo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&In(e))}function fa(e,t,s,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)of(e,t,s,n),t=t.sibling}function of(e,t,s,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:fa(e,t,s,n),l&2048&&il(9,t);break;case 1:fa(e,t,s,n);break;case 3:fa(e,t,s,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&In(e)));break;case 12:if(l&2048){fa(e,t,s,n),e=t.stateNode;try{var r=t.memoizedProps,g=r.id,j=r.onPostCommit;typeof j=="function"&&j(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Je(t,t.return,M)}}else fa(e,t,s,n);break;case 13:fa(e,t,s,n);break;case 23:break;case 22:r=t.stateNode,g=t.alternate,t.memoizedState!==null?r._visibility&2?fa(e,t,s,n):cl(e,t):r._visibility&2?fa(e,t,s,n):(r._visibility|=2,sn(e,t,s,n,(t.subtreeFlags&10256)!==0)),l&2048&&mo(g,t);break;case 24:fa(e,t,s,n),l&2048&&fo(t.alternate,t);break;default:fa(e,t,s,n)}}function sn(e,t,s,n,l){for(l=l&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,g=t,j=s,M=n,F=g.flags;switch(g.tag){case 0:case 11:case 15:sn(r,g,j,M,l),il(8,g);break;case 23:break;case 22:var re=g.stateNode;g.memoizedState!==null?re._visibility&2?sn(r,g,j,M,l):cl(r,g):(re._visibility|=2,sn(r,g,j,M,l)),l&&F&2048&&mo(g.alternate,g);break;case 24:sn(r,g,j,M,l),l&&F&2048&&fo(g.alternate,g);break;default:sn(r,g,j,M,l)}t=t.sibling}}function cl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,n=t,l=n.flags;switch(n.tag){case 22:cl(s,n),l&2048&&mo(n.alternate,n);break;case 24:cl(s,n),l&2048&&fo(n.alternate,n);break;default:cl(s,n)}t=t.sibling}}var ol=8192;function nn(e){if(e.subtreeFlags&ol)for(e=e.child;e!==null;)uf(e),e=e.sibling}function uf(e){switch(e.tag){case 26:nn(e),e.flags&ol&&e.memoizedState!==null&&vp(sa,e.memoizedState,e.memoizedProps);break;case 5:nn(e);break;case 3:case 4:var t=sa;sa=tr(e.stateNode.containerInfo),nn(e),sa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ol,ol=16777216,nn(e),ol=t):nn(e));break;default:nn(e)}}function df(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ul(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];mt=n,ff(n,e)}df(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)mf(e),e=e.sibling}function mf(e){switch(e.tag){case 0:case 11:case 15:ul(e),e.flags&2048&&Ia(9,e,e.return);break;case 3:ul(e);break;case 12:ul(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gi(e)):ul(e);break;default:ul(e)}}function Gi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];mt=n,ff(n,e)}df(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ia(8,t,t.return),Gi(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Gi(t));break;default:Gi(t)}e=e.sibling}}function ff(e,t){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:Ia(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:In(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,mt=n;else e:for(s=e;mt!==null;){n=mt;var l=n.sibling,r=n.return;if(sf(n),n===s){mt=null;break e}if(l!==null){l.return=r,mt=l;break e}mt=r}}}var qg={getCacheForType:function(e){var t=bt(ct),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},Rg=typeof WeakMap=="function"?WeakMap:Map,Ve=0,Ze=null,Re=null,Be=0,Ye=0,Gt=null,Ja=!1,ln=!1,ho=!1,Ta=0,tt=0,Za=0,Cs=0,xo=0,Wt=0,rn=0,dl=null,Tt=null,go=!1,po=0,Vi=1/0,Yi=null,Ka=null,xt=0,Fa=null,cn=null,on=0,yo=0,vo=null,hf=null,ml=0,jo=null;function Vt(){if((Ve&2)!==0&&Be!==0)return Be&-Be;if(G.T!==null){var e=Js;return e!==0?e:Eo()}return Du()}function xf(){Wt===0&&(Wt=(Be&536870912)===0||Ue?Cu():536870912);var e=Ft.current;return e!==null&&(e.flags|=32),Wt}function Yt(e,t,s){(e===Ze&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(un(e,0),Wa(e,Be,Wt,!1)),Tn(e,s),((Ve&2)===0||e!==Ze)&&(e===Ze&&((Ve&2)===0&&(Cs|=s),tt===4&&Wa(e,Be,Wt,!1)),ha(e))}function gf(e,t,s){if((Ve&6)!==0)throw Error(u(327));var n=!s&&(t&124)===0&&(t&e.expiredLanes)===0||Dn(e,t),l=n?Hg(e,t):So(e,t,!0),r=n;do{if(l===0){ln&&!n&&Wa(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!Lg(s)){l=So(e,t,!1),r=!1;continue}if(l===2){if(r=t,e.errorRecoveryDisabledLanes&r)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var j=e;l=dl;var M=j.current.memoizedState.isDehydrated;if(M&&(un(j,g).flags|=256),g=So(j,g,!1),g!==2){if(ho&&!M){j.errorRecoveryDisabledLanes|=r,Cs|=r,l=4;break e}r=Tt,Tt=l,r!==null&&(Tt===null?Tt=r:Tt.push.apply(Tt,r))}l=g}if(r=!1,l!==2)continue}}if(l===1){un(e,0),Wa(e,t,0,!0);break}e:{switch(n=e,r=l,r){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Wa(n,t,Wt,!Ja);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(l=po+300-he(),10<l)){if(Wa(n,t,Wt,!Ja),ai(n,0,!0)!==0)break e;n.timeoutHandle=Yf(pf.bind(null,n,s,Tt,Yi,go,t,Wt,Cs,rn,Ja,r,2,-0,0),l);break e}pf(n,s,Tt,Yi,go,t,Wt,Cs,rn,Ja,r,0,-0,0)}}break}while(!0);ha(e)}function pf(e,t,s,n,l,r,g,j,M,F,re,oe,W,ae){if(e.timeoutHandle=-1,oe=t.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(vl={stylesheets:null,count:0,unsuspend:yp},uf(t),oe=jp(),oe!==null)){e.cancelPendingCommit=oe(wf.bind(null,e,t,r,s,n,l,g,j,M,re,1,W,ae)),Wa(e,r,g,!F);return}wf(e,t,r,s,n,l,g,j,M)}function Lg(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var l=s[n],r=l.getSnapshot;l=l.value;try{if(!Ht(r(),l))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wa(e,t,s,n){t&=~xo,t&=~Cs,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var r=31-Bt(l),g=1<<r;n[r]=-1,l&=~g}s!==0&&Eu(e,s,t)}function Ii(){return(Ve&6)===0?(fl(0),!1):!0}function bo(){if(Re!==null){if(Ye===0)var e=Re.return;else e=Re,Na=vs=null,Lc(e),tn=null,sl=0,e=Re;for(;e!==null;)Jm(e.alternate,e),e=e.return;Re=null}}function un(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,tp(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),bo(),Ze=e,Re=s=va(e.current,null),Be=t,Ye=0,Gt=null,Ja=!1,ln=Dn(e,t),ho=!1,rn=Wt=xo=Cs=Za=tt=0,Tt=dl=null,go=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-Bt(n),r=1<<l;t|=e[l],n&=~r}return Ta=t,hi(),s}function yf(e,t){_e=null,G.H=_i,t===Xn||t===Si?(t=Od(),Ye=3):t===zd?(t=Od(),Ye=4):Ye=t===qm?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Gt=t,Re===null&&(tt=1,Bi(e,Xt(t,e.current)))}function vf(){var e=G.H;return G.H=_i,e===null?_i:e}function jf(){var e=G.A;return G.A=qg,e}function No(){tt=4,Ja||(Be&4194048)!==Be&&Ft.current!==null||(ln=!0),(Za&134217727)===0&&(Cs&134217727)===0||Ze===null||Wa(Ze,Be,Wt,!1)}function So(e,t,s){var n=Ve;Ve|=2;var l=vf(),r=jf();(Ze!==e||Be!==t)&&(Yi=null,un(e,t)),t=!1;var g=tt;e:do try{if(Ye!==0&&Re!==null){var j=Re,M=Gt;switch(Ye){case 8:bo(),g=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var F=Ye;if(Ye=0,Gt=null,dn(e,j,M,F),s&&ln){g=0;break e}break;default:F=Ye,Ye=0,Gt=null,dn(e,j,M,F)}}Bg(),g=tt;break}catch(re){yf(e,re)}while(!0);return t&&e.shellSuspendCounter++,Na=vs=null,Ve=n,G.H=l,G.A=r,Re===null&&(Ze=null,Be=0,hi()),g}function Bg(){for(;Re!==null;)bf(Re)}function Hg(e,t){var s=Ve;Ve|=2;var n=vf(),l=jf();Ze!==e||Be!==t?(Yi=null,Vi=he()+500,un(e,t)):ln=Dn(e,t);e:do try{if(Ye!==0&&Re!==null){t=Re;var r=Gt;t:switch(Ye){case 1:Ye=0,Gt=null,dn(e,t,r,1);break;case 2:case 9:if(Md(r)){Ye=0,Gt=null,Nf(t);break}t=function(){Ye!==2&&Ye!==9||Ze!==e||(Ye=7),ha(e)},r.then(t,t);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Md(r)?(Ye=0,Gt=null,Nf(t)):(Ye=0,Gt=null,dn(e,t,r,7));break;case 5:var g=null;switch(Re.tag){case 26:g=Re.memoizedState;case 5:case 27:var j=Re;if(!g||sh(g)){Ye=0,Gt=null;var M=j.sibling;if(M!==null)Re=M;else{var F=j.return;F!==null?(Re=F,Pi(F)):Re=null}break t}}Ye=0,Gt=null,dn(e,t,r,5);break;case 6:Ye=0,Gt=null,dn(e,t,r,6);break;case 8:bo(),tt=6;break e;default:throw Error(u(462))}}Ug();break}catch(re){yf(e,re)}while(!0);return Na=vs=null,G.H=n,G.A=l,Ve=s,Re!==null?0:(Ze=null,Be=0,hi(),tt)}function Ug(){for(;Re!==null&&!Ce();)bf(Re)}function bf(e){var t=Pm(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,t===null?Pi(e):Re=t}function Nf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Qm(s,t,t.pendingProps,t.type,void 0,Be);break;case 11:t=Qm(s,t,t.pendingProps,t.type.render,t.ref,Be);break;case 5:Lc(t);default:Jm(s,t),t=Re=Nd(t,Ta),t=Pm(s,t,Ta)}e.memoizedProps=e.pendingProps,t===null?Pi(e):Re=t}function dn(e,t,s,n){Na=vs=null,Lc(t),tn=null,sl=0;var l=t.return;try{if(Dg(e,l,t,s,Be)){tt=1,Bi(e,Xt(s,e.current)),Re=null;return}}catch(r){if(l!==null)throw Re=l,r;tt=1,Bi(e,Xt(s,e.current)),Re=null;return}t.flags&32768?(Ue||n===1?e=!0:ln||(Be&536870912)!==0?e=!1:(Ja=e=!0,(n===2||n===9||n===3||n===6)&&(n=Ft.current,n!==null&&n.tag===13&&(n.flags|=16384))),Sf(t,e)):Pi(t)}function Pi(e){var t=e;do{if((t.flags&32768)!==0){Sf(t,Ja);return}e=t.return;var s=zg(t.alternate,t,Ta);if(s!==null){Re=s;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);tt===0&&(tt=5)}function Sf(e,t){do{var s=Mg(e.alternate,e);if(s!==null){s.flags&=32767,Re=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=s}while(e!==null);tt=6,Re=null}function wf(e,t,s,n,l,r,g,j,M){e.cancelPendingCommit=null;do Xi();while(xt!==0);if((Ve&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(r=t.lanes|t.childLanes,r|=mc,yx(e,s,r,g,j,M),e===Ze&&(Re=Ze=null,Be=0),cn=t,Fa=e,on=s,yo=r,vo=l,hf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Vg(Oe,function(){return Df(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=G.T,G.T=null,l=Y.p,Y.p=2,g=Ve,Ve|=4;try{_g(e,t,s)}finally{Ve=g,Y.p=l,G.T=n}}xt=1,Cf(),kf(),Ef()}}function Cf(){if(xt===1){xt=0;var e=Fa,t=cn,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null;var n=Y.p;Y.p=2;var l=Ve;Ve|=4;try{rf(t,e);var r=qo,g=md(e.containerInfo),j=r.focusedElem,M=r.selectionRange;if(g!==j&&j&&j.ownerDocument&&dd(j.ownerDocument.documentElement,j)){if(M!==null&&rc(j)){var F=M.start,re=M.end;if(re===void 0&&(re=F),"selectionStart"in j)j.selectionStart=F,j.selectionEnd=Math.min(re,j.value.length);else{var oe=j.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ae=W.getSelection(),Ae=j.textContent.length,ke=Math.min(M.start,Ae),Xe=M.end===void 0?ke:Math.min(M.end,Ae);!ae.extend&&ke>Xe&&(g=Xe,Xe=ke,ke=g);var X=ud(j,ke),$=ud(j,Xe);if(X&&$&&(ae.rangeCount!==1||ae.anchorNode!==X.node||ae.anchorOffset!==X.offset||ae.focusNode!==$.node||ae.focusOffset!==$.offset)){var K=oe.createRange();K.setStart(X.node,X.offset),ae.removeAllRanges(),ke>Xe?(ae.addRange(K),ae.extend($.node,$.offset)):(K.setEnd($.node,$.offset),ae.addRange(K))}}}}for(oe=[],ae=j;ae=ae.parentNode;)ae.nodeType===1&&oe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<oe.length;j++){var ce=oe[j];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}ir=!!Oo,qo=Oo=null}finally{Ve=l,Y.p=n,G.T=s}}e.current=t,xt=2}}function kf(){if(xt===2){xt=0;var e=Fa,t=cn,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=G.T,G.T=null;var n=Y.p;Y.p=2;var l=Ve;Ve|=4;try{af(e,t.alternate,t)}finally{Ve=l,Y.p=n,G.T=s}}xt=3}}function Ef(){if(xt===4||xt===3){xt=0,me();var e=Fa,t=cn,s=on,n=hf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?xt=5:(xt=0,cn=Fa=null,Af(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ka=null),Ur(s),t=t.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(An,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=G.T,l=Y.p,Y.p=2,G.T=null;try{for(var r=e.onRecoverableError,g=0;g<n.length;g++){var j=n[g];r(j.value,{componentStack:j.stack})}}finally{G.T=t,Y.p=l}}(on&3)!==0&&Xi(),ha(e),l=e.pendingLanes,(s&4194090)!==0&&(l&42)!==0?e===jo?ml++:(ml=0,jo=e):ml=0,fl(0)}}function Af(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,In(t)))}function Xi(e){return Cf(),kf(),Ef(),Df()}function Df(){if(xt!==5)return!1;var e=Fa,t=yo;yo=0;var s=Ur(on),n=G.T,l=Y.p;try{Y.p=32>s?32:s,G.T=null,s=vo,vo=null;var r=Fa,g=on;if(xt=0,cn=Fa=null,on=0,(Ve&6)!==0)throw Error(u(331));var j=Ve;if(Ve|=4,mf(r.current),of(r,r.current,g,s),Ve=j,fl(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(An,r)}catch{}return!0}finally{Y.p=l,G.T=n,Af(e,t)}}function Tf(e,t,s){t=Xt(s,t),t=Kc(e.stateNode,t,2),e=$a(e,t,2),e!==null&&(Tn(e,2),ha(e))}function Je(e,t,s){if(e.tag===3)Tf(e,e,s);else for(;t!==null;){if(t.tag===3){Tf(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ka===null||!Ka.has(n))){e=Xt(s,e),s=_m(2),n=$a(t,s,2),n!==null&&(Om(s,n,t,e),Tn(n,2),ha(n));break}}t=t.return}}function wo(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Rg;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(s)||(ho=!0,l.add(s),e=Qg.bind(null,e,t,s),t.then(e,e))}function Qg(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ze===e&&(Be&s)===s&&(tt===4||tt===3&&(Be&62914560)===Be&&300>he()-po?(Ve&2)===0&&un(e,0):xo|=s,rn===Be&&(rn=0)),ha(e)}function zf(e,t){t===0&&(t=ku()),e=Ys(e,t),e!==null&&(Tn(e,t),ha(e))}function $g(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),zf(e,s)}function Gg(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),zf(e,s)}function Vg(e,t){return xe(e,t)}var Ji=null,mn=null,Co=!1,Zi=!1,ko=!1,ks=0;function ha(e){e!==mn&&e.next===null&&(mn===null?Ji=mn=e:mn=mn.next=e),Zi=!0,Co||(Co=!0,Ig())}function fl(e,t){if(!ko&&Zi){ko=!0;do for(var s=!1,n=Ji;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var r=0;else{var g=n.suspendedLanes,j=n.pingedLanes;r=(1<<31-Bt(42|e)+1)-1,r&=l&~(g&~j),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,qf(n,r))}else r=Be,r=ai(n,n===Ze?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||Dn(n,r)||(s=!0,qf(n,r));n=n.next}while(s);ko=!1}}function Yg(){Mf()}function Mf(){Zi=Co=!1;var e=0;ks!==0&&(ep()&&(e=ks),ks=0);for(var t=he(),s=null,n=Ji;n!==null;){var l=n.next,r=_f(n,t);r===0?(n.next=null,s===null?Ji=l:s.next=l,l===null&&(mn=s)):(s=n,(e!==0||(r&3)!==0)&&(Zi=!0)),n=l}fl(e)}function _f(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var g=31-Bt(r),j=1<<g,M=l[g];M===-1?((j&s)===0||(j&n)!==0)&&(l[g]=px(j,t)):M<=t&&(e.expiredLanes|=j),r&=~j}if(t=Ze,s=Be,s=ai(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===t&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Ne(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Dn(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(n!==null&&Ne(n),Ur(s)){case 2:case 8:s=De;break;case 32:s=Oe;break;case 268435456:s=Ts;break;default:s=Oe}return n=Of.bind(null,e),s=xe(s,n),e.callbackPriority=t,e.callbackNode=s,t}return n!==null&&n!==null&&Ne(n),e.callbackPriority=2,e.callbackNode=null,2}function Of(e,t){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Xi()&&e.callbackNode!==s)return null;var n=Be;return n=ai(e,e===Ze?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(gf(e,n,t),_f(e,he()),e.callbackNode!=null&&e.callbackNode===s?Of.bind(null,e):null)}function qf(e,t){if(Xi())return null;gf(e,t,!0)}function Ig(){ap(function(){(Ve&6)!==0?xe(we,Yg):Mf()})}function Eo(){return ks===0&&(ks=Cu()),ks}function Rf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ri(""+e)}function Lf(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Pg(e,t,s,n,l){if(t==="submit"&&s&&s.stateNode===l){var r=Rf((l[kt]||null).action),g=n.submitter;g&&(t=(t=g[kt]||null)?Rf(t.formAction):g.getAttribute("formAction"),t!==null&&(r=t,g=null));var j=new di("action","action",null,n,l);e.push({event:j,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(ks!==0){var M=g?Lf(l,g):new FormData(l);Ic(s,{pending:!0,data:M,method:l.method,action:r},null,M)}}else typeof r=="function"&&(j.preventDefault(),M=g?Lf(l,g):new FormData(l),Ic(s,{pending:!0,data:M,method:l.method,action:r},r,M))},currentTarget:l}]})}}for(var Ao=0;Ao<dc.length;Ao++){var Do=dc[Ao],Xg=Do.toLowerCase(),Jg=Do[0].toUpperCase()+Do.slice(1);aa(Xg,"on"+Jg)}aa(xd,"onAnimationEnd"),aa(gd,"onAnimationIteration"),aa(pd,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(mg,"onTransitionRun"),aa(fg,"onTransitionStart"),aa(hg,"onTransitionCancel"),aa(yd,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function Bf(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],l=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var g=n.length-1;0<=g;g--){var j=n[g],M=j.instance,F=j.currentTarget;if(j=j.listener,M!==r&&l.isPropagationStopped())break e;r=j,l.currentTarget=F;try{r(l)}catch(re){Li(re)}l.currentTarget=null,r=M}else for(g=0;g<n.length;g++){if(j=n[g],M=j.instance,F=j.currentTarget,j=j.listener,M!==r&&l.isPropagationStopped())break e;r=j,l.currentTarget=F;try{r(l)}catch(re){Li(re)}l.currentTarget=null,r=M}}}}function Le(e,t){var s=t[Qr];s===void 0&&(s=t[Qr]=new Set);var n=e+"__bubble";s.has(n)||(Hf(t,e,2,!1),s.add(n))}function To(e,t,s){var n=0;t&&(n|=4),Hf(s,e,n,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function zo(e){if(!e[Ki]){e[Ki]=!0,zu.forEach(function(s){s!=="selectionchange"&&(Zg.has(s)||To(s,!1,e),To(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ki]||(t[Ki]=!0,To("selectionchange",!1,t))}}function Hf(e,t,s,n){switch(oh(t)){case 2:var l=Sp;break;case 8:l=wp;break;default:l=Yo}s=l.bind(null,t,s,e),l=void 0,!Fr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function Mo(e,t,s,n,l){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var g=n.tag;if(g===3||g===4){var j=n.stateNode.containerInfo;if(j===l)break;if(g===4)for(g=n.return;g!==null;){var M=g.tag;if((M===3||M===4)&&g.stateNode.containerInfo===l)return;g=g.return}for(;j!==null;){if(g=Ms(j),g===null)return;if(M=g.tag,M===5||M===6||M===26||M===27){n=r=g;continue e}j=j.parentNode}}n=n.return}Yu(function(){var F=r,re=Zr(s),oe=[];e:{var W=vd.get(e);if(W!==void 0){var ae=di,Ae=e;switch(e){case"keypress":if(oi(s)===0)break e;case"keydown":case"keyup":ae=Vx;break;case"focusin":Ae="focus",ae=ac;break;case"focusout":Ae="blur",ae=ac;break;case"beforeblur":case"afterblur":ae=ac;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Px;break;case xd:case gd:case pd:ae=qx;break;case yd:ae=Jx;break;case"scroll":case"scrollend":ae=Tx;break;case"wheel":ae=Kx;break;case"copy":case"cut":case"paste":ae=Lx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Zu;break;case"toggle":case"beforetoggle":ae=Wx}var ke=(t&4)!==0,Xe=!ke&&(e==="scroll"||e==="scrollend"),X=ke?W!==null?W+"Capture":null:W;ke=[];for(var $=F,K;$!==null;){var ce=$;if(K=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||K===null||X===null||(ce=_n($,X),ce!=null&&ke.push(xl($,ce,K))),Xe)break;$=$.return}0<ke.length&&(W=new ae(W,Ae,null,s,re),oe.push({event:W,listeners:ke}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",W&&s!==Jr&&(Ae=s.relatedTarget||s.fromElement)&&(Ms(Ae)||Ae[zs]))break e;if((ae||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,ae?(Ae=s.relatedTarget||s.toElement,ae=F,Ae=Ae?Ms(Ae):null,Ae!==null&&(Xe=h(Ae),ke=Ae.tag,Ae!==Xe||ke!==5&&ke!==27&&ke!==6)&&(Ae=null)):(ae=null,Ae=F),ae!==Ae)){if(ke=Xu,ce="onMouseLeave",X="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(ke=Zu,ce="onPointerLeave",X="onPointerEnter",$="pointer"),Xe=ae==null?W:Mn(ae),K=Ae==null?W:Mn(Ae),W=new ke(ce,$+"leave",ae,s,re),W.target=Xe,W.relatedTarget=K,ce=null,Ms(re)===F&&(ke=new ke(X,$+"enter",Ae,s,re),ke.target=K,ke.relatedTarget=Xe,ce=ke),Xe=ce,ae&&Ae)t:{for(ke=ae,X=Ae,$=0,K=ke;K;K=fn(K))$++;for(K=0,ce=X;ce;ce=fn(ce))K++;for(;0<$-K;)ke=fn(ke),$--;for(;0<K-$;)X=fn(X),K--;for(;$--;){if(ke===X||X!==null&&ke===X.alternate)break t;ke=fn(ke),X=fn(X)}ke=null}else ke=null;ae!==null&&Uf(oe,W,ae,ke,!1),Ae!==null&&Xe!==null&&Uf(oe,Xe,Ae,ke,!0)}}e:{if(W=F?Mn(F):window,ae=W.nodeName&&W.nodeName.toLowerCase(),ae==="select"||ae==="input"&&W.type==="file")var ve=nd;else if(ad(W))if(ld)ve=og;else{ve=rg;var qe=ig}else ae=W.nodeName,!ae||ae.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&Xr(F.elementType)&&(ve=nd):ve=cg;if(ve&&(ve=ve(e,F))){sd(oe,ve,s,re);break e}qe&&qe(e,W,F),e==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Pr(W,"number",W.value)}switch(qe=F?Mn(F):window,e){case"focusin":(ad(qe)||qe.contentEditable==="true")&&($s=qe,cc=F,Qn=null);break;case"focusout":Qn=cc=$s=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,fd(oe,s,re);break;case"selectionchange":if(dg)break;case"keydown":case"keyup":fd(oe,s,re)}var Se;if(nc)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Qs?ed(e,s)&&(Ee="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ku&&s.locale!=="ko"&&(Qs||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Qs&&(Se=Iu()):(Ba=re,Wr="value"in Ba?Ba.value:Ba.textContent,Qs=!0)),qe=Fi(F,Ee),0<qe.length&&(Ee=new Ju(Ee,e,null,s,re),oe.push({event:Ee,listeners:qe}),Se?Ee.data=Se:(Se=td(s),Se!==null&&(Ee.data=Se)))),(Se=tg?ag(e,s):sg(e,s))&&(Ee=Fi(F,"onBeforeInput"),0<Ee.length&&(qe=new Ju("onBeforeInput","beforeinput",null,s,re),oe.push({event:qe,listeners:Ee}),qe.data=Se)),Pg(oe,e,F,s,re)}Bf(oe,t)})}function xl(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Fi(e,t){for(var s=t+"Capture",n=[];e!==null;){var l=e,r=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||r===null||(l=_n(e,s),l!=null&&n.unshift(xl(e,l,r)),l=_n(e,t),l!=null&&n.push(xl(e,l,r))),e.tag===3)return n;e=e.return}return[]}function fn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Uf(e,t,s,n,l){for(var r=t._reactName,g=[];s!==null&&s!==n;){var j=s,M=j.alternate,F=j.stateNode;if(j=j.tag,M!==null&&M===n)break;j!==5&&j!==26&&j!==27||F===null||(M=F,l?(F=_n(s,r),F!=null&&g.unshift(xl(s,F,M))):l||(F=_n(s,r),F!=null&&g.push(xl(s,F,M)))),s=s.return}g.length!==0&&e.push({event:t,listeners:g})}var Kg=/\r\n?/g,Fg=/\u0000|\uFFFD/g;function Qf(e){return(typeof e=="string"?e:""+e).replace(Kg,`
`).replace(Fg,"")}function $f(e,t){return t=Qf(t),Qf(e)===t}function Wi(){}function Pe(e,t,s,n,l,r){switch(s){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Bs(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Bs(e,""+n);break;case"className":ni(e,"class",n);break;case"tabIndex":ni(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(e,s,n);break;case"style":Gu(e,n,r);break;case"data":if(t!=="object"){ni(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ri(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&Pe(e,t,"name",l.name,l,null),Pe(e,t,"formEncType",l.formEncType,l,null),Pe(e,t,"formMethod",l.formMethod,l,null),Pe(e,t,"formTarget",l.formTarget,l,null)):(Pe(e,t,"encType",l.encType,l,null),Pe(e,t,"method",l.method,l,null),Pe(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ri(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=Wi);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(s=n.__html,s!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=ri(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":Le("beforetoggle",e),Le("toggle",e),si(e,"popover",n);break;case"xlinkActuate":pa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":pa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":pa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":pa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":pa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":pa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":pa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":pa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":pa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":si(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Ax.get(s)||s,si(e,s,n))}}function _o(e,t,s,n,l,r){switch(s){case"style":Gu(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(s=n.__html,s!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"children":typeof n=="string"?Bs(e,n):(typeof n=="number"||typeof n=="bigint")&&Bs(e,""+n);break;case"onScroll":n!=null&&Le("scroll",e);break;case"onScrollEnd":n!=null&&Le("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(l=s.endsWith("Capture"),t=s.slice(2,l?s.length-7:void 0),r=e[kt]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,l),typeof n=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,n,l);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):si(e,s,n)}}}function gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var n=!1,l=!1,r;for(r in s)if(s.hasOwnProperty(r)){var g=s[r];if(g!=null)switch(r){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Pe(e,t,r,g,s,null)}}l&&Pe(e,t,"srcSet",s.srcSet,s,null),n&&Pe(e,t,"src",s.src,s,null);return;case"input":Le("invalid",e);var j=r=g=l=null,M=null,F=null;for(n in s)if(s.hasOwnProperty(n)){var re=s[n];if(re!=null)switch(n){case"name":l=re;break;case"type":g=re;break;case"checked":M=re;break;case"defaultChecked":F=re;break;case"value":r=re;break;case"defaultValue":j=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(u(137,t));break;default:Pe(e,t,n,re,s,null)}}Hu(e,r,j,M,F,g,l,!1),li(e);return;case"select":Le("invalid",e),n=g=r=null;for(l in s)if(s.hasOwnProperty(l)&&(j=s[l],j!=null))switch(l){case"value":r=j;break;case"defaultValue":g=j;break;case"multiple":n=j;default:Pe(e,t,l,j,s,null)}t=r,s=g,e.multiple=!!n,t!=null?Ls(e,!!n,t,!1):s!=null&&Ls(e,!!n,s,!0);return;case"textarea":Le("invalid",e),r=l=n=null;for(g in s)if(s.hasOwnProperty(g)&&(j=s[g],j!=null))switch(g){case"value":n=j;break;case"defaultValue":l=j;break;case"children":r=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(u(91));break;default:Pe(e,t,g,j,s,null)}Qu(e,n,l,r),li(e);return;case"option":for(M in s)if(s.hasOwnProperty(M)&&(n=s[M],n!=null))switch(M){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Pe(e,t,M,n,s,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(n=0;n<hl.length;n++)Le(hl[n],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(n=s[F],n!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Pe(e,t,F,n,s,null)}return;default:if(Xr(t)){for(re in s)s.hasOwnProperty(re)&&(n=s[re],n!==void 0&&_o(e,t,re,n,s,void 0));return}}for(j in s)s.hasOwnProperty(j)&&(n=s[j],n!=null&&Pe(e,t,j,n,s,null))}function Wg(e,t,s,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,r=null,g=null,j=null,M=null,F=null,re=null;for(ae in s){var oe=s[ae];if(s.hasOwnProperty(ae)&&oe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":M=oe;default:n.hasOwnProperty(ae)||Pe(e,t,ae,null,n,oe)}}for(var W in n){var ae=n[W];if(oe=s[W],n.hasOwnProperty(W)&&(ae!=null||oe!=null))switch(W){case"type":r=ae;break;case"name":l=ae;break;case"checked":F=ae;break;case"defaultChecked":re=ae;break;case"value":g=ae;break;case"defaultValue":j=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(u(137,t));break;default:ae!==oe&&Pe(e,t,W,ae,n,oe)}}Ir(e,g,j,M,F,re,r,l);return;case"select":ae=g=j=W=null;for(r in s)if(M=s[r],s.hasOwnProperty(r)&&M!=null)switch(r){case"value":break;case"multiple":ae=M;default:n.hasOwnProperty(r)||Pe(e,t,r,null,n,M)}for(l in n)if(r=n[l],M=s[l],n.hasOwnProperty(l)&&(r!=null||M!=null))switch(l){case"value":W=r;break;case"defaultValue":j=r;break;case"multiple":g=r;default:r!==M&&Pe(e,t,l,r,n,M)}t=j,s=g,n=ae,W!=null?Ls(e,!!s,W,!1):!!n!=!!s&&(t!=null?Ls(e,!!s,t,!0):Ls(e,!!s,s?[]:"",!1));return;case"textarea":ae=W=null;for(j in s)if(l=s[j],s.hasOwnProperty(j)&&l!=null&&!n.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Pe(e,t,j,null,n,l)}for(g in n)if(l=n[g],r=s[g],n.hasOwnProperty(g)&&(l!=null||r!=null))switch(g){case"value":W=l;break;case"defaultValue":ae=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(u(91));break;default:l!==r&&Pe(e,t,g,l,n,r)}Uu(e,W,ae);return;case"option":for(var Ae in s)if(W=s[Ae],s.hasOwnProperty(Ae)&&W!=null&&!n.hasOwnProperty(Ae))switch(Ae){case"selected":e.selected=!1;break;default:Pe(e,t,Ae,null,n,W)}for(M in n)if(W=n[M],ae=s[M],n.hasOwnProperty(M)&&W!==ae&&(W!=null||ae!=null))switch(M){case"selected":e.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Pe(e,t,M,W,n,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in s)W=s[ke],s.hasOwnProperty(ke)&&W!=null&&!n.hasOwnProperty(ke)&&Pe(e,t,ke,null,n,W);for(F in n)if(W=n[F],ae=s[F],n.hasOwnProperty(F)&&W!==ae&&(W!=null||ae!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(u(137,t));break;default:Pe(e,t,F,W,n,ae)}return;default:if(Xr(t)){for(var Xe in s)W=s[Xe],s.hasOwnProperty(Xe)&&W!==void 0&&!n.hasOwnProperty(Xe)&&_o(e,t,Xe,void 0,n,W);for(re in n)W=n[re],ae=s[re],!n.hasOwnProperty(re)||W===ae||W===void 0&&ae===void 0||_o(e,t,re,W,n,ae);return}}for(var X in s)W=s[X],s.hasOwnProperty(X)&&W!=null&&!n.hasOwnProperty(X)&&Pe(e,t,X,null,n,W);for(oe in n)W=n[oe],ae=s[oe],!n.hasOwnProperty(oe)||W===ae||W==null&&ae==null||Pe(e,t,oe,W,n,ae)}var Oo=null,qo=null;function er(e){return e.nodeType===9?e:e.ownerDocument}function Gf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lo=null;function ep(){var e=window.event;return e&&e.type==="popstate"?e===Lo?!1:(Lo=e,!0):(Lo=null,!1)}var Yf=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(sp)}:Yf;function sp(e){setTimeout(function(){throw e})}function es(e){return e==="head"}function Pf(e,t){var s=t,n=0,l=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<n&&8>n){s=n;var g=e.ownerDocument;if(s&1&&gl(g.documentElement),s&2&&gl(g.body),s&4)for(s=g.head,gl(s),g=s.firstChild;g;){var j=g.nextSibling,M=g.nodeName;g[zn]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=j}}if(l===0){e.removeChild(r),wl(t);return}l--}else s==="$"||s==="$?"||s==="$!"?l++:n=s.charCodeAt(0)-48;else n=0;s=r}while(s);wl(t)}function Bo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Bo(s),$r(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function np(e,t,s,n){for(;e.nodeType===1;){var l=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[zn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=na(e.nextSibling),e===null)break}return null}function lp(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=na(e.nextSibling),e===null))return null;return e}function Ho(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ip(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var n=function(){t(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function na(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Uo=null;function Xf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function Jf(e,t,s){switch(t=er(s),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function gl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$r(e)}var ea=new Map,Zf=new Set;function tr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var za=Y.d;Y.d={f:rp,r:cp,D:op,C:up,L:dp,m:mp,X:hp,S:fp,M:xp};function rp(){var e=za.f(),t=Ii();return e||t}function cp(e){var t=_s(e);t!==null&&t.tag===5&&t.type==="form"?xm(t):za.r(e)}var hn=typeof document>"u"?null:document;function Kf(e,t,s){var n=hn;if(n&&typeof t=="string"&&t){var l=Pt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof s=="string"&&(l+='[crossorigin="'+s+'"]'),Zf.has(l)||(Zf.add(l),e={rel:e,crossOrigin:s,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),gt(t,"link",e),ut(t),n.head.appendChild(t)))}}function op(e){za.D(e),Kf("dns-prefetch",e,null)}function up(e,t){za.C(e,t),Kf("preconnect",e,t)}function dp(e,t,s){za.L(e,t,s);var n=hn;if(n&&e&&t){var l='link[rel="preload"][as="'+Pt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(l+='[imagesrcset="'+Pt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(l+='[imagesizes="'+Pt(s.imageSizes)+'"]')):l+='[href="'+Pt(e)+'"]';var r=l;switch(t){case"style":r=xn(e);break;case"script":r=gn(e)}ea.has(r)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),ea.set(r,e),n.querySelector(l)!==null||t==="style"&&n.querySelector(pl(r))||t==="script"&&n.querySelector(yl(r))||(t=n.createElement("link"),gt(t,"link",e),ut(t),n.head.appendChild(t)))}}function mp(e,t){za.m(e,t);var s=hn;if(s&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Pt(n)+'"][href="'+Pt(e)+'"]',r=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=gn(e)}if(!ea.has(r)&&(e=v({rel:"modulepreload",href:e},t),ea.set(r,e),s.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(yl(r)))return}n=s.createElement("link"),gt(n,"link",e),ut(n),s.head.appendChild(n)}}}function fp(e,t,s){za.S(e,t,s);var n=hn;if(n&&e){var l=Os(n).hoistableStyles,r=xn(e);t=t||"default";var g=l.get(r);if(!g){var j={loading:0,preload:null};if(g=n.querySelector(pl(r)))j.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=ea.get(r))&&Qo(e,s);var M=g=n.createElement("link");ut(M),gt(M,"link",e),M._p=new Promise(function(F,re){M.onload=F,M.onerror=re}),M.addEventListener("load",function(){j.loading|=1}),M.addEventListener("error",function(){j.loading|=2}),j.loading|=4,ar(g,t,n)}g={type:"stylesheet",instance:g,count:1,state:j},l.set(r,g)}}}function hp(e,t){za.X(e,t);var s=hn;if(s&&e){var n=Os(s).hoistableScripts,l=gn(e),r=n.get(l);r||(r=s.querySelector(yl(l)),r||(e=v({src:e,async:!0},t),(t=ea.get(l))&&$o(e,t),r=s.createElement("script"),ut(r),gt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(l,r))}}function xp(e,t){za.M(e,t);var s=hn;if(s&&e){var n=Os(s).hoistableScripts,l=gn(e),r=n.get(l);r||(r=s.querySelector(yl(l)),r||(e=v({src:e,async:!0,type:"module"},t),(t=ea.get(l))&&$o(e,t),r=s.createElement("script"),ut(r),gt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(l,r))}}function Ff(e,t,s,n){var l=(l=se.current)?tr(l):null;if(!l)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=xn(s.href),s=Os(l).hoistableStyles,n=s.get(t),n||(n={type:"style",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=xn(s.href);var r=Os(l).hoistableStyles,g=r.get(e);if(g||(l=l.ownerDocument||l,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,g),(r=l.querySelector(pl(e)))&&!r._p&&(g.instance=r,g.state.loading=5),ea.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ea.set(e,s),r||gp(l,e,s,g.state))),t&&n===null)throw Error(u(528,""));return g}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gn(s),s=Os(l).hoistableScripts,n=s.get(t),n||(n={type:"script",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function xn(e){return'href="'+Pt(e)+'"'}function pl(e){return'link[rel="stylesheet"]['+e+"]"}function Wf(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function gp(e,t,s,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),gt(t,"link",s),ut(t),e.head.appendChild(t))}function gn(e){return'[src="'+Pt(e)+'"]'}function yl(e){return"script[async]"+e}function eh(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Pt(s.href)+'"]');if(n)return t.instance=n,ut(n),n;var l=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ut(n),gt(n,"style",l),ar(n,s.precedence,e),t.instance=n;case"stylesheet":l=xn(s.href);var r=e.querySelector(pl(l));if(r)return t.state.loading|=4,t.instance=r,ut(r),r;n=Wf(s),(l=ea.get(l))&&Qo(n,l),r=(e.ownerDocument||e).createElement("link"),ut(r);var g=r;return g._p=new Promise(function(j,M){g.onload=j,g.onerror=M}),gt(r,"link",n),t.state.loading|=4,ar(r,s.precedence,e),t.instance=r;case"script":return r=gn(s.src),(l=e.querySelector(yl(r)))?(t.instance=l,ut(l),l):(n=s,(l=ea.get(r))&&(n=v({},s),$o(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),ut(l),gt(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ar(n,s.precedence,e));return t.instance}function ar(e,t,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,r=l,g=0;g<n.length;g++){var j=n[g];if(j.dataset.precedence===t)r=j;else if(r!==l)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Qo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $o(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var sr=null;function th(e,t,s){if(sr===null){var n=new Map,l=sr=new Map;l.set(s,n)}else l=sr,n=l.get(s),n||(n=new Map,l.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),l=0;l<s.length;l++){var r=s[l];if(!(r[zn]||r[jt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var g=r.getAttribute(t)||"";g=e+g;var j=n.get(g);j?j.push(r):n.set(g,[r])}}return n}function ah(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function pp(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function sh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var vl=null;function yp(){}function vp(e,t,s){if(vl===null)throw Error(u(475));var n=vl;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var l=xn(s.href),r=e.querySelector(pl(l));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=nr.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=r,ut(r);return}r=e.ownerDocument||e,s=Wf(s),(l=ea.get(l))&&Qo(s,l),r=r.createElement("link"),ut(r);var g=r;g._p=new Promise(function(j,M){g.onload=j,g.onerror=M}),gt(r,"link",s),t.instance=r}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=nr.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function jp(){if(vl===null)throw Error(u(475));var e=vl;return e.stylesheets&&e.count===0&&Go(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Go(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function nr(){if(this.count--,this.count===0){if(this.stylesheets)Go(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lr=null;function Go(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lr=new Map,t.forEach(bp,e),lr=null,nr.call(e))}function bp(e,t){if(!(t.state.loading&4)){var s=lr.get(e);if(s)var n=s.get(null);else{s=new Map,lr.set(e,s);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<l.length;r++){var g=l[r];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),n=g)}n&&s.set(null,n)}l=t.instance,g=l.getAttribute("data-precedence"),r=s.get(g)||n,r===n&&s.set(null,l),s.set(g,l),this.count++,n=nr.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),r?r.parentNode.insertBefore(l,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var jl={$$typeof:z,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Np(e,t,s,n,l,r,g,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.hiddenUpdates=Br(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=r,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function nh(e,t,s,n,l,r,g,j,M,F,re,oe){return e=new Np(e,t,s,g,j,M,F,oe),t=1,r===!0&&(t|=24),r=Ut(3,null,null,t),e.current=r,r.stateNode=e,t=Sc(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:s,cache:t},Ec(r),e}function lh(e){return e?(e=Is,e):Is}function ih(e,t,s,n,l,r){l=lh(l),n.context===null?n.context=l:n.pendingContext=l,n=Qa(t),n.payload={element:s},r=r===void 0?null:r,r!==null&&(n.callback=r),s=$a(e,n,t),s!==null&&(Yt(s,e,t),Zn(s,e,t))}function rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Vo(e,t){rh(e,t),(e=e.alternate)&&rh(e,t)}function ch(e){if(e.tag===13){var t=Ys(e,67108864);t!==null&&Yt(t,e,67108864),Vo(e,67108864)}}var ir=!0;function Sp(e,t,s,n){var l=G.T;G.T=null;var r=Y.p;try{Y.p=2,Yo(e,t,s,n)}finally{Y.p=r,G.T=l}}function wp(e,t,s,n){var l=G.T;G.T=null;var r=Y.p;try{Y.p=8,Yo(e,t,s,n)}finally{Y.p=r,G.T=l}}function Yo(e,t,s,n){if(ir){var l=Io(n);if(l===null)Mo(e,t,n,rr,s),uh(e,n);else if(kp(l,e,t,s,n))n.stopPropagation();else if(uh(e,n),t&4&&-1<Cp.indexOf(e)){for(;l!==null;){var r=_s(l);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var g=os(r.pendingLanes);if(g!==0){var j=r;for(j.pendingLanes|=2,j.entangledLanes|=2;g;){var M=1<<31-Bt(g);j.entanglements[1]|=M,g&=~M}ha(r),(Ve&6)===0&&(Vi=he()+500,fl(0))}}break;case 13:j=Ys(r,2),j!==null&&Yt(j,r,2),Ii(),Vo(r,2)}if(r=Io(n),r===null&&Mo(e,t,n,rr,s),r===l)break;l=r}l!==null&&n.stopPropagation()}else Mo(e,t,n,null,s)}}function Io(e){return e=Zr(e),Po(e)}var rr=null;function Po(e){if(rr=null,e=Ms(e),e!==null){var t=h(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=y(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rr=e,null}function oh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case we:return 2;case De:return 8;case Oe:case vt:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var Xo=!1,ts=null,as=null,ss=null,bl=new Map,Nl=new Map,ns=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uh(e,t){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(t.pointerId)}}function Sl(e,t,s,n,l,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:r,targetContainers:[l]},t!==null&&(t=_s(t),t!==null&&ch(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function kp(e,t,s,n,l){switch(t){case"focusin":return ts=Sl(ts,e,t,s,n,l),!0;case"dragenter":return as=Sl(as,e,t,s,n,l),!0;case"mouseover":return ss=Sl(ss,e,t,s,n,l),!0;case"pointerover":var r=l.pointerId;return bl.set(r,Sl(bl.get(r)||null,e,t,s,n,l)),!0;case"gotpointercapture":return r=l.pointerId,Nl.set(r,Sl(Nl.get(r)||null,e,t,s,n,l)),!0}return!1}function dh(e){var t=Ms(e.target);if(t!==null){var s=h(t);if(s!==null){if(t=s.tag,t===13){if(t=y(s),t!==null){e.blockedOn=t,vx(e.priority,function(){if(s.tag===13){var n=Vt();n=Hr(n);var l=Ys(s,n);l!==null&&Yt(l,s,n),Vo(s,n)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Io(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Jr=n,s.target.dispatchEvent(n),Jr=null}else return t=_s(s),t!==null&&ch(t),e.blockedOn=s,!1;t.shift()}return!0}function mh(e,t,s){cr(e)&&s.delete(t)}function Ep(){Xo=!1,ts!==null&&cr(ts)&&(ts=null),as!==null&&cr(as)&&(as=null),ss!==null&&cr(ss)&&(ss=null),bl.forEach(mh),Nl.forEach(mh)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Xo||(Xo=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ep)))}var ur=null;function fh(e){ur!==e&&(ur=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ur===e&&(ur=null);for(var t=0;t<e.length;t+=3){var s=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(Po(n||s)===null)continue;break}var r=_s(s);r!==null&&(e.splice(t,3),t-=3,Ic(r,{pending:!0,data:l,method:s.method,action:n},n,l))}}))}function wl(e){function t(M){return or(M,e)}ts!==null&&or(ts,e),as!==null&&or(as,e),ss!==null&&or(ss,e),bl.forEach(t),Nl.forEach(t);for(var s=0;s<ns.length;s++){var n=ns[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ns.length&&(s=ns[0],s.blockedOn===null);)dh(s),s.blockedOn===null&&ns.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var l=s[n],r=s[n+1],g=l[kt]||null;if(typeof r=="function")g||fh(s);else if(g){var j=null;if(r&&r.hasAttribute("formAction")){if(l=r,g=r[kt]||null)j=g.formAction;else if(Po(l)!==null)continue}else j=g.action;typeof j=="function"?s[n+1]=j:(s.splice(n,3),n-=3),fh(s)}}}function Jo(e){this._internalRoot=e}dr.prototype.render=Jo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var s=t.current,n=Vt();ih(s,n,e,t,null,null)},dr.prototype.unmount=Jo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ih(e.current,2,null,e,null,null),Ii(),t[zs]=null}};function dr(e){this._internalRoot=e}dr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Du();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ns.length&&t!==0&&t<ns[s].priority;s++);ns.splice(s,0,e),s===0&&dh(e)}};var hh=c.version;if(hh!=="19.1.1")throw Error(u(527,hh,"19.1.1"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=x(t),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var Ap={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mr.isDisabled&&mr.supportsFiber)try{An=mr.inject(Ap),Lt=mr}catch{}}return kl.createRoot=function(e,t){if(!d(e))throw Error(u(299));var s=!1,n="",l=Dm,r=Tm,g=zm,j=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(j=t.unstable_transitionCallbacks)),t=nh(e,1,!1,null,null,s,n,l,r,g,j,null),e[zs]=t.current,zo(e),new Jo(t)},kl.hydrateRoot=function(e,t,s){if(!d(e))throw Error(u(299));var n=!1,l="",r=Dm,g=Tm,j=zm,M=null,F=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks),s.formState!==void 0&&(F=s.formState)),t=nh(e,1,!0,t,s??null,n,l,r,g,j,M,F),t.context=lh(null),s=t.current,n=Vt(),n=Hr(n),l=Qa(n),l.callback=null,$a(s,l,n),s=n,t.current.lanes=s,Tn(t,s),ha(t),e[zs]=t.current,zo(e),new dr(t)},kl.version="19.1.1",kl}var wh;function Hp(){if(wh)return Fo.exports;wh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),Fo.exports=Bp(),Fo.exports}var Up=Hp();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ch="popstate";function Qp(i={}){function c(d,h){let{pathname:y="/",search:p="",hash:x=""}=Ds(d.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),iu("",{pathname:y,search:p,hash:x},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function o(d,h){let y=d.document.querySelector("base"),p="";if(y&&y.getAttribute("href")){let x=d.location.href,f=x.indexOf("#");p=f===-1?x:x.slice(0,f)}return p+"#"+(typeof h=="string"?h:Pl(h))}function u(d,h){ia(d.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return Gp(c,o,u,i)}function We(i,c){if(i===!1||i===null||typeof i>"u")throw new Error(c)}function ia(i,c){if(!i){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function $p(){return Math.random().toString(36).substring(2,10)}function kh(i,c){return{usr:i.state,key:i.key,idx:c}}function iu(i,c,o=null,u){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof c=="string"?Ds(c):c,state:o,key:c&&c.key||u||$p()}}function Pl({pathname:i="/",search:c="",hash:o=""}){return c&&c!=="?"&&(i+=c.charAt(0)==="?"?c:"?"+c),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function Ds(i){let c={};if(i){let o=i.indexOf("#");o>=0&&(c.hash=i.substring(o),i=i.substring(0,o));let u=i.indexOf("?");u>=0&&(c.search=i.substring(u),i=i.substring(0,u)),i&&(c.pathname=i)}return c}function Gp(i,c,o,u={}){let{window:d=document.defaultView,v5Compat:h=!1}=u,y=d.history,p="POP",x=null,f=v();f==null&&(f=0,y.replaceState({...y.state,idx:f},""));function v(){return(y.state||{idx:null}).idx}function w(){p="POP";let C=v(),L=C==null?null:C-f;f=C,x&&x({action:p,location:D.location,delta:L})}function B(C,L){p="PUSH";let A=iu(D.location,C,L);o&&o(A,C),f=v()+1;let z=kh(A,f),ee=D.createHref(A);try{y.pushState(z,"",ee)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;d.location.assign(ee)}h&&x&&x({action:p,location:D.location,delta:1})}function b(C,L){p="REPLACE";let A=iu(D.location,C,L);o&&o(A,C),f=v();let z=kh(A,f),ee=D.createHref(A);y.replaceState(z,"",ee),h&&x&&x({action:p,location:D.location,delta:0})}function S(C){return Vp(C)}let D={get action(){return p},get location(){return i(d,y)},listen(C){if(x)throw new Error("A history only accepts one active listener");return d.addEventListener(Ch,w),x=C,()=>{d.removeEventListener(Ch,w),x=null}},createHref(C){return c(d,C)},createURL:S,encodeLocation(C){let L=S(C);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:B,replace:b,go(C){return y.go(C)}};return D}function Vp(i,c=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),We(o,"No window.location.(origin|href) available to create URL");let u=typeof i=="string"?i:Pl(i);return u=u.replace(/ $/,"%20"),!c&&u.startsWith("//")&&(u=o+u),new URL(u,o)}function Vh(i,c,o="/"){return Yp(i,c,o,!1)}function Yp(i,c,o,u){let d=typeof c=="string"?Ds(c):c,h=_a(d.pathname||"/",o);if(h==null)return null;let y=Yh(i);Ip(y);let p=null;for(let x=0;p==null&&x<y.length;++x){let f=s0(h);p=t0(y[x],f,u)}return p}function Yh(i,c=[],o=[],u="",d=!1){let h=(y,p,x=d,f)=>{let v={relativePath:f===void 0?y.path||"":f,caseSensitive:y.caseSensitive===!0,childrenIndex:p,route:y};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(u)&&x)return;We(v.relativePath.startsWith(u),`Absolute route path "${v.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(u.length)}let w=Ma([u,v.relativePath]),B=o.concat(v);y.children&&y.children.length>0&&(We(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Yh(y.children,c,B,w,x)),!(y.path==null&&!y.index)&&c.push({path:w,score:Wp(w,y.index),routesMeta:B})};return i.forEach((y,p)=>{if(y.path===""||!y.path?.includes("?"))h(y,p);else for(let x of Ih(y.path))h(y,p,!0,x)}),c}function Ih(i){let c=i.split("/");if(c.length===0)return[];let[o,...u]=c,d=o.endsWith("?"),h=o.replace(/\?$/,"");if(u.length===0)return d?[h,""]:[h];let y=Ih(u.join("/")),p=[];return p.push(...y.map(x=>x===""?h:[h,x].join("/"))),d&&p.push(...y),p.map(x=>i.startsWith("/")&&x===""?"/":x)}function Ip(i){i.sort((c,o)=>c.score!==o.score?o.score-c.score:e0(c.routesMeta.map(u=>u.childrenIndex),o.routesMeta.map(u=>u.childrenIndex)))}var Pp=/^:[\w-]+$/,Xp=3,Jp=2,Zp=1,Kp=10,Fp=-2,Eh=i=>i==="*";function Wp(i,c){let o=i.split("/"),u=o.length;return o.some(Eh)&&(u+=Fp),c&&(u+=Jp),o.filter(d=>!Eh(d)).reduce((d,h)=>d+(Pp.test(h)?Xp:h===""?Zp:Kp),u)}function e0(i,c){return i.length===c.length&&i.slice(0,-1).every((u,d)=>u===c[d])?i[i.length-1]-c[c.length-1]:0}function t0(i,c,o=!1){let{routesMeta:u}=i,d={},h="/",y=[];for(let p=0;p<u.length;++p){let x=u[p],f=p===u.length-1,v=h==="/"?c:c.slice(h.length)||"/",w=Ar({path:x.relativePath,caseSensitive:x.caseSensitive,end:f},v),B=x.route;if(!w&&f&&o&&!u[u.length-1].route.index&&(w=Ar({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},v)),!w)return null;Object.assign(d,w.params),y.push({params:d,pathname:Ma([h,w.pathname]),pathnameBase:r0(Ma([h,w.pathnameBase])),route:B}),w.pathnameBase!=="/"&&(h=Ma([h,w.pathnameBase]))}return y}function Ar(i,c){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[o,u]=a0(i.path,i.caseSensitive,i.end),d=c.match(o);if(!d)return null;let h=d[0],y=h.replace(/(.)\/+$/,"$1"),p=d.slice(1);return{params:u.reduce((f,{paramName:v,isOptional:w},B)=>{if(v==="*"){let S=p[B]||"";y=h.slice(0,h.length-S.length).replace(/(.)\/+$/,"$1")}const b=p[B];return w&&!b?f[v]=void 0:f[v]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:h,pathnameBase:y,pattern:i}}function a0(i,c=!1,o=!0){ia(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let u=[],d="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,p,x)=>(u.push({paramName:p,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(u.push({paramName:"*"}),d+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":i!==""&&i!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,c?void 0:"i"),u]}function s0(i){try{return i.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return ia(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),i}}function _a(i,c){if(c==="/")return i;if(!i.toLowerCase().startsWith(c.toLowerCase()))return null;let o=c.endsWith("/")?c.length-1:c.length,u=i.charAt(o);return u&&u!=="/"?null:i.slice(o)||"/"}function n0(i,c="/"){let{pathname:o,search:u="",hash:d=""}=typeof i=="string"?Ds(i):i;return{pathname:o?o.startsWith("/")?o:l0(o,c):c,search:c0(u),hash:o0(d)}}function l0(i,c){let o=c.replace(/\/+$/,"").split("/");return i.split("/").forEach(d=>{d===".."?o.length>1&&o.pop():d!=="."&&o.push(d)}),o.length>1?o.join("/"):"/"}function au(i,c,o,u){return`Cannot include a '${i}' character in a manually specified \`to.${c}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function i0(i){return i.filter((c,o)=>o===0||c.route.path&&c.route.path.length>0)}function Ph(i){let c=i0(i);return c.map((o,u)=>u===c.length-1?o.pathname:o.pathnameBase)}function Xh(i,c,o,u=!1){let d;typeof i=="string"?d=Ds(i):(d={...i},We(!d.pathname||!d.pathname.includes("?"),au("?","pathname","search",d)),We(!d.pathname||!d.pathname.includes("#"),au("#","pathname","hash",d)),We(!d.search||!d.search.includes("#"),au("#","search","hash",d)));let h=i===""||d.pathname==="",y=h?"/":d.pathname,p;if(y==null)p=o;else{let w=c.length-1;if(!u&&y.startsWith("..")){let B=y.split("/");for(;B[0]==="..";)B.shift(),w-=1;d.pathname=B.join("/")}p=w>=0?c[w]:"/"}let x=n0(d,p),f=y&&y!=="/"&&y.endsWith("/"),v=(h||y===".")&&o.endsWith("/");return!x.pathname.endsWith("/")&&(f||v)&&(x.pathname+="/"),x}var Ma=i=>i.join("/").replace(/\/\/+/g,"/"),r0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),c0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,o0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function u0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Jh=["POST","PUT","PATCH","DELETE"];new Set(Jh);var d0=["GET",...Jh];new Set(d0);var Sn=m.createContext(null);Sn.displayName="DataRouter";var _r=m.createContext(null);_r.displayName="DataRouterState";m.createContext(!1);var Zh=m.createContext({isTransitioning:!1});Zh.displayName="ViewTransition";var m0=m.createContext(new Map);m0.displayName="Fetchers";var f0=m.createContext(null);f0.displayName="Await";var xa=m.createContext(null);xa.displayName="Navigation";var Zl=m.createContext(null);Zl.displayName="Location";var ca=m.createContext({outlet:null,matches:[],isDataRoute:!1});ca.displayName="Route";var du=m.createContext(null);du.displayName="RouteError";function h0(i,{relative:c}={}){We(Kl(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:u}=m.useContext(xa),{hash:d,pathname:h,search:y}=Fl(i,{relative:c}),p=h;return o!=="/"&&(p=h==="/"?o:Ma([o,h])),u.createHref({pathname:p,search:y,hash:d})}function Kl(){return m.useContext(Zl)!=null}function cs(){return We(Kl(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Zl).location}var Kh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fh(i){m.useContext(xa).static||m.useLayoutEffect(i)}function mu(){let{isDataRoute:i}=m.useContext(ca);return i?T0():x0()}function x0(){We(Kl(),"useNavigate() may be used only in the context of a <Router> component.");let i=m.useContext(Sn),{basename:c,navigator:o}=m.useContext(xa),{matches:u}=m.useContext(ca),{pathname:d}=cs(),h=JSON.stringify(Ph(u)),y=m.useRef(!1);return Fh(()=>{y.current=!0}),m.useCallback((x,f={})=>{if(ia(y.current,Kh),!y.current)return;if(typeof x=="number"){o.go(x);return}let v=Xh(x,JSON.parse(h),d,f.relative==="path");i==null&&c!=="/"&&(v.pathname=v.pathname==="/"?c:Ma([c,v.pathname])),(f.replace?o.replace:o.push)(v,f.state,f)},[c,o,h,d,i])}var g0=m.createContext(null);function p0(i){let c=m.useContext(ca).outlet;return c&&m.createElement(g0.Provider,{value:i},c)}function y0(){let{matches:i}=m.useContext(ca),c=i[i.length-1];return c?c.params:{}}function Fl(i,{relative:c}={}){let{matches:o}=m.useContext(ca),{pathname:u}=cs(),d=JSON.stringify(Ph(o));return m.useMemo(()=>Xh(i,JSON.parse(d),u,c==="path"),[i,d,u,c])}function v0(i,c){return Wh(i,c)}function Wh(i,c,o,u,d){We(Kl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=m.useContext(xa),{matches:y}=m.useContext(ca),p=y[y.length-1],x=p?p.params:{},f=p?p.pathname:"/",v=p?p.pathnameBase:"/",w=p&&p.route;{let A=w&&w.path||"";ex(f,!w||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let B=cs(),b;if(c){let A=typeof c=="string"?Ds(c):c;We(v==="/"||A.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${A.pathname}" was given in the \`location\` prop.`),b=A}else b=B;let S=b.pathname||"/",D=S;if(v!=="/"){let A=v.replace(/^\//,"").split("/");D="/"+S.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=Vh(i,{pathname:D});ia(w||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ia(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=w0(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},x,A.params),pathname:Ma([v,h.encodeLocation?h.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?v:Ma([v,h.encodeLocation?h.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),y,o,u,d);return c&&L?m.createElement(Zl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},L):L}function j0(){let i=D0(),c=u0(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),o=i instanceof Error?i.stack:null,u="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:u},h={padding:"2px 4px",backgroundColor:u},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:h},"ErrorBoundary")," or"," ",m.createElement("code",{style:h},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},c),o?m.createElement("pre",{style:d},o):null,y)}var b0=m.createElement(j0,null),N0=class extends m.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,c){return c.location!==i.location||c.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:c.error,location:c.location,revalidation:i.revalidation||c.revalidation}}componentDidCatch(i,c){this.props.unstable_onError?this.props.unstable_onError(i,c):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?m.createElement(ca.Provider,{value:this.props.routeContext},m.createElement(du.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S0({routeContext:i,match:c,children:o}){let u=m.useContext(Sn);return u&&u.static&&u.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=c.route.id),m.createElement(ca.Provider,{value:i},o)}function w0(i,c=[],o=null,u=null,d=null){if(i==null){if(!o)return null;if(o.errors)i=o.matches;else if(c.length===0&&!o.initialized&&o.matches.length>0)i=o.matches;else return null}let h=i,y=o?.errors;if(y!=null){let f=h.findIndex(v=>v.route.id&&y?.[v.route.id]!==void 0);We(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),h=h.slice(0,Math.min(h.length,f+1))}let p=!1,x=-1;if(o)for(let f=0;f<h.length;f++){let v=h[f];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(x=f),v.route.id){let{loaderData:w,errors:B}=o,b=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!B||B[v.route.id]===void 0);if(v.route.lazy||b){p=!0,x>=0?h=h.slice(0,x+1):h=[h[0]];break}}}return h.reduceRight((f,v,w)=>{let B,b=!1,S=null,D=null;o&&(B=y&&v.route.id?y[v.route.id]:void 0,S=v.route.errorElement||b0,p&&(x<0&&w===0?(ex("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,D=null):x===w&&(b=!0,D=v.route.hydrateFallbackElement||null)));let C=c.concat(h.slice(0,w+1)),L=()=>{let A;return B?A=S:b?A=D:v.route.Component?A=m.createElement(v.route.Component,null):v.route.element?A=v.route.element:A=f,m.createElement(S0,{match:v,routeContext:{outlet:f,matches:C,isDataRoute:o!=null},children:A})};return o&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?m.createElement(N0,{location:o.location,revalidation:o.revalidation,component:S,error:B,children:L(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:u}):L()},null)}function fu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C0(i){let c=m.useContext(Sn);return We(c,fu(i)),c}function k0(i){let c=m.useContext(_r);return We(c,fu(i)),c}function E0(i){let c=m.useContext(ca);return We(c,fu(i)),c}function hu(i){let c=E0(i),o=c.matches[c.matches.length-1];return We(o.route.id,`${i} can only be used on routes that contain a unique "id"`),o.route.id}function A0(){return hu("useRouteId")}function D0(){let i=m.useContext(du),c=k0("useRouteError"),o=hu("useRouteError");return i!==void 0?i:c.errors?.[o]}function T0(){let{router:i}=C0("useNavigate"),c=hu("useNavigate"),o=m.useRef(!1);return Fh(()=>{o.current=!0}),m.useCallback(async(d,h={})=>{ia(o.current,Kh),o.current&&(typeof d=="number"?i.navigate(d):await i.navigate(d,{fromRouteId:c,...h}))},[i,c])}var Ah={};function ex(i,c,o){!c&&!Ah[i]&&(Ah[i]=!0,ia(!1,o))}m.memo(z0);function z0({routes:i,future:c,state:o,unstable_onError:u}){return Wh(i,void 0,o,u,c)}function M0(i){return p0(i.context)}function zt(i){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _0({basename:i="/",children:c=null,location:o,navigationType:u="POP",navigator:d,static:h=!1}){We(!Kl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),p=m.useMemo(()=>({basename:y,navigator:d,static:h,future:{}}),[y,d,h]);typeof o=="string"&&(o=Ds(o));let{pathname:x="/",search:f="",hash:v="",state:w=null,key:B="default"}=o,b=m.useMemo(()=>{let S=_a(x,y);return S==null?null:{location:{pathname:S,search:f,hash:v,state:w,key:B},navigationType:u}},[y,x,f,v,w,B,u]);return ia(b!=null,`<Router basename="${y}"> is not able to match the URL "${x}${f}${v}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:m.createElement(xa.Provider,{value:p},m.createElement(Zl.Provider,{children:c,value:b}))}function O0({children:i,location:c}){return v0(ru(i),c)}function ru(i,c=[]){let o=[];return m.Children.forEach(i,(u,d)=>{if(!m.isValidElement(u))return;let h=[...c,d];if(u.type===m.Fragment){o.push.apply(o,ru(u.props.children,h));return}We(u.type===zt,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!u.props.index||!u.props.children,"An index route cannot have child routes.");let y={id:u.props.id||h.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(y.children=ru(u.props.children,h)),o.push(y)}),o}var Cr="get",kr="application/x-www-form-urlencoded";function Or(i){return i!=null&&typeof i.tagName=="string"}function q0(i){return Or(i)&&i.tagName.toLowerCase()==="button"}function R0(i){return Or(i)&&i.tagName.toLowerCase()==="form"}function L0(i){return Or(i)&&i.tagName.toLowerCase()==="input"}function B0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function H0(i,c){return i.button===0&&(!c||c==="_self")&&!B0(i)}var fr=null;function U0(){if(fr===null)try{new FormData(document.createElement("form"),0),fr=!1}catch{fr=!0}return fr}var Q0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function su(i){return i!=null&&!Q0.has(i)?(ia(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kr}"`),null):i}function $0(i,c){let o,u,d,h,y;if(R0(i)){let p=i.getAttribute("action");u=p?_a(p,c):null,o=i.getAttribute("method")||Cr,d=su(i.getAttribute("enctype"))||kr,h=new FormData(i)}else if(q0(i)||L0(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=i.getAttribute("formaction")||p.getAttribute("action");if(u=x?_a(x,c):null,o=i.getAttribute("formmethod")||p.getAttribute("method")||Cr,d=su(i.getAttribute("formenctype"))||su(p.getAttribute("enctype"))||kr,h=new FormData(p,i),!U0()){let{name:f,type:v,value:w}=i;if(v==="image"){let B=f?`${f}.`:"";h.append(`${B}x`,"0"),h.append(`${B}y`,"0")}else f&&h.append(f,w)}}else{if(Or(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Cr,u=null,d=kr,y=i}return h&&d==="text/plain"&&(y=h,h=void 0),{action:u,method:o.toLowerCase(),encType:d,formData:h,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xu(i,c){if(i===!1||i===null||typeof i>"u")throw new Error(c)}function G0(i,c,o){let u=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return u.pathname==="/"?u.pathname=`_root.${o}`:c&&_a(u.pathname,c)==="/"?u.pathname=`${c.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function V0(i,c){if(i.id in c)return c[i.id];try{let o=await import(i.module);return c[i.id]=o,o}catch(o){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Y0(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function I0(i,c,o){let u=await Promise.all(i.map(async d=>{let h=c.routes[d.route.id];if(h){let y=await V0(h,o);return y.links?y.links():[]}return[]}));return Z0(u.flat(1).filter(Y0).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Dh(i,c,o,u,d,h){let y=(x,f)=>o[f]?x.route.id!==o[f].route.id:!0,p=(x,f)=>o[f].pathname!==x.pathname||o[f].route.path?.endsWith("*")&&o[f].params["*"]!==x.params["*"];return h==="assets"?c.filter((x,f)=>y(x,f)||p(x,f)):h==="data"?c.filter((x,f)=>{let v=u.routes[x.route.id];if(!v||!v.hasLoader)return!1;if(y(x,f)||p(x,f))return!0;if(x.route.shouldRevalidate){let w=x.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function P0(i,c,{includeHydrateFallback:o}={}){return X0(i.map(u=>{let d=c.routes[u.route.id];if(!d)return[];let h=[d.module];return d.clientActionModule&&(h=h.concat(d.clientActionModule)),d.clientLoaderModule&&(h=h.concat(d.clientLoaderModule)),o&&d.hydrateFallbackModule&&(h=h.concat(d.hydrateFallbackModule)),d.imports&&(h=h.concat(d.imports)),h}).flat(1))}function X0(i){return[...new Set(i)]}function J0(i){let c={},o=Object.keys(i).sort();for(let u of o)c[u]=i[u];return c}function Z0(i,c){let o=new Set;return new Set(c),i.reduce((u,d)=>{let h=JSON.stringify(J0(d));return o.has(h)||(o.add(h),u.push({key:h,link:d})),u},[])}function tx(){let i=m.useContext(Sn);return xu(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function K0(){let i=m.useContext(_r);return xu(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var gu=m.createContext(void 0);gu.displayName="FrameworkContext";function ax(){let i=m.useContext(gu);return xu(i,"You must render this element inside a <HydratedRouter> element"),i}function F0(i,c){let o=m.useContext(gu),[u,d]=m.useState(!1),[h,y]=m.useState(!1),{onFocus:p,onBlur:x,onMouseEnter:f,onMouseLeave:v,onTouchStart:w}=c,B=m.useRef(null);m.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let D=L=>{L.forEach(A=>{y(A.isIntersecting)})},C=new IntersectionObserver(D,{threshold:.5});return B.current&&C.observe(B.current),()=>{C.disconnect()}}},[i]),m.useEffect(()=>{if(u){let D=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(D)}}},[u]);let b=()=>{d(!0)},S=()=>{d(!1),y(!1)};return o?i!=="intent"?[h,B,{}]:[h,B,{onFocus:El(p,b),onBlur:El(x,S),onMouseEnter:El(f,b),onMouseLeave:El(v,S),onTouchStart:El(w,b)}]:[!1,B,{}]}function El(i,c){return o=>{i&&i(o),o.defaultPrevented||c(o)}}function W0({page:i,...c}){let{router:o}=tx(),u=m.useMemo(()=>Vh(o.routes,i,o.basename),[o.routes,i,o.basename]);return u?m.createElement(ty,{page:i,matches:u,...c}):null}function ey(i){let{manifest:c,routeModules:o}=ax(),[u,d]=m.useState([]);return m.useEffect(()=>{let h=!1;return I0(i,c,o).then(y=>{h||d(y)}),()=>{h=!0}},[i,c,o]),u}function ty({page:i,matches:c,...o}){let u=cs(),{manifest:d,routeModules:h}=ax(),{basename:y}=tx(),{loaderData:p,matches:x}=K0(),f=m.useMemo(()=>Dh(i,c,x,d,u,"data"),[i,c,x,d,u]),v=m.useMemo(()=>Dh(i,c,x,d,u,"assets"),[i,c,x,d,u]),w=m.useMemo(()=>{if(i===u.pathname+u.search+u.hash)return[];let S=new Set,D=!1;if(c.forEach(L=>{let A=d.routes[L.route.id];!A||!A.hasLoader||(!f.some(z=>z.route.id===L.route.id)&&L.route.id in p&&h[L.route.id]?.shouldRevalidate||A.hasClientLoader?D=!0:S.add(L.route.id))}),S.size===0)return[];let C=G0(i,y,"data");return D&&S.size>0&&C.searchParams.set("_routes",c.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[C.pathname+C.search]},[y,p,u,d,f,c,i,h]),B=m.useMemo(()=>P0(v,d),[v,d]),b=ey(v);return m.createElement(m.Fragment,null,w.map(S=>m.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...o})),B.map(S=>m.createElement("link",{key:S,rel:"modulepreload",href:S,...o})),b.map(({key:S,link:D})=>m.createElement("link",{key:S,nonce:o.nonce,...D})))}function ay(...i){return c=>{i.forEach(o=>{typeof o=="function"?o(c):o!=null&&(o.current=c)})}}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sx&&(window.__reactRouterVersion="7.8.2")}catch{}function sy({basename:i,children:c,window:o}){let u=m.useRef();u.current==null&&(u.current=Qp({window:o,v5Compat:!0}));let d=u.current,[h,y]=m.useState({action:d.action,location:d.location}),p=m.useCallback(x=>{m.startTransition(()=>y(x))},[y]);return m.useLayoutEffect(()=>d.listen(p),[d,p]),m.createElement(_0,{basename:i,children:c,location:h.location,navigationType:h.action,navigator:d})}var nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lx=m.forwardRef(function({onClick:c,discover:o="render",prefetch:u="none",relative:d,reloadDocument:h,replace:y,state:p,target:x,to:f,preventScrollReset:v,viewTransition:w,...B},b){let{basename:S}=m.useContext(xa),D=typeof f=="string"&&nx.test(f),C,L=!1;if(typeof f=="string"&&D&&(C=f,sx))try{let R=new URL(window.location.href),_=f.startsWith("//")?new URL(R.protocol+f):new URL(f),Q=_a(_.pathname,S);_.origin===R.origin&&Q!=null?f=Q+_.search+_.hash:L=!0}catch{ia(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=h0(f,{relative:d}),[z,ee,k]=F0(u,B),J=iy(f,{replace:y,state:p,target:x,preventScrollReset:v,relative:d,viewTransition:w});function T(R){c&&c(R),R.defaultPrevented||J(R)}let q=m.createElement("a",{...B,...k,href:C||A,onClick:L||h?c:T,ref:ay(b,ee),target:x,"data-discover":!D&&o==="render"?"true":void 0});return z&&!D?m.createElement(m.Fragment,null,q,m.createElement(W0,{page:A})):q});lx.displayName="Link";var Ql=m.forwardRef(function({"aria-current":c="page",caseSensitive:o=!1,className:u="",end:d=!1,style:h,to:y,viewTransition:p,children:x,...f},v){let w=Fl(y,{relative:f.relative}),B=cs(),b=m.useContext(_r),{navigator:S,basename:D}=m.useContext(xa),C=b!=null&&dy(w)&&p===!0,L=S.encodeLocation?S.encodeLocation(w).pathname:w.pathname,A=B.pathname,z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;o||(A=A.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&D&&(z=_a(z,D)||z);const ee=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let k=A===L||!d&&A.startsWith(L)&&A.charAt(ee)==="/",J=z!=null&&(z===L||!d&&z.startsWith(L)&&z.charAt(L.length)==="/"),T={isActive:k,isPending:J,isTransitioning:C},q=k?c:void 0,R;typeof u=="function"?R=u(T):R=[u,k?"active":null,J?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let _=typeof h=="function"?h(T):h;return m.createElement(lx,{...f,"aria-current":q,className:R,ref:v,style:_,to:y,viewTransition:p},typeof x=="function"?x(T):x)});Ql.displayName="NavLink";var ny=m.forwardRef(({discover:i="render",fetcherKey:c,navigate:o,reloadDocument:u,replace:d,state:h,method:y=Cr,action:p,onSubmit:x,relative:f,preventScrollReset:v,viewTransition:w,...B},b)=>{let S=oy(),D=uy(p,{relative:f}),C=y.toLowerCase()==="get"?"get":"post",L=typeof p=="string"&&nx.test(p),A=z=>{if(x&&x(z),z.defaultPrevented)return;z.preventDefault();let ee=z.nativeEvent.submitter,k=ee?.getAttribute("formmethod")||y;S(ee||z.currentTarget,{fetcherKey:c,method:k,navigate:o,replace:d,state:h,relative:f,preventScrollReset:v,viewTransition:w})};return m.createElement("form",{ref:b,method:C,action:D,onSubmit:u?x:A,...B,"data-discover":!L&&i==="render"?"true":void 0})});ny.displayName="Form";function ly(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ix(i){let c=m.useContext(Sn);return We(c,ly(i)),c}function iy(i,{target:c,replace:o,state:u,preventScrollReset:d,relative:h,viewTransition:y}={}){let p=mu(),x=cs(),f=Fl(i,{relative:h});return m.useCallback(v=>{if(H0(v,c)){v.preventDefault();let w=o!==void 0?o:Pl(x)===Pl(f);p(i,{replace:w,state:u,preventScrollReset:d,relative:h,viewTransition:y})}},[x,p,f,o,u,c,i,d,h,y])}var ry=0,cy=()=>`__${String(++ry)}__`;function oy(){let{router:i}=ix("useSubmit"),{basename:c}=m.useContext(xa),o=A0();return m.useCallback(async(u,d={})=>{let{action:h,method:y,encType:p,formData:x,body:f}=$0(u,c);if(d.navigate===!1){let v=d.fetcherKey||cy();await i.fetch(v,o,d.action||h,{preventScrollReset:d.preventScrollReset,formData:x,body:f,formMethod:d.method||y,formEncType:d.encType||p,flushSync:d.flushSync})}else await i.navigate(d.action||h,{preventScrollReset:d.preventScrollReset,formData:x,body:f,formMethod:d.method||y,formEncType:d.encType||p,replace:d.replace,state:d.state,fromRouteId:o,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,c,o])}function uy(i,{relative:c}={}){let{basename:o}=m.useContext(xa),u=m.useContext(ca);We(u,"useFormAction must be used inside a RouteContext");let[d]=u.matches.slice(-1),h={...Fl(i||".",{relative:c})},y=cs();if(i==null){h.search=y.search;let p=new URLSearchParams(h.search),x=p.getAll("index");if(x.some(v=>v==="")){p.delete("index"),x.filter(w=>w).forEach(w=>p.append("index",w));let v=p.toString();h.search=v?`?${v}`:""}}return(!i||i===".")&&d.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(h.pathname=h.pathname==="/"?o:Ma([o,h.pathname])),Pl(h)}function dy(i,{relative:c}={}){let o=m.useContext(Zh);We(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=ix("useViewTransitionState"),d=Fl(i,{relative:c});if(!o.isTransitioning)return!1;let h=_a(o.currentLocation.pathname,u)||o.currentLocation.pathname,y=_a(o.nextLocation.pathname,u)||o.nextLocation.pathname;return Ar(d.pathname,y)!=null||Ar(d.pathname,h)!=null}var pu=Gh();/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fy=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,o,u)=>u?u.toUpperCase():o.toLowerCase()),Th=i=>{const c=fy(i);return c.charAt(0).toUpperCase()+c.slice(1)},rx=(...i)=>i.filter((c,o,u)=>!!c&&c.trim()!==""&&u.indexOf(c)===o).join(" ").trim(),hy=i=>{for(const c in i)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=m.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:u,className:d="",children:h,iconNode:y,...p},x)=>m.createElement("svg",{ref:x,...xy,width:c,height:c,stroke:i,strokeWidth:u?Number(o)*24/Number(c):o,className:rx("lucide",d),...!h&&!hy(p)&&{"aria-hidden":"true"},...p},[...y.map(([f,v])=>m.createElement(f,v)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(i,c)=>{const o=m.forwardRef(({className:u,...d},h)=>m.createElement(gy,{ref:h,iconNode:c,className:rx(`lucide-${my(Th(i))}`,`lucide-${i}`,u),...d}));return o.displayName=Th(i),o};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],bn=be("activity",py);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zh=be("arrow-left",yy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],jy=be("arrow-right",vy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ny=be("banknote",by);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Mh=be("book-open",Sy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ta=be("calendar",wy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],cx=be("chart-column",Cy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ox=be("chart-pie",ky);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ay=be("check",Ey);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xl=be("chevron-down",Dy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zy=be("chevron-left",Ty);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cu=be("chevron-right",My);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yu=be("chevron-up",_y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qt=be("circle-alert",Oy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ux=be("circle-check-big",qy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ly=be("circle-x",Ry);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hy=be("clock",By);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Qy=be("code",Uy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Gy=be("database",$y);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qr=be("dollar-sign",Vy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Mt=be("download",Yy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],wn=be("ellipsis-vertical",Iy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ou=be("eye",Py);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Vl=be("factory",Xy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Es=be("file-json",Jy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wt=be("file-text",Zy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vu=be("funnel",Ky);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Wy=be("github",Fy);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tv=be("hash",ev);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ju=be("info",av);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],nv=be("layout-dashboard",sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],_h=be("list",lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rv=be("loader-circle",iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Oh=be("log-out",cv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uv=be("mail",ov);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Rr=be("map-pin",dv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],pt=be("package",mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ra=be("pen",fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bu=be("phone",hv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_t=be("plus",xv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],pv=be("printer",gv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],it=be("refresh-cw",yv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jv=be("save",vv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qa=be("search",bv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nu=be("settings",Nv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wv=be("shield",Sv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Lr=be("shopping-cart",Cv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yn=be("square-check-big",kv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vn=be("square",Ev);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],qh=be("tags",Av);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Rh=be("test-tube",Dv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rt=be("trash-2",Tv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Wl=be("trending-down",zv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],oa=be("trending-up",Mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],is=be("triangle-alert",_v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],la=be("truck",Ov);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Jl=be("upload",qv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rs=be("user",Rv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],As=be("users",Lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Hv=be("wallet",Bv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Qv=be("weight",Uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],Gv=be("wheat",$v);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nn=be("x",Vv),Lh=[{title:"Dashboard",path:"/",icon:a.jsx(nv,{size:20})},{title:"Inventory",path:"/inventory",icon:a.jsx(pt,{size:20})},{title:"Customers",icon:a.jsx(As,{size:20}),subItems:[{title:"Customer List",path:"/customers",icon:a.jsx(_h,{size:18})},{title:"Sales",path:"/customers/sales",icon:a.jsx(Lr,{size:18})},{title:"Loadings",path:"/customers/loadings",icon:a.jsx(la,{size:18})},{title:"Ledger",path:"/customers/ledger",icon:a.jsx(Mh,{size:18})}]},{title:"Suppliers",icon:a.jsx(la,{size:20}),subItems:[{title:"Supplier List",path:"/suppliers",icon:a.jsx(_h,{size:18})},{title:"Paddy Trucks",path:"/suppliers/paddy-trucks",icon:a.jsx(Gv,{size:18})},{title:"Ledger",path:"/suppliers/ledger",icon:a.jsx(Mh,{size:18})}]},{title:"Reports",path:"/reports",icon:a.jsx(wt,{size:20})},{title:"Settings",path:"/settings",icon:a.jsx(Nu,{size:20})}],Yv=()=>{const[i,c]=m.useState([]),[o,u]=m.useState(!1),d=cs();m.useEffect(()=>{u(!1)},[d]),m.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const h=x=>{c(f=>f.includes(x)?f.filter(v=>v!==x):[...f,x])},y=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-16 px-4 border-b border-gray-800/50 flex items-center",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vl,{size:20,className:"text-gray-400"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-200",children:"Supreme Rice Mills"})]})}),a.jsx("nav",{className:"p-4 space-y-2",children:Lh.map(x=>a.jsx("div",{children:x.path?a.jsxs(Ql,{to:x.path,end:x.path==="/",className:({isActive:f})=>`sidebar-item ${f?"sidebar-item-active":"glass-hover"}`,onClick:()=>u(!1),children:[x.icon,a.jsx("span",{children:x.title})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sidebar-item glass-hover",onClick:()=>h(x.title),children:[x.icon,a.jsx("span",{className:"flex-1",children:x.title}),i.includes(x.title)?a.jsx(Xl,{size:18}):a.jsx(cu,{size:18})]}),i.includes(x.title)&&x.subItems&&a.jsx("div",{className:"ml-4 mt-2 space-y-1",children:x.subItems.map(f=>a.jsxs(Ql,{to:f.path,end:!0,className:({isActive:v})=>`sidebar-item text-sm ${v?"sidebar-item-active":"glass-hover"}`,onClick:()=>u(!1),children:[f.icon,a.jsx("span",{children:f.title})]},f.path))})]})},x.title))})]}),p=()=>a.jsxs("div",{className:"lg:hidden fixed inset-0 z-50 pointer-events-none",children:[a.jsx("div",{className:`absolute inset-0 bg-black transition-all duration-500 ease-out ${o?"bg-opacity-80 backdrop-blur-sm pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:()=>u(!1)}),a.jsxs("div",{className:`absolute inset-y-0 left-0 w-full max-w-sm flex flex-col bg-gradient-to-br from-gray-900/95 via-gray-900/98 to-black/95 backdrop-blur-2xl shadow-2xl transform transition-transform duration-300 ease-[cubic-bezier(0.4,0.0,0.2,1)] pointer-events-auto ${o?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"h-16 px-4 border-b border-gray-800/50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vl,{size:20,className:"text-gray-400"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-200",children:"Supreme Rice Mills"})]}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 glass rounded-lg hover:bg-white/10 transition-all",children:a.jsx(Nn,{size:18})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("div",{className:"space-y-2",children:Lh.map(x=>a.jsx("div",{children:x.path?a.jsxs(Ql,{to:x.path,end:x.path==="/",className:({isActive:f})=>`flex items-center gap-4 p-4 rounded-xl transition-all ${f?"bg-white/10 text-white shadow-lg":"text-gray-300 hover:bg-white/5 hover:text-white"}`,children:[a.jsx("div",{className:"p-2 glass rounded-lg",children:x.icon}),a.jsx("span",{className:"font-medium text-base",children:x.title}),x.path&&a.jsx(jy,{size:16,className:"ml-auto opacity-50"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"w-full flex items-center gap-4 p-4 rounded-xl text-gray-300 hover:bg-white/5 hover:text-white transition-all",onClick:()=>h(x.title),children:[a.jsx("div",{className:"p-2 glass rounded-lg",children:x.icon}),a.jsx("span",{className:"font-medium text-base flex-1 text-left",children:x.title}),i.includes(x.title)?a.jsx(Xl,{size:18}):a.jsx(cu,{size:18})]}),i.includes(x.title)&&x.subItems&&a.jsx("div",{className:"mt-2 ml-4 space-y-1",children:x.subItems.map(f=>a.jsxs(Ql,{to:f.path,end:!0,className:({isActive:v})=>`flex items-center gap-3 p-3 pl-8 rounded-lg transition-all ${v?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-gray-200"}`,children:[f.icon||a.jsx("div",{className:"w-4"}),a.jsx("span",{className:"text-sm",children:f.title})]},f.path))})]})},x.title))})}),a.jsx("div",{className:"p-6 border-t border-gray-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:a.jsx(Vl,{size:18,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Supreme Rice Mills"}),a.jsx("p",{className:"text-xs text-muted",children:"v1.0.0"})]})]})})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("button",{className:`lg:hidden fixed left-4 z-40 w-10 h-10 rounded-xl glass backdrop-blur-xl transition-all duration-300 ${o?"bg-white/20 shadow-lg":"bg-white/10 hover:bg-white/15 hover:shadow-md"}`,style:{top:"12px"},onClick:()=>u(!o),children:a.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:a.jsxs("div",{className:"relative w-5 h-4 flex flex-col justify-between",children:[a.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transform transition-all duration-300 origin-left ${o?"rotate-45 translate-y-0.5":""}`}),a.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transition-all duration-300 ${o?"opacity-0 translate-x-3":""}`}),a.jsx("span",{className:`block h-0.5 w-full bg-white rounded-full transform transition-all duration-300 origin-left ${o?"-rotate-45 -translate-y-0.5":""}`})]})})}),a.jsx("aside",{className:"hidden lg:block w-64 h-screen glass border-r border-gray-800/50 sticky top-0",children:a.jsx(y,{})}),a.jsx(p,{})]})},Iv=()=>{const{isAuthenticated:i,syncStatus:c,lastSync:o,syncData:u,logout:d,pendingChanges:h,syncError:y}=m.useContext(ga),[p,x]=m.useState(!1),[f,v]=m.useState(!1),w=b=>{if(!b)return"Never";const S=new Date(b),C=Math.floor((new Date().getTime()-S.getTime())/1e3);return C<60?"Just now":C<3600?`${Math.floor(C/60)} min ago`:C<86400?`${Math.floor(C/3600)} hours ago`:S.toLocaleDateString()},B=()=>{switch(c){case"syncing":return a.jsx(it,{className:"h-4 w-4 animate-spin text-blue-600"});case"success":return a.jsx(Ay,{className:"h-4 w-4 text-green-600"});case"error":return a.jsx(qt,{className:"h-4 w-4 text-red-600"});default:return a.jsx(it,{className:"h-4 w-4 text-gray-400"})}};return i?a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"sm:hidden relative",children:[a.jsxs("button",{onClick:()=>v(!f),className:"p-2 glass rounded-lg hover:bg-white/10 transition-all relative",children:[a.jsx(Wy,{className:"h-5 w-5"}),h!=null&&Number(h)>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-500 text-gray-900 text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold",children:h})]}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-gray-900 rounded-lg shadow-xl border border-white/10 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[B(),a.jsxs("span",{className:"text-sm text-gray-300",children:[c==="syncing"&&"Syncing...",c==="success"&&"Synced",c==="error"&&"Sync Error",c==="idle"&&w(o)]})]}),y&&c==="error"&&a.jsx("p",{className:"text-xs text-red-400 mt-1",children:y}),h!=null&&Number(h)>0&&a.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:[h," pending changes"]})]}),a.jsxs("button",{onClick:()=>{u(),v(!1)},disabled:c==="syncing",className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-white/10 transition-colors flex items-center gap-2 disabled:opacity-50",children:[a.jsx(it,{className:`h-4 w-4 ${c==="syncing"?"animate-spin":""}`}),a.jsx("span",{children:"Sync Now"})]}),a.jsxs("button",{onClick:()=>{d(),v(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Oh,{className:"h-4 w-4"}),a.jsx("span",{children:"Disconnect GitHub"})]})]})]})]}),a.jsx("div",{className:"hidden sm:flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[B(),a.jsxs("div",{className:"text-sm flex items-center space-x-2",children:[a.jsxs("span",{className:"text-gray-300",children:[c==="syncing"&&"Syncing...",c==="success"&&"Synced",c==="error"&&`Sync Error${y?`: ${y}`:""}`,c==="idle"&&`Last sync: ${w(o)}`]}),h!=null&&Number(h)>0?a.jsxs("span",{className:"text-xs text-yellow-400",children:["(",h," pending)"]}):null]})]}),a.jsxs("button",{onClick:u,disabled:c==="syncing",className:"px-4 py-1.5 text-sm text-gray-300 glass rounded-lg hover:bg-white/10 disabled:opacity-50 transition-all flex items-center gap-2",children:[a.jsx("span",{children:"Sync Now"}),h!=null&&Number(h)>0?a.jsx("span",{className:"bg-yellow-500 text-gray-900 text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:h}):null]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>x(!p),className:"px-4 py-1.5 text-sm text-gray-300 glass rounded-lg hover:bg-white/10 transition-all flex items-center gap-2",children:[a.jsx(Nu,{className:"h-4 w-4"}),a.jsx("span",{children:"GitHub Settings"})]}),p&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-gray-900 rounded-lg shadow-xl border border-white/10 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-white/10",children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Connected to GitHub"}),a.jsx("p",{className:"text-sm text-gray-200 font-medium",children:"wissamyah/suprememanagement"})]}),a.jsxs("button",{onClick:()=>{d(),x(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Oh,{className:"h-4 w-4"}),a.jsx("span",{children:"Disconnect GitHub"})]})]})]})]})]})})]}):a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[a.jsx(qt,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"hidden sm:inline",children:"Not connected to GitHub"}),a.jsx("span",{className:"sm:hidden",children:"Not connected"})]})},Pv=()=>a.jsx("header",{className:"h-16 glass border-b border-gray-800/50 sticky top-0 z-20",children:a.jsx("div",{className:"h-full px-4 sm:px-6 flex items-center justify-end",children:a.jsx("div",{className:"flex items-center",children:a.jsx(Iv,{})})})}),Xv=()=>{const{pendingChanges:i,syncStatus:c,syncData:o,syncError:u}=m.useContext(ga),[d,h]=m.useState(!1);return m.useEffect(()=>{i&&i>3&&c!=="syncing"?h(!0):h(!1)},[i,c]),d?a.jsx("div",{className:"fixed bottom-4 right-4 max-w-sm z-50",children:a.jsx("div",{className:"bg-yellow-900/90 backdrop-blur-sm border border-yellow-600 rounded-lg p-4 shadow-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(qt,{className:"h-5 w-5 text-yellow-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-yellow-200",children:"Multiple Unsaved Changes"}),a.jsxs("p",{className:"text-xs text-yellow-300 mt-1",children:["You have ",i," pending changes that haven't been synced to GitHub. These changes are saved locally but may be lost if you refresh the page."]}),u&&a.jsxs("p",{className:"text-xs text-red-400 mt-2",children:["Last sync error: ",u]}),a.jsxs("button",{onClick:o,disabled:c==="syncing",className:"mt-3 px-3 py-1.5 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded-md flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:[a.jsx(it,{className:`h-3 w-3 ${c==="syncing"?"animate-spin":""}`}),c==="syncing"?"Syncing...":"Sync Now"]})]})]})})}):null},Jv=()=>{const{pendingChanges:i}=m.useContext(ga);return m.useEffect(()=>{const c=o=>{if(i&&i>0){const u="You have unsaved changes that will be lost. Are you sure you want to leave?";return o.preventDefault(),o.returnValue=u,u}};return window.addEventListener("beforeunload",c),()=>window.removeEventListener("beforeunload",c)},[i]),a.jsxs("div",{className:"flex min-h-screen bg-gray-950",children:[a.jsx(Yv,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Pv,{}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",children:a.jsx(M0,{})})]}),a.jsx(Xv,{})]})};function dx(i){var c,o,u="";if(typeof i=="string"||typeof i=="number")u+=i;else if(typeof i=="object")if(Array.isArray(i)){var d=i.length;for(c=0;c<d;c++)i[c]&&(o=dx(i[c]))&&(u&&(u+=" "),u+=o)}else for(o in i)i[o]&&(u&&(u+=" "),u+=o);return u}function Su(){for(var i,c,o=0,u="",d=arguments.length;o<d;o++)(i=arguments[o])&&(c=dx(i))&&(u&&(u+=" "),u+=c);return u}const ze=({children:i,className:c,onClick:o})=>a.jsx("div",{className:Su("glass-card",o&&"cursor-pointer glass-hover",c),onClick:o,children:i}),Zv=[{title:"Total Revenue",value:"₦12,45,000",change:"+12.5%",trend:"up",icon:a.jsx(qr,{size:24})},{title:"Total Customers",value:"245",change:"+8 this month",trend:"up",icon:a.jsx(As,{size:24})},{title:"Inventory Items",value:"1,842",change:"-2.3%",trend:"down",icon:a.jsx(pt,{size:24})},{title:"Active Orders",value:"32",change:"+15%",trend:"up",icon:a.jsx(Lr,{size:24})}],Kv=[{id:1,type:"sale",description:"New sale to Raj Kumar - ₦45,000",time:"2 hours ago"},{id:2,type:"loading",description:"Loading completed for Order #1234",time:"4 hours ago"},{id:3,type:"supplier",description:"Paddy truck received from Supplier A",time:"6 hours ago"},{id:4,type:"inventory",description:"Low stock alert: Basmati Rice",time:"8 hours ago"}],Fv=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-400",children:"Welcome back! Here's what's happening with your business today."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Zv.map((i,c)=>a.jsx(ze,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-400",children:i.title}),a.jsx("p",{className:"text-2xl font-bold",children:i.value}),a.jsxs("div",{className:"flex items-center gap-1",children:[i.trend==="up"?a.jsx(oa,{size:16,className:"text-green-400"}):a.jsx(Wl,{size:16,className:"text-red-400"}),a.jsx("span",{className:`text-sm ${i.trend==="up"?"text-green-400":"text-red-400"}`,children:i.change})]})]}),a.jsx("div",{className:"p-3 glass rounded-lg",children:i.icon})]})},c))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ze,{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx(bn,{size:20}),"Recent Activity"]}),a.jsx("div",{className:"space-y-3",children:Kv.map(i=>a.jsx("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:i.description}),a.jsx("p",{className:"text-xs text-gray-400",children:i.time})]})},i.id))})]}),a.jsxs(ze,{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx(la,{size:20}),"Pending Deliveries"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Order #1235"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Customer: Sharma Traders"})]}),a.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"In Transit"})]})}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Order #1236"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Customer: Gupta & Sons"})]}),a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Processing"})]})}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Order #1237"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Customer: Kumar Enterprises"})]}),a.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full",children:"Ready"})]})})]})]})]})]}),pe=({variant:i="primary",size:c="md",children:o,className:u,disabled:d,loading:h=!1,loadingText:y,onClick:p,...x})=>{const f="font-medium rounded-lg transition-all duration-200 inline-flex items-center justify-center gap-2 transform active:scale-95",v={primary:"bg-white text-gray-900 hover:bg-gray-100 hover:shadow-lg hover:shadow-white/10 disabled:bg-gray-500 disabled:text-gray-300",secondary:"glass glass-hover border border-gray-800/50 text-gray-100 hover:shadow-lg hover:shadow-white/5",danger:"bg-red-600 text-white hover:bg-red-700 hover:shadow-lg hover:shadow-red-600/20 disabled:bg-red-400",ghost:"text-gray-300 hover:bg-white/5 hover:text-gray-100 transition-all duration-200"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},B=async b=>{if(!(h||d)&&p){const S=b.currentTarget,D=S.getBoundingClientRect(),C=document.createElement("span"),L=Math.max(D.width,D.height),A=b.clientX-D.left-L/2,z=b.clientY-D.top-L/2;C.style.width=C.style.height=L+"px",C.style.left=A+"px",C.style.top=z+"px",C.classList.add("ripple"),S.style.position="relative",S.style.overflow="hidden",S.appendChild(C),setTimeout(()=>{C.remove()},600),p(b)}};return a.jsx("button",{className:Su(f,v[i],w[c],(d||h)&&"opacity-50 cursor-not-allowed","relative overflow-hidden",u),disabled:d||h,onClick:B,...x,children:h?a.jsxs(a.Fragment,{children:[a.jsx(rv,{className:"animate-spin",size:c==="sm"?14:c==="md"?16:18}),a.jsx("span",{children:y||"Loading..."})]}):o})},Wv={success:a.jsx(ux,{size:20,className:"text-green-400 animate-bounce"}),error:a.jsx(Ly,{size:20,className:"text-red-400 animate-pulse"}),warning:a.jsx(qt,{size:20,className:"text-yellow-400 animate-pulse"}),info:a.jsx(ju,{size:20,className:"text-blue-400 animate-pulse"})},ej=({id:i,message:c,type:o,duration:u=5e3,onClose:d})=>{const[h,y]=m.useState(!1),[p,x]=m.useState(100);m.useEffect(()=>{const v=setInterval(()=>{x(B=>B<=0?(clearInterval(v),0):B-100/(u/100))},100),w=setTimeout(()=>{y(!0),setTimeout(()=>d(i),300)},u);return()=>{clearTimeout(w),clearInterval(v)}},[u,i,d]);const f=()=>{y(!0),setTimeout(()=>d(i),300)};return a.jsxs("div",{className:`bg-gray-900/95 backdrop-blur-md border border-white/20 rounded-lg shadow-xl flex flex-col min-w-[320px] max-w-[420px] overflow-hidden transition-all duration-300 transform ${h?"opacity-0 translate-x-full scale-95":"opacity-100 translate-x-0 scale-100 animate-slideInRight"}`,children:[a.jsxs("div",{className:"p-4 flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:Wv[o]}),a.jsx("p",{className:"flex-1 text-sm leading-relaxed",children:c}),a.jsx("button",{onClick:f,className:"flex-shrink-0 p-1 rounded-lg hover:bg-glass transition-all duration-200 hover:rotate-90 transform",children:a.jsx(Nn,{size:16})})]}),a.jsxs("div",{className:"h-1 bg-black/20 relative overflow-hidden",children:[a.jsx("div",{className:`h-full transition-all duration-100 ease-linear ${o==="success"?"bg-green-400":o==="error"?"bg-red-400":o==="warning"?"bg-yellow-400":"bg-blue-400"}`,style:{width:`${p}%`}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})]})]})},Cn=({toasts:i,onClose:c})=>a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 pointer-events-none",children:i.map((o,u)=>a.jsx("div",{className:"pointer-events-auto",style:{animation:`slideDown 0.3s ease-out ${u*.05}s both`},children:a.jsx(ej,{...o,onClose:c})},o.id))}),hr="supreme_mgmt_",ye={get:i=>{try{const c=localStorage.getItem(hr+i);return c?JSON.parse(c):null}catch(c){return console.error(`Error reading from localStorage for key ${i}:`,c),null}},set:(i,c)=>{try{localStorage.setItem(hr+i,JSON.stringify(c))}catch(o){console.error(`Error writing to localStorage for key ${i}:`,o)}},remove:i=>{try{localStorage.removeItem(hr+i)}catch(c){console.error(`Error removing from localStorage for key ${i}:`,c)}},clear:()=>{try{Object.keys(localStorage).forEach(c=>{c.startsWith(hr)&&localStorage.removeItem(c)})}catch(i){console.error("Error clearing localStorage:",i)}}},$e=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);class tj{owner="wissamyah";repo="suprememanagement";path="data/data.json";branch="data";token=null;apiBase="https://api.github.com";saveQueue=null;lastSaveTime=0;minSaveInterval=2e3;constructor(){}async initialize(c){this.token=c;const o=await this.encryptToken(c);if(sessionStorage.setItem("gh_token",o),!await this.verifyToken())throw new Error("Invalid GitHub token");return!0}async encryptToken(c){try{const o=crypto.getRandomValues(new Uint8Array(16)),u=new TextEncoder,d=u.encode(c),h=await crypto.subtle.importKey("raw",u.encode("supreme-mgmt-2024-secure-key-v2"),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),y=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},h,{name:"AES-GCM",length:256},!1,["encrypt"]),p=crypto.getRandomValues(new Uint8Array(12)),x=await crypto.subtle.encrypt({name:"AES-GCM",iv:p},y,d),f=new Uint8Array(o.length+p.length+x.byteLength);return f.set(o,0),f.set(p,o.length),f.set(new Uint8Array(x),o.length+p.length),btoa(String.fromCharCode(...f))}catch(o){return console.error("Encryption failed, falling back to basic encoding:",o),btoa(c)}}async decryptToken(c){try{const o=Uint8Array.from(atob(c),w=>w.charCodeAt(0)),u=o.slice(0,16),d=o.slice(16,28),h=o.slice(28),y=new TextEncoder,p=await crypto.subtle.importKey("raw",y.encode("supreme-mgmt-2024-secure-key-v2"),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),x=await crypto.subtle.deriveKey({name:"PBKDF2",salt:u,iterations:1e5,hash:"SHA-256"},p,{name:"AES-GCM",length:256},!1,["decrypt"]),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:d},x,h);return new TextDecoder().decode(f)}catch{try{return atob(c)}catch{return null}}}isAuthenticated(){return this.token!==null&&sessionStorage.getItem("gh_token")!==null}async checkAuthentication(){const c=sessionStorage.getItem("gh_token");return c?(this.token=await this.decryptToken(c),await this.verifyToken()):!1}async verifyToken(){if(!this.token)return!1;try{return(await fetch(`${this.apiBase}/user`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(c){return console.error("Token verification failed:",c),!1}}async getFileContent(){try{const c=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}?ref=${this.branch}&t=${Date.now()}`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(c.status===404)return{content:null,sha:null,data:this.getDefaultData()};if(!c.ok)throw new Error(`GitHub API error: ${c.status}`);const o=await c.json(),u=atob(o.content);return{content:u,sha:o.sha,data:JSON.parse(u)}}catch(c){throw console.error("Error fetching file from GitHub:",c),c}}async saveFileContent(c,o="Update data"){try{let u=null;try{console.log("Fetching current file SHA..."),u=(await this.getFileContent()).sha,console.log("Current SHA:",u)}catch{console.log("Creating new file on GitHub")}const d=btoa(JSON.stringify(c,null,2)),h={message:`${o} - ${new Date().toISOString()}`,content:d,branch:this.branch};u&&(h.sha=u),console.log("Sending PUT request to GitHub API...",{url:`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,branch:this.branch,hasSha:!!u});const y=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,{method:"PUT",headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(h)});if(!y.ok){const p=await y.json();if(console.error("GitHub API error response:",p),y.status===409){console.log("Conflict detected (likely SHA mismatch), fetching fresh SHA..."),await new Promise(B=>setTimeout(B,500));const f=(await this.getFileContent()).sha;console.log("Retrying with fresh SHA:",f),h.sha=f;const v=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}/contents/${this.path}`,{method:"PUT",headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(h)});if(v.ok)return console.log("Retry with fresh SHA successful!"),await v.json();const w=await v.json();throw console.error("Retry failed:",w),v.status===409?new Error("File was modified externally. Please refresh and try again."):new Error(`GitHub API error after retry: ${w.message||v.status}`)}throw new Error(`GitHub API error: ${p.message||y.status}`)}return await y.json()}catch(u){throw console.error("Error saving file to GitHub:",u),u}}getDefaultData(){return{products:[],categories:[],movements:[],productionEntries:[],customers:[],suppliers:[],sales:[],loadings:[],ledgerEntries:[],metadata:{lastUpdated:new Date().toISOString(),version:"2.0.0"}}}async loadAllData(){try{return(await this.getFileContent()).data||this.getDefaultData()}catch(c){return console.error("Error loading data from GitHub:",c),this.getDefaultData()}}async clearAllData(){if(!this.isAuthenticated())return console.log("Not authenticated, skipping GitHub clear"),!1;try{const c={products:[],product_categories:[],inventory_movements:[],production_entries:[],customers:[],sales:[]};console.log("Clearing all data in GitHub...");const o=await this.saveAllData(c);return o?console.log("Successfully cleared all data in GitHub"):console.error("Failed to clear data in GitHub"),o}catch(c){return console.error("Error clearing GitHub data:",c),!1}}async saveAllData(c){const u=Date.now()-this.lastSaveTime;if(u<this.minSaveInterval){const d=this.minSaveInterval-u;console.log(`Rate limiting: waiting ${d}ms before save`),await new Promise(h=>setTimeout(h,d))}if(this.saveQueue){console.log("Save already in progress, waiting for it to complete...");try{await this.saveQueue}catch{console.log("Previous save failed, continuing with new save")}}this.saveQueue=this._doSaveWithRetry(c);try{const d=await this.saveQueue;return this.lastSaveTime=Date.now(),d}finally{this.saveQueue=null}}async _doSaveWithRetry(c,o=1){const d=2e3*o;try{return await this._doSave(c)}catch(h){if(o<3)return console.log(`Save attempt ${o} failed, retrying in ${d}ms...`),await new Promise(y=>setTimeout(y,d)),this._doSaveWithRetry(c,o+1);throw console.error("Save failed after 3 attempts:",h),h}}async _doSave(c){try{console.log("Saving data to GitHub...",{products:c.products?.length||0,categories:c.categories?.length||0,movements:c.movements?.length||0,branch:this.branch,path:this.path});const o={...c,metadata:{lastUpdated:new Date().toISOString(),version:"2.0.0"}},u=await this.saveFileContent(o,"Update data");return console.log("GitHub save successful",u?.commit?.sha),c.products&&localStorage.setItem("products",JSON.stringify(c.products)),c.categories&&localStorage.setItem("product_categories",JSON.stringify(c.categories)),c.movements&&localStorage.setItem("inventory_movements",JSON.stringify(c.movements)),c.productionEntries&&localStorage.setItem("production_entries",JSON.stringify(c.productionEntries)),c.customers&&localStorage.setItem("customers",JSON.stringify(c.customers)),localStorage.setItem("lastSync",new Date().toISOString()),!0}catch(o){throw console.error("Error saving data to GitHub:",o),o}}async loadInventory(){return(await this.loadAllData()).products||[]}async saveInventory(c){const o=await this.loadAllData();return o.products=c,this.saveAllData(o)}clearAuthentication(){this.token=null,sessionStorage.removeItem("gh_token")}async getRepoInfo(){try{const c=await fetch(`${this.apiBase}/repos/${this.owner}/${this.repo}`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(!c.ok)throw new Error(`GitHub API error: ${c.status}`);return await c.json()}catch(c){throw console.error("Error fetching repo info:",c),c}}async checkRateLimit(){try{const c=await fetch(`${this.apiBase}/rate_limit`,{headers:{Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github.v3+json"}});if(!c.ok)throw new Error(`GitHub API error: ${c.status}`);return await c.json()}catch(c){throw console.error("Error checking rate limit:",c),c}}}const Ot=new tj;class aj{queue=[];processing=!1;maxRetries=3;constructor(){this.loadQueue()}loadQueue(){const c=localStorage.getItem("sync_queue");if(c)try{this.queue=JSON.parse(c)}catch(o){console.error("Failed to load sync queue:",o),this.queue=[]}}saveQueue(){localStorage.setItem("sync_queue",JSON.stringify(this.queue))}addToQueue(c){const o={...c,id:`queue_${Date.now()}_${Math.random()}`,timestamp:new Date,retryCount:0};return this.queue.push(o),this.saveQueue(),o}getQueue(){return[...this.queue]}getPendingCount(){return this.queue.length}removeFromQueue(c){this.queue=this.queue.filter(o=>o.id!==c),this.saveQueue()}incrementRetry(c){const o=this.queue.find(u=>u.id===c);return o?(o.retryCount++,this.saveQueue(),o.retryCount<this.maxRetries):!1}clearQueue(){this.queue=[],this.saveQueue()}isProcessing(){return this.processing}setProcessing(c){this.processing=c}getRetryableItems(){return this.queue.filter(c=>c.retryCount<this.maxRetries)}getFailedItems(){return this.queue.filter(c=>c.retryCount>=this.maxRetries)}}const sj=new aj,nj={sync:{autoSyncDelay:5e3,retryDelay:1e4}},Bh=nj.sync;class lj{syncTimer=null;syncInProgress=!1;listeners=new Set;state={isPending:!1,isInProgress:!1,lastSync:null,error:null,pendingChanges:0};isAuthenticated=!1;lastDataHash="";initialize(c){if(this.isAuthenticated=c,c){window.addEventListener("storage",this.handleStorageChange),document.addEventListener("visibilitychange",this.handleVisibilityChange);const o=this.getAllData();this.lastDataHash=JSON.stringify(o),this.updateState({isPending:!1,pendingChanges:0})}}destroy(){window.removeEventListener("storage",this.handleStorageChange),document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.syncTimer&&clearTimeout(this.syncTimer)}resetPendingChanges(){this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null),this.updateState({isPending:!1,pendingChanges:0,error:null}),this.lastDataHash=JSON.stringify({products:[],categories:[],movements:[],productionEntries:[],customers:[],sales:[],ledgerEntries:[],bookedStock:[],loadings:[]})}handleStorageChange=c=>{const o=["supreme_mgmt_products","supreme_mgmt_product_categories","supreme_mgmt_inventory_movements","supreme_mgmt_production_entries","supreme_mgmt_customers","supreme_mgmt_sales","supreme_mgmt_ledger_entries","supreme_mgmt_loadings","suprememanagement_bookedStock"];c.key&&o.includes(c.key)&&this.scheduleSyncDebounced()};handleVisibilityChange=()=>{document.hidden&&this.state.isPending&&!this.syncInProgress&&(console.log("[GlobalSync] Tab hidden - syncing pending changes immediately"),this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null),this.performSync())};checkForPendingChanges(){const c=this.getAllData();JSON.stringify(c)!==this.lastDataHash?(this.updateState({isPending:!0,pendingChanges:1}),this.scheduleSyncDebounced()):this.updateState({isPending:!1,pendingChanges:0})}getAllData(){try{return{products:JSON.parse(localStorage.getItem("supreme_mgmt_products")||"[]"),categories:JSON.parse(localStorage.getItem("supreme_mgmt_product_categories")||"[]"),movements:JSON.parse(localStorage.getItem("supreme_mgmt_inventory_movements")||"[]"),productionEntries:JSON.parse(localStorage.getItem("supreme_mgmt_production_entries")||"[]"),customers:JSON.parse(localStorage.getItem("supreme_mgmt_customers")||"[]"),sales:JSON.parse(localStorage.getItem("supreme_mgmt_sales")||"[]"),ledgerEntries:JSON.parse(localStorage.getItem("supreme_mgmt_ledger_entries")||"[]"),bookedStock:JSON.parse(localStorage.getItem("suprememanagement_bookedStock")||"[]"),loadings:JSON.parse(localStorage.getItem("supreme_mgmt_loadings")||"[]")}}catch(c){return console.error("Error reading localStorage:",c),{products:[],categories:[],movements:[],productionEntries:[],customers:[],sales:[],ledgerEntries:[],bookedStock:[],loadings:[]}}}scheduleSyncDebounced(){this.isAuthenticated&&(this.syncTimer&&clearTimeout(this.syncTimer),this.updateState({isPending:!0}),this.syncTimer=setTimeout(()=>{this.performSync()},Bh.autoSyncDelay))}async performSync(){if(!(!this.isAuthenticated||this.syncInProgress)){this.syncInProgress=!0,this.updateState({isInProgress:!0,error:null});try{const c=this.getAllData(),o=JSON.stringify(c);o!==this.lastDataHash?(console.log("[GlobalSync] Syncing to GitHub...",{hasProducts:c.products?.length||0,hasCategories:c.categories?.length||0,hasLedgerEntries:c.ledgerEntries?.length||0}),await Ot.saveAllData(c),this.lastDataHash=o,this.updateState({isPending:!1,isInProgress:!1,lastSync:new Date,error:null,pendingChanges:0}),console.log("[GlobalSync] Sync completed successfully")):(console.log("[GlobalSync] No changes to sync"),this.updateState({isPending:!1,isInProgress:!1}))}catch(c){console.error("[GlobalSync] Sync failed:",c),this.updateState({isInProgress:!1,error:c?.message||"Sync failed"}),setTimeout(()=>{this.isAuthenticated&&this.scheduleSyncDebounced()},Bh.retryDelay)}finally{this.syncInProgress=!1}}}async forceSync(){return this.isAuthenticated?(this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null),await this.performSync(),!this.state.error):(console.warn("[GlobalSync] Cannot sync - not authenticated"),!1)}updateState(c){this.state={...this.state,...c},this.notifyListeners()}notifyListeners(){this.listeners.forEach(c=>c(this.state))}subscribe(c){return this.listeners.add(c),c(this.state),()=>{this.listeners.delete(c)}}getState(){return{...this.state}}markAsChanged(c=!1){this.updateState({isPending:!0,pendingChanges:1}),c?(this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null),this.performSync()):this.scheduleSyncDebounced()}setAuthenticated(c){this.isAuthenticated=c,c?this.checkForPendingChanges():(this.syncTimer&&clearTimeout(this.syncTimer),this.updateState({isPending:!1,isInProgress:!1,error:null,pendingChanges:0}))}}const Ge=new lj,ij=(i,c)=>Math.max(0,i-c),xr=(i,c)=>i===0?"out-of-stock":i<=c?"low-stock":"in-stock",Hh=i=>({production:"Production",sales:"Sales",loading:"Loading",adjustment:"Adjustment",return:"Return",damage:"Damage"})[i]||i,rj=i=>({production:"text-green-400",sales:"text-blue-400",loading:"text-orange-400",adjustment:"text-purple-400",return:"text-yellow-400",damage:"text-red-400"})[i]||"text-gray-400",cj=i=>JSON.stringify(i,null,2),oj=i=>{const c=["ID","Name","Category","On Hand","Booked","Available","Unit","Status","Reorder Level"],o=i.map(d=>[d.id,d.name,d.category,d.quantityOnHand,d.quantityBooked,d.availableQuantity,d.unit,d.status,d.reorderLevel]);return[c.join(","),...o.map(d=>d.join(","))].join(`
`)},uj=i=>{try{const c=JSON.parse(i);return Array.isArray(c)?c.map(u=>({id:u.id||$e(),name:u.name||"",category:u.category||"Uncategorized",quantityOnHand:Number(u.quantityOnHand||u.quantity||0),quantityBooked:Number(u.quantityBooked||0),availableQuantity:ij(Number(u.quantityOnHand||u.quantity||0),Number(u.quantityBooked||0)),unit:u.unit||"pcs",reorderLevel:Number(u.reorderLevel||10),status:u.status||"in-stock",createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})):null}catch(c){return console.error("Error importing inventory:",c),null}},dj=i=>{const c=[];return(!i.name||i.name.trim()==="")&&c.push("Product name is required"),(!i.category||i.category.trim()==="")&&c.push("Product category is required"),i.quantityOnHand!==void 0&&i.quantityOnHand<0&&c.push("Quantity on hand cannot be negative"),i.reorderLevel!==void 0&&i.reorderLevel<0&&c.push("Reorder level cannot be negative"),c},mj=(i,c)=>{let o=[...i];if(c.productId&&(o=o.filter(u=>u.productId===c.productId)),c.movementType&&(o=o.filter(u=>u.movementType===c.movementType)),c.dateFrom&&(o=o.filter(u=>new Date(u.date)>=c.dateFrom)),c.dateTo&&(o=o.filter(u=>new Date(u.date)<=c.dateTo)),c.minQuantity!==void 0&&(o=o.filter(u=>Math.abs(u.quantity)>=c.minQuantity)),c.maxQuantity!==void 0&&(o=o.filter(u=>Math.abs(u.quantity)<=c.maxQuantity)),c.searchTerm){const u=c.searchTerm.toLowerCase();o=o.filter(d=>d.productName.toLowerCase().includes(u)||d.notes?.toLowerCase().includes(u)||d.reference?.toLowerCase().includes(u))}return o.sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime())},Yl=(i,c,o)=>{const u=o==="json"?"application/json":"text/csv",d=new Blob([i],{type:u}),h=URL.createObjectURL(d),y=document.createElement("a");y.href=h,y.download=c,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(h)},Al="suprememanagement_bookedStock",kn=()=>{const[i,c]=m.useState([]),[o,u]=m.useState(!0),[d,h]=m.useState(!1),[y,p]=m.useState(0),x=m.useCallback(()=>{try{const T=localStorage.getItem(Al);if(T){const R=JSON.parse(T).map(_=>({..._,bookingDate:new Date(_.bookingDate),createdAt:new Date(_.createdAt),updatedAt:new Date(_.updatedAt)}));return c(R),R}}catch(T){console.error("Error loading booked stock from cache:",T)}return[]},[]),f=m.useCallback(T=>{try{localStorage.setItem(Al,JSON.stringify(T)),console.log("[SaveToCache] Saved",T.length,"booked stock entries to cache");const q=localStorage.getItem(Al);if(q){const R=JSON.parse(q);console.log("[SaveToCache] Verified cache contains",R.length,"entries")}window.dispatchEvent(new StorageEvent("storage",{key:Al,newValue:JSON.stringify(T),url:window.location.href}))}catch(q){console.error("Error saving booked stock to cache:",q)}},[]),v=m.useCallback(async()=>{try{u(!0);const T=await Ot.loadAllData();if(T&&T.bookedStock&&Array.isArray(T.bookedStock)){const q=T.bookedStock.map(R=>({...R,bookingDate:new Date(R.bookingDate),createdAt:new Date(R.createdAt),updatedAt:new Date(R.updatedAt)}));return c(q),f(q),q}return[]}catch(T){return console.error("Error loading booked stock from GitHub:",T),x()}finally{u(!1)}},[x,f]),w=m.useCallback(async T=>{try{h(!0);const q=await Ot.loadAllData()||{};return q.bookedStock=T,await Ot.saveAllData(q),p(0),{success:!0}}catch(q){return console.error("Error syncing booked stock with GitHub:",q),p(R=>R+1),{success:!1,error:q}}finally{h(!1)}},[]);m.useEffect(()=>{(async()=>{x().length>0&&u(!1),await v()})()},[x,v]),m.useEffect(()=>{const T=q=>{if(q.key===Al&&q.newValue)try{const _=JSON.parse(q.newValue).map(Q=>({...Q,bookingDate:new Date(Q.bookingDate),createdAt:new Date(Q.createdAt),updatedAt:new Date(Q.updatedAt)}));c(_)}catch(R){console.error("Error parsing booked stock from storage event:",R)}};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]),m.useEffect(()=>{const T=setTimeout(()=>{y>0&&!d&&w(i)},3e3);return()=>clearTimeout(T)},[i,y,d,w]);const B=m.useCallback((T,q,R,_,Q,H,Z,te,de,G)=>{try{const Y={id:`BS-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:T,customerName:q,saleId:R,orderId:_,productId:Q,productName:H,quantity:Z,quantityLoaded:0,unit:te,bookingDate:de,status:"confirmed",notes:G,createdAt:new Date,updatedAt:new Date};return c(ie=>{const ne=[...ie,Y];return f(ne),w(ne),ne}),p(ie=>ie+1),{success:!0,data:Y}}catch(Y){return console.error("Error adding booked stock:",Y),{success:!1,error:Y.message}}},[f,w]),b=m.useCallback(T=>{try{console.log("[AddBatchBookedStock] Adding bookings:",T.length),console.log("[AddBatchBookedStock] Bookings details:",T.map(_=>({product:_.productName,qty:_.quantity,orderId:_.orderId})));const q=Date.now(),R=T.map((_,Q)=>({id:`BS-${q}-${Q}-${Math.random().toString(36).substr(2,9)}`,customerId:_.customerId,customerName:_.customerName,saleId:_.saleId,orderId:_.orderId,productId:_.productId,productName:_.productName,quantity:_.quantity,quantityLoaded:0,unit:_.unit,bookingDate:_.bookingDate,status:"confirmed",notes:_.notes,createdAt:new Date,updatedAt:new Date}));return console.log("[AddBatchBookedStock] Created new bookings:",R.map(_=>({id:_.id,productName:_.productName,quantity:_.quantity}))),c(_=>{const Q=[..._,...R];return f(Q),w(Q).then(H=>{console.log("[AddBatchBookedStock] Sync result:",H)}),Q}),p(_=>_+1),{success:!0,data:R}}catch(q){return console.error("Error adding batch booked stock:",q),{success:!1,error:q.message}}},[f,w]),S=m.useCallback((T,q)=>{try{return c(R=>{const _=R.map(Q=>Q.id===T?{...Q,...q,updatedAt:new Date}:Q);return f(_),w(_),_}),p(R=>R+1),{success:!0}}catch(R){return console.error("Error updating booked stock:",R),{success:!1,error:R.message}}},[f,w]),D=m.useCallback(T=>{try{return c(q=>{const R=q.filter(_=>_.id!==T);return f(R),w(R),R}),p(q=>q+1),{success:!0}}catch(q){return console.error("Error deleting booked stock:",q),{success:!1,error:q.message}}},[f,w]),C=m.useCallback(T=>i.filter(q=>q.customerId===T&&["pending","confirmed","partial-loaded"].includes(q.status)),[i]),L=m.useCallback(T=>i.filter(q=>q.productId===T&&["pending","confirmed","partial-loaded"].includes(q.status)),[i]),A=m.useCallback(T=>i.filter(q=>q.saleId===T),[i]),z=m.useCallback(T=>{const q=i.filter(_=>_.productId===T&&["pending","confirmed","partial-loaded"].includes(_.status)),R=q.reduce((_,Q)=>_+(Q.quantity-Q.quantityLoaded),0);return q.length>0&&console.log(`[GetTotalBookedQuantity] Product ${T}: ${q.length} bookings, total: ${R}`),R},[i]),ee=m.useCallback((T,q,R)=>{const _=i.find(Z=>Z.id===T);if(!_)return console.error("[UpdateLoadingStatus] Booking not found:",T),{success:!1,error:"Booking not found"};const Q=Math.min(q,_.quantity),H=R||(Q===0?"pending":Q<_.quantity?"partial-loaded":"fully-loaded");return console.log("[UpdateLoadingStatus] Updating booked stock:",{bookingId:T,productName:_.productName,totalBooked:_.quantity,previousLoaded:_.quantityLoaded,newLoaded:Q,remainingBooked:_.quantity-Q,status:H}),S(T,{quantityLoaded:Q,status:H})},[i,S]),k=m.useCallback(async()=>{d||await w(i)},[i,d,w]),J=m.useCallback(async()=>{await v()},[v]);return{bookedStock:i,loading:o,syncInProgress:d,pendingChanges:y,addBookedStock:B,addBatchBookedStock:b,updateBookedStock:S,deleteBookedStock:D,getBookedStockByCustomer:C,getBookedStockByProduct:L,getBookedStockBySale:A,getTotalBookedQuantity:z,updateLoadingStatus:ee,forceSync:k,refreshData:J}},gr="products",pr="product_categories",yr="inventory_movements",vr="production_entries",fj=()=>{const[i,c]=m.useState([]),[o,u]=m.useState([]),[d,h]=m.useState([]),[y,p]=m.useState([]),[x,f]=m.useState(!0),[v,w]=m.useState(!1),[B,b]=m.useState(0),[S,D]=m.useState(null),{isAuthenticated:C}=m.useContext(ga),L=m.useRef(!0),A=m.useRef(!0),{getTotalBookedQuantity:z,bookedStock:ee}=kn();m.useEffect(()=>{L.current=!0;const O=Ge.subscribe(se=>{L.current&&(w(se.isPending),b(se.pendingChanges),D(se.error))}),V=se=>{if(se.key==="supreme_mgmt_products"&&se.newValue&&L.current)try{const ue=JSON.parse(se.newValue);c(ue)}catch(ue){console.error("Error parsing products from storage event:",ue)}if(se.key==="supreme_mgmt_inventory_movements"&&se.newValue&&L.current)try{const ue=JSON.parse(se.newValue);h(ue)}catch(ue){console.error("Error parsing movements from storage event:",ue)}};return window.addEventListener("storage",V),()=>{L.current=!1,O(),window.removeEventListener("storage",V)}},[]);const k=async()=>{if(L.current){f(!0);try{if(C){const O=await Ot.loadAllData();O&&(c(O.products||[]),u(O.categories||[]),h(O.movements||[]),p(O.productionEntries||[]),ye.set(gr,O.products||[]),ye.set(pr,O.categories||[]),ye.set(yr,O.movements||[]),ye.set(vr,O.productionEntries||[]))}else{const O=ye.get(gr)||[],V=ye.get(pr)||[],se=ye.get(yr)||[],ue=ye.get(vr)||[];c(O),u(V),h(se),p(ue)}}catch(O){console.error("Error loading inventory data:",O);const V=ye.get(gr)||[],se=ye.get(pr)||[],ue=ye.get(yr)||[],le=ye.get(vr)||[];c(V),u(se),h(ue),p(le)}finally{L.current&&(f(!1),setTimeout(()=>{A.current=!1},100))}}};m.useEffect(()=>{k()},[C]),m.useEffect(()=>{L.current&&C&&!x&&!A.current&&Ge.markAsChanged()},[i,o,d,y,C,x]);const J=(O,V)=>{c(O),ye.set(gr,O),V&&O.filter(ue=>!i.find(le=>le.id===ue.id&&JSON.stringify(le)===JSON.stringify(ue))).forEach(ue=>{sj.addToQueue({type:"product",operation:V,data:ue})}),Ge.markAsChanged(!0)},T=O=>{u(O),ye.set(pr,O),Ge.markAsChanged(!0)},q=O=>{h(O),ye.set(yr,O),Ge.markAsChanged(!0)},R=O=>{p(O),ye.set(vr,O),Ge.markAsChanged(!0)},_=m.useCallback((O,V)=>{try{const se=new Date,ue={id:$e(),name:O,description:V,createdAt:se,updatedAt:se},le=[...o,ue];return T(le),{success:!0}}catch(se){return console.error("Error adding category:",se),{success:!1}}},[o]),Q=m.useCallback((O,V,se)=>{try{const ue=o.map(le=>le.id===O?{...le,name:V,description:se,updatedAt:new Date}:le);return T(ue),{success:!0}}catch(ue){return console.error("Error updating category:",ue),{success:!1}}},[o]),H=m.useCallback(O=>{try{if(i.filter(ue=>ue.category===o.find(le=>le.id===O)?.name).length>0)return console.warn("Cannot delete category with existing products"),{success:!1};const se=o.filter(ue=>ue.id!==O);return T(se),{success:!0}}catch(V){return console.error("Error deleting category:",V),{success:!1}}},[o,i]),Z=m.useCallback((O,V,se,ue,le)=>{try{const fe=new Date,je={name:O,category:V,quantityOnHand:se,quantityBooked:0,availableQuantity:se,unit:ue,status:xr(se,le),reorderLevel:le},ge=dj(je);if(ge.length>0)return console.error("Product validation failed:",ge),{success:!1,errors:ge};const I={...je,id:$e(),createdAt:fe,updatedAt:fe},xe=[...i,I];J(xe,"add");const Ne={id:$e(),productId:I.id,productName:I.name,movementType:"adjustment",quantity:I.quantityOnHand,previousQuantity:0,newQuantity:I.quantityOnHand,reference:"Initial stock",notes:`Initial stock for ${I.name}`,date:fe,createdAt:fe,updatedAt:fe},Ce=[...d,Ne];return q(Ce),{success:!0}}catch(fe){return console.error("Error adding product:",fe),{success:!1,errors:["Failed to add product"]}}},[i,d]),te=m.useCallback((O,V)=>{try{const se=i.map(ue=>ue.id===O?{...ue,...V,status:xr(V.quantityOnHand!==void 0?V.quantityOnHand:ue.quantityOnHand,V.reorderLevel!==void 0?V.reorderLevel:ue.reorderLevel),updatedAt:new Date}:ue);return J(se,"update"),{success:!0}}catch(se){return console.error("Error updating product:",se),{success:!1,errors:["Failed to update product"]}}},[i]),de=m.useCallback(O=>{try{const V=i.filter(se=>se.id!==O);return J(V,"delete"),{success:!0}}catch(V){return console.error("Error deleting product:",V),{success:!1}}},[i]),G=m.useCallback(O=>{try{const V=i.find(fe=>fe.id===O.productId);if(!V)return console.error("Product not found"),{success:!1};const se=O.movementType==="production"||O.movementType==="return"?V.quantityOnHand+O.quantity:V.quantityOnHand-O.quantity;if(se<0)return console.error("Insufficient stock"),{success:!1};const ue={...O,id:$e(),createdAt:new Date},le=[...d,ue];return q(le),te(V.id,{quantityOnHand:se}),{success:!0}}catch(V){return console.error("Error adding movement:",V),{success:!1}}},[i,d,te]),Y=m.useCallback((O,V,se,ue)=>{try{const le=i.find(xe=>xe.id===O);if(!le)return console.error("Product not found"),{success:!1};const fe=V-le.quantityOnHand,je=new Date,ge={id:$e(),productId:O,productName:le.name,movementType:"adjustment",quantity:Math.abs(fe),previousQuantity:le.quantityOnHand,newQuantity:V,reference:"Stock adjustment",notes:ue||`Stock adjustment: ${se}`,date:je,createdAt:je,updatedAt:je},I=[...d,ge];return q(I),te(O,{quantityOnHand:V}),{success:!0}}catch(le){return console.error("Error adjusting stock:",le),{success:!1}}},[i,d,te]),ie=m.useCallback((O,V,se)=>{try{const ue=[...i],le=ue.findIndex(me=>me.id===O);if(le===-1)return console.error("Product not found"),{success:!1};const fe=ue[le],je=new Date,ge={id:$e(),productId:O,productName:fe.name,quantity:V,date:je,notes:se,createdAt:je,updatedAt:je},I=[...y,ge];R(I);const xe=fe.quantityOnHand+V,Ne={id:$e(),productId:O,productName:fe.name,movementType:"production",quantity:V,previousQuantity:fe.quantityOnHand,newQuantity:xe,reference:"Production",notes:`Production: ${se||"Production entry"}`,date:je,createdAt:je,updatedAt:je},Ce=[...d,Ne];return q(Ce),ue[le]={...fe,quantityOnHand:xe,availableQuantity:xe-(fe.quantityBooked||0),status:xr(xe,fe.reorderLevel),updatedAt:je},J(ue,"update"),{success:!0}}catch(ue){return console.error("Error adding production entry:",ue),{success:!1}}},[i,y,d]),ne=m.useCallback(O=>{try{const V=new Date;let se=[...i],ue=[],le=[],fe=0;const je=[];return O.forEach(ge=>{const I=se.findIndex(he=>he.id===ge.productId);if(I===-1){const he=i.find(Te=>Te.id===ge.productId);je.push(he?.name||"Unknown");return}const xe=se[I],Ne={id:$e(),productId:ge.productId,productName:xe.name,quantity:ge.quantity,date:V,notes:ge.notes,createdAt:V,updatedAt:V};ue.push(Ne);const Ce=xe.quantityOnHand+ge.quantity,me={id:$e(),productId:ge.productId,productName:xe.name,movementType:"production",quantity:ge.quantity,previousQuantity:xe.quantityOnHand,newQuantity:Ce,reference:"Production",notes:`Production: ${ge.notes||"Production entry"}`,date:V,createdAt:V,updatedAt:V};le.push(me),se[I]={...xe,quantityOnHand:Ce,availableQuantity:Ce-(xe.quantityBooked||0),status:xr(Ce,xe.reorderLevel),updatedAt:V},fe++}),fe>0&&(J(se,"update"),R([...y,...ue]),q([...d,...le])),{success:fe>0,successCount:fe,failedProducts:je}}catch(V){return console.error("Error adding batch production entries:",V),{success:!1,successCount:0,failedProducts:[]}}},[i,y,d]),N=m.useCallback(O=>{const V=i.find(se=>se.id===O);if(V){const se=z(O);return{...V,quantityBooked:se,availableQuantity:V.quantityOnHand-se}}return V},[i,z]),E=m.useCallback(O=>{const V=i.find(ue=>ue.id===O);if(!V)return 0;const se=z(O);return V.quantityOnHand-se},[i,z]),U=m.useCallback(async()=>{C&&L.current&&(console.log("Force sync triggered"),await Ge.forceSync())},[C]);return{products:i.map(O=>{const V=z(O.id);return{...O,quantityBooked:V,availableQuantity:O.quantityOnHand-V}}),categories:o,movements:d,productionEntries:y,bookedStock:ee,loading:x,pendingChanges:B,lastSyncError:S,syncInProgress:v,addCategory:_,updateCategory:Q,deleteCategory:H,addProduct:Z,updateProduct:te,deleteProduct:de,addMovement:G,adjustStock:Y,addProductionEntry:ie,addBatchProductionEntries:ne,getProductById:N,getAvailableQuantity:E,forceSync:U,refreshData:k}},En=()=>{const[i,c]=m.useState([]),o=m.useCallback((x,f="info",v)=>{const w={id:$e(),message:x,type:f,duration:v};c(B=>[...B,w])},[]),u=m.useCallback(x=>{c(f=>f.filter(v=>v.id!==x))},[]),d=m.useCallback(x=>{o(x,"success")},[o]),h=m.useCallback(x=>{o(x,"error")},[o]),y=m.useCallback(x=>{o(x,"warning")},[o]),p=m.useCallback(x=>{o(x,"info")},[o]);return{toasts:i,addToast:o,removeToast:u,showSuccess:d,showError:h,showWarning:y,showInfo:p}},hj=({products:i,movements:c})=>{const o=i.length,u=i.filter(p=>p.status==="low-stock"||p.status==="out-of-stock").length,d=i.reduce((p,x)=>p+x.quantityOnHand,0),h=c.filter(p=>{const x=new Date;return new Date(p.date).toDateString()===x.toDateString()}).length,y=c.filter(p=>p.movementType==="production").slice(0,5);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(ze,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted text-sm",children:"Total Products"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:o})]}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsx(pt,{size:24,className:"text-blue-400"})})]})}),a.jsx(ze,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted text-sm",children:"Low Stock Alerts"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:u}),u>0&&a.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Needs attention"})]}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsx(is,{size:24,className:u>0?"text-yellow-400":"text-green-400"})})]})}),a.jsx(ze,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted text-sm",children:"Total Stock"}),a.jsxs("p",{className:"text-2xl font-bold mt-1",children:[d.toLocaleString()," units"]})]}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsx(oa,{size:24,className:"text-green-400"})})]})}),a.jsx(ze,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted text-sm",children:"Today's Movements"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:h}),y.length>0&&a.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[y[0].quantity," units produced"]})]}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsx(bn,{size:24,className:"text-purple-400"})})]})})]})},xj=({searchTerm:i,onSearchChange:c,categoryFilter:o,onCategoryChange:u,stockFilter:d,onStockFilterChange:h,categories:y,onClearFilters:p})=>{const x=i||o||d;return a.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search products by name...",value:i,onChange:f=>c(f.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{value:o,onChange:f=>u(f.target.value),className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-w-[150px] text-gray-100",children:[a.jsx("option",{value:"",children:"All Categories"}),y.map(f=>a.jsx("option",{value:f.name,children:f.name},f.id))]}),a.jsxs("select",{value:d,onChange:f=>h(f.target.value),className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-w-[150px] text-gray-100",children:[a.jsx("option",{value:"",children:"All Stock Levels"}),a.jsx("option",{value:"in-stock",children:"In Stock"}),a.jsx("option",{value:"low-stock",children:"Low Stock"}),a.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]}),x&&a.jsxs(pe,{variant:"ghost",onClick:p,children:[a.jsx(Nn,{size:20}),"Clear"]})]})},Uh=({onAdjustStock:i,onDelete:c,onViewBookedStock:o})=>{const[u,d]=m.useState(!1),[h,y]=m.useState({top:0,left:0}),p=m.useRef(null),x=m.useRef(null);m.useEffect(()=>{const w=B=>{p.current&&!p.current.contains(B.target)&&x.current&&!x.current.contains(B.target)&&d(!1)};return u&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[u]),m.useEffect(()=>{if(u&&p.current){const w=p.current.getBoundingClientRect(),B=120,b=180,S=window.innerHeight-w.bottom,D=w.top;let C=w.bottom+4,L=w.right-b;S<B&&D>B&&(C=w.top-B-4),L<0&&(L=4),L+b>window.innerWidth&&(L=window.innerWidth-b-4),y({top:C,left:L})}},[u]);const f=()=>{d(!u)},v=w=>{w(),d(!1)};return a.jsxs(a.Fragment,{children:[a.jsx("button",{ref:p,onClick:f,className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Actions",children:a.jsx(wn,{size:14,className:"sm:w-4 sm:h-4"})}),u&&pu.createPortal(a.jsxs("div",{ref:x,className:"fixed rounded-lg shadow-2xl py-1 w-[180px] border border-white/20 bg-gray-900 animate-fadeIn",style:{top:`${h.top}px`,left:`${h.left}px`,zIndex:9999},children:[o?a.jsx("button",{onClick:()=>v(o),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors",children:"View Booked Stock"}):null,a.jsx("button",{onClick:()=>v(i),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors",children:"Adjust Stock"}),a.jsx("button",{onClick:()=>v(c),className:"w-full px-3 py-2 text-left text-sm hover:bg-glass transition-colors text-red-400",children:"Delete"})]}),document.body)]})},yt=({isOpen:i,onClose:c,title:o,children:u,footer:d,size:h="md"})=>{const[y,p]=m.useState(!1),[x,f]=m.useState(!1);m.useEffect(()=>{const B=b=>{b.key==="Escape"&&v()};if(i)p(!0),document.addEventListener("keydown",B),document.body.style.overflow="hidden",setTimeout(()=>{f(!0)},10);else{f(!1);const b=setTimeout(()=>{p(!1),document.body.style.overflow=""},300);return()=>clearTimeout(b)}return()=>{document.removeEventListener("keydown",B),document.body.style.overflow=""}},[i]);const v=()=>{f(!1),setTimeout(()=>{c()},150)};if(!y)return null;const w={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return pu.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:`absolute inset-0 bg-black/70 backdrop-blur-md transition-all duration-300 ease-out ${x?"opacity-100":"opacity-0"}`,onClick:v}),a.jsxs("div",{className:`relative w-full ${w[h]} glass rounded-xl shadow-2xl transition-all duration-300 ease-out transform ${x?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"}`,children:[a.jsxs("div",{className:`flex items-center justify-between p-6 border-b border-gray-800/50 transition-all duration-500 ease-out ${x?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:[a.jsx("h2",{className:"text-xl font-semibold",children:o}),a.jsx("button",{onClick:v,className:"p-2 rounded-lg hover:bg-glass transition-all duration-200 hover:rotate-90 transform",children:a.jsx(Nn,{size:20})})]}),a.jsx("div",{className:`p-6 transition-all duration-500 delay-75 ease-out ${x?"opacity-100":"opacity-0"}`,style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:u}),d&&a.jsx("div",{className:`flex justify-end gap-3 p-6 border-t border-gray-800/50 transition-all duration-500 delay-100 ease-out ${x?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:d})]})]}),document.body)},Oa=({isOpen:i,onClose:c,onConfirm:o,title:u="Confirm Action",message:d,confirmText:h="Confirm",cancelText:y="Cancel",type:p="warning",loading:x=!1})=>{const f={danger:a.jsx(Rt,{size:48,className:"text-red-400"}),warning:a.jsx(is,{size:48,className:"text-yellow-400"}),info:a.jsx(ju,{size:48,className:"text-blue-400"})},v=()=>{o(),x||c()},w=a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:x,children:y}),a.jsx(pe,{variant:p==="danger"?"danger":"primary",onClick:v,loading:x,loadingText:"Processing...",children:h})]});return a.jsx(yt,{isOpen:i,onClose:c,title:u,footer:w,size:"sm",children:a.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[a.jsx("div",{className:"p-4 glass rounded-full",children:f[p]}),a.jsx("div",{className:"text-gray-200 leading-relaxed",children:d}),p==="danger"&&a.jsx("div",{className:"w-full p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(is,{size:16}),"This action cannot be undone"]})})]})})},gj=({products:i,searchTerm:c,categoryFilter:o,stockFilter:u,onEditProduct:d,onDeleteProduct:h,onViewMovement:y,onAdjustStock:p,onViewBookedStock:x})=>{const[f,v]=m.useState("name"),[w,B]=m.useState("asc"),[b,S]=m.useState(new Set),[D,C]=m.useState({show:!1,product:null}),[L,A]=m.useState(!1),z=Q=>{f===Q?B(w==="asc"?"desc":"asc"):(v(Q),B("asc"))},ee=m.useMemo(()=>{let Q=[...i];if(c){const H=c.toLowerCase();Q=Q.filter(Z=>Z.name.toLowerCase().includes(H)||Z.category.toLowerCase().includes(H))}return o&&(Q=Q.filter(H=>H.category===o)),u&&(u==="low-stock"?Q=Q.filter(H=>H.status==="low-stock"||H.status==="out-of-stock"):u==="out-of-stock"?Q=Q.filter(H=>H.status==="out-of-stock"):u==="in-stock"&&(Q=Q.filter(H=>H.status==="in-stock"))),Q.sort((H,Z)=>{let te=H[f],de=Z[f];return typeof te=="string"&&(te=te.toLowerCase(),de=de.toLowerCase()),w==="asc"?te>de?1:-1:te<de?1:-1}),Q},[i,c,o,u,f,w]),k=Q=>{const H=new Set(b);H.has(Q)?H.delete(Q):H.add(Q),S(H)},J=()=>{b.size===ee.length?S(new Set):S(new Set(ee.map(Q=>Q.id)))},T=Q=>f!==Q?null:w==="asc"?a.jsx(yu,{size:14}):a.jsx(Xl,{size:14}),q=Q=>Q.status==="out-of-stock"?a.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-red-500/20 text-red-400 flex items-center gap-1",children:[a.jsx(is,{size:12}),"Out of Stock"]}):Q.status==="low-stock"?a.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[a.jsx(is,{size:12}),"Low Stock"]}):a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-500/20 text-green-400",children:"In Stock"});if(ee.length===0)return a.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[a.jsx(pt,{size:48,className:"mx-auto mb-4 text-muted"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Products Found"}),a.jsx("p",{className:"text-muted",children:c||o||u?"Try adjusting your filters or search term":"Add your first product to get started"})]});const R=Q=>{h(Q),C({show:!1,product:null})},_=()=>{b.forEach(Q=>h(Q)),S(new Set),A(!1)};return a.jsxs(a.Fragment,{children:[b.size>0&&a.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[a.jsxs("span",{className:"text-sm",children:[b.size," product",b.size!==1?"s":""," selected"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>S(new Set),children:"Clear"}),a.jsx(pe,{variant:"secondary",size:"sm",onClick:()=>A(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),a.jsx("div",{className:"sm:hidden",children:a.jsx("div",{className:"space-y-3",children:ee.map(Q=>a.jsxs("div",{className:`glass rounded-lg p-4 ${b.has(Q.id)?"ring-2 ring-white/20":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("button",{onClick:()=>k(Q.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:b.has(Q.id)?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-base",children:Q.name}),a.jsxs("p",{className:"text-xs text-muted mt-1",children:[Q.category," • ",Q.unit]})]})]}),a.jsx("div",{className:"text-right",children:q(Q)})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-muted block",children:"On Hand"}),a.jsx("span",{className:"font-medium",children:Q.quantityOnHand})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-muted block",children:"Booked"}),a.jsx("span",{className:Q.quantityBooked>0?"text-yellow-400":"",children:Q.quantityBooked})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-muted block",children:"Available"}),a.jsx("span",{className:`font-medium ${Q.availableQuantity===0?"text-red-400":Q.availableQuantity<=Q.reorderLevel?"text-yellow-400":"text-green-400"}`,children:Q.availableQuantity})]})]}),a.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[a.jsx("button",{onClick:()=>d(Q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Product",children:a.jsx(ra,{size:16})}),a.jsx("button",{onClick:()=>y(Q),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Movement",children:a.jsx(bn,{size:16})}),a.jsx(Uh,{onAdjustStock:()=>p(Q),onDelete:()=>C({show:!0,product:Q}),onViewBookedStock:x?()=>x(Q):void 0,productName:Q.name})]})]},Q.id))})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/5",children:[a.jsx("th",{className:"text-left py-3 px-3",children:a.jsx("button",{onClick:J,className:"p-1 rounded hover:bg-glass transition-colors",children:b.size===ee.length&&ee.length>0?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})})}),a.jsx("th",{className:"text-left py-3 px-3",children:a.jsxs("button",{onClick:()=>z("name"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Product",T("name")]})}),a.jsx("th",{className:"text-left py-3 px-3",children:a.jsxs("button",{onClick:()=>z("category"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Category",T("category")]})}),a.jsx("th",{className:"text-right py-3 px-3",children:a.jsxs("button",{onClick:()=>z("quantityOnHand"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["On Hand",T("quantityOnHand")]})}),a.jsx("th",{className:"text-right py-3 px-3",children:a.jsxs("button",{onClick:()=>z("quantityBooked"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Booked",T("quantityBooked")]})}),a.jsx("th",{className:"text-right py-3 px-3",children:a.jsxs("button",{onClick:()=>z("availableQuantity"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Available",T("availableQuantity")]})}),a.jsx("th",{className:"text-center py-3 px-3",children:"Status"}),a.jsx("th",{className:"text-center py-3 px-3",children:"Actions"})]})}),a.jsx("tbody",{children:ee.map(Q=>a.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${b.has(Q.id)?"bg-glass/50":""}`,children:[a.jsx("td",{className:"py-3 px-3",children:a.jsx("button",{onClick:()=>k(Q.id),className:"p-1 rounded hover:bg-glass transition-colors",children:b.has(Q.id)?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})})}),a.jsx("td",{className:"py-3 px-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 glass rounded-lg",children:a.jsx(pt,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:Q.name}),a.jsx("p",{className:"text-xs text-muted",children:Q.unit})]})]})}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:"text-sm",children:Q.category})}),a.jsx("td",{className:"py-3 px-3 text-right",children:a.jsx("span",{className:"font-medium",children:Q.quantityOnHand})}),a.jsx("td",{className:"py-3 px-3 text-right",children:a.jsx("span",{className:Q.quantityBooked>0?"text-yellow-400":"",children:Q.quantityBooked})}),a.jsx("td",{className:"py-3 px-3 text-right",children:a.jsx("span",{className:`font-medium ${Q.availableQuantity===0?"text-red-400":Q.availableQuantity<=Q.reorderLevel?"text-yellow-400":"text-green-400"}`,children:Q.availableQuantity})}),a.jsx("td",{className:"py-3 px-3 text-center",children:q(Q)}),a.jsx("td",{className:"py-3 px-3",children:a.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1 relative",children:[a.jsx("button",{onClick:()=>d(Q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Product",children:a.jsx(ra,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{onClick:()=>y(Q),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Movement",children:a.jsx(bn,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx(Uh,{onAdjustStock:()=>p(Q),onDelete:()=>C({show:!0,product:Q}),onViewBookedStock:x?()=>x(Q):void 0,productName:Q.name})]})})]},Q.id))})]})}),a.jsx(Oa,{isOpen:D.show,onClose:()=>C({show:!1,product:null}),onConfirm:()=>{D.product&&R(D.product.id)},title:"Delete Product",message:`Are you sure you want to delete "${D.product?.name}"? This will also remove all related movement history.`,confirmText:"Delete Product",type:"danger"}),a.jsx(Oa,{isOpen:L,onClose:()=>A(!1),onConfirm:_,title:"Delete Multiple Products",message:`Are you sure you want to delete ${b.size} selected product${b.size!==1?"s":""}? This action will remove all selected products and their movement history.`,confirmText:`Delete ${b.size} Product${b.size!==1?"s":""}`,type:"danger"})]})},pj=({isOpen:i,onClose:c,categories:o,onAddCategory:u,onUpdateCategory:d,onDeleteCategory:h})=>{const[y,p]=m.useState(null),[x,f]=m.useState({name:"",description:""}),[v,w]=m.useState(!1),[B,b]=m.useState(null),[S,D]=m.useState(""),[C,L]=m.useState(!1);m.useEffect(()=>{i||(p(null),f({name:"",description:""}),w(!1),b(null),D(""))},[i]);const A=async()=>{if(D(""),!x.name.trim()){D("Category name is required");return}L(!0),await new Promise(J=>setTimeout(J,300));const k=u(x.name.trim(),x.description.trim());L(!1),k?(f({name:"",description:""}),w(!1)):D("Failed to add category")},z=()=>{if(!y)return;D("");const k=document.getElementById(`cat-name-${y.id}`)?.value,J=document.getElementById(`cat-desc-${y.id}`)?.value;if(!k?.trim()){D("Category name is required");return}d(y.id,k.trim(),J?.trim())?p(null):D("Failed to update category")},ee=k=>{h(k)||D("Cannot delete category with existing products"),b(null)};return a.jsx(yt,{isOpen:i,onClose:c,title:"Manage Categories",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[S&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400 text-sm",children:S}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("p",{className:"text-muted",children:"Manage product categories for your inventory"}),!v&&a.jsxs("button",{onClick:()=>w(!0),className:"p-2 sm:px-3 sm:py-1.5 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm",title:"Add Category",children:[a.jsx(_t,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Add Category"})]})]}),v&&a.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[a.jsx("h3",{className:"font-semibold",children:"Add New Category"}),a.jsx("input",{type:"text",placeholder:"Category name",value:x.name,onChange:k=>f({...x,name:k.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),a.jsx("input",{type:"text",placeholder:"Description (optional)",value:x.description,onChange:k=>f({...x,description:k.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"primary",size:"sm",onClick:A,loading:C,loadingText:"Saving...",disabled:C,children:"Save"}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{w(!1),f({name:"",description:""}),D("")},disabled:C,children:"Cancel"})]})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(k=>a.jsx("div",{className:"glass p-4 rounded-lg",children:y?.id===k.id?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{id:`cat-name-${k.id}`,type:"text",defaultValue:k.name,className:"w-full px-3 py-1 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20"}),a.jsx("input",{id:`cat-desc-${k.id}`,type:"text",defaultValue:k.description,placeholder:"Description (optional)",className:"w-full px-3 py-1 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"primary",size:"sm",onClick:z,children:"Save"}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{p(null),D("")},children:"Cancel"})]})]}):B===k.id?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-yellow-400",children:"Are you sure you want to delete this category?"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"secondary",size:"sm",onClick:()=>ee(k.id),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400",children:"Delete"}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>b(null),children:"Cancel"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:k.name}),k.description&&a.jsx("p",{className:"text-sm text-muted mt-1",children:k.description})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{p(k),D("")},className:"p-2 rounded-lg hover:bg-glass transition-colors",children:a.jsx(ra,{size:16})}),a.jsx("button",{onClick:()=>{b(k.id),D("")},className:"p-2 rounded-lg hover:bg-glass transition-colors text-red-400",children:a.jsx(Rt,{size:16})})]})]})},k.id))})]})})},yj=({isOpen:i,onClose:c,categories:o,onAddProduct:u})=>{const[d,h]=m.useState({name:"",category:"",initialQuantity:0,unit:"bags",reorderLevel:10}),[y,p]=m.useState([]),[x,f]=m.useState(!1);m.useEffect(()=>{i?o.length>0&&!d.category&&h(b=>({...b,category:o[0].name})):(h({name:"",category:o.length>0?o[0].name:"",initialQuantity:0,unit:"bags",reorderLevel:10}),p([]))},[i,o]);const v=async b=>{b.preventDefault(),p([]),f(!0),await new Promise(D=>setTimeout(D,300));const S=u(d.name,d.category,d.initialQuantity,d.unit,d.reorderLevel);f(!1),S.success?c():p(S.errors||["Failed to add product"])},w=(b,S)=>{h(D=>({...D,[b]:S}))},B=a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:x,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:v,loading:x,loadingText:"Adding Product...",disabled:x,children:"Add Product"})]});return a.jsx(yt,{isOpen:i,onClose:c,title:"Add New Product",footer:B,size:"md",children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[y.length>0&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:a.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.map((b,S)=>a.jsx("li",{className:"text-sm",children:b},S))})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),a.jsx("input",{type:"text",value:d.name,onChange:b=>w("name",b.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",placeholder:"Enter product name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),a.jsx("select",{value:d.category,onChange:b=>w("category",b.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,children:o.length===0?a.jsx("option",{value:"",children:"No categories available"}):o.map(b=>a.jsx("option",{value:b.name,children:b.name},b.id))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Initial Quantity"}),a.jsx("input",{type:"number",value:d.initialQuantity,onChange:b=>w("initialQuantity",Number(b.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Unit"}),a.jsx("select",{value:d.unit,onChange:b=>w("unit",b.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",children:a.jsx("option",{value:"bags",children:"Bags"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reorder Level"}),a.jsx("input",{type:"number",value:d.reorderLevel,onChange:b=>w("reorderLevel",Number(b.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0})]}),a.jsxs("div",{className:"text-sm text-muted",children:[a.jsx("p",{children:"The product will be added with the specified initial quantity."}),a.jsx("p",{children:"You'll receive an alert when stock falls below the reorder level."})]})]})})},vj=({isOpen:i,onClose:c,product:o,categories:u,onUpdateProduct:d})=>{const[h,y]=m.useState({name:"",category:"",unit:"bags",reorderLevel:10}),[p,x]=m.useState([]),[f,v]=m.useState(!1);m.useEffect(()=>{o&&i&&(y({name:o.name,category:o.category,unit:o.unit,reorderLevel:o.reorderLevel}),x([]))},[o,i]);const w=async S=>{if(S.preventDefault(),!o)return;x([]),v(!0);const D=d(o.id,{name:h.name,category:h.category,unit:h.unit,reorderLevel:h.reorderLevel});v(!1),D.success?c():x(D.errors||["Failed to update product"])},B=(S,D)=>{y(C=>({...C,[S]:D}))},b=a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:f,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:w,loading:f,loadingText:"Updating...",children:"Update Product"})]});return o?a.jsx(yt,{isOpen:i,onClose:c,title:"Edit Product",footer:b,size:"md",children:a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[p.length>0&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:a.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map((S,D)=>a.jsx("li",{className:"text-sm",children:S},D))})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),a.jsx("input",{type:"text",value:h.name,onChange:S=>B("name",S.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",placeholder:"Enter product name",required:!0,disabled:f})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),a.jsx("select",{value:h.category,onChange:S=>B("category",S.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,disabled:f,children:u.length===0?a.jsx("option",{value:"",children:"No categories available"}):u.map(S=>a.jsx("option",{value:S.name,children:S.name},S.id))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Unit"}),a.jsx("select",{value:h.unit,onChange:S=>B("unit",S.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",disabled:f,children:a.jsx("option",{value:"bags",children:"Bags"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reorder Level"}),a.jsx("input",{type:"number",value:h.reorderLevel,onChange:S=>B("reorderLevel",Number(S.target.value)),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0,disabled:f})]})]}),a.jsxs("div",{className:"p-3 rounded-lg glass",children:[a.jsx("p",{className:"text-sm text-muted",children:"Current Stock Information:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"On Hand"}),a.jsx("p",{className:"font-medium",children:o.quantityOnHand})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"Booked"}),a.jsx("p",{className:"font-medium",children:o.quantityBooked})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"Available"}),a.jsx("p",{className:"font-medium",children:o.availableQuantity})]})]})]}),a.jsx("div",{className:"text-sm text-muted",children:a.jsx("p",{children:"Note: Stock quantities cannot be edited directly. Use Production Entry or Stock Adjustment instead."})})]})}):null},jj=({isOpen:i,onClose:c,products:o,onAddProduction:u})=>{const[d,h]=m.useState([]),[y,p]=m.useState(new Date().toISOString().split("T")[0]),[x,f]=m.useState(new Date().toTimeString().split(" ")[0].slice(0,5)),[v,w]=m.useState([]),[B,b]=m.useState(0),[S,D]=m.useState(!1);m.useEffect(()=>{i?o.length>0&&d.length===0&&C():(h([]),p(new Date().toISOString().split("T")[0]),f(new Date().toTimeString().split(" ")[0].slice(0,5)),w([]),b(0),D(!1))},[i,o]);const C=()=>{if(o.length===0)return;const k={productId:o[0].id,productName:o[0].name,quantity:0,notes:""};h([...d,k])},L=(k,J,T)=>{const q=[...d];if(q[k]={...q[k],[J]:T},J==="productId"){const R=o.find(_=>_.id===T);R&&(q[k].productName=R.name)}h(q)},A=k=>{h(d.filter((J,T)=>T!==k))},z=()=>{w([]),b(0),D(!0);const k=d.filter(R=>R.quantity>0);if(k.length===0){w(["Please add at least one product with quantity greater than 0"]),D(!1);return}const J=new Date(`${y}T${x}`),T=k.map(R=>({productId:R.productId,quantity:R.quantity,notes:R.notes||`Production on ${J.toLocaleDateString()}`}));u(T)?(b(k.length),setTimeout(()=>{D(!1),c()},1500)):D(!1)},ee=a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:S,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:z,loading:S,loadingText:"Processing...",disabled:S,children:"Add Production"})]});return a.jsx(yt,{isOpen:i,onClose:c,title:"Add Production Entry",footer:ee,size:"xl",children:a.jsxs("div",{className:"space-y-4",children:[v.length>0&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400",children:a.jsx("ul",{className:"list-disc list-inside space-y-1",children:v.map((k,J)=>a.jsx("li",{className:"text-sm",children:k},J))})}),B>0&&a.jsxs("div",{className:"p-3 rounded-lg bg-green-500/20 text-green-400",children:["Successfully added production for ",B," product(s)!"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Production Date"}),a.jsx("input",{type:"date",value:y,onChange:k=>p(k.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),a.jsx("input",{type:"time",value:x,onChange:k=>f(k.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),a.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-medium",children:"Production Items"}),a.jsxs(pe,{variant:"secondary",size:"sm",onClick:C,children:[a.jsx(_t,{size:18}),"Add Product"]})]}),d.length===0?a.jsxs("div",{className:"glass p-8 rounded-lg text-center",children:[a.jsx(pt,{size:48,className:"mx-auto mb-3 text-muted"}),a.jsx("p",{className:"text-muted",children:"No products added yet"}),a.jsx("p",{className:"text-sm text-muted mt-1",children:'Click "Add Product" to start adding production entries'})]}):d.map((k,J)=>a.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Product"}),a.jsx("select",{value:k.productId,onChange:T=>L(J,"productId",T.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-gray-100",children:o.map(T=>a.jsxs("option",{value:T.id,children:[T.name," (",T.category,")"]},T.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Quantity Produced"}),a.jsx("input",{type:"number",value:k.quantity,onChange:T=>L(J,"quantity",Number(T.target.value)),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",min:"0",placeholder:"Enter quantity"})]})]}),a.jsx("button",{onClick:()=>A(J),className:"ml-3 p-2 rounded-lg hover:bg-glass transition-colors text-red-400",children:a.jsx(Rt,{size:16})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:k.notes,onChange:T=>L(J,"notes",T.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Add any notes about this production"})]})]},J))]}),a.jsxs("div",{className:"text-sm text-muted",children:[a.jsx("p",{children:'Production entries will increase the "Quantity on Hand" for selected products.'}),a.jsx("p",{children:"All entries will be logged in the movement history for tracking."})]})]})})},bj=({isOpen:i,onClose:c,product:o,movements:u})=>{const[d,h]=m.useState({movementType:"",dateFrom:"",dateTo:"",minQuantity:"",maxQuantity:"",searchTerm:""}),[y,p]=m.useState(1),x=10;m.useEffect(()=>{i||(h({movementType:"",dateFrom:"",dateTo:"",minQuantity:"",maxQuantity:"",searchTerm:""}),p(1))},[i]);const f=m.useMemo(()=>mj(u,{productId:o?.id,movementType:d.movementType,dateFrom:d.dateFrom?new Date(d.dateFrom):void 0,dateTo:d.dateTo?new Date(d.dateTo):void 0,minQuantity:d.minQuantity?Number(d.minQuantity):void 0,maxQuantity:d.maxQuantity?Number(d.maxQuantity):void 0,searchTerm:d.searchTerm}),[u,o,d]),v=m.useMemo(()=>{const S=(y-1)*x;return f.slice(S,S+x)},[f,y]),w=Math.ceil(f.length/x),B=S=>{if(S==="json"){const D=JSON.stringify(f,null,2);Yl(D,`${o?.name||"movements"}_history.json`,"json")}else{const D=["Date","Type","Quantity","Previous","New","Reference","Notes"],C=f.map(A=>[new Date(A.date).toLocaleString(),Hh(A.movementType),A.quantity.toString(),A.previousQuantity.toString(),A.newQuantity.toString(),A.reference||"",A.notes||""]),L=[D.join(","),...C.map(A=>A.map(z=>`"${z}"`).join(","))].join(`
`);Yl(L,`${o?.name||"movements"}_history.csv`,"csv")}},b=S=>S>0?a.jsx(oa,{size:16,className:"text-green-400"}):S<0?a.jsx(Wl,{size:16,className:"text-red-400"}):a.jsx(bn,{size:16,className:"text-yellow-400"});return a.jsx(yt,{isOpen:i,onClose:c,title:`Movement History${o?` - ${o.name}`:""}`,size:"xl",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"glass p-4 rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[a.jsx(vu,{size:18}),"Filters"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{variant:"secondary",size:"sm",onClick:()=>B("csv"),children:[a.jsx(Mt,{size:16}),"CSV"]}),a.jsxs(pe,{variant:"secondary",size:"sm",onClick:()=>B("json"),children:[a.jsx(Mt,{size:16}),"JSON"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Movement Type"}),a.jsxs("select",{value:d.movementType,onChange:S=>h({...d,movementType:S.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-gray-100",children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"production",children:"Production"}),a.jsx("option",{value:"sales",children:"Sales"}),a.jsx("option",{value:"loading",children:"Loading"}),a.jsx("option",{value:"adjustment",children:"Adjustment"}),a.jsx("option",{value:"return",children:"Return"}),a.jsx("option",{value:"damage",children:"Damage"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Date From"}),a.jsx("input",{type:"date",value:d.dateFrom,onChange:S=>h({...d,dateFrom:S.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Date To"}),a.jsx("input",{type:"date",value:d.dateTo,onChange:S=>h({...d,dateTo:S.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Min Quantity"}),a.jsx("input",{type:"number",value:d.minQuantity,onChange:S=>h({...d,minQuantity:S.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Min"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Max Quantity"}),a.jsx("input",{type:"number",value:d.maxQuantity,onChange:S=>h({...d,maxQuantity:S.target.value}),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Max"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:16}),a.jsx("input",{type:"text",value:d.searchTerm,onChange:S=>h({...d,searchTerm:S.target.value}),className:"w-full pl-9 pr-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",placeholder:"Search notes..."})]})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800/50",children:[a.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Date/Time"}),a.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Type"}),a.jsx("th",{className:"text-right py-2 px-3 text-sm",children:"Quantity"}),a.jsx("th",{className:"text-right py-2 px-3 text-sm",children:"Balance"}),a.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Reference"}),a.jsx("th",{className:"text-left py-2 px-3 text-sm",children:"Notes"})]})}),a.jsx("tbody",{children:v.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,className:"text-center py-8 text-muted",children:[a.jsx(bn,{size:32,className:"mx-auto mb-2"}),"No movements found"]})}):v.map(S=>a.jsxs("tr",{className:"border-b border-gray-800/30",children:[a.jsx("td",{className:"py-2 px-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ta,{size:14,className:"text-muted"}),new Date(S.date).toLocaleString()]})}),a.jsx("td",{className:"py-2 px-3",children:a.jsx("span",{className:`text-sm font-medium ${rj(S.movementType)}`,children:Hh(S.movementType)})}),a.jsx("td",{className:"py-2 px-3 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1",children:[b(S.quantity),a.jsxs("span",{className:`text-sm font-medium ${S.quantity>0?"text-green-400":S.quantity<0?"text-red-400":"text-yellow-400"}`,children:[S.quantity>0?"+":"",S.quantity]})]})}),a.jsx("td",{className:"py-2 px-3 text-right text-sm",children:a.jsxs("div",{className:"text-xs text-muted",children:[S.previousQuantity," → ",S.newQuantity]})}),a.jsx("td",{className:"py-2 px-3 text-sm text-muted",children:S.reference||"-"}),a.jsx("td",{className:"py-2 px-3 text-sm text-muted",children:S.notes||"-"})]},S.id))})]})}),w>1&&a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("div",{className:"text-sm text-muted",children:["Showing ",(y-1)*x+1," to ",Math.min(y*x,f.length)," of ",f.length," entries"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>p(S=>Math.max(1,S-1)),disabled:y===1,children:"Previous"}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,w)},(S,D)=>{const C=y>3?y-2+D:D+1;return C>w?null:a.jsx("button",{onClick:()=>p(C),className:`px-3 py-1 rounded-lg text-sm ${C===y?"bg-white/20 text-white":"hover:bg-glass"}`,children:C},C)})}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>p(S=>Math.min(w,S+1)),disabled:y===w,children:"Next"})]})]})]})})},Nj=({isOpen:i,onClose:c,product:o,onAdjustStock:u})=>{const[d,h]=m.useState({newQuantity:0,reason:"",notes:""}),[y,p]=m.useState(""),[x,f]=m.useState(!1),[v,w]=m.useState(!1);m.useEffect(()=>{!i||!o?(h({newQuantity:o?.quantityOnHand||0,reason:"",notes:""}),p(""),w(!1)):h(C=>({...C,newQuantity:o.quantityOnHand}))},[i,o]);const B=async C=>{if(C.preventDefault(),p(""),!o){p("No product selected");return}if(!d.reason.trim()){p("Adjustment reason is required");return}if(d.newQuantity<0){p("Quantity cannot be negative");return}f(!0),await new Promise(L=>setTimeout(L,300)),u(o.id,d.newQuantity,d.reason,d.notes||void 0),f(!1),w(!0),setTimeout(()=>{c()},1500)};if(!o)return null;const b=d.newQuantity-o.quantityOnHand,S=b>0,D=a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:x,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:B,loading:x,loadingText:"Adjusting...",disabled:x,children:"Adjust Stock"})]});return a.jsx(yt,{isOpen:i,onClose:c,title:"Stock Adjustment",footer:D,size:"md",children:a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[y&&a.jsxs("div",{className:"p-3 rounded-lg bg-red-500/20 text-red-400 text-sm flex items-center gap-2",children:[a.jsx(is,{size:18}),y]}),v&&a.jsx("div",{className:"p-3 rounded-lg bg-green-500/20 text-green-400 text-sm",children:"Stock adjusted successfully!"}),a.jsxs("div",{className:"glass p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 glass rounded-lg",children:a.jsx(pt,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:o.name}),a.jsx("p",{className:"text-sm text-muted",children:o.category})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Current Quantity:"}),a.jsxs("p",{className:"font-medium text-lg",children:[o.quantityOnHand," ",o.unit]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Available:"}),a.jsxs("p",{className:"font-medium text-lg",children:[o.availableQuantity," ",o.unit]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"New Quantity"}),a.jsx("input",{type:"number",value:d.newQuantity,onChange:C=>h({...d,newQuantity:Number(C.target.value)}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",required:!0}),b!==0&&a.jsxs("p",{className:`text-sm mt-1 ${S?"text-green-400":"text-red-400"}`,children:[S?"+":"",b," ",o.unit]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Adjustment Reason"}),a.jsxs("select",{value:d.reason,onChange:C=>h({...d,reason:C.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-gray-100",required:!0,children:[a.jsx("option",{value:"",children:"Select a reason"}),a.jsx("option",{value:"Physical Count Correction",children:"Physical Count Correction"}),a.jsx("option",{value:"Damage/Loss",children:"Damage/Loss"}),a.jsx("option",{value:"Quality Issue",children:"Quality Issue"}),a.jsx("option",{value:"System Error Correction",children:"System Error Correction"}),a.jsx("option",{value:"Return from Customer",children:"Return from Customer"}),a.jsx("option",{value:"Sample/Testing",children:"Sample/Testing"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),a.jsx("textarea",{value:d.notes,onChange:C=>h({...d,notes:C.target.value}),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text",rows:3,placeholder:"Add any additional details about this adjustment..."})]}),a.jsx("div",{className:"p-3 glass rounded-lg text-sm text-muted",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(is,{size:16,className:"mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{children:"This adjustment will be logged in the movement history."}),a.jsx("p",{children:"Make sure to document the reason for audit purposes."})]})]})})]})})},Sj=({isOpen:i,product:c,onClose:o})=>{const[u,d]=m.useState([]),{getBookedStockByProduct:h}=kn();if(m.useEffect(()=>{if(c){const f=h(c.id);d(f)}},[c,h]),!c)return null;const y=u.reduce((f,v)=>f+(v.quantity-v.quantityLoaded),0),p=u.reduce((f,v)=>(f[v.customerId]||(f[v.customerId]={customerName:v.customerName,bookings:[],totalQuantity:0}),f[v.customerId].bookings.push(v),f[v.customerId].totalQuantity+=v.quantity-v.quantityLoaded,f),{}),x=f=>{switch(f){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";case"fully-loaded":return"bg-green-500/20 text-green-400";case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return a.jsx(yt,{isOpen:i,onClose:o,title:`Booked Stock Details - ${c.name}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"glass rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"On Hand"}),a.jsxs("p",{className:"text-xl font-bold",children:[c.quantityOnHand," ",c.unit]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Booked"}),a.jsxs("p",{className:"text-xl font-bold text-yellow-400",children:[y," ",c.unit]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Available"}),a.jsxs("p",{className:"text-xl font-bold text-green-400",children:[c.quantityOnHand-y," ",c.unit]})]})]})}),u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qt,{className:"mx-auto mb-3 text-muted",size:48}),a.jsx("p",{className:"text-muted",children:"No active bookings for this product"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(p).map(([f,v])=>a.jsxs("div",{className:"glass rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(As,{className:"text-blue-400",size:18}),a.jsx("h4",{className:"font-semibold",children:v.customerName})]}),a.jsxs("span",{className:"text-sm font-medium text-yellow-400",children:["Total: ",v.totalQuantity," ",c.unit]})]}),a.jsx("div",{className:"space-y-2",children:v.bookings.map(w=>a.jsx("div",{className:"pl-6 py-2 border-l-2 border-gray-700",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("p",{className:"text-sm",children:["Order: ",w.orderId]}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${x(w.status)}`,children:w.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(pt,{size:12}),w.quantity," ",w.unit]}),w.quantityLoaded>0&&a.jsxs("span",{children:["Loaded: ",w.quantityLoaded]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ta,{size:12}),new Date(w.bookingDate).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium",children:[w.quantity-w.quantityLoaded," ",w.unit]}),a.jsx("p",{className:"text-xs text-muted",children:"remaining"})]})]})},w.id))})]},f))}),a.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-800/50",children:a.jsx(pe,{variant:"ghost",onClick:o,children:"Close"})})]})})},wj=()=>{const[i,c]=m.useState(""),[o,u]=m.useState(""),[d,h]=m.useState(""),[y,p]=m.useState(null),[x,f]=m.useState(null),[v,w]=m.useState(!1),[B,b]=m.useState(!1),[S,D]=m.useState(!1),[C,L]=m.useState(!1),[A,z]=m.useState(!1),[ee,k]=m.useState(!1),[J,T]=m.useState(!1),[q,R]=m.useState(null),{products:_,categories:Q,movements:H,loading:Z,addCategory:te,updateCategory:de,deleteCategory:G,addProduct:Y,updateProduct:ie,deleteProduct:ne,addBatchProductionEntries:N,adjustStock:E,refreshData:U}=fj(),{toasts:P,showSuccess:O,showError:V,removeToast:se}=En();m.useEffect(()=>{const me=he=>{const Te=he.target;Te.closest(".settings-dropdown")||w(!1),Te.closest(".mobile-menu-dropdown")||b(!1)};return(v||B)&&document.addEventListener("click",me),()=>{document.removeEventListener("click",me)}},[v,B]);const ue=(me,he,Te,we,De)=>{const Oe=Y(me,he,Te,we,De);return Oe.success?(O(`Product "${me}" added successfully`),{success:!0}):Oe},le=me=>{const he=_.find(we=>we.id===me);ne(me)?O(`Product "${he?.name}" deleted`):V("Failed to delete product")},fe=me=>{const he=N(me);return he.success&&he.failedProducts.length===0?O(`Production added for ${he.successCount} product${he.successCount>1?"s":""}`):he.success&&he.failedProducts.length>0?V(`Added ${he.successCount} entries, failed for ${he.failedProducts.join(", ")}`):V("Failed to add production entries"),he.success},je=(me,he,Te,we)=>{const De=E(me,he,Te,we);return De.success?O("Stock adjusted successfully"):V("Failed to adjust stock"),De.success},ge=me=>{if(me==="json"){const he=cj(_);Yl(he,`inventory_${new Date().toISOString().split("T")[0]}.json`,"json"),O("Inventory exported as JSON")}else{const he=oj(_);Yl(he,`inventory_${new Date().toISOString().split("T")[0]}.csv`,"csv"),O("Inventory exported as CSV")}},I=async()=>{const me=document.createElement("input");me.type="file",me.accept=".json",me.onchange=async he=>{const Te=he.target.files?.[0];if(!Te)return;const we=await Te.text(),De=uj(we);De?(De.forEach(Oe=>{Y(Oe.name,Oe.category,Oe.quantityOnHand,Oe.unit,Oe.reorderLevel)}),O(`Imported ${De.length} products`),U()):V("Failed to import inventory. Please check the file format.")},me.click()},xe=()=>{const me={version:"1.0.0",timestamp:new Date().toISOString(),products:_,categories:Q,movements:H,productionEntries:[]},he=JSON.stringify(me,null,2);Yl(he,`inventory_backup_${new Date().toISOString().split("T")[0]}.json`,"json"),O("Backup created successfully")},Ne=async()=>{const me=document.createElement("input");me.type="file",me.accept=".json",me.onchange=async he=>{const Te=he.target.files?.[0];if(!Te)return;const we=await Te.text();try{const De=JSON.parse(we);De.products&&ye.set("products",De.products),De.categories&&ye.set("product_categories",De.categories),De.movements&&ye.set("inventory_movements",De.movements),De.productionEntries&&ye.set("production_entries",De.productionEntries),O("Backup restored successfully"),U()}catch(De){console.error("Restore error:",De),V("Failed to restore backup. Please check the file format.")}},me.click()},Ce=()=>{c(""),u(""),h("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Inventory Management"}),a.jsx("p",{className:"text-muted text-sm sm:text-base",children:"Track production, manage stock levels, and monitor movements"})]}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[a.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[a.jsx("button",{onClick:me=>{me.stopPropagation(),b(!B)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:a.jsx(wn,{size:20})}),B&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[a.jsxs("button",{onClick:me=>{me.stopPropagation(),D(!0),b(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(qh,{size:16}),"Categories"]}),a.jsxs("button",{onClick:me=>{me.stopPropagation(),z(!0),b(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Vl,{size:16}),"Production"]})]})]}),a.jsxs("div",{className:"hidden sm:flex gap-2",children:[a.jsxs(pe,{variant:"secondary",onClick:()=>D(!0),children:[a.jsx(qh,{size:20}),"Categories"]}),a.jsxs(pe,{variant:"secondary",onClick:()=>z(!0),children:[a.jsx(Vl,{size:20}),"Production"]})]}),a.jsxs("button",{onClick:()=>L(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Product",children:[a.jsx(_t,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Add Product"})]})]})]}),Z?a.jsx("div",{className:"glass rounded-xl p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading inventory..."})]})})}):a.jsx(hj,{products:_,movements:H}),a.jsxs(ze,{children:[a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Product Inventory"}),a.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[a.jsxs("button",{onClick:I,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Import",children:[a.jsx(Jl,{size:14,className:"sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Import"})]}),a.jsxs("button",{onClick:()=>ge("csv"),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export CSV",children:[a.jsx(Mt,{size:14,className:"sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),a.jsxs("button",{onClick:()=>ge("json"),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export JSON",children:[a.jsx(Es,{size:14,className:"sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Export JSON"})]}),a.jsxs("div",{className:"relative settings-dropdown",children:[a.jsx("button",{onClick:me=>{me.stopPropagation(),w(!v)},className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Settings",children:a.jsx(Nu,{size:14,className:"sm:w-4 sm:h-4"})}),v&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[140px] bg-gray-900 border border-white/20 animate-fadeIn",children:[a.jsx("button",{onClick:me=>{me.stopPropagation(),xe(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors",children:"Create Backup"}),a.jsx("button",{onClick:me=>{me.stopPropagation(),Ne(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors",children:"Restore Backup"})]})]})]})]}),a.jsx(xj,{searchTerm:i,onSearchChange:c,categoryFilter:o,onCategoryChange:u,stockFilter:d,onStockFilterChange:h,categories:Q,onClearFilters:Ce})]}),Z?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):a.jsx(gj,{products:_,searchTerm:i,categoryFilter:o,stockFilter:d,onEditProduct:f,onDeleteProduct:le,onViewMovement:me=>{p(me),k(!0)},onAdjustStock:me=>{p(me),T(!0)},onViewBookedStock:me=>{R(me)}})]}),a.jsx(pj,{isOpen:S,onClose:()=>D(!1),categories:Q,onAddCategory:(me,he)=>{const Te=te(me,he);return Te&&O("Category added successfully"),Te},onUpdateCategory:(me,he,Te)=>{const we=de(me,he,Te);return we&&O("Category updated successfully"),we},onDeleteCategory:me=>{const he=G(me);return he?O("Category deleted successfully"):V("Cannot delete category with existing products"),he}}),a.jsx(yj,{isOpen:C,onClose:()=>L(!1),categories:Q,onAddProduct:ue}),a.jsx(vj,{isOpen:!!x,onClose:()=>f(null),product:x,categories:Q,onUpdateProduct:(me,he)=>{const Te=ie(me,he);return Te.success?O("Product updated successfully"):V("Failed to update product"),Te}}),a.jsx(jj,{isOpen:A,onClose:()=>z(!1),products:_,onAddProduction:fe}),a.jsx(bj,{isOpen:ee,onClose:()=>{k(!1),p(null)},product:y,movements:H}),a.jsx(Nj,{isOpen:J,onClose:()=>{T(!1),p(null)},product:y,onAdjustStock:je}),a.jsx(Sj,{isOpen:!!q,product:q,onClose:()=>R(null)}),a.jsx(Cn,{toasts:P,onClose:se})]})},Dl="customers",jr="ledger_entries",Cj=()=>{const[i,c]=m.useState([]),[o,u]=m.useState([]),[d,h]=m.useState(!0),[y,p]=m.useState(!1),[x,f]=m.useState(0),[v,w]=m.useState(null),{isAuthenticated:B}=m.useContext(ga),b=m.useRef(!0),S=m.useRef(!0);m.useEffect(()=>{b.current=!0;const Z=Ge.subscribe(te=>{b.current&&(p(te.isPending),f(te.pendingChanges),w(te.error))});return()=>{b.current=!1,Z()}},[]);const D=async()=>{if(b.current){h(!0);try{if(B){const Z=await Ot.loadAllData();Z&&(c(Z.customers||[]),u(Z.ledgerEntries||[]),ye.set(Dl,Z.customers||[]),ye.set(jr,Z.ledgerEntries||[]))}else{const Z=ye.get(Dl)||[],te=ye.get(jr)||[];c(Z),u(te)}}catch(Z){console.error("Error loading customers data:",Z);const te=ye.get(Dl)||[],de=ye.get(jr)||[];c(te),u(de)}finally{b.current&&(h(!1),setTimeout(()=>{S.current=!1},100))}}};m.useEffect(()=>{D()},[B]),m.useEffect(()=>{const Z=te=>{if(te.key===`supreme_mgmt_${Dl}`){const de=te.newValue?JSON.parse(te.newValue):[];c(de)}else if(te.key===`supreme_mgmt_${jr}`){const de=te.newValue?JSON.parse(te.newValue):[];u(de)}};return window.addEventListener("storage",Z),()=>window.removeEventListener("storage",Z)},[]),m.useEffect(()=>{b.current&&B&&!d&&!S.current&&Ge.markAsChanged()},[i,B,d]);const C=(Z,te=!1)=>{c(Z),ye.set(Dl,Z),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_customers",newValue:JSON.stringify(Z),url:window.location.href})),Ge.markAsChanged(te)},L=m.useCallback((Z,te,de,G=0)=>{try{const Y=i.find(U=>U.name.toLowerCase()===Z.toLowerCase()),ie=i.find(U=>U.phone===te);if(Y)return{success:!1,errors:[`Customer with name "${Z}" already exists`]};if(ie)return{success:!1,errors:[`Customer with phone number "${te}" already exists`]};const ne=new Date,N={id:$e(),name:Z,phone:te,state:de,balance:G,createdAt:ne,updatedAt:ne},E=[...i,N];return C(E,!0),{success:!0}}catch(Y){return console.error("Error adding customer:",Y),{success:!1,errors:["Failed to add customer"]}}},[i]),A=m.useCallback((Z,te)=>{try{if(i.findIndex(Y=>Y.id===Z)===-1)return{success:!1,errors:["Customer not found"]};if(te.name&&i.find(ie=>ie.id!==Z&&ie.name.toLowerCase()===te.name.toLowerCase()))return{success:!1,errors:[`Another customer with name "${te.name}" already exists`]};if(te.phone&&i.find(ie=>ie.id!==Z&&ie.phone===te.phone))return{success:!1,errors:[`Another customer with phone number "${te.phone}" already exists`]};const G=i.map(Y=>Y.id===Z?{...Y,...te,updatedAt:new Date}:Y);return C(G,!0),{success:!0}}catch(de){return console.error("Error updating customer:",de),{success:!1,errors:["Failed to update customer"]}}},[i]),z=m.useCallback(Z=>{try{const te=i.find(Y=>Y.id===Z);if(!te)return{success:!1};let de;te.balance!==0&&(de=`Customer has an outstanding balance of ₦${te.balance.toLocaleString()}`);const G=i.filter(Y=>Y.id!==Z);return C(G,!0),{success:!0,warning:de}}catch(te){return console.error("Error deleting customer:",te),{success:!1}}},[i]),ee=m.useCallback((Z,te,de)=>{try{if(i.findIndex(ne=>ne.id===Z)===-1)return{success:!1};const Y=i.map(ne=>{if(ne.id===Z){let N=ne.balance;switch(de){case"add":N+=te;break;case"subtract":N-=te;break;case"set":N=te;break}return{...ne,balance:N,updatedAt:new Date}}return ne});return C(Y),{success:!0,newBalance:Y.find(ne=>ne.id===Z)?.balance}}catch(G){return console.error("Error updating customer balance:",G),{success:!1}}},[i]),k=m.useCallback(Z=>i.find(te=>te.id===Z),[i]),J=m.useCallback(Z=>{const te=Z.toLowerCase();return i.filter(de=>de.name.toLowerCase().includes(te)||de.phone.includes(te)||de.state.toLowerCase().includes(te))},[i]),T=m.useCallback(Z=>i.filter(te=>te.state===Z),[i]),q=m.useCallback(Z=>{switch(Z){case"positive":return i.filter(te=>te.balance>0);case"negative":return i.filter(te=>te.balance<0);case"zero":return i.filter(te=>te.balance===0);default:return i}},[i]),R=m.useCallback(Z=>{const te=o.filter(de=>de.customerId===Z).sort((de,G)=>{const Y=new Date(de.date).getTime(),ie=new Date(G.date).getTime();return Y!==ie?Y-ie:new Date(de.createdAt).getTime()-new Date(G.createdAt).getTime()});return te.length===0?i.find(G=>G.id===Z)?.balance||0:te[te.length-1].runningBalance},[o,i]),_=m.useMemo(()=>i.map(Z=>({...Z,balance:R(Z.id)})),[i,R]),Q=m.useCallback(()=>{const Z=_.length,te=_.filter(Y=>Y.balance>0).reduce((Y,ie)=>Y+ie.balance,0),de=_.filter(Y=>Y.balance<0).reduce((Y,ie)=>Y+Math.abs(ie.balance),0),G=_.filter(Y=>Y.balance<0).length;return{totalCustomers:Z,totalPositiveBalance:te,totalNegativeBalance:de,customersWithDebt:G}},[_]),H=m.useCallback(async()=>{B&&b.current&&(console.log("Force sync triggered for customers"),await Ge.forceSync())},[B]);return{customers:i,customersWithLedgerBalances:_,loading:d,pendingChanges:x,lastSyncError:v,syncInProgress:y,addCustomer:L,updateCustomer:A,deleteCustomer:z,updateCustomerBalance:ee,getCustomerById:k,getCustomerBalanceFromLedger:R,searchCustomers:J,getCustomersByState:T,getCustomersByBalance:q,getStatistics:Q,forceSync:H,refreshData:D}},$l=({className:i,variant:c="text",width:o,height:u})=>{const d="animate-pulse bg-gradient-to-r from-dark-surface to-dark-hover",h={text:"h-4 rounded",circular:"rounded-full",rectangular:"rounded-lg"};return a.jsx("div",{className:Su(d,h[c],i),style:{width:o||(c==="circular"?"40px":"100%"),height:u||(c==="circular"?"40px":c==="rectangular"?"100px":"16px")}})},Dr=i=>{const c=i.replace(/\D/g,"");if(c.startsWith("234")){const o=c.match(/^(234)(\d{3})(\d{3})(\d{4})$/);if(o)return`+234 ${o[2]} ${o[3]} ${o[4]}`}else if(c.startsWith("0")){const o=c.match(/^(0)(\d{3})(\d{3})(\d{4})$/);if(o)return`${o[1]}${o[2]} ${o[3]} ${o[4]}`}else if(c.length===10){const o=c.match(/^(\d{3})(\d{3})(\d{4})$/);if(o)return`0${o[1]} ${o[2]} ${o[3]}`}return i},jn=i=>{const c=i.replace(/\D/g,"");return!!(c.startsWith("234")&&c.length===13||c.startsWith("0")&&c.length===11||!c.startsWith("234")&&!c.startsWith("0")&&c.length===10)},nu=i=>i<0?"text-red-400":i>0?"text-green-400":"text-gray-400",Qh=i=>i<0?"bg-red-500/5":"",Il=i=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),kj=i=>{const c=JSON.stringify(i,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`customers_${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",o),d.setAttribute("download",u),d.click()},Ej=i=>{const c=["ID","Name","Phone","State","Balance","Created At","Updated At"],o=i.map(p=>[p.id,p.name,p.phone,p.state,p.balance.toString(),new Date(p.createdAt).toLocaleDateString(),new Date(p.updatedAt).toLocaleDateString()]),u=[c.join(","),...o.map(p=>p.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),y=URL.createObjectURL(d);h.setAttribute("href",y),h.setAttribute("download",`customers_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)},Aj=async i=>new Promise((c,o)=>{const u=new FileReader;u.onload=d=>{try{const h=d.target?.result,y=JSON.parse(h);if(!Array.isArray(y))throw new Error("Invalid file format: Expected an array of customers");const p=y.map((x,f)=>{if(!x.name||!x.phone||!x.state)throw new Error(`Invalid customer at position ${f+1}: Missing required fields`);return{...x,balance:x.balance||0,createdAt:x.createdAt?new Date(x.createdAt):new Date,updatedAt:x.updatedAt?new Date(x.updatedAt):new Date}});c(p)}catch(h){o(h)}},u.onerror=()=>{o(new Error("Failed to read file"))},u.readAsText(i)}),Dj=(i,c,o)=>{const u=[...i];return u.sort((d,h)=>{let y=d[c],p=h[c];return typeof y=="string"&&(y=y.toLowerCase(),p=p?.toLowerCase()||""),o==="asc"?y>p?1:-1:y<p?1:-1}),u},Tj=(i,c,o,u)=>{let d=[...i];if(c){const h=c.toLowerCase();d=d.filter(y=>y.name.toLowerCase().includes(h)||y.phone.includes(h))}if(o&&o!=="all"&&(d=d.filter(h=>h.state===o)),u&&u!=="all")switch(u){case"positive":d=d.filter(h=>h.balance>0);break;case"negative":d=d.filter(h=>h.balance<0);break;case"zero":d=d.filter(h=>h.balance===0);break}return d},zj=({stats:i,loading:c})=>{const o=[{title:"Total Customers",value:i.totalCustomers,icon:As,color:"text-blue-400",bgColor:"bg-blue-500/10",format:u=>u.toString()},{title:"Total Receivables",value:i.totalPositiveBalance,icon:oa,color:"text-green-400",bgColor:"bg-green-500/10",format:Il},{title:"Total Payables",value:i.totalNegativeBalance,icon:Wl,color:"text-red-400",bgColor:"bg-red-500/10",format:Il},{title:"Customers with Debt",value:i.customersWithDebt,icon:qt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",format:u=>u.toString()}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((u,d)=>a.jsx(ze,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-muted mb-1",children:u.title}),c?a.jsx($l,{className:"h-8 w-24"}):a.jsx("p",{className:`text-2xl font-bold ${u.color}`,children:u.format(u.value)})]}),a.jsx("div",{className:`p-3 rounded-lg ${u.bgColor}`,children:a.jsx(u.icon,{className:u.color,size:20})})]})},d))})},wu=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],Mj=({searchTerm:i,stateFilter:c,balanceFilter:o,onSearchChange:u,onStateChange:d,onBalanceChange:h})=>{const y=i||c||o,p=[i,c,o].filter(Boolean).length;return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[a.jsx("div",{className:"lg:col-span-5",children:a.jsxs("div",{className:"relative",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:18}),a.jsx("input",{type:"text",placeholder:"Search by name or phone number...",value:i,onChange:x=>u(x.target.value),className:"w-full pl-10 pr-4 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text transition-all duration-200"}),i&&a.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-text hover:text-gray-100 transition-colors",children:a.jsx(Nn,{size:16})})]})}),a.jsxs("div",{className:"lg:col-span-7 flex flex-wrap items-center gap-3",children:[a.jsx("div",{className:"flex-1 min-w-[150px]",children:a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:16}),a.jsxs("select",{value:c,onChange:x=>d(x.target.value),className:"w-full pl-10 pr-8 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm appearance-none cursor-pointer transition-all duration-200",children:[a.jsx("option",{value:"",children:"All States"}),wu.map(x=>a.jsx("option",{value:x,children:x},x))]}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-muted-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),a.jsx("div",{className:"flex-1 min-w-[150px]",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text pointer-events-none",size:16}),a.jsxs("select",{value:o,onChange:x=>h(x.target.value),className:"w-full pl-10 pr-8 py-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm appearance-none cursor-pointer transition-all duration-200",children:[a.jsx("option",{value:"",children:"All Balances"}),a.jsx("option",{value:"positive",children:"Positive Balance"}),a.jsx("option",{value:"negative",children:"Negative Balance"}),a.jsx("option",{value:"zero",children:"Zero Balance"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-muted-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),y&&a.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 glass rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vu,{size:14,className:"text-primary"}),a.jsxs("span",{className:"text-sm font-medium",children:[p," filter",p>1?"s":""]})]}),a.jsxs("button",{onClick:()=>{u(""),d(""),h("")},className:"flex items-center gap-1 text-sm text-red-400 hover:text-red-300 transition-colors font-medium",children:[a.jsx(Nn,{size:14}),"Clear"]})]})]})]})},_j=({customers:i,searchTerm:c,stateFilter:o,balanceFilter:u,loading:d,onEditCustomer:h,onDeleteCustomer:y,onViewLedger:p,onViewBookings:x,refreshData:f})=>{const[v,w]=m.useState("name"),[B,b]=m.useState("asc"),[S,D]=m.useState(new Set),[C,L]=m.useState({show:!1,customer:null}),[A,z]=m.useState(!1),ee=H=>{v===H?b(B==="asc"?"desc":"asc"):(w(H),b("asc"))},k=m.useMemo(()=>{const H=Tj(i,c,o,u);return Dj(H,v,B)},[i,c,o,u,v,B]),J=()=>{S.size===k.length?D(new Set):D(new Set(k.map(H=>H.id)))},T=H=>{const Z=new Set(S);Z.has(H)?Z.delete(H):Z.add(H),D(Z)},q=H=>{L({show:!0,customer:H})},R=()=>{C.customer&&(y(C.customer.id),L({show:!1,customer:null}))},_=()=>{S.forEach(H=>{y(H)}),D(new Set),z(!1)},Q=({field:H})=>v!==H?null:B==="asc"?a.jsx(yu,{size:14}):a.jsx(Xl,{size:14});return a.jsxs(a.Fragment,{children:[S.size>0&&a.jsxs("div",{className:"glass p-3 rounded-lg mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[a.jsxs("span",{className:"text-sm",children:[S.size," customer",S.size!==1?"s":""," selected"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>D(new Set),children:"Clear"}),a.jsx(pe,{variant:"secondary",size:"sm",onClick:()=>z(!0),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]}),a.jsx("div",{className:"sm:hidden",children:k.length===0?a.jsx("div",{className:"p-8 text-center text-muted",children:c||o||u?"No customers found matching your filters":"No customers yet"}):a.jsx("div",{className:"space-y-3",children:k.map(H=>a.jsxs("div",{className:`glass rounded-lg p-4 ${S.has(H.id)?"ring-2 ring-white/20":""} ${Qh(H.balance)}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("button",{onClick:()=>T(H.id),className:"p-1 rounded hover:bg-glass transition-colors mt-1",children:S.has(H.id)?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-base",children:H.name}),a.jsxs("p",{className:"text-xs text-muted mt-1",children:["ID: ",H.id.slice(0,8)]})]})]}),a.jsx("span",{className:`font-bold text-lg ${nu(H.balance)}`,children:Il(H.balance)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted text-xs",children:"Phone:"}),a.jsx("p",{children:Dr(H.phone)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted text-xs",children:"State:"}),a.jsx("p",{children:H.state})]})]}),a.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[a.jsx("button",{onClick:()=>h(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Customer",children:a.jsx(ra,{size:16})}),a.jsx("button",{onClick:()=>p(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Ledger",children:a.jsx(wt,{size:16})}),a.jsx("button",{onClick:()=>x(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Bookings",children:a.jsx(pt,{size:16})}),a.jsx("button",{onClick:()=>q(H),className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Customer",children:a.jsx(Rt,{size:16,className:"text-red-400"})})]})]},H.id))})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/5",children:[a.jsx("th",{className:"text-left py-3 px-3",children:a.jsx("button",{onClick:J,className:"p-1 rounded hover:bg-glass transition-colors",children:S.size===k.length&&k.length>0?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})})}),a.jsx("th",{className:"text-left py-3 px-3",children:a.jsxs("button",{onClick:()=>ee("name"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["Customer",a.jsx(Q,{field:"name"})]})}),a.jsx("th",{className:"text-left py-3 px-3",children:"Phone"}),a.jsx("th",{className:"text-left py-3 px-3",children:a.jsxs("button",{onClick:()=>ee("state"),className:"flex items-center gap-1 hover:text-white/80 transition-colors",children:["State",a.jsx(Q,{field:"state"})]})}),a.jsx("th",{className:"text-right py-3 px-3",children:a.jsxs("button",{onClick:()=>ee("balance"),className:"flex items-center gap-1 hover:text-white/80 transition-colors ml-auto",children:["Balance",a.jsx(Q,{field:"balance"})]})}),a.jsx("th",{className:"text-center py-3 px-3",children:"Actions"})]})}),a.jsx("tbody",{children:k.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"p-8 text-center text-muted",children:c||o||u?"No customers found matching your filters":"No customers yet"})}):k.map(H=>a.jsxs("tr",{className:`border-b border-white/5 hover:bg-glass/50 transition-colors ${S.has(H.id)?"bg-glass/50":""} ${Qh(H.balance)}`,children:[a.jsx("td",{className:"py-3 px-3",children:a.jsx("button",{onClick:()=>T(H.id),className:"p-1 rounded hover:bg-glass transition-colors",children:S.has(H.id)?a.jsx(yn,{size:18}):a.jsx(vn,{size:18})})}),a.jsx("td",{className:"py-3 px-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 glass rounded-lg",children:a.jsx(rs,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:H.name}),a.jsxs("p",{className:"text-xs text-muted",children:["ID: ",H.id.slice(0,8)]})]})]})}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:"text-sm",children:Dr(H.phone)})}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:"text-sm",children:H.state})}),a.jsx("td",{className:"py-3 px-3 text-right",children:a.jsx("span",{className:`font-medium ${nu(H.balance)}`,children:Il(H.balance)})}),a.jsx("td",{className:"py-3 px-3",children:a.jsxs("div",{className:"flex justify-center gap-0.5 sm:gap-1",children:[a.jsx("button",{onClick:()=>h(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Customer",children:a.jsx(ra,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{onClick:()=>p(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Ledger",children:a.jsx(wt,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{onClick:()=>x(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"View Bookings",children:a.jsx(pt,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{onClick:()=>q(H),className:"p-1.5 sm:p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Delete Customer",children:a.jsx(Rt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})})]})})]},H.id))})]})}),k.length>0&&a.jsxs("div",{className:"mt-4 text-sm text-muted",children:["Showing ",k.length," of ",i.length," customers"]}),!d&&i.length>0&&a.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(As,{size:16,className:"text-muted-text"}),a.jsxs("span",{children:["Total: ",i.length," customers"]})]}),f&&a.jsxs(pe,{variant:"ghost",size:"sm",onClick:f,children:[a.jsx(it,{size:14}),"Refresh"]})]}),C.show&&C.customer&&a.jsx(Oa,{isOpen:C.show,onClose:()=>L({show:!1,customer:null}),onConfirm:R,title:"Delete Customer",message:a.jsxs("div",{children:["Are you sure you want to delete ",a.jsx("strong",{children:C.customer.name}),"?",C.customer.balance!==0&&a.jsx("div",{className:`mt-2 p-2 rounded ${C.customer.balance>0?"bg-green-500/10":"bg-red-500/10"}`,children:a.jsxs("p",{className:"text-sm",children:["This customer has an outstanding balance of"," ",a.jsx("span",{className:`font-semibold ${nu(C.customer.balance)}`,children:Il(C.customer.balance)})]})})]}),confirmText:"Delete",type:"danger"}),A&&a.jsx(Oa,{isOpen:A,onClose:()=>z(!1),onConfirm:_,title:"Delete Multiple Customers",message:`Are you sure you want to delete ${S.size} selected customer${S.size>1?"s":""}? This action cannot be undone.`,confirmText:"Delete All",type:"danger"})]})},Oj=({isOpen:i,onClose:c,onAdd:o})=>{const[u,d]=m.useState(""),[h,y]=m.useState(""),[p,x]=m.useState(""),[f,v]=m.useState("0"),[w,B]=m.useState([]),[b,S]=m.useState(!1),D=async A=>{A.preventDefault(),B([]),S(!0);const z=[];u.trim()||z.push("Customer name is required"),h.trim()?jn(h)||z.push("Please enter a valid Nigerian phone number"):z.push("Phone number is required"),p||z.push("State is required");const ee=parseFloat(f)||0;if(isNaN(ee)&&z.push("Initial balance must be a valid number"),z.length>0){B(z),S(!1);return}const k=o(u.trim(),h.trim(),p,ee);k.success?C():B(k.errors||["Failed to add customer"]),S(!1)},C=()=>{d(""),y(""),x(""),v("0"),B([]),c()},L=A=>{const z=A.replace(/[^\d\s+]/g,"");y(z)};return a.jsx(yt,{isOpen:i,onClose:C,title:"Add New Customer",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:C,disabled:b,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:D,disabled:b,loading:b,loadingText:"Adding Customer...",children:"Add Customer"})]}),children:a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[w.length>0&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:16}),a.jsx("div",{className:"space-y-1",children:w.map((A,z)=>a.jsx("p",{className:"text-sm text-red-400",children:A},z))})]})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer Name ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),placeholder:"Enter customer name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(bu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"tel",value:h,onChange:A=>L(A.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),h&&!jn(h)&&a.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),h&&jn(h)&&a.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",Dr(h)]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["State ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsxs("select",{value:p,onChange:A=>x(A.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[a.jsx("option",{value:"",children:"Select a state"}),wu.map(A=>a.jsx("option",{value:A,children:A},A))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Initial Balance"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text text-lg font-medium",children:"₦"}),a.jsx("input",{type:"number",value:f,onChange:A=>v(A.target.value),placeholder:"0.00",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",step:"0.01"})]}),a.jsx("p",{className:"text-xs text-muted mt-1",children:"Positive for money owed to you, negative for money you owe"})]}),a.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-300",children:"The balance will be managed automatically through sales and payment transactions in the ledger."})})]})})},qj=({isOpen:i,customer:c,onClose:o,onUpdate:u})=>{const[d,h]=m.useState(""),[y,p]=m.useState(""),[x,f]=m.useState(""),[v,w]=m.useState([]),[B,b]=m.useState(!1);m.useEffect(()=>{c&&(h(c.name),p(c.phone),f(c.state))},[c]);const S=async L=>{if(L.preventDefault(),!c)return;w([]),b(!0);const A=[];if(d.trim()||A.push("Customer name is required"),y.trim()?jn(y)||A.push("Please enter a valid Nigerian phone number"):A.push("Phone number is required"),x||A.push("State is required"),A.length>0){w(A),b(!1);return}const z={name:d.trim(),phone:y.trim(),state:x},ee=u(c.id,z);ee.success?D():w(ee.errors||["Failed to update customer"]),b(!1)},D=()=>{h(""),p(""),f(""),w([]),o()},C=L=>{const A=L.replace(/[^\d\s+]/g,"");p(A)};return c?a.jsx(yt,{isOpen:i,onClose:D,title:"Edit Customer",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:D,disabled:B,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:S,disabled:B,loading:B,loadingText:"Updating Customer...",children:"Update Customer"})]}),children:a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[v.length>0&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:16}),a.jsx("div",{className:"space-y-1",children:v.map((L,A)=>a.jsx("p",{className:"text-sm text-red-400",children:L},A))})]})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer Name ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"text",value:d,onChange:L=>h(L.target.value),placeholder:"Enter customer name",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Phone Number ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(bu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"tel",value:y,onChange:L=>C(L.target.value),placeholder:"e.g., 0803 123 4567",className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),y&&!jn(y)&&a.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Enter a valid Nigerian phone number (e.g., 08031234567)"}),y&&jn(y)&&a.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Formatted: ",Dr(y)]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["State ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsxs("select",{value:x,onChange:L=>f(L.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[a.jsx("option",{value:"",children:"Select a state"}),wu.map(L=>a.jsx("option",{value:L,children:L},L))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Balance"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text text-lg font-medium",children:"₦"}),a.jsx("input",{type:"text",value:c.balance.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2}),className:`w-full pl-10 pr-4 py-2 glass rounded-lg bg-glass/50 cursor-not-allowed ${c.balance>0?"text-green-400":c.balance<0?"text-red-400":"text-gray-400"}`,disabled:!0,readOnly:!0})]}),a.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[a.jsx(ju,{className:"text-blue-400 mt-0.5",size:14}),a.jsx("p",{className:"text-xs text-blue-300",children:"Balance is managed automatically through ledger transactions and cannot be edited directly."})]})]}),a.jsxs("div",{className:"p-3 bg-glass/50 rounded-lg space-y-1 text-xs text-muted",children:[a.jsxs("p",{children:["Customer ID: ",c.id]}),a.jsxs("p",{children:["Created: ",new Date(c.createdAt).toLocaleString()]}),a.jsxs("p",{children:["Last Updated: ",new Date(c.updatedAt).toLocaleString()]})]})]})}):null},Rj=({isOpen:i,customer:c,onClose:o})=>{const[u,d]=m.useState([]),{getBookedStockByCustomer:h}=kn();if(m.useEffect(()=>{if(c){const f=h(c.id);d(f)}},[c,h]),!c)return null;const y=u.reduce((f,v)=>f+(v.quantity-v.quantityLoaded),0),p=f=>{switch(f){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";case"fully-loaded":return"bg-green-500/20 text-green-400";case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},x=f=>{switch(f){case"pending":return"⏳";case"confirmed":return"✓";case"partial-loaded":return"📦";case"fully-loaded":return"✅";case"cancelled":return"❌";default:return"•"}};return a.jsx(yt,{isOpen:i,onClose:o,title:`Booked Stock - ${c.name}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"glass rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Active Bookings"}),a.jsx("p",{className:"text-2xl font-bold",children:u.length})]}),a.jsx(pt,{className:"text-blue-400",size:24})]}),y>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-800/50",children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Quantity Booked"}),a.jsxs("p",{className:"text-lg font-semibold text-yellow-400",children:[y," units"]})]})]}),u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qt,{className:"mx-auto mb-3 text-muted",size:48}),a.jsx("p",{className:"text-muted",children:"No active bookings for this customer"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(f=>a.jsxs("div",{className:"glass rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-lg",children:f.productName}),a.jsxs("p",{className:"text-sm text-muted",children:["Order: ",f.orderId]})]}),a.jsxs("span",{className:`px-2 py-1 text-xs rounded-full flex items-center gap-1 ${p(f.status)}`,children:[a.jsx("span",{children:x(f.status)}),f.status.replace("-"," ")]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Quantity Booked:"}),a.jsxs("p",{className:"font-medium",children:[f.quantity," ",f.unit]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Quantity Loaded:"}),a.jsxs("p",{className:"font-medium",children:[f.quantityLoaded," ",f.unit]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Remaining:"}),a.jsxs("p",{className:"font-medium text-yellow-400",children:[f.quantity-f.quantityLoaded," ",f.unit]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Booking Date:"}),a.jsx("p",{className:"font-medium",children:new Date(f.bookingDate).toLocaleDateString()})]})]}),f.notes&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:[a.jsx("p",{className:"text-sm text-muted",children:"Notes:"}),a.jsx("p",{className:"text-sm",children:f.notes})]}),f.status==="partial-loaded"&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-800/50",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oa,{className:"text-orange-400",size:16}),a.jsxs("p",{className:"text-sm text-orange-400",children:[Math.round(f.quantityLoaded/f.quantity*100),"% loaded"]})]})})]},f.id))}),a.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-800/50",children:a.jsx(pe,{variant:"ghost",onClick:o,children:"Close"})})]})})},Lj=()=>{const i=mu(),[c,o]=m.useState(""),[u,d]=m.useState(""),[h,y]=m.useState(""),[p,x]=m.useState(!1),[f,v]=m.useState(null),[w,B]=m.useState(null),[b,S]=m.useState(!1),[D,C]=m.useState(!1),{customers:L,customersWithLedgerBalances:A,loading:z,syncInProgress:ee,pendingChanges:k,addCustomer:J,updateCustomer:T,deleteCustomer:q,getStatistics:R,forceSync:_,refreshData:Q}=Cj(),{toasts:H,showSuccess:Z,showError:te,removeToast:de}=En(),G=R(),Y=(V,se,ue,le)=>{const fe=J(V,se,ue,le);return fe.success&&(Z(`Customer "${V}" added successfully`),x(!1)),fe},ie=(V,se)=>{const ue=T(V,se);return ue.success&&(Z("Customer updated successfully"),v(null)),ue},ne=V=>{const se=L.find(le=>le.id===V),ue=q(V);ue.success?ue.warning?te(ue.warning):Z(`Customer "${se?.name}" deleted`):te("Failed to delete customer")},N=V=>{i(`/customers/ledger/${V.id}`)},E=V=>{B(V)},U=()=>{kj(A),Z("Customers exported to JSON"),S(!1)},P=()=>{Ej(A),Z("Customers exported to CSV"),S(!1)},O=async V=>{const se=V.target.files?.[0];if(se){try{const ue=await Aj(se);let le=0,fe=0;for(const je of ue)J(je.name,je.phone,je.state,je.balance).success?le++:fe++;le>0&&Z(`Imported ${le} customers successfully`),fe>0&&te(`${fe} customers were duplicates and were skipped`)}catch(ue){te(ue.message||"Failed to import customers")}V.target.value="",S(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Customers"}),a.jsx("p",{className:"text-muted",children:"Manage your customer information and relationships"})]}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[a.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[a.jsx("button",{onClick:V=>{V.stopPropagation(),C(!D)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:a.jsx(wn,{size:20})}),D&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[k>0&&!ee&&a.jsxs("button",{onClick:V=>{V.stopPropagation(),_(),C(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(it,{size:16}),"Sync (",k,")"]}),a.jsxs("button",{onClick:V=>{V.stopPropagation(),U(),C(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:V=>{V.stopPropagation(),P(),C(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]}),a.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[a.jsx(Jl,{size:16}),a.jsx("span",{className:"text-sm",children:"Import from JSON"}),a.jsx("input",{type:"file",accept:".json",onChange:V=>{O(V),C(!1)},className:"hidden"})]})]})]}),a.jsxs("div",{className:"hidden sm:flex gap-2",children:[ee&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[a.jsx(it,{className:"animate-spin",size:16}),a.jsx("span",{className:"text-sm",children:"Syncing..."})]}),k>0&&!ee&&a.jsxs(pe,{variant:"ghost",onClick:_,children:[a.jsx(it,{size:16}),"Sync (",k,")"]}),a.jsxs("div",{className:"relative",children:[a.jsxs(pe,{variant:"ghost",onClick:()=>S(!b),children:[a.jsx(Mt,{size:20}),"Import/Export"]}),b&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[a.jsxs("button",{onClick:U,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:P,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]}),a.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[a.jsx(Jl,{size:16}),"Import from JSON",a.jsx("input",{type:"file",accept:".json",onChange:O,className:"hidden"})]})]})]})]}),a.jsxs("button",{onClick:()=>x(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"Add Customer",children:[a.jsx(_t,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Add Customer"})]})]})]}),z?a.jsx("div",{className:"glass rounded-xl p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading customers..."})]})})}):a.jsx(zj,{stats:G,loading:z}),a.jsxs(ze,{children:[a.jsx("div",{className:"mb-4",children:a.jsx(Mj,{searchTerm:c,stateFilter:u,balanceFilter:h,onSearchChange:o,onStateChange:d,onBalanceChange:y})}),z?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):a.jsx(_j,{customers:A,searchTerm:c,stateFilter:u,balanceFilter:h,loading:!1,onEditCustomer:v,onDeleteCustomer:ne,onViewLedger:N,onViewBookings:E,refreshData:Q})]}),a.jsx(Oj,{isOpen:p,onClose:()=>x(!1),onAdd:Y}),a.jsx(qj,{isOpen:!!f,customer:f,onClose:()=>v(null),onUpdate:ie}),a.jsx(Rj,{isOpen:!!w,customer:w,onClose:()=>B(null)}),a.jsx(Cn,{toasts:H,onClose:de}),(b||D)&&a.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{S(!1),C(!1)}})]})},Bj=()=>{const c=new Date().getFullYear(),u=JSON.parse(localStorage.getItem("supreme_mgmt_sales")||"[]").filter(y=>new Date(y.date).getFullYear()===c);let d=1;if(u.length>0){const y=u.map(p=>{const x=p.orderId.match(/ORD-\d{4}-(\d{3})/);return x?parseInt(x[1],10):0}).filter(p=>!isNaN(p));y.length>0&&(d=Math.max(...y)+1)}const h=d.toString().padStart(3,"0");return`ORD-${c}-${h}`},br=i=>i.reduce((c,o)=>c+o.total,0),Tr=(i,c)=>i*c,rt=i=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(i).replace("NGN","₦"),Er=(i,c)=>{if(c==="all")return i;const o=new Date,u=new Date(o.getFullYear(),o.getMonth(),o.getDate());switch(c){case"today":{const d=new Date(u);return d.setDate(d.getDate()+1),i.filter(h=>{const y=new Date(h.date);return y>=u&&y<d})}case"week":{const d=u.getDay(),h=new Date(u);h.setDate(u.getDate()-d);const y=new Date(h);return y.setDate(h.getDate()+7),i.filter(p=>{const x=new Date(p.date);return x>=h&&x<y})}case"month":{const d=new Date(o.getFullYear(),o.getMonth(),1),h=new Date(o.getFullYear(),o.getMonth()+1,1);return i.filter(y=>{const p=new Date(y.date);return p>=d&&p<h})}default:return i}},Hj=i=>{const c=Er(i,"today"),o=Er(i,"week"),u=Er(i,"month"),d=i.filter(h=>h.paymentStatus!=="paid");return{todaysTotal:c.reduce((h,y)=>h+y.totalAmount,0),weekTotal:o.reduce((h,y)=>h+y.totalAmount,0),monthTotal:u.reduce((h,y)=>h+y.totalAmount,0),pendingPaymentTotal:d.reduce((h,y)=>h+y.totalAmount,0)}},Uj=i=>{const c=JSON.stringify(i,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`sales-export-${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",o),d.setAttribute("download",u),d.click()},Qj=i=>{const c=["Order ID","Date","Customer","Total Items","Total Amount","Status","Payment Status"],o=i.map(p=>[p.orderId,new Date(p.date).toLocaleDateString("en-NG"),p.customerName,p.items.reduce((x,f)=>x+f.quantity,0),rt(p.totalAmount),p.status,p.paymentStatus]),u=[c.join(","),...o.map(p=>p.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),y=URL.createObjectURL(d);h.setAttribute("href",y),h.setAttribute("download",`sales-export-${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)},Tl="sales",zl="products",Ml="customers",_l="inventory_movements",Ol="ledger_entries",$j=()=>{const[i,c]=m.useState([]),[o,u]=m.useState([]),[d,h]=m.useState([]),[y,p]=m.useState([]),[x,f]=m.useState([]),[v,w]=m.useState(!0),[B,b]=m.useState(!1),[S,D]=m.useState(0),[C,L]=m.useState(null),{isAuthenticated:A}=m.useContext(ga),z=m.useRef(!0),ee=m.useRef(!0),{addBatchBookedStock:k,updateBookedStock:J,deleteBookedStock:T,getBookedStockBySale:q,bookedStock:R}=kn();m.useEffect(()=>{z.current=!0;const E=Ge.subscribe(U=>{z.current&&(b(U.isPending),D(U.pendingChanges),L(U.error))});return()=>{z.current=!1,E()}},[]);const _=async()=>{if(z.current){w(!0);try{if(A){const E=await Ot.loadAllData();E&&(c(E.sales||[]),u(E.products||[]),h(E.customers||[]),p(E.movements||[]),f(E.ledgerEntries||[]),ye.set(Tl,E.sales||[]),ye.set(zl,E.products||[]),ye.set(Ml,E.customers||[]),ye.set(_l,E.movements||[]),ye.set(Ol,E.ledgerEntries||[]))}else{const E=ye.get(Tl)||[],U=ye.get(zl)||[],P=ye.get(Ml)||[],O=ye.get(_l)||[],V=ye.get(Ol)||[];c(E),u(U),h(P),p(O),f(V)}}catch(E){console.error("Error loading sales data:",E);const U=ye.get(Tl)||[],P=ye.get(zl)||[],O=ye.get(Ml)||[],V=ye.get(_l)||[],se=ye.get(Ol)||[];c(U),u(P),h(O),p(V),f(se)}finally{z.current&&(w(!1),setTimeout(()=>{ee.current=!1},100))}}};m.useEffect(()=>{_()},[A]),m.useEffect(()=>{const E=U=>{if(z.current){if(U.key===`supreme_mgmt_${Tl}`&&U.newValue)try{const P=JSON.parse(U.newValue);c(P)}catch(P){console.error("Error parsing sales from storage event:",P)}if(U.key===`supreme_mgmt_${Ml}`&&U.newValue)try{const P=JSON.parse(U.newValue);h(P)}catch(P){console.error("Error parsing customers from storage event:",P)}if(U.key===`supreme_mgmt_${zl}`&&U.newValue)try{const P=JSON.parse(U.newValue);u(P)}catch(P){console.error("Error parsing products from storage event:",P)}if(U.key===`supreme_mgmt_${_l}`&&U.newValue)try{const P=JSON.parse(U.newValue);p(P)}catch(P){console.error("Error parsing movements from storage event:",P)}if(U.key===`supreme_mgmt_${Ol}`&&U.newValue)try{const P=JSON.parse(U.newValue);f(P)}catch(P){console.error("Error parsing ledger from storage event:",P)}}};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[]),m.useEffect(()=>{z.current&&A&&!v&&!ee.current&&Ge.markAsChanged()},[i,A,v]);const Q=m.useCallback((E,U)=>{const P=new Map;E.forEach(V=>{P.has(V.customerId)||P.set(V.customerId,[]),P.get(V.customerId).push(V)});const O=[];return P.forEach((V,se)=>{if(!U||se===U){const ue=[...V].sort((fe,je)=>{const ge=new Date(fe.date).getTime(),I=new Date(je.date).getTime();return ge!==I?ge-I:new Date(fe.createdAt).getTime()-new Date(je.createdAt).getTime()});let le=0;ue.forEach(fe=>{le=le+fe.credit-fe.debit,O.push({...fe,runningBalance:le})})}else O.push(...V)}),O},[]),H=m.useCallback((E,U,P,O,V)=>{console.log("[SaveAllData] Saving data:",{salesCount:E.length,productsCount:U.length,customersCount:P.length,movementsCount:O.length,ledgerCount:V.length}),c(E),u(U),h(P),p(O),f(V),ye.set(Tl,E),ye.set(zl,U),ye.set(Ml,P),ye.set(_l,O),ye.set(Ol,V),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_sales",newValue:JSON.stringify(E),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_products",newValue:JSON.stringify(U),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_customers",newValue:JSON.stringify(P),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_inventory_movements",newValue:JSON.stringify(O),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_ledger_entries",newValue:JSON.stringify(V),url:window.location.href})),Ge.markAsChanged(!0)},[]),Z=m.useCallback((E,U,P,O="pending",V="pending")=>{try{const se=d.find(we=>we.id===E);if(!se)return{success:!1,errors:["Customer not found"]};const ue=[...o],le=[];for(const we of P){const De=ue.findIndex(Ts=>Ts.id===we.productId);if(De===-1){le.push(`Product ${we.productName} not found`);continue}const Oe=ue[De],vt=Oe.quantityOnHand-(Oe.quantityBooked||0);if(we.quantity>vt){le.push(`Insufficient stock for ${Oe.name}. Available: ${vt}`);continue}O==="completed"?ue[De]={...Oe,quantityOnHand:Oe.quantityOnHand-we.quantity,status:Oe.quantityOnHand-we.quantity<=0?"out-of-stock":Oe.quantityOnHand-we.quantity<=Oe.reorderLevel?"low-stock":"in-stock",updatedAt:new Date}:ue[De]={...Oe,updatedAt:new Date}}if(le.length>0)return{success:!1,errors:le};const fe=br(P),je=d.map(we=>we.id===E?{...we,balance:we.balance-fe,updatedAt:new Date}:we),ge=new Date,I={id:$e(),orderId:Bj(),customerId:E,customerName:se.name,date:U,items:P,totalAmount:fe,status:O,paymentStatus:V,createdAt:ge,updatedAt:ge},xe=[];for(const we of P){const De=o.find(vt=>vt.id===we.productId),Oe=ue.find(vt=>vt.id===we.productId);if(De&&Oe){const vt={id:$e(),productId:we.productId,productName:we.productName,movementType:"sales",quantity:-we.quantity,previousQuantity:De.quantityOnHand,newQuantity:O==="completed"?De.quantityOnHand-we.quantity:De.quantityOnHand,reference:`Sale: ${I.orderId}`,referenceId:I.id,notes:`${O==="completed"?"Delivered to":"Booked for"} ${se.name}`,date:U,createdAt:ge,updatedAt:ge};xe.push(vt)}}const Ne={id:$e(),customerId:E,customerName:se.name,date:U,transactionType:"sale",referenceId:I.id,referenceNumber:I.orderId,description:`Sale Invoice #${I.orderId}`,debit:fe,credit:0,runningBalance:0,notes:`${P.length} item(s) sold`,createdAt:ge,updatedAt:ge},Ce=[...x,Ne],me=Q(Ce,E),he=[...i,I],Te=[...y,...xe];if(console.log("[AddSale] Creating new sale:",{saleId:I.id,orderId:I.orderId,customerId:E,items:P.length,totalAmount:I.totalAmount,status:O,existingSalesCount:i.length,updatedSalesCount:he.length}),H(he,ue,je,Te,me),O==="pending"||O==="processing"){console.log("[AddSale] Creating booked stock for items:",P.length),console.log("[AddSale] Items to book:",P.map(Oe=>({product:Oe.productName,qty:Oe.quantity,id:Oe.productId})));const we=P.map(Oe=>({customerId:E,customerName:se.name,saleId:I.id,orderId:I.orderId,productId:Oe.productId,productName:Oe.productName,quantity:Oe.quantity,unit:Oe.unit,bookingDate:U,notes:`Booked from sale ${I.orderId}`}));console.log("[AddSale] Bookings to add:",we.length,"items");const De=k(we);console.log("[AddSale] Booked stock result:",De),De.success?console.log("[AddSale] Successfully created",De.data?.length,"booked stock entries"):console.error("[AddSale] Failed to create booked stock entries")}return{success:!0,saleId:I.id}}catch(se){return console.error("Error adding sale:",se),{success:!1,errors:["Failed to add sale"]}}},[i,o,d,y,x,k,Q]),te=m.useCallback((E,U)=>{try{const P=i.findIndex(ge=>ge.id===E);if(P===-1)return{success:!1,errors:["Sale not found"]};const O=i[P];let V=[...o],se=[...d];if(U.items){for(const Ce of O.items){const me=V.findIndex(he=>he.id===Ce.productId);if(me!==-1){const he=V[me];O.status==="completed"?V[me]={...he,quantityOnHand:he.quantityOnHand+Ce.quantity,updatedAt:new Date}:V[me]={...he,updatedAt:new Date}}}const ge=[],I=U.status||O.status;for(const Ce of U.items){const me=V.findIndex(we=>we.id===Ce.productId);if(me===-1){ge.push(`Product ${Ce.productName} not found`);continue}const he=V[me],Te=he.quantityOnHand-(he.quantityBooked||0);if(Ce.quantity>Te){ge.push(`Insufficient stock for ${he.name}. Available: ${Te}`);continue}I==="completed"?V[me]={...he,quantityOnHand:he.quantityOnHand-Ce.quantity,status:he.quantityOnHand-Ce.quantity<=0?"out-of-stock":he.quantityOnHand-Ce.quantity<=he.reorderLevel?"low-stock":"in-stock",updatedAt:new Date}:V[me]={...he,updatedAt:new Date}}if(ge.length>0)return{success:!1,errors:ge};const Ne=br(U.items)-O.totalAmount;se=se.map(Ce=>Ce.id===O.customerId?{...Ce,balance:Ce.balance-Ne,updatedAt:new Date}:Ce)}const ue=i.map(ge=>ge.id===E?{...ge,...U,totalAmount:U.items?br(U.items):ge.totalAmount,updatedAt:new Date}:ge),le=ue.find(ge=>ge.id===E);if(le){const ge=q(E);if(U.status==="completed"&&O.status!=="completed")ge.forEach(I=>{J(I.id,{status:"cancelled"})});else if((U.status==="pending"||U.status==="processing")&&O.status==="completed"){const xe=(U.items||O.items).map(Ne=>({customerId:le.customerId,customerName:le.customerName,saleId:le.id,orderId:le.orderId,productId:Ne.productId,productName:Ne.productName,quantity:Ne.quantity,unit:Ne.unit,bookingDate:le.date,notes:`Booked from sale ${le.orderId}`}));k(xe)}else if(U.items&&(le.status==="pending"||le.status==="processing")){ge.forEach(xe=>{T(xe.id)});const I=U.items.map(xe=>({customerId:le.customerId,customerName:le.customerName,saleId:le.id,orderId:le.orderId,productId:xe.productId,productName:xe.productName,quantity:xe.quantity,unit:xe.unit,bookingDate:le.date,notes:`Booked from sale ${le.orderId}`}));k(I)}}let fe=[...x];if(U.items){const ge=br(U.items),I=fe.findIndex(xe=>xe.referenceId===E&&xe.transactionType==="sale");I!==-1&&(fe[I]={...fe[I],debit:ge,description:`Sale Invoice #${O.orderId} (Updated)`,updatedAt:new Date},fe=Q(fe,O.customerId))}let je=[...y];if(U.items||U.status){je=je.filter(Ne=>Ne.referenceId!==E);const ge=new Date,I=U.status||O.status,xe=U.items||O.items;for(const Ne of xe){const Ce=V.find(me=>me.id===Ne.productId);if(Ce){const me=o.find(we=>we.id===Ne.productId),he=me?me.quantityOnHand:Ce.quantityOnHand,Te={id:$e(),productId:Ne.productId,productName:Ne.productName,movementType:"sales",quantity:-Ne.quantity,previousQuantity:he,newQuantity:I==="completed"?he-Ne.quantity:he,reference:`Sale: ${O.orderId}${U.items||U.status?" (Updated)":""}`,referenceId:E,notes:`${I==="completed"?"Delivered to":"Booked for"} ${O.customerName}`,date:O.date,createdAt:ge,updatedAt:ge};je.push(Te)}}}return H(ue,V,se,je,fe),{success:!0}}catch(P){return console.error("Error updating sale:",P),{success:!1,errors:["Failed to update sale"]}}},[i,o,d,y,x,k,J,T,q,Q]),de=m.useCallback(E=>{try{const U=i.find(le=>le.id===E);if(!U)return{success:!1};const P=o.map(le=>{const fe=U.items.find(je=>je.productId===le.id);return fe?U.status==="completed"?{...le,quantityOnHand:le.quantityOnHand+fe.quantity,status:le.quantityOnHand+fe.quantity>le.reorderLevel?"in-stock":"low-stock",updatedAt:new Date}:{...le,updatedAt:new Date}:le}),O=d.map(le=>le.id===U.customerId?{...le,balance:le.balance+U.totalAmount,updatedAt:new Date}:le),V=i.filter(le=>le.id!==E),se=y.filter(le=>le.referenceId!==E);let ue=x.filter(le=>!(le.referenceId===E&&le.transactionType==="sale"));return ue=Q(ue,U.customerId),(U.status==="pending"||U.status==="processing")&&q(E).forEach(fe=>{T(fe.id)}),H(V,P,O,se,ue),{success:!0}}catch(U){return console.error("Error deleting sale:",U),{success:!1}}},[i,o,d,y,x,T,q,Q]),G=m.useCallback(E=>i.find(U=>U.id===E),[i]),Y=m.useCallback(E=>{const U=E.toLowerCase();return i.filter(P=>P.orderId.toLowerCase().includes(U)||P.customerName.toLowerCase().includes(U)||P.items.some(O=>O.productName.toLowerCase().includes(U)))},[i]),ie=m.useCallback(()=>o,[o]),ne=m.useCallback(()=>d,[d]),N=m.useCallback(async()=>{A&&z.current&&(console.log("Force sync triggered for sales"),await Ge.forceSync())},[A]);return{sales:i,loading:v,pendingChanges:S,lastSyncError:C,syncInProgress:B,addSale:Z,updateSale:te,deleteSale:de,getSaleById:G,searchSales:Y,getProducts:ie,getCustomers:ne,forceSync:N,refreshData:_,bookedStock:R,getBookedStockBySale:q}},zr=({children:i,content:c,placement:o="top",delay:u=200,className:d=""})=>{const[h,y]=m.useState(!1),[p,x]=m.useState({top:0,left:0}),f=m.useRef(null),v=m.useRef(null),w=m.useRef(null),B=()=>{if(!f.current||!v.current)return;const D=f.current.getBoundingClientRect(),C=v.current.getBoundingClientRect();let L=0,A=0;switch(o){case"top":L=D.top-C.height-8,A=D.left+(D.width-C.width)/2;break;case"bottom":L=D.bottom+8,A=D.left+(D.width-C.width)/2;break;case"left":L=D.top+(D.height-C.height)/2,A=D.left-C.width-8;break;case"right":L=D.top+(D.height-C.height)/2,A=D.right+8;break}const z=10;A<z?A=z:A+C.width>window.innerWidth-z&&(A=window.innerWidth-C.width-z),L<z?o==="top"?L=D.bottom+8:L=z:L+C.height>window.innerHeight-z&&(o==="bottom"?L=D.top-C.height-8:L=window.innerHeight-C.height-z),x({top:L,left:A})},b=()=>{w.current=setTimeout(()=>{y(!0)},u)},S=()=>{w.current&&clearTimeout(w.current),y(!1)};return m.useEffect(()=>(h&&(B(),window.addEventListener("resize",B),window.addEventListener("scroll",B)),()=>{window.removeEventListener("resize",B),window.removeEventListener("scroll",B)}),[h]),a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:f,onMouseEnter:b,onMouseLeave:S,className:"inline-block",children:i}),h&&pu.createPortal(a.jsx("div",{ref:v,className:`
            fixed z-50 pointer-events-none
            glass backdrop-blur-md
            px-3 py-2 rounded-lg
            shadow-xl border border-white/10
            transition-all duration-200 ease-out
            animate-fadeIn
            ${d}
          `,style:{top:`${p.top}px`,left:`${p.left}px`},children:c}),document.body)]})},Mr=({items:i})=>a.jsxs("div",{className:"min-w-[300px] max-w-[400px]",children:[a.jsx("div",{className:"text-xs font-semibold mb-2 text-white/80",children:"Product Details"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs font-medium text-white/60 pb-1 border-b border-white/10",children:[a.jsx("div",{className:"col-span-1",children:"Product"}),a.jsx("div",{className:"text-right",children:"Qty"}),a.jsx("div",{className:"text-right",children:"Price"}),a.jsx("div",{className:"text-right",children:"Total"})]}),i.map((c,o)=>a.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[a.jsx("div",{className:"col-span-1 truncate",title:c.productName,children:c.productName}),a.jsx("div",{className:"text-right",children:c.quantity}),a.jsxs("div",{className:"text-right",children:["₦",c.price.toLocaleString()]}),a.jsxs("div",{className:"text-right font-medium",children:["₦",c.total.toLocaleString()]})]},o)),a.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs font-bold pt-1 border-t border-white/10",children:[a.jsx("div",{className:"col-span-3 text-right",children:"Grand Total:"}),a.jsxs("div",{className:"text-right text-green-400",children:["₦",i.reduce((c,o)=>c+o.total,0).toLocaleString()]})]})]})]}),Gj=({sales:i,searchTerm:c,dateFilter:o,loading:u,onEditSale:d,onDeleteSale:h,onViewDetails:y,onGenerateInvoice:p})=>{const[x,f]=m.useState(null),[v,w]=m.useState(1),B=10,b=m.useMemo(()=>Er(i,o).filter(J=>{if(!c)return!0;const T=c.toLowerCase();return J.orderId.toLowerCase().includes(T)||J.customerName.toLowerCase().includes(T)||J.items.some(q=>q.productName.toLowerCase().includes(T))}).sort((J,T)=>{const q=new Date(J.date).getTime();return new Date(T.date).getTime()-q}),[i,o,c]),S=Math.ceil(b.length/B),D=m.useMemo(()=>{const k=(v-1)*B;return b.slice(k,k+B)},[b,v]);m.useMemo(()=>{w(1)},[c,o]);const C=k=>{f(k.id)},L=()=>{x&&(h(x),f(null))},A=()=>{f(null)},z=k=>{switch(k){case"completed":return"bg-green-500/20 text-green-400";case"processing":return"bg-yellow-500/20 text-yellow-400";case"pending":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},ee=k=>{switch(k){case"paid":return"bg-green-500/20 text-green-400";case"partial":return"bg-blue-500/20 text-blue-400";case"pending":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return u?a.jsx("div",{className:"space-y-2",children:[...Array(5)].map((k,J)=>a.jsxs("div",{className:"flex items-center space-x-4 p-4",children:[a.jsx($l,{className:"h-10 flex-1"}),a.jsx($l,{className:"h-10 w-24"}),a.jsx($l,{className:"h-10 w-24"}),a.jsx($l,{className:"h-10 w-20"})]},J))}):b.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted",children:"No sales found"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden",children:a.jsx("div",{className:"space-y-3",children:D.map(k=>{const J=k.items.reduce((T,q)=>T+q.quantity,0);return a.jsxs("div",{className:"glass rounded-lg p-4 hover:bg-glass/50 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-sm",children:k.orderId}),a.jsx("p",{className:"text-xs text-muted mt-1",children:k.customerName})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-lg",children:rt(k.totalAmount)}),a.jsx("p",{className:"text-xs text-muted mt-1",children:new Date(k.date).toLocaleDateString("en-NG")})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(zr,{content:a.jsx(Mr,{items:k.items.map(T=>({productName:T.productName,quantity:T.quantity,price:T.price,total:T.total}))}),placement:"top",children:a.jsxs("span",{className:"cursor-help underline decoration-dotted text-sm",children:[J," ",J===1?"item":"items"]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z(k.status)}`,children:k.status}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ee(k.paymentStatus)}`,children:k.paymentStatus})]})]}),a.jsxs("div",{className:"flex gap-1 justify-end border-t border-white/5 pt-3",children:[y&&a.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>y(k),title:"View Details",children:a.jsx(ou,{size:16})}),a.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>d(k),title:"Edit Sale",children:a.jsx(ra,{size:16})}),a.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 hover:text-red-400 transition-all duration-200",onClick:()=>C(k),title:"Delete Sale",children:a.jsx(Rt,{size:16,className:"text-red-400"})}),p&&a.jsx("button",{className:"p-1.5 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>p(k),title:"Generate Invoice",children:a.jsx(wt,{size:16})})]})]},k.id)})})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/5",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Order ID"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Items"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Payment"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:D.map(k=>{const J=k.items.reduce((T,q)=>T+q.quantity,0);return a.jsxs("tr",{className:"border-b border-white/5 hover:bg-glass/50 transition-colors",children:[a.jsx("td",{className:"py-3 px-4 font-medium",children:k.orderId}),a.jsx("td",{className:"py-3 px-4",children:k.customerName}),a.jsx("td",{className:"py-3 px-4",children:new Date(k.date).toLocaleDateString("en-NG")}),a.jsx("td",{className:"py-3 px-4",children:a.jsx(zr,{content:a.jsx(Mr,{items:k.items.map(T=>({productName:T.productName,quantity:T.quantity,price:T.price,total:T.total}))}),placement:"top",children:a.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[J," ",J===1?"item":"items"]})})}),a.jsx("td",{className:"py-3 px-4 font-semibold",children:rt(k.totalAmount)}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z(k.status)}`,children:k.status})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ee(k.paymentStatus)}`,children:k.paymentStatus})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex gap-0.5 sm:gap-1",children:[y&&a.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>y(k),title:"View Details",children:a.jsx(ou,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>d(k),title:"Edit Sale",children:a.jsx(ra,{size:14,className:"sm:w-4 sm:h-4"})}),a.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 hover:text-red-400 transition-all duration-200",onClick:()=>C(k),title:"Delete Sale",children:a.jsx(Rt,{size:14,className:"sm:w-4 sm:h-4 text-red-400"})}),p&&a.jsx("button",{className:"p-1.5 sm:p-2 rounded-lg text-gray-300 hover:bg-white/10 transition-all duration-200",onClick:()=>p(k),title:"Generate Invoice",children:a.jsx(wt,{size:14,className:"sm:w-4 sm:h-4"})})]})})]},k.id)})})]})}),S>1&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[a.jsxs("div",{className:"text-sm text-muted",children:["Showing ",(v-1)*B+1," to"," ",Math.min(v*B,b.length)," of"," ",b.length," entries"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>w(k=>Math.max(1,k-1)),disabled:v===1,children:[a.jsx(zy,{size:16}),"Previous"]}),a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const k=[];let T=Math.max(1,v-Math.floor(2.5)),q=Math.min(S,T+5-1);q-T<4&&(T=Math.max(1,q-5+1)),T>1&&(k.push(a.jsx("button",{onClick:()=>w(1),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:"1"},1)),T>2&&k.push(a.jsx("span",{className:"px-2 text-muted",children:"..."},"start-ellipsis")));for(let R=T;R<=q;R++)k.push(a.jsx("button",{onClick:()=>w(R),className:`px-3 py-1 rounded-lg text-sm ${R===v?"bg-white/20 text-white font-medium":"hover:bg-glass"}`,children:R},R));return q<S&&(q<S-1&&k.push(a.jsx("span",{className:"px-2 text-muted",children:"..."},"end-ellipsis")),k.push(a.jsx("button",{onClick:()=>w(S),className:"px-3 py-1 rounded-lg text-sm hover:bg-glass",children:S},S))),k})()}),a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>w(k=>Math.min(S,k+1)),disabled:v===S,children:["Next",a.jsx(cu,{size:16})]})]})]}),a.jsx(Oa,{isOpen:!!x,onClose:A,onConfirm:L,title:"Delete Sale",message:"Are you sure you want to delete this sale? This will reverse all inventory bookings and customer balance changes.",confirmText:"Delete",type:"danger"})]})},Vj=({isOpen:i,onClose:c,onAdd:o,products:u,customers:d})=>{const[h,y]=m.useState(new Date().toISOString().split("T")[0]),[p,x]=m.useState(""),[f,v]=m.useState([]),[w,B]=m.useState("pending"),[b,S]=m.useState([]),[D,C]=m.useState(!1);m.useEffect(()=>{i&&f.length===0&&L()},[i]);const L=()=>{v([...f,{productId:"",productName:"",quantity:1,unit:"",price:0,total:0}])},A=q=>{v(f.filter((R,_)=>_!==q))},z=(q,R,_)=>{const Q=[...f],H={...Q[q]};if(R==="productId"){const Z=u.find(te=>te.id===_);Z&&(H.productId=_,H.productName=Z.name,H.unit=Z.unit,H.total=Tr(H.quantity,H.price))}else R==="quantity"||R==="price"?(H[R]=Number(_)||0,H.total=Tr(H.quantity,H.price)):H[R]=_;Q[q]=H,v(Q)},ee=()=>f.reduce((q,R)=>q+R.total,0),k=async q=>{q.preventDefault(),S([]),C(!0);const R=[];if(p||R.push("Please select a customer"),h||R.push("Sale date is required"),f.length===0&&R.push("At least one product is required"),f.forEach((Q,H)=>{Q.productId||R.push(`Please select a product for item ${H+1}`),(!Q.quantity||Q.quantity<=0)&&R.push(`Please enter a valid quantity for item ${H+1}`),(!Q.price||Q.price<=0)&&R.push(`Please enter a unit price for ${Q.productName||`item ${H+1}`}`)}),R.length>0){S(R),C(!1);return}const _=o(p,new Date(h),f,"pending",w);_.success?J():S(_.errors||["Failed to add sale"]),C(!1)},J=()=>{y(new Date().toISOString().split("T")[0]),x(""),v([]),B("pending"),S([]),c()},T=u.filter(q=>q.quantityOnHand-(q.quantityBooked||0)>0);return a.jsx(yt,{isOpen:i,onClose:J,title:"Create New Sale",size:"lg",footer:a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:J,disabled:D,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:k,disabled:D||f.length===0,loading:D,loadingText:"Creating Sale...",children:"Create Sale"})]}),children:a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[b.length>0&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:16}),a.jsx("div",{className:"space-y-1",children:b.map((q,R)=>a.jsx("p",{className:"text-sm text-red-400",children:q},R))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Sale Date ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"date",value:h,onChange:q=>y(q.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Customer ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsxs("select",{value:p,onChange:q=>x(q.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 appearance-none",required:!0,children:[a.jsx("option",{value:"",children:"Select a customer"}),d.map(q=>a.jsxs("option",{value:q.id,children:[q.name," - ",q.state]},q.id))]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("label",{className:"text-sm font-medium",children:["Products ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs(pe,{type:"button",variant:"ghost",size:"sm",onClick:L,children:[a.jsx(_t,{size:16}),"Add Product"]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map((q,R)=>a.jsx("div",{className:"glass rounded-lg p-3",children:a.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[a.jsx("div",{className:"col-span-4",children:a.jsxs("select",{value:q.productId,onChange:_=>z(R,"productId",_.target.value),className:"w-full px-3 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Select product"}),T.map(_=>{const Q=_.quantityOnHand-(_.quantityBooked||0);return a.jsxs("option",{value:_.id,children:[_.name," (Available: ",Q," ",_.unit,")"]},_.id)})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",value:q.quantity,onChange:_=>z(R,"quantity",_.target.value),placeholder:"Qty",min:"1",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",value:q.price||"",onChange:_=>z(R,"price",_.target.value),placeholder:"Unit Price",min:"0.01",step:"0.01",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),a.jsx("div",{className:"col-span-3 flex items-center",children:a.jsx("span",{className:"text-sm font-medium",children:rt(q.total)})}),a.jsx("div",{className:"col-span-1 flex items-center justify-end",children:a.jsx(pe,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(R),disabled:f.length===1,children:a.jsx(Rt,{size:14,className:"text-red-400"})})})]})},R))}),f.length>0&&a.jsx("div",{className:"mt-4 p-3 glass rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lr,{className:"text-green-400",size:20}),a.jsx("span",{className:"text-lg font-medium",children:"Grand Total:"})]}),a.jsx("span",{className:"text-2xl font-bold text-green-400",children:rt(ee())})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Status"}),a.jsxs("select",{value:w,onChange:q=>B(q.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"partial",children:"Partial"}),a.jsx("option",{value:"paid",children:"Paid"})]})]}),a.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-300",children:"New sales are created as 'Pending' and will automatically update to 'Completed' when fully delivered through loadings. Make sure to enter the correct unit prices for each product."})})]})})},Yj=({isOpen:i,sale:c,onClose:o,onUpdate:u,products:d})=>{const[h,y]=m.useState(""),[p,x]=m.useState([]),[f,v]=m.useState("pending"),[w,B]=m.useState([]),[b,S]=m.useState(!1);m.useEffect(()=>{i&&c&&(y(new Date(c.date).toISOString().split("T")[0]),x(c.items.map(J=>({...J}))),v(c.paymentStatus))},[i,c]);const D=()=>{x([...p,{productId:"",productName:"",quantity:1,unit:"",price:0,total:0}])},C=J=>{x(p.filter((T,q)=>q!==J))},L=(J,T,q)=>{const R=[...p],_={...R[J]};if(T==="productId"){const Q=d.find(H=>H.id===q);Q&&(_.productId=q,_.productName=Q.name,_.unit=Q.unit,_.price||(_.price=0),_.total=Tr(_.quantity,_.price))}else T==="quantity"||T==="price"?(_[T]=Number(q)||0,_.total=Tr(_.quantity,_.price)):_[T]=q;R[J]=_,x(R)},A=()=>p.reduce((J,T)=>J+T.total,0),z=async J=>{if(J.preventDefault(),!c)return;B([]),S(!0);const T=[];if(h||T.push("Sale date is required"),p.length===0&&T.push("At least one product is required"),p.forEach((R,_)=>{R.productId||T.push(`Please select a product for item ${_+1}`),(!R.quantity||R.quantity<=0)&&T.push(`Please enter a valid quantity for item ${_+1}`),(!R.price||R.price<=0)&&T.push(`Please enter a unit price for ${R.productName||`item ${_+1}`}`)}),T.length>0){B(T),S(!1);return}const q=u(c.id,{date:new Date(h),items:p,status:c?.status||"pending",paymentStatus:f,totalAmount:A()});q.success?ee():B(q.errors||["Failed to update sale"]),S(!1)},ee=()=>{y(""),x([]),v("pending"),B([]),o()},k=d.filter(J=>J.quantityOnHand-(J.quantityBooked||0)>0||p.some(q=>q.productId===J.id));return c?a.jsx(yt,{isOpen:i,onClose:ee,title:"Edit Sale",size:"lg",footer:a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",onClick:ee,disabled:b,children:"Cancel"}),a.jsx(pe,{variant:"primary",onClick:z,disabled:b||p.length===0,loading:b,loadingText:"Updating Sale...",children:"Update Sale"})]}),children:a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[w.length>0&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:16}),a.jsx("div",{className:"space-y-1",children:w.map((J,T)=>a.jsx("p",{className:"text-sm text-red-400",children:J},T))})]})}),a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tv,{className:"text-muted-text",size:18}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"Order ID"}),a.jsx("p",{className:"font-medium",children:c.orderId})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"Customer"}),a.jsx("p",{className:"font-medium",children:c.customerName})]})]})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Sale Date ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:18}),a.jsx("input",{type:"date",value:h,onChange:J=>y(J.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("label",{className:"text-sm font-medium",children:["Products ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs(pe,{type:"button",variant:"ghost",size:"sm",onClick:D,children:[a.jsx(_t,{size:16}),"Add Product"]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.map((J,T)=>a.jsx("div",{className:"glass rounded-lg p-3",children:a.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[a.jsx("div",{className:"col-span-4",children:a.jsxs("select",{value:J.productId,onChange:q=>L(T,"productId",q.target.value),className:"w-full px-3 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Select product"}),k.map(q=>{const R=q.quantityOnHand-(q.quantityBooked||0),_=J.productId===q.id;return a.jsxs("option",{value:q.id,children:[q.name," (Available: ",R+(_?J.quantity:0)," ",q.unit,")"]},q.id)})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",value:J.quantity,onChange:q=>L(T,"quantity",q.target.value),placeholder:"Qty",min:"1",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",value:J.price||"",onChange:q=>L(T,"price",q.target.value),placeholder:"Unit Price",min:"0.01",step:"0.01",className:"w-full px-2 py-1.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-sm text-center",required:!0})}),a.jsx("div",{className:"col-span-3 flex items-center",children:a.jsx("span",{className:"text-sm font-medium",children:rt(J.total)})}),a.jsx("div",{className:"col-span-1 flex items-center justify-end",children:a.jsx(pe,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(T),disabled:p.length===1,children:a.jsx(Rt,{size:14,className:"text-red-400"})})})]})},T))}),p.length>0&&a.jsx("div",{className:"mt-4 p-3 glass rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lr,{className:"text-green-400",size:20}),a.jsx("span",{className:"text-lg font-medium",children:"Grand Total:"})]}),a.jsx("span",{className:"text-2xl font-bold text-green-400",children:rt(A())})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Status"}),a.jsxs("select",{value:f,onChange:J=>v(J.target.value),className:"w-full px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"partial",children:"Partial"}),a.jsx("option",{value:"paid",children:"Paid"})]})]}),a.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-yellow-300",children:"Editing this sale will adjust inventory bookings and customer balance based on the changes made."})})]})}):null},Ij=()=>{const{bookedStock:i}=kn(),[c,o]=m.useState(null),u=i.filter(f=>["pending","confirmed","partial-loaded"].includes(f.status)),d=u.reduce((f,v)=>(f[v.customerId]||(f[v.customerId]={customerName:v.customerName,bookings:[],totalQuantity:0,productTypes:new Set}),f[v.customerId].bookings.push(v),f[v.customerId].totalQuantity+=v.quantity-v.quantityLoaded,f[v.customerId].productTypes.add(v.productName),f),{}),h=u.length,y=Object.keys(d).length,p=u.reduce((f,v)=>f+(v.quantity-v.quantityLoaded),0),x=f=>{switch(f){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"partial-loaded":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}};return u.length===0?a.jsxs(ze,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Booked Stock Summary"}),a.jsx(pt,{className:"text-blue-400",size:24})]}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qt,{className:"mx-auto mb-3 text-muted",size:48}),a.jsx("p",{className:"text-muted",children:"No active bookings at the moment"})]})]}):a.jsxs(ze,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Booked Stock Summary"}),a.jsx(pt,{className:"text-blue-400",size:24})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"glass rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[a.jsx(As,{size:16}),"Customers with Bookings"]}),a.jsx("p",{className:"text-2xl font-bold",children:y})]}),a.jsxs("div",{className:"glass rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[a.jsx(pt,{size:16}),"Active Bookings"]}),a.jsx("p",{className:"text-2xl font-bold",children:h})]}),a.jsxs("div",{className:"glass rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-1",children:[a.jsx(oa,{size:16}),"Total Quantity Booked"]}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:p})]})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(d).map(([f,v])=>a.jsxs("div",{className:"glass rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start cursor-pointer",onClick:()=>o(c===f?null:f),children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(As,{className:"text-blue-400",size:18}),a.jsx("h3",{className:"font-semibold text-lg",children:v.customerName})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Products: "}),a.jsx("span",{className:"font-medium",children:v.productTypes.size})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Bookings: "}),a.jsx("span",{className:"font-medium",children:v.bookings.length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"Total Quantity: "}),a.jsxs("span",{className:"font-medium text-yellow-400",children:[v.totalQuantity," units"]})]})]})]}),a.jsx("div",{className:"text-sm text-muted",children:c===f?"▲":"▼"})]}),c===f&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800/50 space-y-2",children:v.bookings.map(w=>a.jsxs("div",{className:"flex justify-between items-center py-2 px-3 glass rounded",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium",children:w.productName}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${x(w.status)}`,children:w.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted",children:[a.jsxs("span",{children:["Order: ",w.orderId]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ta,{size:12}),new Date(w.bookingDate).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium",children:[w.quantity-w.quantityLoaded," ",w.unit]}),w.quantityLoaded>0&&a.jsxs("p",{className:"text-xs text-muted",children:[w.quantityLoaded," loaded"]})]})]},w.id))})]},f))})]})},Pj=()=>{const[i,c]=m.useState(""),[o,u]=m.useState("all"),[d,h]=m.useState(!1),[y,p]=m.useState(null),[x,f]=m.useState(!1),[v,w]=m.useState(!1),{sales:B,loading:b,syncInProgress:S,pendingChanges:D,addSale:C,updateSale:L,deleteSale:A,getProducts:z,getCustomers:ee,forceSync:k}=$j(),{toasts:J,showSuccess:T,showError:q,removeToast:R}=En(),_=Hj(B),Q=(G,Y,ie,ne,N)=>{const E=C(G,Y,ie,ne,N);return E.success&&(T("Sale created successfully"),h(!1)),E},H=(G,Y)=>{const ie=L(G,Y);return ie.success&&(T("Sale updated successfully"),p(null)),ie},Z=G=>{const Y=B.find(ne=>ne.id===G);A(G).success?T(`Sale ${Y?.orderId} deleted`):q("Failed to delete sale")},te=()=>{Uj(B),T("Sales exported to JSON"),f(!1)},de=()=>{Qj(B),T("Sales exported to CSV"),f(!1)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Sales"}),a.jsx("p",{className:"text-muted",children:"Track and manage your sales transactions"})]}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[a.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),w(!v)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:a.jsx(wn,{size:20})}),v&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[D>0&&!S&&a.jsxs("button",{onClick:G=>{G.stopPropagation(),k(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(it,{size:16}),"Sync (",D,")"]}),a.jsxs("button",{onClick:G=>{G.stopPropagation(),te(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:G=>{G.stopPropagation(),de(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]})]})]}),a.jsxs("div",{className:"hidden sm:flex gap-2",children:[S&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[a.jsx(it,{className:"animate-spin",size:16}),a.jsx("span",{className:"text-sm",children:"Syncing..."})]}),D>0&&!S&&a.jsxs(pe,{variant:"ghost",onClick:k,children:[a.jsx(it,{size:16}),"Sync (",D,")"]}),a.jsxs("div",{className:"relative",children:[a.jsxs(pe,{variant:"ghost",onClick:()=>f(!x),children:[a.jsx(Mt,{size:20}),"Export"]}),x&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[a.jsxs("button",{onClick:te,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:de,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]})]})]})]}),a.jsxs("button",{onClick:()=>h(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"New Sale",children:[a.jsx(_t,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"New Sale"})]})]})]}),b?a.jsx("div",{className:"glass rounded-xl p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading sales data..."})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Today's Sales"}),a.jsx("p",{className:"text-2xl font-bold",children:rt(_.todaysTotal)})]}),a.jsx(oa,{className:"text-green-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"This Week"}),a.jsx("p",{className:"text-2xl font-bold",children:rt(_.weekTotal)})]}),a.jsx(ta,{className:"text-blue-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"This Month"}),a.jsx("p",{className:"text-2xl font-bold",children:rt(_.monthTotal)})]}),a.jsx(ta,{className:"text-purple-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Pending Payment"}),a.jsx("p",{className:"text-2xl font-bold",children:rt(_.pendingPaymentTotal)})]}),a.jsx(qr,{className:"text-yellow-400",size:24})]})})]}),a.jsx(Ij,{}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search by order ID or customer...",value:i,onChange:G=>c(G.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:o,onChange:G=>u(G.target.value),children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),b?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):a.jsx(Gj,{sales:B,searchTerm:i,dateFilter:o,loading:!1,onEditSale:p,onDeleteSale:Z})]}),a.jsx(Vj,{isOpen:d,onClose:()=>h(!1),onAdd:Q,products:z(),customers:ee()}),a.jsx(Yj,{isOpen:!!y,sale:y,onClose:()=>p(null),onUpdate:H,products:z()}),a.jsx(Cn,{toasts:J,onClose:R}),(x||v)&&a.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{f(!1),w(!1)}})]})},ql="loadings",Rl="products",Nr="customers",Ll="inventory_movements",Bl="sales",Xj=()=>{const[i,c]=m.useState([]),[o,u]=m.useState([]),[d,h]=m.useState([]),[y,p]=m.useState([]),[x,f]=m.useState([]),[v,w]=m.useState(!0),[B,b]=m.useState(!1),[S,D]=m.useState(0),[C,L]=m.useState(null),{isAuthenticated:A}=m.useContext(ga),z=m.useRef(!0),ee=m.useRef(!0),{bookedStock:k,updateLoadingStatus:J}=kn();m.useEffect(()=>{z.current=!0;const ne=Ge.subscribe(N=>{z.current&&(b(N.isPending),D(N.pendingChanges),L(N.error))});return()=>{z.current=!1,ne()}},[]);const T=async()=>{if(z.current){w(!0);try{if(A){const ne=await Ot.loadAllData();ne&&(c(ne.loadings||[]),u(ne.products||[]),h(ne.customers||[]),p(ne.movements||[]),f(ne.sales||[]),ye.set(ql,ne.loadings||[]),ye.set(Rl,ne.products||[]),ye.set(Nr,ne.customers||[]),ye.set(Ll,ne.movements||[]),ye.set(Bl,ne.sales||[]))}else{const ne=ye.get(ql)||[],N=ye.get(Rl)||[],E=ye.get(Nr)||[],U=ye.get(Ll)||[],P=ye.get(Bl)||[];c(ne),u(N),h(E),p(U),f(P)}}catch(ne){console.error("Error loading loadings data:",ne);const N=ye.get(ql)||[],E=ye.get(Rl)||[],U=ye.get(Nr)||[],P=ye.get(Ll)||[],O=ye.get(Bl)||[];c(N),u(E),h(U),p(P),f(O)}finally{z.current&&(w(!1),setTimeout(()=>{ee.current=!1},100))}}};m.useEffect(()=>{T()},[A]),m.useEffect(()=>{const ne=N=>{if(z.current){if(N.key===`supreme_mgmt_${ql}`&&N.newValue)try{const E=JSON.parse(N.newValue);c(E)}catch(E){console.error("Error parsing loadings from storage event:",E)}if(N.key===`supreme_mgmt_${Nr}`&&N.newValue)try{const E=JSON.parse(N.newValue);h(E)}catch(E){console.error("Error parsing customers from storage event:",E)}if(N.key===`supreme_mgmt_${Rl}`&&N.newValue)try{const E=JSON.parse(N.newValue);u(E)}catch(E){console.error("Error parsing products from storage event:",E)}if(N.key===`supreme_mgmt_${Ll}`&&N.newValue)try{const E=JSON.parse(N.newValue);p(E)}catch(E){console.error("Error parsing movements from storage event:",E)}if(N.key===`supreme_mgmt_${Bl}`&&N.newValue)try{const E=JSON.parse(N.newValue);f(E)}catch(E){console.error("Error parsing sales from storage event:",E)}if(N.key==="suprememanagement_bookedStock"&&N.newValue)try{window.dispatchEvent(new Event("bookedStockUpdated"))}catch(E){console.error("Error handling booked stock storage event:",E)}}};return window.addEventListener("storage",ne),()=>window.removeEventListener("storage",ne)},[]),m.useEffect(()=>{z.current&&A&&!v&&!ee.current&&Ge.markAsChanged()},[i,A,v]);const q=(ne,N,E,U)=>{c(ne),u(N),p(E),U&&f(U),ye.set(ql,ne),ye.set(Rl,N),ye.set(Ll,E),U&&ye.set(Bl,U),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_loadings",newValue:JSON.stringify(ne),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_products",newValue:JSON.stringify(N),url:window.location.href})),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_inventory_movements",newValue:JSON.stringify(E),url:window.location.href})),U&&window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_sales",newValue:JSON.stringify(U),url:window.location.href})),A&&Ge.markAsChanged()},R=m.useCallback(ne=>{const N=x.find(P=>P.id===ne);if(!N||N.status==="completed")return x;const E=k.filter(P=>P.saleId===ne);return E.length>0&&E.every(P=>P.status==="fully-loaded"&&P.quantityLoaded>=P.quantity)?x.map(O=>O.id===ne?{...O,status:"completed",updatedAt:new Date}:O):x},[x,k]),_=()=>{const ne=new Date,N=ne.getFullYear(),E=String(ne.getMonth()+1).padStart(2,"0"),U=i.filter(P=>P.loadingId.startsWith(`LD-${N}-${E}`)).length+1;return`LD-${N}-${E}-${String(U).padStart(3,"0")}`},Q=m.useCallback((ne,N,E,U,P)=>{try{const O=d.find(I=>I.id===N);if(!O)return{success:!1,error:"Customer not found"};const V=P.reduce((I,xe)=>I+xe.quantity*xe.unitPrice,0),se={id:$e(),loadingId:_(),date:ne,customerId:N,customerName:O.name,truckPlateNumber:E,wayBillNumber:U,items:P,totalValue:V,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},ue=[...i,se],le=[...o],fe=[...y];for(const I of P){const xe=k.find(De=>De.id===I.bookedStockId),Ne=xe?xe.quantity-xe.quantityLoaded:0,Ce=Math.min(I.quantity,Ne),me=xe?xe.quantityLoaded+Ce:Ce,he=xe&&me>=xe.quantity?"fully-loaded":"partial-loaded";console.log("[AddLoading] Updating booked stock:",{bookedStockId:I.bookedStockId,productName:I.productName,bookingQuantity:xe?.quantity,previouslyLoaded:xe?.quantityLoaded,nowLoading:Ce,totalLoaded:me,status:he});const Te=J(I.bookedStockId,me,he);Te.success||console.error("Failed to update booked stock:",Te.error);const we=le.findIndex(De=>De.id===I.productId);if(we!==-1){const De=le[we],Oe=De.quantityOnHand,vt=Oe-Ce;console.log("[AddLoading] Updating product inventory:",{productId:I.productId,productName:I.productName,previousOnHand:Oe,actualLoadedQuantity:Ce,newOnHand:vt}),le[we]={...De,quantityOnHand:vt,status:vt<=0?"out-of-stock":vt<=De.reorderLevel?"low-stock":"in-stock",updatedAt:new Date};const Ts={id:$e(),productId:I.productId,productName:I.productName,movementType:"loading",quantity:-Ce,previousQuantity:Oe,newQuantity:vt,reference:`Loading ${se.loadingId}`,referenceId:se.id,notes:`Loading for customer: ${O.name}`,date:new Date,createdAt:new Date,updatedAt:new Date};fe.push(Ts)}}const je=new Set;for(const I of P){const xe=k.find(Ne=>Ne.id===I.bookedStockId);xe&&je.add(xe.saleId)}let ge=x;for(const I of je)ge=R(I);return q(ue,le,fe,ge!==x?ge:void 0),{success:!0,data:se}}catch(O){return console.error("Error adding loading:",O),{success:!1,error:O.message}}},[i,d,o,y,k,J,R,x]),H=m.useCallback((ne,N)=>{try{const E=i.find(fe=>fe.id===ne);if(!E)return{success:!1,error:"Loading not found"};const U=[...i],P=[...o],O=[...y];for(const fe of E.items){J(fe.bookedStockId,0,"confirmed");const je=P.findIndex(ge=>ge.id===fe.productId);if(je!==-1){const ge=P[je],I=ge.quantityOnHand+fe.quantity;P[je]={...ge,quantityOnHand:I,status:I>ge.reorderLevel?"in-stock":I>0?"low-stock":"out-of-stock",updatedAt:new Date}}}if(N.items)for(const fe of N.items){const je=k.find(he=>he.id===fe.bookedStockId),ge=je?je.quantityLoaded:0,I=je?je.quantity-ge:0,xe=Math.min(fe.quantity,I),Ne=ge+xe,Ce=je&&Ne>=je.quantity?"fully-loaded":"partial-loaded";J(fe.bookedStockId,Ne,Ce);const me=P.findIndex(he=>he.id===fe.productId);if(me!==-1){const he=P[me],Te=he.quantityOnHand,we=Te-xe;P[me]={...he,quantityOnHand:we,status:we<=0?"out-of-stock":we<=he.reorderLevel?"low-stock":"in-stock",updatedAt:new Date};const De={id:$e(),productId:fe.productId,productName:fe.productName,movementType:"adjustment",quantity:-xe,previousQuantity:Te,newQuantity:we,reference:`Loading Update ${E.loadingId}`,referenceId:E.id,notes:`Updated loading for customer: ${E.customerName}`,date:new Date,createdAt:new Date,updatedAt:new Date};O.push(De)}}const V=N.items?N.items.reduce((fe,je)=>fe+je.quantity*je.unitPrice,0):E.totalValue,se=U.findIndex(fe=>fe.id===ne);U[se]={...E,...N,totalValue:V,updatedAt:new Date().toISOString()};const ue=new Set;if(N.items)for(const fe of N.items){const je=k.find(ge=>ge.id===fe.bookedStockId);je&&ue.add(je.saleId)}let le=x;for(const fe of ue)le=R(fe);return q(U,P,O,le!==x?le:void 0),{success:!0}}catch(E){return console.error("Error updating loading:",E),{success:!1,error:E.message}}},[i,o,y,k,J,R,x]),Z=m.useCallback(ne=>{try{const N=i.find(O=>O.id===ne);if(!N)return{success:!1,error:"Loading not found"};const E=i.filter(O=>O.id!==ne),U=[...o],P=[...y];for(const O of N.items){J(O.bookedStockId,0,"confirmed");const V=U.findIndex(se=>se.id===O.productId);if(V!==-1){const se=U[V],ue=se.quantityOnHand,le=ue+O.quantity;U[V]={...se,quantityOnHand:le,status:le>se.reorderLevel?"in-stock":le>0?"low-stock":"out-of-stock",updatedAt:new Date};const fe={id:$e(),productId:O.productId,productName:O.productName,movementType:"return",quantity:O.quantity,previousQuantity:ue,newQuantity:le,reference:`Loading Deleted ${N.loadingId}`,referenceId:N.id,notes:`Loading deleted for customer: ${N.customerName}`,date:new Date,createdAt:new Date,updatedAt:new Date};P.push(fe)}}return q(E,U,P),{success:!0}}catch(N){return console.error("Error deleting loading:",N),{success:!1,error:N.message}}},[i,o,y,J]),te=m.useCallback(()=>{const ne=new Set;return k.filter(N=>["confirmed","partial-loaded"].includes(N.status)).forEach(N=>ne.add(N.customerId)),d.filter(N=>ne.has(N.id))},[d,k]),de=m.useCallback(ne=>k.filter(N=>N.customerId===ne&&["confirmed","partial-loaded"].includes(N.status)&&N.quantity>N.quantityLoaded).map(N=>{const P=x.find(O=>O.id===N.saleId)?.items.find(O=>O.productId===N.productId)?.price||0;return{...N,availableQuantity:N.quantity-N.quantityLoaded,unitPrice:P}}),[k,x]),G=m.useCallback(async()=>{!B&&A&&await Ge.forceSync()},[B,A]),Y=m.useCallback(async()=>{await T()},[]),ie=m.useCallback(()=>{const ne=new Date().toISOString().split("T")[0],N=i.filter(P=>P.date===ne),E=i.reduce((P,O)=>P+O.totalValue,0),U=N.reduce((P,O)=>P+O.totalValue,0);return{totalLoadings:i.length,todaysLoadings:N.length,totalValue:E,todaysValue:U,averageValue:i.length>0?E/i.length:0}},[i]);return{loadings:i,products:o,customers:d,movements:y,bookedStock:k,loading:v,syncPending:B,pendingChanges:S,lastSyncError:C,addLoading:Q,updateLoading:H,deleteLoading:Z,getCustomersWithBookedStock:te,getCustomerBookedProducts:de,getStatistics:ie,forceSync:G,refreshData:Y}},Jj=({loadings:i,searchTerm:c,dateFilter:o,onEditLoading:u,onDeleteLoading:d})=>{const[h,y]=m.useState("date"),[p,x]=m.useState("desc"),[f,v]=m.useState({show:!1,loading:null}),[w,B]=m.useState(null),b=z=>{h===z?x(p==="asc"?"desc":"asc"):(y(z),x("asc"))},S=m.useMemo(()=>{let z=[...i];if(c){const ee=c.toLowerCase();z=z.filter(k=>k.loadingId.toLowerCase().includes(ee)||k.customerName.toLowerCase().includes(ee)||k.truckPlateNumber.toLowerCase().includes(ee)||k.wayBillNumber&&k.wayBillNumber.toLowerCase().includes(ee))}if(o&&o!=="all"){const ee=new Date;ee.setHours(0,0,0,0),z=z.filter(k=>{const J=new Date(k.date);switch(J.setHours(0,0,0,0),o){case"today":return J.getTime()===ee.getTime();case"week":const T=new Date(ee);return T.setDate(T.getDate()-7),J>=T;case"month":const q=new Date(ee);return q.setMonth(q.getMonth()-1),J>=q;default:return!0}})}return z.sort((ee,k)=>{let J=0;switch(h){case"date":J=new Date(ee.date).getTime()-new Date(k.date).getTime();break;case"customer":J=ee.customerName.localeCompare(k.customerName);break;case"totalValue":J=ee.totalValue-k.totalValue;break}return p==="asc"?J:-J}),z},[i,c,o,h,p]),D=z=>{v({show:!0,loading:z})},C=()=>{f.loading&&(d(f.loading.id),v({show:!1,loading:null}))},L=z=>{B(w===z?null:z)},A=({field:z})=>h!==z?null:p==="asc"?a.jsx(yu,{size:14}):a.jsx(Xl,{size:14});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"block md:hidden space-y-4",children:S.map(z=>a.jsxs("div",{className:"glass rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:z.loadingId}),a.jsxs("p",{className:"text-sm text-muted flex items-center gap-1 mt-1",children:[a.jsx(ta,{size:14}),new Date(z.date).toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-lg font-bold text-green-400",children:rt(z.totalValue)})})]}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(rs,{size:14,className:"text-muted"}),a.jsx("span",{children:z.customerName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(la,{size:14,className:"text-muted"}),a.jsx("span",{children:z.truckPlateNumber})]}),z.wayBillNumber&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(wt,{size:14,className:"text-muted"}),a.jsx("span",{children:z.wayBillNumber})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(pt,{size:14,className:"text-muted"}),a.jsx(zr,{content:a.jsx(Mr,{items:z.items.map(ee=>({productName:ee.productName,quantity:ee.quantity,price:ee.unitPrice,total:ee.quantity*ee.unitPrice}))}),placement:"top",children:a.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[z.items.length," ",z.items.length===1?"item":"items"]})})]})]}),a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>L(z.id),className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1 mb-2",children:[a.jsx(ou,{size:14}),w===z.id?"Hide":"View"," Items"]}),w===z.id&&a.jsx("div",{className:"mt-2 space-y-1 text-sm glass rounded p-2",children:z.items.map((ee,k)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:ee.productName}),a.jsxs("span",{className:"text-muted",children:[ee.quantity," ",ee.unit," @ ",rt(ee.unitPrice)]})]},k))})]}),a.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-800/50",children:[a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>u(z),className:"flex-1",children:[a.jsx(ra,{size:16}),"Edit"]}),a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>D(z),className:"flex-1 text-red-400 hover:text-red-300",children:[a.jsx(Rt,{size:16}),"Delete"]})]})]},z.id))}),a.jsxs("div",{className:"hidden md:block overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800/50",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Loading ID"}),a.jsx("th",{className:"text-left py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>b("date"),children:a.jsxs("div",{className:"flex items-center gap-1",children:["Date",a.jsx(A,{field:"date"})]})}),a.jsx("th",{className:"text-left py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>b("customer"),children:a.jsxs("div",{className:"flex items-center gap-1",children:["Customer",a.jsx(A,{field:"customer"})]})}),a.jsx("th",{className:"text-left py-3 px-4",children:"Truck"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Way Bill"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Products"}),a.jsx("th",{className:"text-right py-3 px-4 cursor-pointer hover:text-gray-300",onClick:()=>b("totalValue"),children:a.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Value",a.jsx(A,{field:"totalValue"})]})}),a.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:S.map(z=>a.jsxs("tr",{className:"border-b border-gray-800/30 hover:bg-glass",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"font-medium",children:z.loadingId})}),a.jsx("td",{className:"py-3 px-4",children:new Date(z.date).toLocaleDateString()}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rs,{size:16,className:"text-muted"}),z.customerName]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(la,{size:16,className:"text-muted"}),z.truckPlateNumber]})}),a.jsx("td",{className:"py-3 px-4",children:z.wayBillNumber||"-"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx(zr,{content:a.jsx(Mr,{items:z.items.map(ee=>({productName:ee.productName,quantity:ee.quantity,price:ee.unitPrice,total:ee.quantity*ee.unitPrice}))}),placement:"top",children:a.jsxs("span",{className:"cursor-help underline decoration-dotted",children:[z.items.length," ",z.items.length===1?"item":"items"]})})}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("span",{className:"font-semibold text-green-400",children:rt(z.totalValue)})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>u(z),className:"p-1.5 rounded hover:bg-glass transition-colors",title:"Edit",children:a.jsx(ra,{size:16})}),a.jsx("button",{onClick:()=>D(z),className:"p-1.5 rounded hover:bg-glass transition-colors text-red-400",title:"Delete",children:a.jsx(Rt,{size:16})})]})})]},z.id))})]}),S.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(la,{className:"mx-auto mb-4 text-muted",size:48}),a.jsx("p",{className:"text-muted",children:"No loadings found"})]})]}),a.jsx(Oa,{isOpen:f.show,onClose:()=>v({show:!1,loading:null}),onConfirm:C,title:"Delete Loading",message:a.jsxs("div",{children:[a.jsxs("p",{children:["Are you sure you want to delete loading ",a.jsx("strong",{children:f.loading?.loadingId}),"?"]}),a.jsx("p",{className:"mt-2 text-sm text-muted",children:"This will restore the booked stock quantities and inventory levels."})]}),confirmText:"Delete",type:"danger"})]})},Zj=({isOpen:i,onClose:c,onAdd:o,customersWithBookings:u,getCustomerBookedProducts:d})=>{const[h,y]=m.useState(new Date().toISOString().split("T")[0]),[p,x]=m.useState(""),[f,v]=m.useState(""),[w,B]=m.useState(""),[b,S]=m.useState([]),[D,C]=m.useState([]),[L,A]=m.useState(!1),[z,ee]=m.useState([]);m.useEffect(()=>{i&&(y(new Date().toISOString().split("T")[0]),x(""),v(""),B(""),S([]),C([]),ee([]))},[i]),m.useEffect(()=>{if(p){const R=d(p);ee(R);const _=R.map(Q=>({productId:Q.productId,productName:Q.productName,quantity:0,unit:Q.unit,unitPrice:Q.unitPrice,bookedStockId:Q.id,maxQuantity:Q.availableQuantity}));S(_)}else ee([]),S([])},[p,d]);const k=(R,_,Q)=>{const H=[...b],Z={...H[R]};{const te=Number(Q)||0;Z.quantity=Math.min(te,Z.maxQuantity)}H[R]=Z,S(H)},J=()=>b.reduce((R,_)=>R+_.quantity*_.unitPrice,0),T=()=>{const R=[];return h||R.push("Date is required"),p||R.push("Customer is required"),f.trim()||R.push("Truck plate number is required"),b.some(Q=>Q.quantity>0&&Q.unitPrice>0)||R.push("At least one product must have quantity and price"),b.forEach(Q=>{Q.quantity>Q.maxQuantity&&R.push(`${Q.productName}: Quantity exceeds available (${Q.maxQuantity} ${Q.unit})`)}),C(R),R.length===0},q=async()=>{if(T()){A(!0),C([]);try{const R=b.filter(Q=>Q.quantity>0&&Q.unitPrice>0),_=await o(h,p,f.trim(),w.trim()||void 0,R);_.success?c():C([_.error||"Failed to create loading"])}catch(R){C([R.message||"An error occurred"])}finally{A(!1)}}};return a.jsx(yt,{isOpen:i,onClose:c,title:"New Loading",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[D.length>0&&a.jsx("div",{className:"glass rounded-lg p-4 border border-red-500/20 bg-red-500/10",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:20}),a.jsx("div",{className:"space-y-1",children:D.map((R,_)=>a.jsx("p",{className:"text-sm text-red-400",children:R},_))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(ta,{className:"inline mr-2",size:16}),"Date"]}),a.jsx("input",{type:"date",value:h,onChange:R=>y(R.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(rs,{className:"inline mr-2",size:16}),"Customer"]}),a.jsxs("select",{value:p,onChange:R=>x(R.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",children:[a.jsx("option",{value:"",children:"Select customer with bookings"}),u.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(la,{className:"inline mr-2",size:16}),"Truck Plate Number *"]}),a.jsx("input",{type:"text",value:f,onChange:R=>v(R.target.value),placeholder:"e.g., ABC-123",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(wt,{className:"inline mr-2",size:16}),"Way Bill Number (Optional)"]}),a.jsx("input",{type:"text",value:w,onChange:R=>B(R.target.value),placeholder:"e.g., WB-2024-001",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),p&&b.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[a.jsx(pt,{size:20}),"Booked Products"]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b.map((R,_)=>{const Q=z[_];return a.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:R.productName}),a.jsxs("p",{className:"text-sm text-muted",children:["Order: ",Q?.orderId," | Available: ",R.maxQuantity," ",R.unit]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Loading Quantity"}),a.jsx("input",{type:"number",min:"0",max:R.maxQuantity,value:R.quantity,onChange:H=>k(_,"quantity",H.target.value),className:"w-full p-2 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:`Max: ${R.maxQuantity}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Unit Price"}),a.jsx("div",{className:"p-2 glass rounded bg-gray-800/50 text-gray-300",children:rt(R.unitPrice)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Total"}),a.jsx("div",{className:"p-2 glass rounded text-right font-medium",children:rt(R.quantity*R.unitPrice)})]})]})]},_)})})]}),b.length>0&&a.jsx("div",{className:"glass rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total Value:"}),a.jsx("span",{className:"text-2xl font-bold text-green-400",children:rt(J())})]})}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800/50",children:[a.jsx(pe,{variant:"ghost",onClick:c,disabled:L,children:"Cancel"}),a.jsxs(pe,{variant:"primary",onClick:q,loading:L,loadingText:"Creating Loading...",disabled:!p||b.length===0,children:[a.jsx(_t,{size:20}),"Add Loading"]})]})]})})},Kj=({isOpen:i,loading:c,onClose:o,onUpdate:u,customersWithBookings:d,getCustomerBookedProducts:h})=>{const[y,p]=m.useState(""),[x,f]=m.useState(""),[v,w]=m.useState(""),[B,b]=m.useState(""),[S,D]=m.useState([]),[C,L]=m.useState([]),[A,z]=m.useState(!1),[ee,k]=m.useState([]);m.useEffect(()=>{if(c&&i){p(c.date),f(c.customerId),w(c.truckPlateNumber),b(c.wayBillNumber||""),D(c.items),L([]);const _=h(c.customerId);k(_)}},[c,i,h]);const J=(_,Q,H)=>{const Z=[...S],te={...Z[_]};{const de=Number(H)||0,G=ee.find(ie=>ie.id===te.bookedStockId),Y=G?G.availableQuantity:999999;te.quantity=Math.min(de,Y)}Z[_]=te,D(Z)},T=()=>S.reduce((_,Q)=>_+Q.quantity*Q.unitPrice,0),q=()=>{const _=[];return y||_.push("Date is required"),x||_.push("Customer is required"),v.trim()||_.push("Truck plate number is required"),S.some(H=>H.quantity>0&&H.unitPrice>0)||_.push("At least one product must have quantity and price"),S.forEach(H=>{const Z=ee.find(te=>te.id===H.bookedStockId);Z&&H.quantity>Z.availableQuantity&&_.push(`${H.productName}: Quantity exceeds available (${Z.availableQuantity} ${H.unit})`)}),L(_),_.length===0},R=async()=>{if(!(!q()||!c)){z(!0),L([]);try{const _=S.filter(H=>H.quantity>0&&H.unitPrice>0),Q=await u(c.id,{date:y,customerId:x,customerName:d.find(H=>H.id===x)?.name||c.customerName,truckPlateNumber:v.trim(),wayBillNumber:B.trim()||void 0,items:_,totalValue:T()});Q.success?o():L([Q.error||"Failed to update loading"])}catch(_){L([_.message||"An error occurred"])}finally{z(!1)}}};return c?a.jsx(yt,{isOpen:i,onClose:o,title:`Edit Loading - ${c.loadingId}`,size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[C.length>0&&a.jsx("div",{className:"glass rounded-lg p-4 border border-red-500/20 bg-red-500/10",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(qt,{className:"text-red-400 mt-0.5",size:20}),a.jsx("div",{className:"space-y-1",children:C.map((_,Q)=>a.jsx("p",{className:"text-sm text-red-400",children:_},Q))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(ta,{className:"inline mr-2",size:16}),"Date"]}),a.jsx("input",{type:"date",value:y,onChange:_=>p(_.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(rs,{className:"inline mr-2",size:16}),"Customer"]}),a.jsxs("select",{value:x,onChange:_=>f(_.target.value),className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:!0,children:[a.jsx("option",{value:"",children:"Select customer"}),d.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(la,{className:"inline mr-2",size:16}),"Truck Plate Number *"]}),a.jsx("input",{type:"text",value:v,onChange:_=>w(_.target.value),placeholder:"e.g., ABC-123",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx(wt,{className:"inline mr-2",size:16}),"Way Bill Number (Optional)"]}),a.jsx("input",{type:"text",value:B,onChange:_=>b(_.target.value),placeholder:"e.g., WB-2024-001",className:"w-full p-2.5 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20"})]})]}),S.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[a.jsx(pt,{size:20}),"Loaded Products"]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:S.map((_,Q)=>{const H=ee.find(te=>te.id===_.bookedStockId),Z=H?H.availableQuantity:_.quantity;return a.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:_.productName}),a.jsxs("p",{className:"text-sm text-muted",children:["Available: ",Z," ",_.unit]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Loading Quantity"}),a.jsx("input",{type:"number",min:"0",max:Z,value:_.quantity,onChange:te=>J(Q,"quantity",te.target.value),className:"w-full p-2 glass rounded focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:`Max: ${Z}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Unit Price"}),a.jsx("div",{className:"p-2 glass rounded bg-gray-800/50 text-gray-300",children:rt(_.unitPrice)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-muted mb-1",children:"Total"}),a.jsx("div",{className:"p-2 glass rounded text-right font-medium",children:rt(_.quantity*_.unitPrice)})]})]})]},Q)})})]}),S.length>0&&a.jsx("div",{className:"glass rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total Value:"}),a.jsx("span",{className:"text-2xl font-bold text-green-400",children:rt(T())})]})}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800/50",children:[a.jsx(pe,{variant:"ghost",onClick:o,disabled:A,children:"Cancel"}),a.jsxs(pe,{variant:"primary",onClick:R,loading:A,loadingText:"Updating Loading...",children:[a.jsx(jv,{size:20}),"Update Loading"]})]})]})}):null},Gl=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),Fj=i=>{const c=JSON.stringify(i,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`loadings_${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",o),d.setAttribute("download",u),d.click()},Wj=i=>{const c=["Loading ID","Date","Customer Name","Truck Plate Number","Way Bill Number","Products","Total Quantity","Total Value","Created At"],o=i.map(p=>{const x=p.items.map(v=>`${v.productName} (${v.quantity} ${v.unit} @ ${Gl(v.unitPrice)})`).join("; "),f=p.items.reduce((v,w)=>v+w.quantity,0);return[p.loadingId,p.date,p.customerName,p.truckPlateNumber,p.wayBillNumber||"",x,f.toString(),p.totalValue.toFixed(2),p.createdAt]}),u=[c.join(","),...o.map(p=>p.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),y=URL.createObjectURL(d);h.setAttribute("href",y),h.setAttribute("download",`loadings_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)},eb=async i=>new Promise((c,o)=>{const u=new FileReader;u.onload=d=>{try{const h=d.target?.result,y=JSON.parse(h);if(!Array.isArray(y))throw new Error("Invalid file format: expected an array of loadings");const p=y.filter(x=>x.loadingId&&x.date&&x.customerId&&x.customerName&&x.truckPlateNumber&&Array.isArray(x.items));c(p)}catch{o(new Error("Failed to parse JSON file"))}},u.onerror=()=>{o(new Error("Failed to read file"))},u.readAsText(i)}),tb=i=>{const c=new Date;c.setHours(0,0,0,0);const o=i.filter(p=>{const x=new Date(p.date);return x.setHours(0,0,0,0),x.getTime()===c.getTime()}),u=new Date(c);u.setDate(u.getDate()-7);const d=i.filter(p=>{const x=new Date(p.date);return x.setHours(0,0,0,0),x>=u}),h=new Date(c);h.setMonth(h.getMonth()-1);const y=i.filter(p=>{const x=new Date(p.date);return x.setHours(0,0,0,0),x>=h});return{todaysCount:o.length,todaysValue:o.reduce((p,x)=>p+x.totalValue,0),weekCount:d.length,weekValue:d.reduce((p,x)=>p+x.totalValue,0),monthCount:y.length,monthValue:y.reduce((p,x)=>p+x.totalValue,0),totalCount:i.length,totalValue:i.reduce((p,x)=>p+x.totalValue,0)}},ab=()=>{const[i,c]=m.useState(""),[o,u]=m.useState("all"),[d,h]=m.useState(!1),[y,p]=m.useState(null),[x,f]=m.useState(!1),[v,w]=m.useState(!1),{loadings:B,loading:b,syncPending:S,pendingChanges:D,addLoading:C,updateLoading:L,deleteLoading:A,getCustomersWithBookedStock:z,getCustomerBookedProducts:ee,forceSync:k}=Xj(),{toasts:J,showSuccess:T,showError:q,removeToast:R}=En(),_=tb(B),Q=(Y,ie,ne,N,E)=>{const U=C(Y,ie,ne,N,E);return U.success&&(T("Loading created successfully"),h(!1)),U},H=(Y,ie)=>{const ne=L(Y,ie);return ne.success&&(T("Loading updated successfully"),p(null)),ne},Z=Y=>{const ie=B.find(N=>N.id===Y);A(Y).success?T(`Loading ${ie?.loadingId} deleted`):q("Failed to delete loading")},te=()=>{Fj(B),T("Loadings exported to JSON"),f(!1)},de=()=>{Wj(B),T("Loadings exported to CSV"),f(!1)},G=async Y=>{const ie=Y.target.files?.[0];if(ie){try{const ne=await eb(ie);T(`Imported ${ne.length} loadings`)}catch(ne){q(ne.message||"Failed to import loadings")}Y.target.value="",f(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Loadings"}),a.jsx("p",{className:"text-muted",children:"Track and manage loading operations"})]}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[a.jsxs("div",{className:"relative mobile-menu-dropdown sm:hidden",children:[a.jsx("button",{onClick:Y=>{Y.stopPropagation(),w(!v)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:a.jsx(wn,{size:20})}),v&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[D>0&&!S&&a.jsxs("button",{onClick:Y=>{Y.stopPropagation(),k(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(it,{size:16}),"Sync (",D,")"]}),a.jsxs("button",{onClick:Y=>{Y.stopPropagation(),te(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:Y=>{Y.stopPropagation(),de(),w(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]}),a.jsxs("label",{className:"w-full px-3 py-2 hover:bg-white/10 transition-colors flex items-center gap-2 cursor-pointer",children:[a.jsx(Jl,{size:16}),a.jsx("span",{className:"text-sm",children:"Import from JSON"}),a.jsx("input",{type:"file",accept:".json",onChange:Y=>{G(Y),w(!1)},className:"hidden"})]})]})]}),a.jsxs("div",{className:"hidden sm:flex gap-2",children:[S&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[a.jsx(it,{className:"animate-spin",size:16}),a.jsx("span",{className:"text-sm",children:"Syncing..."})]}),D>0&&!S&&a.jsxs(pe,{variant:"ghost",onClick:k,children:[a.jsx(it,{size:16}),"Sync (",D,")"]}),a.jsxs("div",{className:"relative",children:[a.jsxs(pe,{variant:"ghost",onClick:()=>f(!x),children:[a.jsx(Mt,{size:20}),"Import/Export"]}),x&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass rounded-lg shadow-xl z-10 overflow-hidden",children:[a.jsxs("button",{onClick:te,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(Es,{size:16}),"Export as JSON"]}),a.jsxs("button",{onClick:de,className:"w-full px-4 py-2 text-left hover:bg-glass flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Export as CSV"]}),a.jsxs("label",{className:"w-full px-4 py-2 hover:bg-glass flex items-center gap-2 cursor-pointer",children:[a.jsx(Jl,{size:16}),"Import from JSON",a.jsx("input",{type:"file",accept:".json",onChange:G,className:"hidden"})]})]})]})]}),a.jsxs("button",{onClick:()=>h(!0),className:"w-10 h-10 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",title:"New Loading",children:[a.jsx(_t,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"New Loading"})]})]})]}),b?a.jsx("div",{className:"glass rounded-xl p-6",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading data..."})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Today's Loadings"}),a.jsx("p",{className:"text-2xl font-bold",children:_.todaysCount}),a.jsx("p",{className:"text-sm text-green-400",children:Gl(_.todaysValue)})]}),a.jsx(la,{className:"text-blue-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"This Week"}),a.jsx("p",{className:"text-2xl font-bold",children:_.weekCount}),a.jsx("p",{className:"text-sm text-green-400",children:Gl(_.weekValue)})]}),a.jsx(ta,{className:"text-purple-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"This Month"}),a.jsx("p",{className:"text-2xl font-bold",children:_.monthCount}),a.jsx("p",{className:"text-sm text-green-400",children:Gl(_.monthValue)})]}),a.jsx(oa,{className:"text-yellow-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Value"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:Gl(_.totalValue)}),a.jsxs("p",{className:"text-sm text-muted",children:[_.totalCount," loadings"]})]}),a.jsx(qr,{className:"text-green-400",size:24})]})})]}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search by loading ID, customer, truck, or way bill...",value:i,onChange:Y=>c(Y.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:o,onChange:Y=>u(Y.target.value),children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),b?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Syncing with GitHub..."})]})}):a.jsx(Jj,{loadings:B,searchTerm:i,dateFilter:o,onEditLoading:p,onDeleteLoading:Z})]}),a.jsx(Zj,{isOpen:d,onClose:()=>h(!1),onAdd:Q,customersWithBookings:z(),getCustomerBookedProducts:ee}),a.jsx(Kj,{isOpen:!!y,loading:y,onClose:()=>p(null),onUpdate:H,customersWithBookings:z(),getCustomerBookedProducts:ee}),a.jsx(Cn,{toasts:J,onClose:R}),(x||v)&&a.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>{f(!1),w(!1)}})]})},Hl="ledger_entries",Ul="customers",Sr="sales",sb=()=>{const[i,c]=m.useState([]),[o,u]=m.useState([]),[d,h]=m.useState([]),[y,p]=m.useState(!0),[x,f]=m.useState(!1),[v,w]=m.useState(0),[B,b]=m.useState(null),{isAuthenticated:S}=m.useContext(ga),D=m.useRef(!0),C=m.useRef(!0);m.useEffect(()=>{D.current=!0;const H=Ge.subscribe(Z=>{D.current&&(f(Z.isPending),w(Z.pendingChanges),b(Z.error))});return()=>{D.current=!1,H()}},[]);const L=async()=>{if(D.current){p(!0);try{if(S){const H=await Ot.loadAllData();H&&(c(H.ledgerEntries||[]),u(H.customers||[]),h(H.sales||[]),ye.set(Hl,H.ledgerEntries||[]),ye.set(Ul,H.customers||[]),ye.set(Sr,H.sales||[]))}else{const H=ye.get(Hl)||[],Z=ye.get(Ul)||[],te=ye.get(Sr)||[];console.log("Loading ledger from localStorage:",H.length,"entries"),c(H),u(Z),h(te)}}catch(H){console.error("Error loading ledger data:",H);const Z=ye.get(Hl)||[],te=ye.get(Ul)||[],de=ye.get(Sr)||[];console.log("Fallback - Loading ledger from localStorage:",Z.length,"entries"),c(Z),u(te),h(de)}finally{D.current&&(p(!1),setTimeout(()=>{C.current=!1},100))}}};m.useEffect(()=>{L()},[S]),m.useEffect(()=>{const H=Z=>{if(Z.key===`supreme_mgmt_${Hl}`){const te=Z.newValue?JSON.parse(Z.newValue):[];c(te)}else if(Z.key===`supreme_mgmt_${Ul}`){const te=Z.newValue?JSON.parse(Z.newValue):[];u(te)}else if(Z.key===`supreme_mgmt_${Sr}`){const te=Z.newValue?JSON.parse(Z.newValue):[];h(te)}};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[]),m.useEffect(()=>{D.current&&S&&!y&&!C.current&&Ge.markAsChanged()},[i,S,y]);const A=(H,Z)=>{c(H),Z&&u(Z),ye.set(Hl,H),Z&&ye.set(Ul,Z),window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_ledger_entries",newValue:JSON.stringify(H),url:window.location.href})),Z&&window.dispatchEvent(new StorageEvent("storage",{key:"supreme_mgmt_customers",newValue:JSON.stringify(Z),url:window.location.href})),Ge.markAsChanged(!0)},z=m.useCallback((H,Z)=>{const te=Z?H.filter(Y=>Y.customerId===Z):H,de=new Map;te.forEach(Y=>{de.has(Y.customerId)||de.set(Y.customerId,[]),de.get(Y.customerId).push(Y)});const G=[];return de.forEach(Y=>{const ie=[...Y].sort((N,E)=>{const U=new Date(N.date).getTime(),P=new Date(E.date).getTime();return U!==P?U-P:new Date(N.createdAt).getTime()-new Date(E.createdAt).getTime()});let ne=0;ie.forEach(N=>{ne=ne+N.credit-N.debit,G.push({...N,runningBalance:ne})})}),Z?[...H.filter(ie=>ie.customerId!==Z),...G]:G},[]),ee=m.useCallback((H,Z,te,de,G,Y)=>{try{const ie=o.find(V=>V.id===H);if(!ie)return{success:!1,error:"Customer not found"};const ne=new Date,N={id:$e(),customerId:H,customerName:ie.name,date:Y?.date||ne,transactionType:Z,referenceId:Y?.referenceId,referenceNumber:Y?.referenceNumber,description:G,debit:te,credit:de,runningBalance:0,paymentMethod:Y?.paymentMethod,notes:Y?.notes,createdAt:ne,updatedAt:ne},E=[...i,N],U=z(E,H),P=U.filter(V=>V.customerId===H).reduce((V,se)=>se.runningBalance,0),O=o.map(V=>V.id===H?{...V,balance:P,updatedAt:ne}:V);return A(U,O),{success:!0,entryId:N.id}}catch(ie){return console.error("Error adding ledger entry:",ie),{success:!1,error:"Failed to add ledger entry"}}},[i,o,z]),k=m.useCallback((H,Z)=>{try{const te=i.findIndex(E=>E.id===H);if(te===-1)return{success:!1,error:"Entry not found"};const de=i[te],G={...de,...Z,updatedAt:new Date},Y=[...i];Y[te]=G;const ie=z(Y,de.customerId),ne=ie.filter(E=>E.customerId===de.customerId).reduce((E,U)=>U.runningBalance,0),N=o.map(E=>E.id===de.customerId?{...E,balance:ne,updatedAt:new Date}:E);return A(ie,N),{success:!0}}catch(te){return console.error("Error updating ledger entry:",te),{success:!1,error:"Failed to update ledger entry"}}},[i,o,z]),J=m.useCallback(H=>{try{const Z=i.find(ie=>ie.id===H);if(!Z)return{success:!1,error:"Entry not found"};const te=i.filter(ie=>ie.id!==H),de=z(te,Z.customerId),G=de.filter(ie=>ie.customerId===Z.customerId).reduce((ie,ne)=>ne.runningBalance,0),Y=o.map(ie=>ie.id===Z.customerId?{...ie,balance:G,updatedAt:new Date}:ie);return A(de,Y),{success:!0}}catch(Z){return console.error("Error deleting ledger entry:",Z),{success:!1,error:"Failed to delete ledger entry"}}},[i,o,z]),T=m.useCallback((H,Z)=>{try{const te=i.findIndex(E=>E.referenceId===H&&E.transactionType==="sale");if(te===-1)return{success:!1,error:"Sale entry not found"};const de=i[te],G={...de,debit:Z,updatedAt:new Date},Y=[...i];Y[te]=G;const ie=z(Y,de.customerId),ne=ie.filter(E=>E.customerId===de.customerId).reduce((E,U)=>U.runningBalance,0),N=o.map(E=>E.id===de.customerId?{...E,balance:ne,updatedAt:new Date}:E);return A(ie,N),{success:!0}}catch(te){return console.error("Error updating sale entry:",te),{success:!1,error:"Failed to update sale entry"}}},[i,o,z]),q=m.useCallback(H=>{try{const Z=i.find(te=>te.referenceId===H&&te.transactionType==="sale");return Z?J(Z.id):{success:!1,error:"Sale entry not found"}}catch(Z){return console.error("Error deleting sale entry:",Z),{success:!1,error:"Failed to delete sale entry"}}},[i,J]),R=m.useCallback(H=>i.filter(Z=>Z.customerId===H).sort((Z,te)=>{const de=new Date(Z.date).getTime(),G=new Date(te.date).getTime();return de!==G?de-G:new Date(Z.createdAt).getTime()-new Date(te.createdAt).getTime()}),[i]),_=m.useCallback(()=>o.map(H=>{const te=i.filter(G=>G.customerId===H.id).sort((G,Y)=>new Date(Y.date).getTime()-new Date(G.date).getTime())[0],de=te?te.runningBalance:H.balance;return{customer:H,balance:de,lastTransaction:te}}),[o,i]),Q=m.useCallback(async()=>{S&&D.current&&(console.log("Force sync triggered for ledger"),await Ge.forceSync())},[S]);return{ledgerEntries:i,customers:o,sales:d,loading:y,pendingChanges:v,lastSyncError:B,syncInProgress:x,addEntry:ee,updateEntry:k,deleteEntry:J,updateSaleEntry:T,deleteSaleEntry:q,getCustomerLedger:R,getAllCustomersWithBalances:_,recalculateBalances:z,forceSync:Q,refreshData:L}},nb=({isOpen:i,customerName:c,onClose:o,onAdd:u,editingEntry:d,onUpdate:h})=>{const[y,p]=m.useState(""),[x,f]=m.useState("bank_transfer"),[v,w]=m.useState(""),[B,b]=m.useState(new Date().toISOString().split("T")[0]),[S,D]=m.useState({}),[C,L]=m.useState(!1);m.useEffect(()=>{d&&d.transactionType==="payment"?(p(d.credit.toString()),f(d.paymentMethod||"bank_transfer"),w(d.notes||""),b(new Date(d.date).toISOString().split("T")[0])):d||(p(""),f("bank_transfer"),w(""),b(new Date().toISOString().split("T")[0]))},[d]);const A=()=>{const k={};return(!y||parseFloat(y)<=0)&&(k.amount="Amount must be greater than 0"),B||(k.date="Date is required"),D(k),Object.keys(k).length===0},z=async k=>{if(k.preventDefault(),!A())return;L(!0);let J;d&&h?J=h(d.id,{credit:parseFloat(y),debit:0,paymentMethod:x,notes:v,date:new Date(B),description:`Payment received via ${x}`,transactionType:"payment",updatedAt:new Date}):J=u(parseFloat(y),x,"",v,new Date(B)),L(!1),J.success&&(p(""),f("bank_transfer"),w(""),b(new Date().toISOString().split("T")[0]),D({}))},ee=()=>{C||(o(),p(""),f("bank_transfer"),w(""),b(new Date().toISOString().split("T")[0]),D({}))};return a.jsx(yt,{isOpen:i,onClose:ee,title:d?`Edit Payment - ${c}`:`Record Payment - ${c}`,children:a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Amount (₦) ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:y,onChange:k=>p(k.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${S.amount?"ring-2 ring-red-400":""}`,placeholder:"Enter amount",disabled:C}),S.amount&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:S.amount})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Method ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("select",{value:x,onChange:k=>f(k.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:C,children:[a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Date ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"date",value:B,onChange:k=>b(k.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${S.date?"ring-2 ring-red-400":""}`,disabled:C}),S.date&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:S.date})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),a.jsx("textarea",{value:v,onChange:k=>w(k.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-h-[80px]",placeholder:"Add any additional notes...",disabled:C})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(pe,{type:"button",variant:"ghost",onClick:ee,disabled:C,className:"flex-1",children:"Cancel"}),a.jsx(pe,{type:"submit",variant:"primary",disabled:C,className:"flex-1",children:C?d?"Updating...":"Recording...":d?"Update Payment":"Record Payment"})]})]})})},lb=({isOpen:i,customerName:c,onClose:o,onAdd:u,editingEntry:d,onUpdate:h})=>{const[y,p]=m.useState("adjustment"),[x,f]=m.useState("debit"),[v,w]=m.useState(""),[B,b]=m.useState(""),[S,D]=m.useState(""),[C,L]=m.useState(new Date().toISOString().split("T")[0]),[A,z]=m.useState({}),[ee,k]=m.useState(!1);m.useEffect(()=>{d&&(p(d.transactionType),f(d.debit>0?"debit":"credit"),w((d.debit||d.credit).toString()),b(d.description),D(d.notes||""),L(new Date(d.date).toISOString().split("T")[0]))},[d]);const J=()=>{const R={};return(!v||parseFloat(v)<=0)&&(R.amount="Amount must be greater than 0"),B.trim()||(R.description="Description is required"),C||(R.date="Date is required"),z(R),Object.keys(R).length===0},T=async R=>{if(R.preventDefault(),!J())return;k(!0);const _=x==="debit"?parseFloat(v):0,Q=x==="credit"?parseFloat(v):0;let H;d&&h?H=h(d.id,{transactionType:y,debit:_,credit:Q,description:B,notes:S,date:new Date(C)}):u?H=u(y,_,Q,B,S,new Date(C)):H={success:!1},k(!1),H.success&&q()},q=()=>{ee||(o(),p("adjustment"),f("debit"),w(""),b(""),D(""),L(new Date().toISOString().split("T")[0]),z({}))};return a.jsx(yt,{isOpen:i,onClose:q,title:d?`Edit Entry - ${c}`:`Manual Entry - ${c}`,children:a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Transaction Type ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("select",{value:y,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",disabled:ee||d!=null&&d.transactionType==="sale",children:d?.transactionType==="sale"?a.jsx("option",{value:"sale",children:"Sale"}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"adjustment",children:"Adjustment"}),a.jsx("option",{value:"opening_balance",children:"Opening Balance"}),a.jsx("option",{value:"credit_note",children:"Credit Note"}),!d&&a.jsx("option",{value:"payment",children:"Payment"})]})}),d?.transactionType==="sale"&&a.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Sale entries are managed through the sales module"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Entry Type ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>f("debit"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${x==="debit"?"bg-red-500/20 text-red-400 ring-2 ring-red-400":"glass hover:bg-white/10"}`,disabled:ee||y==="payment",children:"Debit (Customer Owes)"}),a.jsx("button",{type:"button",onClick:()=>f("credit"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${x==="credit"?"bg-green-500/20 text-green-400 ring-2 ring-green-400":"glass hover:bg-white/10"}`,disabled:ee||d?.transactionType==="sale",children:"Credit (Customer Paid)"})]}),y==="payment"&&a.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Payments are always credits. Use the Payment button for better tracking."}),d?.transactionType==="sale"&&a.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Sales are always debits"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Amount (₦) ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:v,onChange:R=>w(R.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${A.amount?"ring-2 ring-red-400":""}`,placeholder:"Enter amount",disabled:ee}),A.amount&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:A.amount})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Description ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:B,onChange:R=>b(R.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${A.description?"ring-2 ring-red-400":""}`,placeholder:"Enter description",disabled:ee}),A.description&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:A.description})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Date ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"date",value:C,onChange:R=>L(R.target.value),className:`w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 ${A.date?"ring-2 ring-red-400":""}`,disabled:ee}),A.date&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:A.date})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),a.jsx("textarea",{value:S,onChange:R=>D(R.target.value),className:"w-full px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 min-h-[80px]",placeholder:"Add any additional notes...",disabled:ee})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(pe,{type:"button",variant:"ghost",onClick:q,disabled:ee,className:"flex-1",children:"Cancel"}),a.jsx(pe,{type:"submit",variant:"primary",disabled:ee,className:"flex-1",children:ee?d?"Updating...":"Adding...":d?"Update Entry":"Add Entry"})]})]})})},$h=()=>{const{customerId:i}=y0(),c=mu(),[o,u]=m.useState(""),[d,h]=m.useState("all"),[y,p]=m.useState(""),[x,f]=m.useState(""),[v,w]=m.useState(!1),[B,b]=m.useState(!1),[S,D]=m.useState(null),[C,L]=m.useState(null),[A,z]=m.useState(null),[ee,k]=m.useState(null),[J,T]=m.useState(!1),{ledgerEntries:q,customers:R,loading:_,syncInProgress:Q,pendingChanges:H,addEntry:Z,updateEntry:te,deleteEntry:de,getCustomerLedger:G,forceSync:Y}=sb(),{toasts:ie,showSuccess:ne,showError:N,removeToast:E}=En();m.useEffect(()=>{const I=()=>T(!1);return J&&document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[J]);const U=i?R.find(I=>I.id===i):null,P=m.useMemo(()=>i?G(i):q.sort((I,xe)=>new Date(xe.date).getTime()-new Date(I.date).getTime()),[i,q,G]),O=m.useMemo(()=>{let I=[...P];if(o){const xe=o.toLowerCase();I=I.filter(Ne=>Ne.customerName.toLowerCase().includes(xe)||Ne.description.toLowerCase().includes(xe)||Ne.referenceNumber?.toLowerCase().includes(xe)||Ne.notes?.toLowerCase().includes(xe))}if(d!=="all"&&(I=I.filter(xe=>xe.transactionType===d)),y){const xe=new Date(y);I=I.filter(Ne=>new Date(Ne.date)>=xe)}if(x){const xe=new Date(x);xe.setHours(23,59,59,999),I=I.filter(Ne=>new Date(Ne.date)<=xe)}return I},[P,o,d,y,x]),V=m.useMemo(()=>{const I=O.reduce((Ce,me)=>Ce+me.debit,0),xe=O.reduce((Ce,me)=>Ce+me.credit,0);let Ne=0;if(i){const Ce=q.filter(me=>me.customerId===i).sort((me,he)=>{const Te=new Date(me.date).getTime(),we=new Date(he.date).getTime();return Te!==we?Te-we:new Date(me.createdAt).getTime()-new Date(he.createdAt).getTime()});Ce.length>0?Ne=Ce[Ce.length-1].runningBalance:U&&(Ne=U.balance)}else Ne=xe-I;return{totalDebit:I,totalCredit:xe,balance:Ne}},[O,i,q,U]),se=(I,xe,Ne,Ce,me)=>{if(!i||!U)return N("Please select a customer to add payment"),{success:!1};const he=Z(i,"payment",0,I,`Payment received via ${xe}`,{date:me,referenceNumber:Ne,paymentMethod:xe,notes:Ce});return he.success?(ne("Payment recorded successfully"),w(!1)):N(he.error||"Failed to record payment"),he},ue=(I,xe,Ne,Ce,me,he)=>{if(!i||!U)return N("Please select a customer to add entry"),{success:!1};const Te=Z(i,I,xe,Ne,Ce,{date:he,notes:me});return Te.success?(ne("Entry added successfully"),b(!1)):N(Te.error||"Failed to add entry"),Te},le=(I,xe)=>{const Ne=te(I,xe);return Ne.success?(ne("Entry updated successfully"),D(null),L(null),b(!1),w(!1)):N(Ne.error||"Failed to update entry"),Ne},fe=async I=>{k(I.id);const xe=de(I.id);xe.success?(ne("Entry deleted successfully"),z(null)):N(xe.error||"Failed to delete entry"),k(null)},je=I=>I.split("_").map(xe=>xe.charAt(0).toUpperCase()+xe.slice(1)).join(" "),ge=I=>`₦${Math.abs(I).toLocaleString()}`;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 relative",children:[a.jsx("div",{className:"flex-1 w-full sm:w-auto",children:i?a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("button",{onClick:()=>c("/customers/ledger"),className:"sm:hidden flex items-center gap-2 text-sm text-muted hover:text-white transition-colors mb-2",children:[a.jsx(zh,{size:16}),"All Customers"]}),a.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[a.jsxs(pe,{variant:"ghost",onClick:()=>c("/customers/ledger"),children:[a.jsx(zh,{size:20}),"All Customers"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[U?.name,"'s Ledger"]}),a.jsx("p",{className:"text-muted",children:"Track transactions and balance for this customer"})]})]}),a.jsxs("div",{className:"sm:hidden",children:[a.jsx("h1",{className:"text-2xl font-bold mb-1",children:U?.name}),a.jsx("p",{className:"text-sm text-muted",children:"Track transactions and balance"})]})]}):a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Customer Ledger"}),a.jsx("p",{className:"text-muted",children:"Overview of all customer transactions and balances"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[Q&&a.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 glass rounded-lg",children:[a.jsx(it,{className:"animate-spin",size:16}),a.jsx("span",{className:"text-sm",children:"Syncing..."})]}),H>0&&!Q&&a.jsxs(pe,{variant:"ghost",onClick:Y,size:"sm",className:"hidden sm:flex",children:[a.jsx(it,{size:16}),"Sync (",H,")"]}),i&&a.jsxs(a.Fragment,{children:[a.jsxs(pe,{variant:"secondary",onClick:()=>b(!0),className:"hidden sm:flex",children:[a.jsx(_t,{size:20}),"Manual Entry"]}),a.jsxs(pe,{variant:"primary",onClick:()=>w(!0),className:"hidden sm:flex",children:[a.jsx(_t,{size:20}),"Add Payment"]})]}),a.jsxs(pe,{variant:"ghost",className:"hidden sm:flex",children:[a.jsx(Mt,{size:20}),"Export"]}),a.jsxs("div",{className:"sm:hidden absolute top-0 right-0 flex items-center gap-2",children:[i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:I=>{I.stopPropagation(),T(!J)},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"More Options",children:a.jsx(wn,{size:20})}),J&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 rounded-lg shadow-xl z-50 py-1 min-w-[160px] bg-gray-900 border border-white/20 animate-fadeIn",children:[Q&&a.jsxs("div",{className:"px-3 py-2 text-sm text-muted flex items-center gap-2",children:[a.jsx(it,{className:"animate-spin",size:14}),"Syncing..."]}),H>0&&!Q&&a.jsxs("button",{onClick:I=>{I.stopPropagation(),Y(),T(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(it,{size:16}),"Sync (",H,")"]}),a.jsxs("button",{onClick:I=>{I.stopPropagation(),b(!0),T(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(wt,{size:16}),"Manual Entry"]}),a.jsxs("button",{onClick:I=>{I.stopPropagation(),T(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 transition-colors flex items-center gap-2",children:[a.jsx(Mt,{size:16}),"Export"]})]})]}),a.jsx("button",{onClick:()=>w(!0),className:"w-10 h-10 bg-white text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200 flex items-center justify-center",title:"Add Payment",children:a.jsx(_t,{size:18})})]}),!i&&a.jsx("button",{onClick:()=>{},className:"p-2 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Export",children:a.jsx(Mt,{size:20})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Sales/Debits"}),a.jsx("p",{className:"text-2xl font-bold text-red-400",children:ge(V.totalDebit)})]}),a.jsx(oa,{className:"text-red-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Payments/Credits"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:ge(V.totalCredit)})]}),a.jsx(Wl,{className:"text-green-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:i?"Current Balance":"Net Outstanding"}),a.jsx("p",{className:`text-2xl font-bold ${V.balance>0?"text-green-400":V.balance<0?"text-red-400":"text-yellow-400"}`,children:ge(V.balance)}),V.balance>0&&a.jsx("p",{className:"text-xs text-green-400 mt-1",children:"Customer has credit"}),V.balance<0&&a.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Customer owes"})]}),a.jsx(qr,{className:V.balance>0?"text-green-400":V.balance<0?"text-red-400":"text-yellow-400",size:24})]})})]}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search transactions...",value:o,onChange:I=>u(I.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:d,onChange:I=>h(I.target.value),children:[a.jsx("option",{value:"all",children:"All Transactions"}),a.jsx("option",{value:"payment",children:"Payments"}),a.jsx("option",{value:"sale",children:"Sales"}),a.jsx("option",{value:"credit_note",children:"Credit Notes"}),a.jsx("option",{value:"opening_balance",children:"Opening Balance"}),a.jsx("option",{value:"adjustment",children:"Adjustments"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",value:y,onChange:I=>p(I.target.value),className:"px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"From Date"}),a.jsx("input",{type:"date",value:x,onChange:I=>f(I.target.value),className:"px-3 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"To Date"})]})]}),_?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"})]}),a.jsx("p",{className:"text-sm text-muted mt-3",children:"Loading ledger..."})]})}):O.length===0?a.jsx("div",{className:"text-center py-20 text-muted",children:o||d!=="all"||y||x?"No transactions found matching your filters":i?"No transactions for this customer yet":"No transactions recorded yet"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden space-y-3",children:O.map(I=>a.jsxs("div",{className:`glass rounded-lg p-4 ${I.runningBalance>0?"bg-green-500/5":I.runningBalance<0?"bg-red-500/5":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:!i&&I.customerName}),a.jsx("p",{className:"text-sm text-muted",children:new Date(I.date).toLocaleDateString()})]}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${I.transactionType==="payment"?"bg-green-500/20 text-green-400":I.transactionType==="sale"?"bg-red-500/20 text-red-400":I.transactionType==="credit_note"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:je(I.transactionType)})]}),a.jsx("p",{className:"text-sm mb-3",children:I.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm mb-3",children:[I.debit>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted text-xs",children:"Debit"}),a.jsx("p",{className:"font-medium text-red-400",children:ge(I.debit)})]}),I.credit>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted text-xs",children:"Credit"}),a.jsx("p",{className:"font-medium text-green-400",children:ge(I.credit)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted text-xs",children:"Balance"}),a.jsx("p",{className:`font-bold ${I.runningBalance>0?"text-green-400":I.runningBalance<0?"text-red-400":"text-yellow-400"}`,children:ge(I.runningBalance)})]})]}),i&&I.transactionType!=="sale"&&a.jsxs("div",{className:"flex gap-2 justify-end border-t border-white/5 pt-3",children:[a.jsx("button",{onClick:()=>{I.transactionType==="payment"?(L(I),w(!0)):(D(I),b(!0))},className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Entry",children:a.jsx(ra,{size:16})}),a.jsx("button",{onClick:()=>z(I),disabled:ee===I.id,className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200 disabled:opacity-50",title:"Delete Entry",children:ee===I.id?a.jsx(it,{size:16,className:"animate-spin"}):a.jsx(Rt,{size:16,className:"text-red-400"})})]}),i&&I.transactionType==="sale"&&a.jsx("div",{className:"flex gap-2 justify-end border-t border-white/5 pt-3",children:a.jsx("p",{className:"text-xs text-muted italic",children:"Sales can only be edited from the Sales page"})})]},I.id))}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800/50",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),!i&&a.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Description"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Type"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Debit (₦)"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Credit (₦)"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Balance (₦)"}),i&&a.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:O.map(I=>a.jsxs("tr",{className:`border-b border-gray-800/30 hover:bg-glass transition-colors ${I.runningBalance>0?"bg-green-500/5":I.runningBalance<0?"bg-red-500/5":""}`,children:[a.jsx("td",{className:"py-3 px-4",children:new Date(I.date).toLocaleDateString()}),!i&&a.jsx("td",{className:"py-3 px-4 font-medium",children:I.customerName}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("p",{children:I.description}),I.notes&&a.jsx("p",{className:"text-xs text-muted",children:I.notes})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${I.transactionType==="payment"?"bg-green-500/20 text-green-400":I.transactionType==="sale"?"bg-red-500/20 text-red-400":I.transactionType==="credit_note"?"bg-blue-500/20 text-blue-400":I.transactionType==="opening_balance"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:je(I.transactionType)})}),a.jsx("td",{className:"py-3 px-4 text-right font-medium text-red-400",children:I.debit>0?ge(I.debit):"-"}),a.jsx("td",{className:"py-3 px-4 text-right font-medium text-green-400",children:I.credit>0?ge(I.credit):"-"}),a.jsxs("td",{className:`py-3 px-4 text-right font-bold ${I.runningBalance>0?"text-green-400":I.runningBalance<0?"text-red-400":"text-yellow-400"}`,children:[ge(I.runningBalance),I.runningBalance>0&&a.jsx("span",{className:"text-xs block text-green-400",children:"Credit"}),I.runningBalance<0&&a.jsx("span",{className:"text-xs block text-red-400",children:"Owes"})]}),i&&a.jsx("td",{className:"py-3 px-4",children:I.transactionType!=="sale"?a.jsxs("div",{className:"flex justify-center gap-1",children:[a.jsx("button",{onClick:()=>{I.transactionType==="payment"?(L(I),w(!0)):(D(I),b(!0))},className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200",title:"Edit Entry",children:a.jsx(ra,{size:14})}),a.jsx("button",{onClick:()=>z(I),disabled:ee===I.id,className:"p-1.5 rounded-lg hover:bg-white/10 transition-all duration-200 disabled:opacity-50",title:"Delete Entry",children:ee===I.id?a.jsx(it,{size:14,className:"animate-spin"}):a.jsx(Rt,{size:14,className:"text-red-400"})})]}):a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"text-xs text-muted italic",children:"Via Sales"})})})]},I.id))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t-2 border-gray-800/50 font-bold",children:[a.jsx("td",{colSpan:i?3:4,className:"py-3 px-4",children:"Total"}),a.jsx("td",{className:"py-3 px-4 text-right text-red-400",children:ge(V.totalDebit)}),a.jsx("td",{className:"py-3 px-4 text-right text-green-400",children:ge(V.totalCredit)}),a.jsx("td",{className:`py-3 px-4 text-right ${V.balance>0?"text-green-400":V.balance<0?"text-red-400":"text-yellow-400"}`,children:ge(V.balance)}),i&&a.jsx("td",{})]})})]})})]})]}),v&&i&&a.jsx(nb,{isOpen:v,customerName:U?.name||"",onClose:()=>{w(!1),L(null)},onAdd:se,editingEntry:C,onUpdate:C?le:void 0}),B&&i&&a.jsx(lb,{isOpen:B,customerName:U?.name||"",onClose:()=>{b(!1),D(null)},onAdd:ue,editingEntry:S,onUpdate:S?le:void 0}),A&&a.jsx(Oa,{isOpen:!!A,onClose:()=>z(null),onConfirm:()=>fe(A),title:"Delete Ledger Entry",message:a.jsxs("div",{children:["Are you sure you want to delete this entry?",a.jsxs("div",{className:"mt-2 p-2 rounded bg-gray-800/50",children:[a.jsx("p",{className:"text-sm",children:A.description}),a.jsxs("p",{className:"text-xs text-muted mt-1",children:["Date: ",new Date(A.date).toLocaleDateString()]})]}),a.jsx("p",{className:"text-sm text-yellow-400 mt-2",children:"This will recalculate all subsequent balances."})]}),confirmText:"Delete",type:"danger"}),a.jsx(Cn,{toasts:ie,onClose:E})]})},ib=[{id:1,name:"Punjab Agro Industries",email:"contact@punjabagro.com",phone:"+91 98123 45678",address:"Ludhiana, Punjab",category:"Paddy Supplier",totalBusiness:"₦45,00,000",status:"active"},{id:2,name:"Haryana Rice Mills",email:"info@haryanamills.com",phone:"+91 98123 45679",address:"Karnal, Haryana",category:"Rice Mill",totalBusiness:"₦32,50,000",status:"active"},{id:3,name:"UP Grain Traders",email:"sales@upgraintraders.com",phone:"+91 98123 45680",address:"Meerut, Uttar Pradesh",category:"Grain Supplier",totalBusiness:"₦28,75,000",status:"active"},{id:4,name:"Bihar Agricultural Co-op",email:"contact@biharcoop.com",phone:"+91 98123 45681",address:"Patna, Bihar",category:"Paddy Supplier",totalBusiness:"₦15,25,000",status:"inactive"}],rb=()=>{const[i,c]=m.useState(""),[o,u]=m.useState("all");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Suppliers"}),a.jsx("p",{className:"text-muted",children:"Manage your supplier information and relationships"})]}),a.jsxs(pe,{variant:"primary",children:[a.jsx(_t,{size:20}),"Add Supplier"]})]}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search suppliers...",value:i,onChange:d=>c(d.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:o,onChange:d=>u(d.target.value),children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"paddy",children:"Paddy Supplier"}),a.jsx("option",{value:"rice",children:"Rice Mill"}),a.jsx("option",{value:"grain",children:"Grain Supplier"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ib.map(d=>a.jsxs("div",{className:"glass rounded-lg p-4 glass-hover cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:"p-3 glass rounded-lg",children:a.jsx(la,{size:24})}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.status==="active"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:d.status})]}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:d.name}),a.jsx("p",{className:"text-sm text-muted mb-3",children:d.category}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted",children:[a.jsx(uv,{size:14}),a.jsx("span",{className:"truncate",children:d.email})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted",children:[a.jsx(bu,{size:14}),a.jsx("span",{children:d.phone})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted",children:[a.jsx(Rr,{size:14}),a.jsx("span",{children:d.address})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-800/50",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted",children:"Total Business"}),a.jsx("p",{className:"font-semibold",children:d.totalBusiness})]}),a.jsx(pe,{variant:"ghost",size:"sm",children:"View Details"})]})})]},d.id))})]})]})},wr=[{id:1,truckNo:"PB-12-AB-1234",supplier:"Punjab Agro Industries",driver:"Harpreet Singh",arrivalDate:"2024-01-15",arrivalTime:"10:30 AM",grossWeight:15e3,tareWeight:5e3,netWeight:1e4,moistureLevel:"12.5%",quality:"Grade A",status:"unloaded",price:2800,totalAmount:28e4},{id:2,truckNo:"HR-06-CD-5678",supplier:"Haryana Rice Mills",driver:"Rajesh Kumar",arrivalDate:"2024-01-15",arrivalTime:"02:15 PM",grossWeight:18e3,tareWeight:5500,netWeight:12500,moistureLevel:"13.2%",quality:"Grade A",status:"weighing",price:2750,totalAmount:343750},{id:3,truckNo:"UP-32-EF-9012",supplier:"UP Grain Traders",driver:"Sunil Yadav",arrivalDate:"2024-01-15",arrivalTime:"04:45 PM",grossWeight:0,tareWeight:0,netWeight:0,moistureLevel:"-",quality:"-",status:"waiting",price:0,totalAmount:0},{id:4,truckNo:"BR-10-GH-3456",supplier:"Bihar Agricultural Co-op",driver:"Rakesh Sharma",arrivalDate:"2024-01-14",arrivalTime:"09:00 AM",grossWeight:16e3,tareWeight:5200,netWeight:10800,moistureLevel:"14.0%",quality:"Grade B",status:"completed",price:2600,totalAmount:280800}],cb=()=>{const[i,c]=m.useState(""),[o,u]=m.useState("all"),[d,h]=m.useState("today"),y=v=>{switch(v){case"completed":return"bg-green-500/20 text-green-400";case"unloaded":return"bg-blue-500/20 text-blue-400";case"weighing":return"bg-yellow-500/20 text-yellow-400";case"waiting":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}},p=wr.length,x=wr.reduce((v,w)=>v+w.netWeight,0),f=wr.reduce((v,w)=>v+w.totalAmount,0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Paddy Trucks"}),a.jsx("p",{className:"text-muted",children:"Track and manage incoming paddy trucks"})]}),a.jsxs(pe,{variant:"primary",children:[a.jsx(_t,{size:20}),"Register Truck"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Today's Trucks"}),a.jsx("p",{className:"text-2xl font-bold",children:p})]}),a.jsx(la,{className:"text-blue-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Weight"}),a.jsxs("p",{className:"text-2xl font-bold",children:[(x/1e3).toFixed(1)," MT"]})]}),a.jsx(Qv,{className:"text-green-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Value"}),a.jsxs("p",{className:"text-2xl font-bold",children:["₦",(f/1e5).toFixed(2),"L"]})]}),a.jsx(ux,{className:"text-purple-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"In Queue"}),a.jsx("p",{className:"text-2xl font-bold",children:"2"})]}),a.jsx(Hy,{className:"text-yellow-400",size:24})]})})]}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search by truck number or supplier...",value:i,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:o,onChange:v=>u(v.target.value),children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"waiting",children:"Waiting"}),a.jsx("option",{value:"weighing",children:"Weighing"}),a.jsx("option",{value:"unloaded",children:"Unloaded"}),a.jsx("option",{value:"completed",children:"Completed"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:d,onChange:v=>h(v.target.value),children:[a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"yesterday",children:"Yesterday"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800/50",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Truck No."}),a.jsx("th",{className:"text-left py-3 px-4",children:"Supplier"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Arrival"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Gross (kg)"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Tare (kg)"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Net (kg)"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Moisture"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Quality"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Amount (₦)"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Status"}),a.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:wr.map(v=>a.jsxs("tr",{className:"border-b border-gray-800/50/50 hover:bg-glass transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:v.truckNo}),a.jsx("p",{className:"text-xs text-muted",children:v.driver})]})}),a.jsx("td",{className:"py-3 px-4",children:v.supplier}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:v.arrivalDate}),a.jsx("p",{className:"text-xs text-muted",children:v.arrivalTime})]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:v.grossWeight||"-"}),a.jsx("td",{className:"py-3 px-4 text-center",children:v.tareWeight||"-"}),a.jsx("td",{className:"py-3 px-4 text-center font-semibold",children:v.netWeight||"-"}),a.jsx("td",{className:"py-3 px-4 text-center",children:v.moistureLevel}),a.jsxs("td",{className:"py-3 px-4 text-center",children:[v.quality!=="-"&&a.jsx("span",{className:`px-2 py-1 text-xs rounded ${v.quality==="Grade A"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:v.quality}),v.quality==="-"&&"-"]}),a.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:v.totalAmount>0?`₦${v.totalAmount.toLocaleString()}`:"-"}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(v.status)}`,children:v.status})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx(pe,{variant:"ghost",size:"sm",children:"Edit"}),a.jsx(pe,{variant:"ghost",size:"sm",children:"Print"})]})})]},v.id))})]})})]})]})},lu=[{id:1,date:"2024-01-15",supplier:"Punjab Agro Industries",description:"Paddy Purchase - 10,000 kg",debit:0,credit:28e4,balance:28e4,type:"purchase"},{id:2,date:"2024-01-15",supplier:"Punjab Agro Industries",description:"Payment Made - Cheque #123456",debit:2e5,credit:0,balance:8e4,type:"payment"},{id:3,date:"2024-01-14",supplier:"Haryana Rice Mills",description:"Paddy Purchase - 12,500 kg",debit:0,credit:343750,balance:343750,type:"purchase"},{id:4,date:"2024-01-13",supplier:"UP Grain Traders",description:"Grain Purchase - Mixed",debit:0,credit:185e3,balance:185e3,type:"purchase"},{id:5,date:"2024-01-13",supplier:"UP Grain Traders",description:"Advance Payment",debit:1e5,credit:0,balance:85e3,type:"payment"},{id:6,date:"2024-01-12",supplier:"Bihar Agricultural Co-op",description:"Paddy Purchase - 10,800 kg",debit:0,credit:280800,balance:280800,type:"purchase"},{id:7,date:"2024-01-12",supplier:"Bihar Agricultural Co-op",description:"Full Payment - Bank Transfer",debit:280800,credit:0,balance:0,type:"payment"}],ob=()=>{const[i,c]=m.useState(""),[o,u]=m.useState("all"),d=lu.reduce((p,x)=>p+x.credit,0),h=lu.reduce((p,x)=>p+x.debit,0),y=d-h;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Supplier Ledger"}),a.jsx("p",{className:"text-muted",children:"Track supplier transactions and payment history"})]}),a.jsxs(pe,{variant:"primary",children:[a.jsx(Mt,{size:20}),"Export Ledger"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Payable"}),a.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["₦",d.toLocaleString()]})]}),a.jsx(Wl,{className:"text-red-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Total Paid"}),a.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["₦",h.toLocaleString()]})]}),a.jsx(oa,{className:"text-green-400",size:24})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted",children:"Outstanding Balance"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:["₦",y.toLocaleString()]})]}),a.jsx(Hv,{className:"text-yellow-400",size:24})]})})]}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-text",size:20}),a.jsx("input",{type:"text",placeholder:"Search transactions...",value:i,onChange:p=>c(p.target.value),className:"w-full pl-10 pr-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 placeholder-muted-text"})]}),a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:o,onChange:p=>u(p.target.value),children:[a.jsx("option",{value:"all",children:"All Suppliers"}),a.jsx("option",{value:"punjab",children:"Punjab Agro Industries"}),a.jsx("option",{value:"haryana",children:"Haryana Rice Mills"}),a.jsx("option",{value:"up",children:"UP Grain Traders"}),a.jsx("option",{value:"bihar",children:"Bihar Agricultural Co-op"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-800/50",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Supplier"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Description"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Debit (₦)"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Credit (₦)"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Balance (₦)"})]})}),a.jsx("tbody",{children:lu.map(p=>a.jsxs("tr",{className:"border-b border-gray-800/50/50 hover:bg-glass transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:p.date}),a.jsx("td",{className:"py-3 px-4 font-medium",children:p.supplier}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("span",{className:"flex items-center gap-2",children:[p.description,p.type==="purchase"&&a.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded",children:"Purchase"}),p.type==="payment"&&a.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded",children:"Payment"})]})}),a.jsx("td",{className:"py-3 px-4 text-right font-medium text-green-400",children:p.debit>0?`₦${p.debit.toLocaleString()}`:"-"}),a.jsx("td",{className:"py-3 px-4 text-right font-medium text-red-400",children:p.credit>0?`₦${p.credit.toLocaleString()}`:"-"}),a.jsxs("td",{className:"py-3 px-4 text-right font-bold",children:["₦",p.balance.toLocaleString()]})]},p.id))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"border-t-2 border-gray-800/50 font-bold",children:[a.jsx("td",{colSpan:3,className:"py-3 px-4",children:"Total"}),a.jsxs("td",{className:"py-3 px-4 text-right text-green-400",children:["₦",h.toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right text-red-400",children:["₦",d.toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right text-yellow-400",children:["₦",y.toLocaleString()]})]})})]})})]})]})},ub=[{id:1,title:"Sales Report",description:"Detailed sales analysis with customer breakdown",icon:a.jsx(oa,{size:24}),lastGenerated:"2024-01-14",frequency:"Daily"},{id:2,title:"Inventory Report",description:"Stock levels and movement analysis",icon:a.jsx(cx,{size:24}),lastGenerated:"2024-01-13",frequency:"Weekly"},{id:3,title:"Financial Summary",description:"Revenue, expenses, and profit analysis",icon:a.jsx(ox,{size:24}),lastGenerated:"2024-01-01",frequency:"Monthly"},{id:4,title:"Customer Analysis",description:"Customer behavior and purchase patterns",icon:a.jsx(wt,{size:24}),lastGenerated:"2024-01-10",frequency:"Monthly"}],db=[{label:"Total Revenue (MTD)",value:"₦45,67,000",change:"+12.3%",positive:!0},{label:"Total Orders (MTD)",value:"342",change:"+8.5%",positive:!0},{label:"Avg Order Value",value:"₦13,350",change:"-2.1%",positive:!1},{label:"Customer Retention",value:"87%",change:"+3.2%",positive:!0}],mb=()=>{const[i,c]=m.useState("month");return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Reports"}),a.jsx("p",{className:"text-muted",children:"Generate and view business reports and analytics"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{variant:"secondary",children:[a.jsx(vu,{size:20}),"Filters"]}),a.jsxs(pe,{variant:"primary",children:[a.jsx(Mt,{size:20}),"Export All"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:db.map((o,u)=>a.jsx(ze,{children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted mb-1",children:o.label}),a.jsx("p",{className:"text-2xl font-bold mb-1",children:o.value}),a.jsxs("p",{className:`text-sm ${o.positive?"text-green-400":"text-red-400"}`,children:[o.change," from last period"]})]})},u))}),a.jsxs(ze,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Available Reports"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("select",{className:"px-4 py-2 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20",value:i,onChange:o=>c(o.target.value),children:[a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"quarter",children:"This Quarter"}),a.jsx("option",{value:"year",children:"This Year"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ub.map(o=>a.jsxs("div",{className:"glass rounded-lg p-4 glass-hover cursor-pointer",onClick:()=>console.log("Report clicked:",o.title),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"p-3 glass rounded-lg",children:o.icon}),a.jsx("span",{className:"text-xs text-muted",children:o.frequency})]}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:o.title}),a.jsx("p",{className:"text-sm text-muted mb-4",children:o.description}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-800/50",children:[a.jsxs("p",{className:"text-xs text-muted",children:["Last generated: ",o.lastGenerated]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"sm",children:a.jsx(pv,{size:16})}),a.jsx(pe,{variant:"ghost",size:"sm",children:a.jsx(Mt,{size:16})})]})]})]},o.id))})]}),a.jsxs(ze,{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx(cx,{size:20}),"Revenue Trend (Last 7 Days)"]}),a.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[65,80,45,90,75,60,85].map((o,u)=>a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500/50 to-blue-400/50 rounded-t-lg transition-all duration-300 hover:from-blue-500/70 hover:to-blue-400/70",style:{height:`${o}%`}}),a.jsx("span",{className:"text-xs text-muted",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][u]})]},u))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ze,{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx(ox,{size:20}),"Product Category Distribution"]}),a.jsx("div",{className:"space-y-3",children:[{name:"Rice Products",percentage:45,color:"bg-blue-500"},{name:"Wheat & Flour",percentage:25,color:"bg-green-500"},{name:"Pulses & Lentils",percentage:15,color:"bg-purple-500"},{name:"Oil & Ghee",percentage:10,color:"bg-yellow-500"},{name:"Others",percentage:5,color:"bg-red-500"}].map((o,u)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{className:"text-sm",children:o.name}),a.jsxs("span",{className:"text-sm font-semibold",children:[o.percentage,"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-dark-surface rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${o.color} transition-all duration-500`,style:{width:`${o.percentage}%`}})})]},u))})]}),a.jsxs(ze,{children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx(ta,{size:20}),"Recent Activities"]}),a.jsx("div",{className:"space-y-3",children:[{time:"2 hours ago",action:"Sales report generated",user:"Admin"},{time:"5 hours ago",action:"Inventory report exported",user:"Manager"},{time:"1 day ago",action:"Financial summary created",user:"Accountant"},{time:"2 days ago",action:"Customer analysis completed",user:"Admin"},{time:"3 days ago",action:"Monthly report scheduled",user:"System"}].map((o,u)=>a.jsxs("div",{className:"flex items-center justify-between p-3 glass rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:o.action}),a.jsxs("p",{className:"text-xs text-muted",children:["by ",o.user]})]}),a.jsx("span",{className:"text-xs text-muted",children:o.time})]},u))})]})]})]})},fb=["Chidi","Amaka","Emeka","Ngozi","Kemi","Tunde","Folake","Segun","Bisi","Kunle","Ada","Obinna","Funke","Dele","Chioma"],hb=["Okafor","Adeleke","Ogundimu","Afolabi","Nwankwo","Olayinka","Egwu","Bakare","Adesanya","Okonkwo","Adebayo","Eze"],xb=["Enterprises","Ventures","Trading Co.","& Sons","& Brothers","Stores","Global","Resources","Holdings"],gb=["Lagos","Kano","Ogun","Oyo","Rivers","Kaduna","Edo","Delta","Imo","Enugu","Abia","Anambra","Akwa Ibom","Cross River","Bayelsa","Benue","Plateau","Niger"],pb=["Premium Rice 50kg","Standard Rice 50kg","Premium Rice 25kg","Standard Rice 25kg","Premium Rice 10kg","Standard Rice 10kg","Premium Rice 5kg","Parboiled Rice 50kg","Parboiled Rice 25kg","Brown Rice 25kg","Jasmine Rice 10kg","Basmati Rice 10kg","Local Rice 50kg","Local Rice 25kg","Broken Rice 50kg"],yb=[{name:"Premium Rice",description:"High quality premium rice products"},{name:"Standard Rice",description:"Regular quality rice for everyday consumption"},{name:"Parboiled Rice",description:"Partially boiled rice products"},{name:"Specialty Rice",description:"Jasmine, Basmati and other specialty varieties"},{name:"Local Rice",description:"Locally sourced rice varieties"},{name:"Broken Rice",description:"Broken grain rice for various uses"}];function St(i){return i[Math.floor(Math.random()*i.length)]}function Qe(i,c){return Math.floor(Math.random()*(c-i+1))+i}function vb(){const c=St(["0803","0806","0813","0816","0810","0814","0703","0706","0903","0906"]),o=Math.floor(Math.random()*1e7).toString().padStart(7,"0");return c+o}function pn(i){const c=new Date;return c.setDate(c.getDate()-Qe(0,i)),c}function jb(){const i=new Date,c=yb.map((b,S)=>({id:`cat_${S+1}`,name:b.name,description:b.description,createdAt:i,updatedAt:i})),o=pb.map((b,S)=>{const D=b.includes("Premium")?"Premium Rice":b.includes("Standard")?"Standard Rice":b.includes("Parboiled")?"Parboiled Rice":b.includes("Local")?"Local Rice":b.includes("Broken")?"Broken Rice":"Specialty Rice",C=Qe(50,500),L=Qe(0,Math.floor(C*.3));return{id:`prod_${S+1}`,name:b,category:D,quantityOnHand:C,quantityBooked:L,availableQuantity:C-L,unit:"bags",status:C-L>100?"in-stock":C-L>20?"low-stock":"out-of-stock",reorderLevel:50,createdAt:i,updatedAt:i}}),u=[];for(let b=0;b<20;b++){const S=St(fb),D=St(hb),L=Math.random()>.5?`${D} ${St(xb)}`:`${S} ${D}`,A=Qe(0,2),z=A===0?0:A===1?-Qe(1e4,5e5):Qe(5e3,5e4);u.push({id:`cust_${b+1}`,name:L,phone:vb(),state:St(gb),balance:z,createdAt:pn(90),updatedAt:i})}const d=[],h=[];for(let b=0;b<30;b++){const S=St(u),D=pn(30),C=Qe(1,4),L=[],A=[...o].sort(()=>Math.random()-.5).slice(0,C);let z=0;for(const J of A){const T=Qe(1,10),q=J.name.includes("Premium")?Qe(45e3,55e3):J.name.includes("Standard")?Qe(35e3,45e3):J.name.includes("Parboiled")?Qe(4e4,48e3):J.name.includes("Jasmine")||J.name.includes("Basmati")?Qe(6e4,75e3):J.name.includes("Local")?Qe(3e4,38e3):Qe(25e3,35e3),R=T*q;z+=R,L.push({productId:J.id,productName:J.name,quantity:T,unit:J.unit,price:q,total:R}),h.push({id:$e(),productId:J.id,productName:J.name,movementType:"sales",quantity:-T,previousQuantity:J.quantityOnHand,newQuantity:J.quantityOnHand,reference:`Sale: ORD-2024-${(b+1).toString().padStart(3,"0")}`,referenceId:`sale_${b+1}`,notes:`Sold to ${S.name}`,date:D,createdAt:D,updatedAt:D})}const ee=Math.random()<.8?St(["pending","processing"]):"completed",k=["pending","partial","paid"];d.push({id:`sale_${b+1}`,orderId:`ORD-2024-${(b+1).toString().padStart(3,"0")}`,customerId:S.id,customerName:S.name,date:D,items:L,totalAmount:z,status:ee,paymentStatus:St(k),createdAt:D,updatedAt:D})}for(let b=0;b<15;b++){const S=St(o),D=pn(30),C=Qe(20,100);h.push({id:$e(),productId:S.id,productName:S.name,movementType:"production",quantity:C,previousQuantity:S.quantityOnHand,newQuantity:S.quantityOnHand+C,reference:`Production Batch ${b+1}`,notes:`Produced ${C} ${S.unit}`,date:D,createdAt:D,updatedAt:D})}const y=[];u.forEach((b,S)=>{if(S<5){const D=new Date(b.createdAt),C=Qe(5e4,2e5),L=Math.random()>.5;y.push({id:$e(),customerId:b.id,customerName:b.name,date:D,transactionType:"opening_balance",description:"Opening Balance",debit:L?0:C,credit:L?C:0,runningBalance:L?C:-C,notes:"Initial account setup",createdAt:D,updatedAt:D})}});const p=[];d.forEach(b=>{(b.status==="pending"||b.status==="processing")&&b.items.forEach(S=>{const C=St(["pending","confirmed","partial-loaded"]),L=C==="partial-loaded"?Qe(0,Math.floor(S.quantity*.5)):0;p.push({id:`BS-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:b.customerId,customerName:b.customerName,saleId:b.id,orderId:b.orderId,productId:S.productId,productName:S.productName,quantity:S.quantity,quantityLoaded:L,unit:S.unit,bookingDate:b.date,status:C,notes:`Booked from sale ${b.orderId}`,createdAt:b.createdAt,updatedAt:b.updatedAt})})}),d.forEach(b=>{if(y.push({id:$e(),customerId:b.customerId,customerName:b.customerName,date:b.date,transactionType:"sale",referenceId:b.id,referenceNumber:b.orderId,description:`Sale Invoice #${b.orderId}`,debit:b.totalAmount,credit:0,runningBalance:0,notes:`${b.items.length} item(s) sold`,createdAt:b.createdAt,updatedAt:b.updatedAt}),b.paymentStatus==="paid"||b.paymentStatus==="partial"&&Math.random()>.5){const S=new Date(b.date);S.setDate(S.getDate()+Qe(1,7));const D=b.paymentStatus==="paid"?b.totalAmount:Qe(b.totalAmount*.3,b.totalAmount*.7),L=St(["cash","bank_transfer","cheque"]);y.push({id:$e(),customerId:b.customerId,customerName:b.customerName,date:S,transactionType:"payment",referenceNumber:L==="bank_transfer"?`TRF${Qe(1e5,999999)}`:L==="cheque"?`CHQ${Qe(1e3,9999)}`:`RCP${Qe(1e3,9999)}`,description:`Payment received via ${L}`,debit:0,credit:D,runningBalance:0,paymentMethod:L,notes:`Payment for ${b.orderId}`,createdAt:S,updatedAt:S})}});for(let b=0;b<10;b++){const S=St(u.slice(0,10)),D=pn(45),C=Qe(1e5,5e5),A=St(["cash","bank_transfer","cheque"]);y.push({id:$e(),customerId:S.id,customerName:S.name,date:D,transactionType:"payment",referenceNumber:A==="bank_transfer"?`TRF${Qe(1e5,999999)}`:A==="cheque"?`CHQ${Qe(1e3,9999)}`:`RCP${Qe(1e3,9999)}`,description:`Advance payment via ${A}`,debit:0,credit:C,runningBalance:0,paymentMethod:A,notes:"Advance payment for future purchases",createdAt:D,updatedAt:D})}for(let b=0;b<5;b++){const S=St(u),D=pn(20),C=Qe(1e4,5e4);y.push({id:$e(),customerId:S.id,customerName:S.name,date:D,transactionType:"credit_note",referenceNumber:`CN-2024-${(b+1).toString().padStart(3,"0")}`,description:"Product return - quality issue",debit:0,credit:C,runningBalance:0,notes:"Customer returned damaged goods",createdAt:D,updatedAt:D})}for(let b=0;b<3;b++){const S=St(u),D=pn(15),C=Qe(5e3,25e3),L=Math.random()>.5;y.push({id:$e(),customerId:S.id,customerName:S.name,date:D,transactionType:"adjustment",description:L?"Late payment fee":"Discount for bulk purchase",debit:L?C:0,credit:L?0:C,runningBalance:0,notes:L?"Applied late payment charges":"Loyalty discount applied",createdAt:D,updatedAt:D})}const x=new Map;y.forEach(b=>{x.has(b.customerId)||x.set(b.customerId,[]),x.get(b.customerId).push(b)});const f=[];x.forEach((b,S)=>{b.sort((L,A)=>new Date(L.date).getTime()-new Date(A.date).getTime());let D=0;b.forEach(L=>{D=D+L.credit-L.debit,L.runningBalance=D,f.push(L)});const C=u.find(L=>L.id===S);C&&(C.balance=D)}),console.log("Test data generator - Ledger entries created:",f.length),console.log("Test data generator - Booked stock created:",p.length);const v=[],w=["LAG-123-AB","KAN-456-CD","ABJ-789-EF","PHC-012-GH","IBD-345-JK","KAD-678-LM"];return p.filter(b=>b.status==="confirmed").slice(0,15).forEach((b,S)=>{const D=new Date(b.bookingDate);D.setDate(D.getDate()+Qe(1,3));const A=d.find(T=>T.id===b.saleId)?.items.find(T=>T.productId===b.productId)?.price||Qe(5e3,2e4),z=Math.min(b.quantity,Qe(b.quantity*.5,b.quantity)),ee={productId:b.productId,productName:b.productName,quantity:z,unit:b.unit,unitPrice:A,bookedStockId:b.id},k={id:$e(),loadingId:`LD-2024-${String(S+1).padStart(3,"0")}`,date:D.toISOString().split("T")[0],customerId:b.customerId,customerName:b.customerName,truckPlateNumber:St(w),wayBillNumber:Math.random()>.5?`WB-2024-${String(S+1).padStart(3,"0")}`:void 0,items:[ee],totalValue:z*A,createdAt:D.toISOString(),updatedAt:D.toISOString()};v.push(k),b.quantityLoaded=z,b.status=z>=b.quantity?"fully-loaded":"partial-loaded";const J=o.find(T=>T.id===b.productId);J&&(J.quantityOnHand-=z,J.quantityBooked-=z,J.availableQuantity=J.quantityOnHand-J.quantityBooked),h.push({id:$e(),productId:b.productId,productName:b.productName,movementType:"loading",quantity:-z,previousQuantity:J?.quantityOnHand||0,newQuantity:(J?.quantityOnHand||0)-z,reference:`Loading ${k.loadingId}`,referenceId:k.id,notes:`Loading for customer: ${b.customerName}`,date:D,createdAt:D,updatedAt:D})}),console.log("Test data generator - Loadings created:",v.length),{products:o,customers:u,sales:d,movements:h,categories:c,ledgerEntries:f,bookedStock:p,loadings:v}}const bb=()=>{const[i,c]=m.useState(!1),[o,u]=m.useState(!1),[d,h]=m.useState(!1),[y,p]=m.useState(!1),{isAuthenticated:x}=m.useContext(ga),{toasts:f,showSuccess:v,showError:w,showWarning:B,removeToast:b}=En(),S=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",D=async()=>{h(!0);try{x&&(B("Clearing GitHub data..."),await Ot.clearAllData()||w("Failed to clear GitHub data, but will continue with local reset"));const A=[];for(let z=0;z<localStorage.length;z++){const ee=localStorage.key(z);ee&&(ee.startsWith("supreme_mgmt_")||ee.startsWith("suprememanagement_"))&&A.push(ee)}A.forEach(z=>localStorage.removeItem(z)),Ge.resetPendingChanges(),v("All data has been reset successfully")}catch(A){console.error("Error resetting data:",A),w("Failed to reset data")}finally{h(!1),c(!1)}},C=async()=>{p(!0);try{const A=jb();console.log("Generated test data:",{products:A.products.length,customers:A.customers.length,sales:A.sales.length,ledgerEntries:A.ledgerEntries.length,bookedStock:A.bookedStock.length,loadings:A.loadings?.length||0}),localStorage.setItem("supreme_mgmt_products",JSON.stringify(A.products)),localStorage.setItem("supreme_mgmt_customers",JSON.stringify(A.customers)),localStorage.setItem("supreme_mgmt_sales",JSON.stringify(A.sales)),localStorage.setItem("supreme_mgmt_inventory_movements",JSON.stringify(A.movements)),localStorage.setItem("supreme_mgmt_product_categories",JSON.stringify(A.categories)),localStorage.setItem("supreme_mgmt_ledger_entries",JSON.stringify(A.ledgerEntries)),localStorage.setItem("suprememanagement_bookedStock",JSON.stringify(A.bookedStock)),localStorage.setItem("supreme_mgmt_loadings",JSON.stringify(A.loadings||[]));const z=localStorage.getItem("supreme_mgmt_ledger_entries");console.log("Saved ledger entries to localStorage:",z?JSON.parse(z).length:0),x&&Ge.markAsChanged(),v(`Generated test data: ${A.products.length} products, ${A.customers.length} customers, ${A.sales.length} sales, ${A.ledgerEntries.length} ledger entries, ${A.bookedStock.length} bookings, ${A.loadings?.length||0} loadings`),p(!1)}catch(A){console.error("Error generating test data:",A),w("Failed to generate test data"),p(!1)}u(!1)},L=()=>{try{const A={};for(let T=0;T<localStorage.length;T++){const q=localStorage.key(T);if(q&&(q.startsWith("supreme_mgmt_")||q.startsWith("suprememanagement_"))){const R=q.replace("supreme_mgmt_","").replace("suprememanagement_",""),_=localStorage.getItem(q);if(_)try{A[R]=JSON.parse(_)}catch{A[R]=_}}}const z=JSON.stringify(A,null,2),ee="data:application/json;charset=utf-8,"+encodeURIComponent(z),k=`supreme_backup_${new Date().toISOString().split("T")[0]}.json`,J=document.createElement("a");J.setAttribute("href",ee),J.setAttribute("download",k),J.click(),v("Data exported successfully")}catch(A){console.error("Error exporting data:",A),w("Failed to export data")}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),a.jsx("p",{className:"text-muted",children:"Manage your application settings and data"})]}),a.jsx(ze,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Gy,{className:"text-blue-400",size:24}),a.jsx("h2",{className:"text-xl font-semibold",children:"Data Management"})]}),a.jsx("div",{className:"p-4 glass rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Mt,{className:"text-green-400 mt-1",size:20}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium mb-1",children:"Backup Data"}),a.jsx("p",{className:"text-sm text-muted mb-3",children:"Export all your data to a JSON file for backup purposes"}),a.jsxs(pe,{variant:"secondary",onClick:L,children:[a.jsx(Mt,{size:16}),"Export All Data"]})]})]})}),a.jsx("div",{className:"p-4 glass rounded-lg border border-red-500/20",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(is,{className:"text-red-400 mt-1",size:20}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium mb-1 text-red-400",children:"Reset All Data"}),a.jsxs("p",{className:"text-sm text-muted mb-3",children:["This will permanently delete all your local data including products, customers, sales, inventory movements, booked stock, and loadings.",x&&" GitHub data will remain unchanged until next sync."]}),a.jsxs(pe,{variant:"danger",onClick:()=>c(!0),disabled:d,loading:d,children:[a.jsx(Rt,{size:16}),"Reset All Data"]})]})]})})]})}),S&&a.jsx(ze,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Qy,{className:"text-purple-400",size:24}),a.jsx("h2",{className:"text-xl font-semibold",children:"Development Tools"}),a.jsx("span",{className:"px-2 py-1 text-xs bg-purple-500/20 text-purple-400 rounded-full",children:"Dev Mode"})]}),a.jsx("div",{className:"p-4 glass rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Rh,{className:"text-yellow-400 mt-1",size:20}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium mb-1",children:"Generate Test Data"}),a.jsx("p",{className:"text-sm text-muted mb-3",children:"Quickly populate your database with sample data for testing. This will create products, customers, sales, complete ledger entries with various transaction types (advance payments, sales, payments, credit notes, adjustments), booked stock, and loadings using realistic Nigerian data."}),a.jsxs(pe,{variant:"primary",onClick:()=>u(!0),disabled:y,loading:y,loadingText:"Generating...",children:[a.jsx(Rh,{size:16}),"Generate Test Data"]})]})]})}),a.jsxs("div",{className:"p-4 glass rounded-lg",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Quick Console Commands"}),a.jsxs("div",{className:"space-y-2 font-mono text-xs",children:[a.jsxs("div",{className:"p-2 bg-black/30 rounded",children:[a.jsx("span",{className:"text-green-400",children:"// Clear all data"}),a.jsx("br",{}),"localStorage.clear();"]}),a.jsxs("div",{className:"p-2 bg-black/30 rounded",children:[a.jsx("span",{className:"text-green-400",children:"// View all stored keys"}),a.jsx("br",{}),"Object.keys(localStorage).filter(k => k.startsWith('supreme_mgmt_'))"]}),a.jsxs("div",{className:"p-2 bg-black/30 rounded",children:[a.jsx("span",{className:"text-green-400",children:"// Force sync"}),a.jsx("br",{}),"globalSyncManager.forceSync()"]})]})]})]})}),a.jsx(ze,{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(wv,{className:"text-blue-400 mt-1",size:20}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-1",children:"Data Security"}),a.jsx("p",{className:"text-sm text-muted",children:"Your data is stored locally in your browser and optionally synced to your private GitHub repository. No data is sent to external servers. Always backup your data before performing reset operations."})]})]})}),a.jsx(Oa,{isOpen:i,onClose:()=>c(!1),onConfirm:D,title:"Reset All Data",message:"Are you absolutely sure you want to delete all your local data? This action cannot be undone. Please make sure you have exported a backup if needed.",confirmText:"Yes, Reset Everything"}),a.jsx(Oa,{isOpen:o,onClose:()=>u(!1),onConfirm:C,title:"Generate Test Data",message:"This will replace your existing data with sample test data. Your current data will be lost unless you've made a backup. Continue?",confirmText:"Generate Test Data"}),a.jsx(Cn,{toasts:f,onClose:b})]})},Nb=({isOpen:i,onSuccess:c})=>{const[o,u]=m.useState(""),[d,h]=m.useState(!1),[y,p]=m.useState(""),x=async f=>{if(f.preventDefault(),!o.trim()){p("Please enter your GitHub token");return}h(!0),p("");try{await Ot.initialize(o),c()}catch(v){p("Invalid token. Please check and try again."),console.error("Authentication error:",v)}finally{h(!1)}};return i?a.jsx("div",{className:"fixed inset-0 bg-gray-950 flex items-center justify-center z-50",children:a.jsx("div",{className:"glass p-8 rounded-xl w-full max-w-md",children:a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"GitHub Token"}),a.jsx("input",{type:"password",value:o,onChange:f=>u(f.target.value),className:"w-full px-4 py-3 glass rounded-lg focus:outline-none focus:ring-2 focus:ring-white/20 text-white placeholder-gray-400",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",disabled:d,autoFocus:!0}),y&&a.jsx("p",{className:"mt-2 text-sm text-red-400",children:y})]}),a.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium disabled:opacity-50",disabled:d,children:d?"Authenticating...":"Connect to GitHub"})]})})}):null},ga=Op.createContext({isAuthenticated:!1,isLoading:!0,syncStatus:"idle",lastSync:null,syncData:async()=>{},logout:()=>{}});function Sb(){const[i,c]=m.useState(!1),[o,u]=m.useState(!1),[d,h]=m.useState(!0),[y,p]=m.useState("idle"),[x,f]=m.useState(null),[v,w]=m.useState(0),[B,b]=m.useState(null),[S,D]=m.useState(!1),C=m.useRef(!0);m.useEffect(()=>{C.current=!0;const T=Ge.subscribe(q=>{C.current&&(w(q.pendingChanges),b(q.error),D(q.isInProgress),q.isInProgress?p("syncing"):q.error?p("error"):q.lastSync&&Date.now()-q.lastSync.getTime()<3e3&&(p("success"),setTimeout(()=>{C.current&&p("idle")},3e3)),q.lastSync&&f(q.lastSync.toISOString()))});return()=>{C.current=!1,T()}},[]),m.useEffect(()=>(L(),()=>{Ge.destroy()}),[]);const L=async()=>{if(C.current){h(!0);try{const T=await Ot.checkAuthentication();C.current&&(u(T),Ge.initialize(T),T?(h(!1),A().catch(console.error)):(c(!0),h(!1)))}catch(T){console.error("Auth check failed:",T),C.current&&(c(!0),h(!1))}}},A=async()=>{if(C.current)try{p("syncing");const T=await Ot.loadAllData();T.products&&localStorage.setItem("products",JSON.stringify(T.products)),T.categories&&localStorage.setItem("product_categories",JSON.stringify(T.categories)),T.movements&&localStorage.setItem("inventory_movements",JSON.stringify(T.movements)),T.productionEntries&&localStorage.setItem("production_entries",JSON.stringify(T.productionEntries)),C.current&&(f(new Date().toISOString()),p("success"),setTimeout(()=>{C.current&&p("idle")},3e3))}catch(T){console.error("Failed to load data from GitHub:",T),C.current&&(p("error"),b(T instanceof Error?T.message:"Failed to load data"),setTimeout(()=>{C.current&&p("idle")},5e3))}},z=async()=>{if(!o||!C.current){C.current&&c(!0);return}!await Ge.forceSync()&&C.current&&(p("error"),setTimeout(()=>{C.current&&p("idle")},5e3))},ee=async()=>{C.current&&(u(!0),Ge.initialize(!0),c(!1),await A())},J={isAuthenticated:o,isLoading:d,syncStatus:y,lastSync:x,pendingChanges:v,syncError:B,syncInProgress:S,syncData:z,logout:()=>{Ot.clearAuthentication(),Ge.destroy(),C.current&&(u(!1),f(null),p("idle"),b(null),w(0),c(!0))}};return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing..."})]})}):a.jsx(ga.Provider,{value:J,children:a.jsxs(sy,{children:[a.jsx(O0,{children:a.jsxs(zt,{path:"/",element:a.jsx(Jv,{}),children:[a.jsx(zt,{index:!0,element:a.jsx(Fv,{})}),a.jsx(zt,{path:"inventory",element:a.jsx(wj,{})}),a.jsx(zt,{path:"customers",element:a.jsx(Lj,{})}),a.jsx(zt,{path:"customers/sales",element:a.jsx(Pj,{})}),a.jsx(zt,{path:"customers/loadings",element:a.jsx(ab,{})}),a.jsx(zt,{path:"customers/ledger",element:a.jsx($h,{})}),a.jsx(zt,{path:"customers/ledger/:customerId",element:a.jsx($h,{})}),a.jsx(zt,{path:"suppliers",element:a.jsx(rb,{})}),a.jsx(zt,{path:"suppliers/paddy-trucks",element:a.jsx(cb,{})}),a.jsx(zt,{path:"suppliers/ledger",element:a.jsx(ob,{})}),a.jsx(zt,{path:"reports",element:a.jsx(mb,{})}),a.jsx(zt,{path:"settings",element:a.jsx(bb,{})})]})}),a.jsx(Nb,{isOpen:i,onSuccess:ee,onClose:()=>c(!1)})]})})}Up.createRoot(document.getElementById("root")).render(a.jsx(m.StrictMode,{children:a.jsx(Sb,{})}));
